<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>Isit320-Week07-2014</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>Isit320-Week07-2014</h1><p>Welcome to Isit320-Week07-2014</p><ul><!--TOC_Start--><li><a href="#week-07">Week 07</a></li>
<li><a href="#in-class">In Class</a></li>
<li><a href="#grunt">Grunt</a></li>
<li><a href="#unit-test-examples">Unit Test Examples</a></li>
<li><a href="#json-from-server">JSON from Server</a></li>
<li><a href="#characters">Characters</a></li>
<li><a href="#online">Online</a></li>
<li><a href="#assignment-03">Assignment 03</a></li>
<li><a href="#assignment-midterm">Assignment Midterm</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="week-07"></a>
<h1>Week 07</h1>
<a class="anchor" id="in-class"></a>
<h2>In Class</h2>
<ul>
<li><a href="http://bit.ly/172VnGB">The Deck</a></li>
</ul>
<a class="anchor" id="grunt"></a>
<h3>Grunt</h3>
<ul>
<li><a href="http://elvenware.com/charlie/development/web/UnitTests/Grunt.html">Grunt on Elvenware</a></li>
</ul>
<a class="anchor" id="unit-test-examples"></a>
<h3>Unit Test Examples</h3>
<p>You might also be interested in the tests for Crafty03. </p>
<ul>
<li><a href="/charlie/development/web/JavaScript/Angular.html#basicMock">Mock Example</a></li>
</ul>
<a class="anchor" id="json-from-server"></a>
<h3>JSON from Server</h3>
<p>Retrieve JSON from a server:</p>
<ul>
<li><p><a href="/charlie/development/web/JavaScript/Angular.html#jsonFromServer">JSON Example</a></p>
</li>
<li><p><a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/Design/JsonFromServer">Example</a></p>
</li>
<li><a href="https://github.com/charliecalvert/JsObjects/blob/master/JavaScript/Design/JsonFromServer/index.js">Key File</a></li>
</ul>
<a class="anchor" id="characters"></a>
<h3>Characters</h3>
<ul>
<li>Hitpoints: How much damage can a character take before losing consciousness</li>
<li>Damage: How much damage does a character wield</li>
</ul>
<a class="anchor" id="online"></a>
<h2>Online</h2>
<a class="anchor" id="assignment-03"></a>
<h3>Assignment 03</h3>
<p>Use this function to extend the range of the string class:</p>
<pre><code><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">String</span>.prototype.endsWith !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-built_in">String</span>.prototype.endsWith = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">suffix</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.indexOf(suffix, <span class="hljs-keyword">this</span>.length - suffix.length) !== <span class="hljs-number">-1</span>;
    };
}
</code></pre><a class="anchor" id="assignment-midterm"></a>
<h3>Assignment Midterm</h3>
<p>This is an extension of the Crafty Game that includes support for 
encounters that have a real competition between the main character
and the village where either one or the other can win.</p>
<p>Your assignment must:</p>
<ul>
<li>Get some data from MongoDb</li>
<li>Some data from JSON file</li>
<li>You should have at least some of your own graphics in the Crafty game</li>
<li>And the encounter should allow:<ul>
<li>The hero character to be defeated </li>
<li>The village to be defeated </li>
<li>Grunt support for jshint</li>
</ul>
</li>
</ul>
<p>For instance get the Tower information now found in Characters.js 
from Mongo, and the Hero information from a JSON file.</p>
<p>As a reference, Go to:</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/Data/MongoLab01">Mongo Example 01</a></li>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/Data/MongoLab02">Mongo Example 02</a></li>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/Design/JsonFromServer">JSON Example</a></li>
</ul>
<p>I&#39;ve ran some Mongo Database code against the most recent angular
code and started getting an error like this:</p>
<pre><code><span class="hljs-keyword">Error: </span>Referencing private fields in Angular expressions is disallowed! Expression: _id.$oid
</code></pre><p>Incredibly, this was a code change that they decided to role back. I 
think too many people complained. So this is no longer an issue if 
you have the most recent builds of Angular. But if you want to fix 
you code so it handles this restriction, then do this: This is a 
reference to this line from index.js (MongoLab01) and MongoData.js 
(MongoLab02):</p>
<pre><code><span class="hljs-selector-tag">id</span><span class="hljs-selector-pseudo">:'</span>@<span class="hljs-keyword">_id</span>.$<span class="hljs-keyword">oid</span>'
</code></pre><p>For now, to fix the problem, just comment out or delete the line:</p>
<pre><code><span class="hljs-attribute">var Presidents</span> = $resource(<span class="hljs-string">'https://api.mongolab.com/api/1/databases/elvenlab01/collections/Presidents/:id'</span>, {
    apiKey:<span class="hljs-string">'qfSxFoUGHBA1EuUlqhux_op2fy6oF_wy'</span>,     
});
</code></pre><p>And here it is commented out:</p>
<pre><code>var Presidents = <span class="hljs-variable">$resource</span>(<span class="hljs-string">'https://api.mongolab.com/api/1/databases/elvenlab01/collections/Foo/:id'</span>, {      
    apiKey:<span class="hljs-string">'qfSxFoUGHBA1EuUlqhux_op2fy6oF_wy'</span>,
    <span class="hljs-regexp">//</span> id:<span class="hljs-string">'@_id.$oid'</span>
});
</code></pre><p>I&#39;ve updated both samples to fix the problem, and now include the
latest Angular code with them.</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/Data/MongoLab01">MongoLab01</a></li>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/Data/MongoLab02">MongoLab02</a></li>
</ul>
<p>I&#39;ve updated <a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/Games/CharacterCreate01">JsObjects/JavaScript/Games/CharacterCreate01</a>. It now contains
a button, and when you click it, there is a mock encounter between 
a Hero and a Tower. The point of the demo is to show how you can 
create similar simulations outside the context of the game. </p>
</div></body></html>