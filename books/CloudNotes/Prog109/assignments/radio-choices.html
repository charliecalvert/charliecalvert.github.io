<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Radio Choices</title>
    <link rel="stylesheet" href="../styles/styles.css">
</head>

<body>

    <header>
        <h1>Radio Choices</h1>
        <p><i>by Charlie Calvert</i></p>
    </header>

    <nav></nav>

    <main>

        <section>
            <h2>Get Started</h2>

            <p>As we have done in the past, I want you to begin by creating two files in your <b>javascript-test</b>
                directory</p>

            <ul>
                <li>radio-choices.html</li>
                <li>radio-choices.js</li>
            </ul>

            <p>The next steps should also be familiar:</p>

            <ul>
                <li>Use a <b>script</b> tag to link the HTML and JavaScript files</li>
                <li>Use a <b>link</b> tag to link in your favorite CSS file. Add a separate file for styling your buttons if you set things up that way.</li>
                <li>Use an <b>anchor</b> tag to link the <b>radio-choices.html</b> file to the home page found in the root of your repository.</li>
            </ul>

            <p>And finally, flesh out the structure of your HTML file with these tags and directives:</p>

            <ul>
                <li>doctype (not really a tag, but a directive)</li>
                <li>html</li>
                <li>head</li>
                <li>body</li>
                <li>header
                    <ul>
                        <li>H1 tag with title</li>
                    </ul>
                </li>            
                <li>main</li>
                <li>footer
                    <ul>
                        <li>Copyright notice</li>
                        <li>Link back to home page.</li>
                    </ul>
                </li>
                <li>closing tags (body, html)</li>
            </ul>

            <p>Here is a suggested look and feel for the small page that we are going to build. I show it to you so you can get a sense of where we are headed.</p>

            <img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/radio-choice-ui.png" alt="Radio Choice UI" class="image-normal">

            <p>Inside your <b>main</b> element create two <b>section</b> elements. In the first, put this code: </p>

            <pre class="code scroll"><code>
&lt;fieldset&gt; 
    &lt;legend&gt;The User Selection&lt;/legend&gt; 
    &lt;p&gt;&lt;b&gt;User choice&lt;/b&gt;: &lt;span id=&quot;user-choice&quot;&gt;Unknown&lt;/span&gt;&lt;/p&gt; 
&lt;/fieldset&gt;
            </code></pre>

            <p>Inside the next <b>section</b> element, put this code:</p>

            <pre class="code"><code>
    &lt;fieldset&gt;
        &lt;legend&gt;Our Form&lt;/legend&gt;
        &lt;!-- OUR FORM GOES HERE --&gt;
    &lt;/fieldset&gt;
            </code></pre>
        </section>
        <section>

        <p>The <b>section</b> tag that wraps your <b>form</b> fieldset should have an ID of <b>form-section</b>. This ID is used in the <b>set-color</b> function shown later in this document. Be sure to include this ID or your code won't work. (Just to be clear, I'm asking you to add the <b>section</b> elements that wrap the above code. This is a simple task, but I want you to do it.)</p>            


            <h2>Create Form</h2>

            <p>Previously, we have responded to simple button clicks with <b>onclick</b> events. This time we will look
                at an alternative way to respond to button clicks. In this model, we will create an HTML element called
                a form, and place a submit button in the form. This is a common model in web development, especially
                when one wants to send data back to a server. We will not use a server, but we will learn at least the
                client side of one way to handle the client/server model in web apps.</p>

        <h2>Basics</h2>
        
            <p>Create a form with two radio buttons and a submit button.</p>
            <pre class="code scroll"><code>
&lt;form id="sort-type" action="goThere"&gt;
    &lt;input type="radio" id="blue" name="sorter" value="Blue" checked&gt;
    &lt;label for="blue"&gt;Blue&lt;/label&gt;

    &lt;input type="radio" id="green" name="sorter" value="Green"&gt;
    &lt;label for="green"&gt;Green&lt;/label&gt;
    &lt;div&gt;
    &lt;input class="btn-padding" type="submit" value="Submit"&gt;
    &lt;/div&gt;
&lt;/form&gt;
    </code></pre>

            <p>
                Here we create a form with an ID of <b>sort-type</b>. Inside it we place two radio buttons. Note that
                both radio buttons have the same type and the same name. The <b>name</b> attribute is used to bind the
                two radio buttons together so that they act as a single unit. If you select one, then the second is
                deselected. This way only one radio button can be chosen at a time. We also use the ID of the radio button to link it to the label. That way, clicks on the label are the same as clicks on the radio button itself.
            </p>

            <p>We have only two radio buttons, but you can add as many to this group as you want. If you want to create
                a second set of radio buttons, then simply give the second set a different <b>name</b> and they too
                will act together as a unit without affecting the first group. (Just to be clear, I'm not asking you create a second set of radio buttons in this exercise.)</p>

            <p>Note that we add an empty attribute called <b>checked</b> to one radio button. This is our way of
                telling the HTML file that we want this button to be selected by default. It is always a good idea to
                have one default option selected on your radio buttons. Otherwise, when events are fired, no particular
                option will be selected, and your code might produce random and non-sensical results.</p>

            <p><b>NOTE</b>: <i>Think of it this way. Suppose we said "When the bell rings, go out the back door if the
                    light is red and the front door if the light is green." Then we ring the bell without turning on
                    either the red or green light. The result is likely to be chaos. The same thing can happen in an
                    application if you don't set default values for your radio buttons.</i></p>

            <p>Finally, notice that we have a <b>submit</b> button beneath the radio buttons. Somewhat confusingly, we
                use the <b>input</b> control to create this button. Confusing or not, it is an old, established
                tradition in web development and one that you need to understand if you want to do any real work in the
                web development world.</p>

            <p>When the user clicks on the <b>submit</b> button an event is fired, just as <b>onclick</b> are fired by
                the buttons we have created in previous projects. Our goal will be to respond to these events, and act
                appropriately when they fire.</p>

        </section>

        <section>
            <h2>Responding to Form Submit Events</h2>


            <p>When we click on a button or select a radio button, we generate events. A message is sent out to
                announce the event. We can write JavaScript code that listens for these events, and takes specific
                actions when they occur. We have done this several times already by responding to <b>onclick</b>
                events.</p>

            <p>In this app we will respond to <b>submit</b> button clicks. Radio buttons also send out events, but we
                will not respond to them. At least not at first. Instead, when a <b>submit</b> button is clicked, we
                will use a JavaScript method to query the radio buttons as to their current state.</p>

            <p>Here is the code for responding to events generated by the <b>submit</b> button for our simple form.</p>

            <pre class="code scroll"><code>
const myForm = document.getElementById('sort-type');

myForm.addEventListener('submit', (event) => {
    event.preventDefault();
    const value = document.querySelector('input[name="sorter"]:checked').value;
    if (value.toLowerCase() === 'green') {
        setColor("blueBackground");
        showChoice(value);
    } else {
        setColor("greenBackground");
        showChoice(value);
    }
});

let currentClass = null;

const setColor = (className) => {
    console.log("SET CLASS TO", className);
    var element = document.getElementById("form-section");
    if (currentClass) {
        element.classList.remove(currentClass);        
    }
    currentClass = className;
    element.classList.add(className);
}</code></pre>

            <p>To make this work, we also need to add two CSS rules:</p>

            <pre class="code scroll"><code>
.blueBackground {
    background-color: aqua;
}

.greenBackground {
    background-color: green;
}                
            </code></pre>
            <p>Here is a break down of the code:</p>

            <ul>
                <li>We use <b>getElementById</b> to select our <b>form</b> from among the other controls on the page.</li>
                <li>Once we have a handle to the form, we use the <b>addEventListener</b> API to do more or less the
                    same thing that an <b>onclick</b> property does: we are creating a method that will be called when
                    the <b>submit</b> button on the form is clicked.</li>
                <li>Normally, events in a <b>form</b> a sent back to a server. We don't have servers in this class, so
                    we call <b>preventDefault</b> to tell JavaScript not to send the data back to a server. We are, in
                    effect, asking the browser not to perform the standard action when a user clicks on a button in a
                    form.</li>
            </ul>

            <p>All that is good and well. The trickiest part comes next. We want to find out which radio button was
                selected when the user clicked the select button. We do this by creating a very fancy selector.</p>

            <p>Pause for a moment, and look at the <b>getElementById</b> call. We pass <b>sort-type</b> as a parameter
                to that method. The ID <b>sort-type</b> is called a selector. When we call <b>querySelector</b>, we are
                doing the same thing, only our selector is much fancier.</p>

            <p>The selector for our calls to <b>getElementById</b> has one part: the ID of the control we want to
                access. This selector has three parts: </p>

            <ul>
                <li>input: this tells the system that we are looking for an input control</li>
                <li><b>name="sorter"</b>: Find the group of radio buttons tied together by the name <b>sorter</b>.
                    Recall that all of our radio buttons have a <b>name</b> attribute set to the word <b>sorter</b>.
                </li>
                <li><b>checked</b>: Tell browser engine that we are looking for the selected radio button.</li>
            </ul>
            <p>Put it all together and you get our selector:</p>

            <pre class="code"><code>
input[name="sorter"]:checked
    </code></pre>

            <p>If you look back at our code, you will see that we then ask for the <b>value</b> of our selected radio
                button. This value uniquely identifies the radio button that was selected and gives us enough
                information to act on the user's choice. If necessary, go back to the original declaration for our
                radio buttons on the HTML form, and not that we gave them unique, and descriptive <b>value</b>
                attributes.</p>

            <p>Admittedly, this process is a bit complex, perhaps too complex for this course. Nevertheless, it is an
                excellent example of the way developers use simple logic to perform powerful actions. If you continue
                to pursue your interest in programming, you will find tasks like this become simpler over time because
                you perform similar actions so frequently. It is a bit like learning to ride a bike: at first it is
                hard, then later you may find it difficult to understand how anyone does not know how to such things.</p>
        </section>

        <section>
            <p>There is, of course, one final section in the code block we have been studying.</p>

            <pre class="code"><code>
if (value.toLowerCase() === 'green') {
    setColor("blueBackground");
    showChoice(value);
} else {
    setColor("greenBackground");
    showChoice(value);
}
        </code></pre>

            <p>
                In this code, we make a decision based on which of the two radio buttons the user chose. In our
                program, we then simply display our output in the <b>span</b> of the paragraph element with the ID <b>user-choice</b>. I put this method outside the <b>window.onload</b> block. I'll leave it up to you to implement it since we have already many times made calls to <b>getElementById</b> and then use the <b>textContent</b> property.
            </p>

            <img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/radio-choice-chrome.png" alt="Radio choices in chrome" class="image-normal">

            <img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/radio-choice-firefox.png" alt="Radio choices in Firefox" class="image-normal">

        </section>

        <section>
            <h2>Turn it in</h2>

            <p>Your final application should have five radio buttons:</p>

            <ul>
                <li>Blue</li>
                <li>Green</li>
                <li>Status</li>
                <li>Category</li>
                <li>Downloads</li>
            </ul>

            <p>When the user clicks the button, display the <b>value</b> of the selected radio button in our span. This exercise has two primary goals:</p>
            
            <ol>
                <li>To ensure you understand how to create radio buttons</li>
                <li>To ensure that you can compose a relative complex <b>if..else</b> clause.</li>
            </ol>

            <p>When you are done, commit and push your work. Tell me the name of the files you created when you submit your work and provide a link to your code running on GitHub Pages. The link should be to your home page, and your home page should link to implementation of this exercise.</p>
        </section>
    </main>
    <footer>
        <p>&copy; 2018 Charlie Calvert</p>

        <nav>
            <ul>
                <li><a href="about.html">About</a></li>
                <li><a href="../index.html">Home</a></li>
            </ul>
        </nav>
    </footer>
</body>

</html>
