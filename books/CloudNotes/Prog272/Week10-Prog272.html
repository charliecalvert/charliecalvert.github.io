<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>Week10-Prog272</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><script src="/libs/scripts/Control.js"></script><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/charlie/development/index.html">Strongly Typed</a></li><li><a href="/charlie/development/web/index.html">Web & Scripts</a></li><li><a href="/charlie/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/charlie/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>Week10-Prog272</h1><p>Index of Week10-Prog272:</p><ul><!--TOC_Start--><li><a href="#routing-links">Routing Links</a></li>
<li><a href="#slides">Slides</a></li>
<li><a href="#elvenware">Elvenware</a></li>
<li><a href="#create">Step01: Create an Express Project</a></li>
<li><a href="#bower">Step02: Bower  and jQuery</a></li>
<li><a href="#custom-js">Step03: Create a Custom JavaScript file</a></li>
<li><a href="#link">Step04: Link in your Custom File</a></li>
<li><a href="#display-controls">Step05: Setup Display Controls</a></li>
<li><a href="#exercise-callbacks">Step06: Create and Exercise Callbacks</a></li>
<li><a href="#show-debug">Step Seven: Debugger</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#hint">Hint</a></li>
<li><a href="#step-one-find-route-parameters">Step One: Find Route Parameters</a></li>
<li><a href="#step-two-run-route-parameters-on-aws">Step Two: Run Route Parameters on AWS</a></li>
<li><a href="#step-three-copy-and-link">Step Three: Copy and Link</a></li>
<li><a href="#step-four-set-port">Step Four: Set Port</a></li>
<li><a href="#step-five-start-upstart">Step Five: Start Upstart</a></li>
<li><a href="#step-six-edit-elastic-ip">Step Six: Edit Elastic IP</a></li>
<li><a href="#step-seven-install">Step Seven: Install</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#domain-names">Domain Names</a></li>
<li><a href="#pricing">Pricing</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#domain-names-on-ec2">Domain Names on EC2</a></li>
<li><a href="#domain-names-on-github-io">Domain Names on GitHub IO</a></li>
<li><a href="#domain-ec2">Domain Names on EC2</a></li>
<li><a href="#domain-github">Domain Names on GitHub IO</a></li><!--TOC_End--></ul><h1>Week 10 Overview</h1><p>Core topics:</p>
<ul>
<li>Express Routing</li>
<li>AWS</li>
<li>Domain Names</li>
</ul>
<h1 id="routing-links">Routing Links</h1>
<h2 id="slides">Slides</h2>
<ul>
<li><a href="http://bit.ly/noderoutes">http://bit.ly/noderoutes</a></li>
<li><a href="http://bit.ly/unittestasync">http://bit.ly/unittestasync</a></li>
<li><a href="http://bit.ly/ajaxjq">http://bit.ly/ajaxjq</a></li>
</ul>
<h2 id="elvenware">Elvenware</h2>
<ul>
<li><a href="http://www.elvenware.com/charlie/development/web/JavaScript/NodeJs.html">Node on Elvenware</a></li>
</ul>
<hr class="style-eight"><p>#Callbacks</p>
<p>Learn about JavaScripts callbacks. We will cover this in class on Thursday, so you can wait until then to do it, if you wish.</p>
<ul>
<li><a href="http://bit.ly/elf-callbacks">Callbacks Deck</a></li>
<li><a href="http://www.elvenware.com/charlie/development/web/JavaScript/JavaScriptFunctions.html#callbacks-passing-functions-as-parameters">Callbacks on Elvenware</a></li>
</ul>
<h2 id="create">Step01: Create an Express Project</h2>
<p>Create an Express project called <strong>Week02-Callbacks</strong>.</p>
<pre><code>    express Week02-Callbacks
    <span class="hljs-built_in">cd</span> Week02-Callbacks
    npm install
</code></pre><h2 id="bower">Step02: Bower  and jQuery</h2>
<p>Either Create or Copy a <strong>bower.json</strong> file. Here is how to copy it:</p>
<pre><code>    cp $ELF_TEMPLATES/bower.json .
</code></pre><p>Alternatively, here is how to create it using an interactive utility:</p>
<pre><code>    <span class="hljs-keyword">bower </span>init
</code></pre><p>And then copy in our <strong>.bowerrc</strong> file so the components are installed in the <strong>public</strong> directory:</p>
<pre><code>cp $ELF_TEMPLATES/.bowerrc .
</code></pre><p>Now install jQuery:</p>
<pre><code><span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span><span class="hljs-keyword">jquery </span>--save
</code></pre><h2 id="custom-js">Step03: Create a Custom JavaScript file</h2>
<p>Open your project in WebStorm or your IDE/editor of choice.</p>
<ul>
<li>Edit <strong>bin/www</strong> and set the port to <strong>30025</strong></li>
<li>Edit <strong>package.json</strong> to your project uses <strong>nodemon</strong> instead of <strong>node</strong> to start your project </li>
</ul>
<p>Choose <strong>File | New | JavaScript File</strong>. Add a JavaScript file called <strong>callbacks.js</strong> and place it in the <strong>public/javascripts</strong>. </p>
<h2 id="link">Step04: Link in your Custom File</h2>
<p>In <strong>views/layout.jade</strong>, use a script statement to link jQuery and your custom file into your project.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">'components/jquery/dist/jquery.min.js'</span>)</span></span>
<span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">'javascripts/callbacks.js'</span>)</span></span>
</code></pre><p>From the command line, run the project, load it into Chrome, open the Developer Tools with F12, confirm that both <strong>jquery</strong> and <strong>callbacks.js</strong> are loading properly.</p>
<h2 id="display-controls">Step05: Setup Display Controls</h2>
<p>Edit <strong>views/index.jade</strong> to that it contains an empty list object.</p>
<pre><code>    ul<span class="hljs-meta">#myList</span>
</code></pre><p>This jade code produces the following HTML:</p>
<pre><code>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myList"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre><p>In <strong>Callbacks.js</strong> create a simple function that uses jquery to display information to the user:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showMessage</span>(<span class="hljs-params">message</span>) </span>{
    $(<span class="hljs-string">"#myList"</span>).append(<span class="hljs-string">"&lt;li&gt;"</span> + message + <span class="hljs-string">"&lt;/li&gt;"</span>);
}
</code></pre><p>The above code appends a list item to our HTML list.</p>
<ul>
<li><a href="http://api.jquery.com/append/">jquery Append</a></li>
<li><a href="http://stackoverflow.com/questions/1145208/jquery-how-to-add-li-in-an-existing-ul">Append on StackOverflow</a> </li>
<li><a href="https://www.google.com/search?q=jquery+list+append">Append on Google search</a></li>
</ul>
<p>Prove that it works by appending this code to the bottom of your custom JavaScript file:</p>
<pre><code>$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{    
    showMessage(<span class="hljs-string">"We can display messages."</span>);
});
</code></pre><p>The <strong>jquery</strong> function called <a href="https://learn.jquery.com/using-jquery-core/document-ready/">document ready</a> will be called when your HTML page has loaded. It is similar to the built in JavaScript function called <strong>window.onload</strong>, but it can be called multiple times.</p>
<p>In Chrome/Chromium, press F5 to refresh the page. You should see our message displayed on the main page of your web app.</p>
<p>Alternatively, you can use a captioned <strong>showMessage</strong> function:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showCaptionMessage</span>(<span class="hljs-params">caption, message</span>) </span>{
    $(<span class="hljs-string">"#myList"</span>).append(<span class="hljs-string">"&lt;li&gt;&lt;strong&gt;"</span> + caption + <span class="hljs-string">"&lt;/strong&gt;: "</span> + message + <span class="hljs-string">"&lt;/li&gt;"</span>);
}
</code></pre>
<p>Use it like this:</p>
<pre><code class="lang-javascript">showCaptionMessage(<span class="hljs-string">"Caption"</span>, <span class="hljs-string">"We can display messages with captions"</span>)<span class="hljs-comment">;</span>
</code></pre>
<h2 id="exercise-callbacks">Step06: Create and Exercise Callbacks</h2>
<p>create a function named <strong>callbackHandler</strong> that takes three parameters. The first parameter is a callback (that is, a function), the other two parameters are integers.</p>
<p>Now call the <strong>callbackHandler</strong> function three times:</p>
<ol>
<li>First pass a function that adds the second and third parameters. (plus operator)</li>
<li>Pass in a function that subtracts the second and third parameters. (minus operator)</li>
<li>Pass in a function that returns the remainder from dividing two numbers (modulus operator)</li>
</ol>
<p>JavaScript doesn&#39;t care whether you pass in or use a parameter. To see this in action:</p>
<ul>
<li>Pass in a function called <strong>getNine</strong> that returns the number 9 and displays it in the list.</li>
<li>Pass in a function called <strong>milesToFeet</strong> that converts the first parameter from miles to feet and display the result in the list.</li>
</ul>
<p>Even though the above code works, create two more callbackHandlers, one for functions that take one parameter and one for functions that take zero parameters. Call them:</p>
<ul>
<li>zeroParamCallbackHandler</li>
<li>oneParamCallbackHandler</li>
</ul>
<p>Pass in <strong>getNine</strong> to <strong>zeroParamCallbackHandler</strong> and <strong>milesToFeet</strong> to <strong>oneParamCallbackHandler</strong> </p>
<p>To get you started, I&#39;ll show how to complete the first step shown above.</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callbackHandler</span>(<span class="hljs-params">func, a, b</span>) </span>{
    <span class="hljs-keyword">return</span> func(a, b);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a + b;
}

$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{    
    showMessage(<span class="hljs-string">"We can display messages."</span>);
    <span class="hljs-keyword">var</span> addResult = callbackHandler(add, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
    showMessage(addResult);
});
</code></pre><p>Note that the result of the call to the <strong>callbackHandler</strong> is displayed to the user by our jQuery based <strong>showMessage</strong> function.</p>
<h2 id="show-debug">Step Seven: Debugger</h2>
<p>Step through the code in the Chrome debugger.</p>
<ul>
<li>In Chrome, make sure the developer tools are open. (Press F12)</li>
<li>Turn to the <strong>Sources</strong> page.</li>
<li>Select the <strong>callbacks.js</strong> file from the <strong>javascripts folder</strong></li>
<li>Put a breakpoint on the sole line in the <strong>callBackHandler</strong> function. To create the breakpoint, click in the gutter to the left of the line. </li>
<li>Run your code to the breakpoint as it appears when the <strong>add</strong> function is passed in. To simplify this process, pass in add first, as in the example above. Then the first time the breakpoint is hit the the parameter called <strong>func</strong> with hold the <strong>add</strong> function.</li>
<li>Take a screenshot. It should show the values of a and b, which should be set to 2 and 3.</li>
<li>Attach the screen shot to your assignment when you turn it in.</li>
</ul>
<h2 id="turn-it-in">Turn it in</h2>
<p>Be sure you have placed your work in your git folder under the name <strong>Week02-Callbacks</strong>. Submit the URL of your repository, or optionally provide a link to your folder inside your Git project.</p>
<p>Don&#39;t forget to attach your screenshot to your assignment.</p>
<p><strong>NOTE</strong>: <em>When naming your folder, small things like casing and dashes rather than underscores matter. Remember, I&#39;m grading multiple assignments, and I want to automate the process as best I can. This means I need to know the exact name of your folder, which I specify above.</em></p>
<h2 id="hint">Hint</h2>
<p>Here is a script to set up a project of this type from scratch:</p>
<pre><code>express Week02-Callbacks
cd Week02-Callbacks
npm install
cp <span class="hljs-variable">$ELF_TEMPLATES</span>/bower<span class="hljs-selector-class">.json</span> .
cp <span class="hljs-variable">$ELF_TEMPLATES</span>/<span class="hljs-selector-class">.bowerrc</span> .
bower install bootstrap --save
sed -<span class="hljs-selector-tag">i</span> -- <span class="hljs-string">'s/3000/30025/g'</span> bin/www
sed -<span class="hljs-selector-tag">i</span> -- <span class="hljs-string">'s/node\s/nodemon /g'</span> package.json
</code></pre><p>Here is a more complete script that allows you to pass in the name of the file you want to create:</p>
<pre><code><span class="hljs-meta">#!/bin/bash
</span>
express <span class="hljs-variable">$1</span>
<span class="hljs-built_in">cd</span> <span class="hljs-variable">$1</span>
npm install
cp <span class="hljs-variable">$ELF_TEMPLATES</span>/bower.json .
cp <span class="hljs-variable">$ELF_TEMPLATES</span>/.bowerrc .
bower install bootstrap --save
sed -i -- <span class="hljs-string">'s/3000/30025/g'</span> bin/www
sed -i -- <span class="hljs-string">'s/node\s/nodemon /g'</span> package.json
</code></pre><p>This script is maintained in <strong>JsObjects/Utilities/DeveloperUtilities</strong>.</p>
<hr class="style-eight"><p>##Route Parameters</p>
<p>The goal of this assignment is to get the RouteParameters program running on:</p>
<ul>
<li>AWS</li>
<li>A mobile devices</li>
</ul>
<p>This is not a coding assignment. It is just an exercise. You will, however, 
have to demonstrate an understanding of the program we will be running.</p>
<ul>
<li><a href="http://youtu.be/ft_ih30yqIY">Video</a></li>
</ul>
<h2 id="step-one-find-route-parameters">Step One: Find Route Parameters</h2>
<p>The Route Parameters program can be found on JsObjects. Here is the web app version:</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/NodeCode/NodeRoutesParams">Web App</a></li>
</ul>
<p>Here is the Cordova version:</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/Cordova/CordovaNodeRoutes">Cordova App</a></li>
</ul>
<p>It has a fairly simple interface. Here it is as a web app:</p>
<p><img src="https://drive.google.com/uc?id=0B25UTAlOfPRGVG02a25FZENnMk0" alt="RouteParameters on AWS"></p>
<p>And here it is as Cordova application:</p>
<p><img class="small" src="https://drive.google.com/uc?id=0B25UTAlOfPRGc1JqUWh1Tk5fZUE" alt="Isit 322 Final Home Page"></p>
<h2 id="step-two-run-route-parameters-on-aws">Step Two: Run Route Parameters on AWS</h2>
<p>First, make sure you have the most recent copy of JsObjects on your AWS instance:</p>
<pre><code>$ ssh ubuntu@&lt;SOME-ELASTIC-IP&gt;
Welcome to Ubuntu <span class="hljs-number">14.04</span><span class="hljs-number">.2</span> LTS (GNU/Linux <span class="hljs-number">3.13</span><span class="hljs-number">.0</span><span class="hljs-number">-44</span>-generic x86_64)

 * <span class="hljs-string">Documentation:</span>  <span class="hljs-string">https:</span><span class="hljs-comment">//help.ubuntu.com/</span>

  System information <span class="hljs-keyword">as</span> of Thu Mar <span class="hljs-number">19</span> <span class="hljs-number">15</span>:<span class="hljs-number">18</span>:<span class="hljs-number">36</span> UTC <span class="hljs-number">2015</span>

  System <span class="hljs-string">load:</span>  <span class="hljs-number">0.0</span>               <span class="hljs-string">Processes:</span>           <span class="hljs-number">99</span>
  Usage of /:   <span class="hljs-number">19.5</span>% of <span class="hljs-number">7.74</span>GB   Users logged <span class="hljs-string">in:</span>     <span class="hljs-number">0</span>
  Memory <span class="hljs-string">usage:</span> <span class="hljs-number">10</span>%               IP address <span class="hljs-keyword">for</span> <span class="hljs-string">eth0:</span> <span class="hljs-number">172.31</span><span class="hljs-number">.33</span><span class="hljs-number">.228</span>
  Swap <span class="hljs-string">usage:</span>   <span class="hljs-number">0</span>%

  Graph <span class="hljs-keyword">this</span> data and manage <span class="hljs-keyword">this</span> system <span class="hljs-string">at:</span>
<span class="hljs-symbol">    https:</span><span class="hljs-comment">//landscape.canonical.com/</span>

  Get cloud support with Ubuntu Advantage Cloud <span class="hljs-string">Guest:</span>
<span class="hljs-symbol">    http:</span><span class="hljs-comment">//www.ubuntu.com/business/services/cloud</span>

<span class="hljs-number">10</span> packages can be updated.
<span class="hljs-number">9</span> updates are security updates.


Last <span class="hljs-string">login:</span> Thu Mar <span class="hljs-number">19</span> <span class="hljs-number">15</span>:<span class="hljs-number">18</span>:<span class="hljs-number">36</span> <span class="hljs-number">2015</span> from c<span class="hljs-number">-24</span><span class="hljs-number">-22</span><span class="hljs-number">-247</span><span class="hljs-number">-196.</span>hsd1.wa.comcast.net
Agent pid <span class="hljs-number">15723</span>
ubuntu<span class="hljs-meta">@ip</span><span class="hljs-number">-172</span><span class="hljs-number">-31</span><span class="hljs-number">-33</span><span class="hljs-number">-228</span>:~
$ cd Git
ubuntu<span class="hljs-meta">@ip</span><span class="hljs-number">-172</span><span class="hljs-number">-31</span><span class="hljs-number">-33</span><span class="hljs-number">-228</span>:~/Git
$ git clone <span class="hljs-string">http:</span><span class="hljs-comment">//github.com/charliecalvert/JsObjects.git</span>
</code></pre><p>The key line, of course, is this one:</p>
<pre><code> git <span class="hljs-keyword">clone</span> <span class="hljs-title">http</span>://github.com/charliecalvert/JsObjects.git
</code></pre><h2 id="step-three-copy-and-link">Step Three: Copy and Link</h2>
<p>Copy the Route Params project to a folder of your choosing outside
of JsObjects:</p>
<pre><code>    cd &lt;TO SOME FOLDER OF YOUR CHOOSING SUCH AS ~/Source&gt;
    cp -r <span class="hljs-regexp">~/Git/</span>JsObjects<span class="hljs-regexp">/JavaScript/</span>NodeCode<span class="hljs-regexp">/NodeRoutesParams/</span> .
</code></pre><p>Now we need to create a symbolic link to our project. We want it to
appear that our project is in the <strong>~/bin directory</strong>. To do this, first
be sure that <strong>~/bin</strong> exists on your system. If it doesn&#39;t create it:</p>
<pre><code><span class="hljs-built_in">mkdir</span> ~/bin
</code></pre><p>Now create a symbolic link. The simplest way to do that is to navigate to the
folder that contains your project. For instance, if you project is in
<strong>Source</strong> directory, then navigate to the source directory. Then
create the symbolic link like this:</p>
<pre><code><span class="hljs-variable">$ </span>ln -s ~<span class="hljs-regexp">/Source/</span>NodeRoutesParams/ ~<span class="hljs-regexp">/bin/</span>NodeRoutesParams
</code></pre><p>If all works out, you can see the symbolic link in your <strong>bin</strong> directory
by issuing a command like this:</p>
<pre><code>$ <span class="hljs-keyword">ls</span> -<span class="hljs-keyword">l</span> ~/bin
</code></pre><p>You should see that NodeParams is a symbolic link to your Source/NodeRoutesParams
directory:</p>
<pre><code>NodeRoutesParams -&gt; <span class="hljs-regexp">/home/charlie</span><span class="hljs-regexp">/Source/</span>NodeRoutesParams/
</code></pre><p>Here is the whole process:</p>
<pre><code>cd ~/bin
ubuntu<span class="hljs-meta">@ip</span><span class="hljs-number">-172</span><span class="hljs-number">-31</span><span class="hljs-number">-33</span><span class="hljs-number">-228</span>:~/bin
$ ls -l
total <span class="hljs-number">0</span>
lrwxrwxrwx <span class="hljs-number">1</span> ubuntu ubuntu <span class="hljs-number">37</span> Mar <span class="hljs-number">19</span> <span class="hljs-number">22</span>:<span class="hljs-number">58</span> NodeRoutesParams -&gt; <span class="hljs-regexp">/home/</span>ubuntu<span class="hljs-regexp">/Source/</span>NodeRoutesParams/
ubuntu<span class="hljs-meta">@ip</span><span class="hljs-number">-172</span><span class="hljs-number">-31</span><span class="hljs-number">-33</span><span class="hljs-number">-228</span>:~/bin
</code></pre><h2 id="step-four-set-port">Step Four: Set Port</h2>
<p>In <strong>bin/www</strong>:</p>
<pre><code><span class="hljs-comment">#!/usr/bin/env node</span>
<span class="hljs-keyword">var</span> debug = <span class="hljs-built_in">require</span>(<span class="hljs-string">'debug'</span>)(<span class="hljs-string">'expressapp'</span>);
<span class="hljs-keyword">var</span> app = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../app'</span>);

app.set(<span class="hljs-string">'port'</span>, process.env.PORT || <span class="hljs-number">30101</span>);
</code></pre><p>Go to your AWS console. Go to Security Groups, edit the rules for your security
group to open up port 30101. If there is any confusion, you can find the security
group associated with your instance on the <strong>instances</strong> page in the AWS console.
In particular, select your instance, and look down and to your right.</p>
<ul>
<li>Type: Custom TCP</li>
<li>Protocol: TCP</li>
<li>Port Range: 30101 (Can we write: 30101-30105?)</li>
<li>Source: Anywhere</li>
</ul>
<h2 id="step-five-start-upstart">Step Five: Start Upstart</h2>
<p>Upstart can be used to keep your program running after you close 
your shell and to ensure that it restarts automatically when you
reboot the system. Take a momement to learn about upstart:</p>
<ul>
<li><a href="http://www.elvenware.com/charlie/development/web/JavaScript/NodeJs.html#upstart">UpStart on Elvenware</a></li>
<li><a href="http://upstart.ubuntu.com/index.html">UpStart home page</a></li>
</ul>
<p>Our upstart script is called <strong>NodeRoutesParams</strong>. If you look inside it, you will see that
it assumes your copy of NodeRoutesParams is in <strong>~/bin</strong>:</p>
<pre><code>exec <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/nodejs $HOME/</span>bin<span class="hljs-regexp">/NodeRoutesParams/</span>bin<span class="hljs-regexp">/www &gt;&gt; /</span>var<span class="hljs-regexp">/log/</span>node.log <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span>
</code></pre><p>That is why we created a symbolic link in that folder. That way, regardless of where
you keep <strong>NodeRoutesParams</strong> on your system, our script can find it.    </p>
<p>Copy the <strong>NodeRoutesParams</strong> file to the <strong>/etc/init</strong> directory:</p>
<pre><code>sudo cp NodeRoutesParams<span class="hljs-selector-class">.conf</span> /etc/init/.
</code></pre><p>Start the program</p>
<pre><code>sudo <span class="hljs-literal">start</span> NodeRoutesParams
</code></pre><p>Stop the program</p>
<pre><code>sudo <span class="hljs-literal">stop</span> NodesRoutesParams
</code></pre><p>If you reboot the system, your program will start automatically.</p>
<p>Error messages and and other output are in: /var/log/node.log </p>
<p>Browse to your instance:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">elasticIp</span>&gt;</span>:30101/
</code></pre><p>For instance, if you were testing all this out on your copy of Lubunutu,
you would do this:</p>
<pre><code><span class="hljs-number">127.0.0.1:30101</span>/    
</code></pre><h2 id="step-six-edit-elastic-ip">Step Six: Edit Elastic IP</h2>
<p>Navigate into your copied version of <strong>CordovaNodeRoutes</strong> </p>
<p>Edit <strong>Control.js</strong>:</p>
<pre><code>cd <span class="hljs-regexp">~/Git/</span>JsObjects<span class="hljs-regexp">/Cordova/</span>CordovaNodeRoutes/
geany www<span class="hljs-regexp">/javascripts/</span>Control.js    
</code></pre><p>Change the IP address to your elastic IP and the port to the number
you set up in the previous step:</p>
<pre><code>var Control = (<span class="hljs-name">function</span>() {

        // Constructor
        function Control() {
        $(<span class="hljs-string">"button"</span>).click(<span class="hljs-name">function</span>(<span class="hljs-name">event</span>) {
            var id = event.target.id<span class="hljs-comment">;</span>
            var route = 'http<span class="hljs-symbol">://52</span>.<span class="hljs-number">11.190</span>.<span class="hljs-number">176</span>:<span class="hljs-number">30101</span>/routeParams/' + id<span class="hljs-comment">;</span>
            $(<span class="hljs-string">"#clientRoute"</span>).html('ClientRoute: ' + route)<span class="hljs-comment">;</span>
            $.getJSON(<span class="hljs-name">route</span>, function(<span class="hljs-name">response</span>) {
                // $('#response').html(<span class="hljs-name">JSON</span>.stringify(<span class="hljs-name">response</span>))<span class="hljs-comment">;</span>
                $('#route').html(<span class="hljs-string">"ROUTE: "</span> + response.route)<span class="hljs-comment">;</span>
                $('#result').html(<span class="hljs-string">"RESULT: "</span> + response.result)<span class="hljs-comment">;</span>
                $('#query').html(<span class="hljs-string">"QUERY: "</span> + JSON.stringify(<span class="hljs-name">response</span>.query))<span class="hljs-comment">;</span>
                $('#params').html(<span class="hljs-string">"PARAMS: "</span> + JSON.stringify(<span class="hljs-name">response</span>.params))<span class="hljs-comment">;</span>
                $('#id').html(<span class="hljs-string">"ID: "</span> + response.id)<span class="hljs-comment">;</span>

                // elf.utilities.showMessage(<span class="hljs-name">choice</span>, true)<span class="hljs-comment">;</span>
            })<span class="hljs-comment">;</span>
        })<span class="hljs-comment">;</span>
</code></pre><p>The relevant line is this one:</p>
<pre><code><span class="hljs-variable"><span class="hljs-keyword">var</span> route</span> = 'http:<span class="hljs-comment">//&lt;CHANGE ME&gt;:30101/routeParams/' + id;</span>
</code></pre><p>Save your work.</p>
<h2 id="step-seven-install">Step Seven: Install</h2>
<p>Now install this cordova application on your phone or on AndroidX86
running in VirtualBox. </p>
<p>First use ADB to ensure that you are connected to your device:</p>
<pre><code>$ adb devices
<span class="hljs-built_in">List</span> <span class="hljs-keyword">of</span> devices attached 
e8e5bc06    device
</code></pre><p>If you are using your phone you don&#39;t have to 
explicitly connect adb. But if you are using VirtualBox, you
have to run <strong>adb connect <IP OF ANDROIDX86>.</strong></p>
<p>Remember these commands:</p>
<ul>
<li>cordova platform add android</li>
<li>cordova build android</li>
<li>adb install platforms/android/ant-build/CordovaApp-debug.apk</li>
</ul>
<p><strong>NOTE</strong>:<em>On some systems it may be <strong>MainActivity</strong> instead of <strong>CordovaApp</strong>.</em></p>
<p>To uninstall it:</p>
<ul>
<li>adb uninstall com.elvenware.elven_node_routes</li>
</ul>
<p>Details are here: <a href="http://bit.ly/elven-android-studio">http://bit.ly/elven-android-studio</a></p>
<h2 id="turn-it-in">Turn it in</h2>
<p>Create screen shots of your web app and cordova app running and talking
to the server. For instance, press the <strong>RouteParms/Able</strong> button and 
then take the screen shot.</p>
<p>Attach these screen shots when you submit the assignment. Also include
the address of your instance running on AWS at your Elastic IP
and assignment Port. Put your source code for both programs 
in Week12-NodeRoutes.</p>
<hr class="style-eight"><H2>Domains</H2><p>We decided not to do this assignment, but I'm keepign the material here in case you want to review it.</p><hr><h1 id="domain-names">Domain Names</h1>
<ul>
<li>Go to GoDaddy.</li>
<li>Buy two one dollar, one year, domain names.</li>
<li>Point one at yourname.github.io.</li>
<li>The other at your elastic ip on AWS.</li>
</ul>
<h2 id="pricing">Pricing</h2>
<p>The .work domains are cheap.</p>
<p><img src="https://drive.google.com/uc?id=0B25UTAlOfPRGVWtzamdCaWI5TFE" alt="One Year"></p>
<p><img src="https://drive.google.com/uc?id=0B25UTAlOfPRGdHlwcDcyY3VJOG8" alt="Ten Year"></p>
<h2 id="turn-it-in">Turn it in</h2>
<p>Turn in screenshots of your domain names in the browser.
A text file showing a run of whois from the command line in Linux. Be sure to include the sections that read:</p>
<ul>
<li>Domain Name</li>
<li>Registrar</li>
<li>Sponsoring Registrar</li>
<li>Whois Server</li>
<li>Referral URL</li>
<li>Name Server</li>
</ul>
<p>Submit your domain names linked to a default home page (index.html) that reads:</p>
<ul>
<li>My Isis322 Domain Name</li>
<li>The shows an image stored on Flickr.</li>
</ul>
<hr>
<h2 id="domain-names-on-ec2">Domain Names on EC2</h2>
<p>Go to Godaddy and manage your domain. On the <strong>DNS Zone File Page</strong> set the A record to your elastic IP.</p>
<ul>
<li><p><a href="http://stackoverflow.com/a/17569106/253576">http://stackoverflow.com/a/17569106/253576</a></p>
<h2 id="domain-names-on-github-io">Domain Names on GitHub IO</h2>
</li>
</ul>
<p>Create a CNAME document in the root of your repository. Mine looks like this:</p>
<pre><code>www<span class="hljs-selector-class">.ccalvert</span><span class="hljs-selector-class">.net</span>
</code></pre><p>That&#39;s the entire contents of the file, with the text flush left</p>
<p>On GitHub, go to setings. Look for the section on your GitHub pages.</p>
<p>That&#39;s the total contents of the file.</p>
<p>Go to your GoDaddy account.</p>
<p>Go to the domain page.</p>
<p>Choose to manage your domain.</p>
<p>In the DNS zone file page, set the CNAME alias for www to:</p>
<pre><code>username<span class="hljs-meta">@github</span>.io
</code></pre><hr><h2 id="domain-ec2">Domain Names on EC2</h2>
<p>Go to Godaddy and manage your domain. On the <strong>DNS Zone File Page</strong>
set the A record to your elastic IP.</p>
<ul>
<li><a href="http://stackoverflow.com/a/17569106/253576">http://stackoverflow.com/a/17569106/253576</a><h2 id="domain-github">Domain Names on GitHub IO</h2>
</li>
</ul>
<p>Create a CNAME document in the root of your repository. Mine looks like this:</p>
<pre><code>www<span class="hljs-selector-class">.ccalvert</span><span class="hljs-selector-class">.net</span>
</code></pre><p>That&#39;s the entire contents of the file, with the text flush left</p>
<p>On GitHub, go to setings. Look for the section on your GitHub pages.    </p>
<p>That&#39;s the total contents of the file.</p>
<p>Go to your GoDaddy account. </p>
<p>Go to the domain page.</p>
<p>Choose to manage your domain.</p>
<p>In the DNS zone file page, set the CNAME alias for www to:</p>
<pre><code>username<span class="hljs-meta">@github</span>.io
</code></pre></div></body></html>