<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>HyperExplorerComments</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>HyperExplorerComments</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#week11-hyperexplorer">Week11-HyperExplorer</a></li>
<li><a href="#grunt-check">Grunt Check</a></li>
<li><a href="#setup-pages">Setup Pages</a></li>
<li><a href="#methods-in-elfdelicious">Methods in elfDelicious</a></li>
<li><a href="#forms-not-needed">Forms not Needed</a></li>
<li><a href="#call-rendertable-and-appendurl">Call renderTable and appendUrl</a></li>
<li><a href="#optional-tests">Optional Tests</a></li>
<li><a href="#test-directories">Test Directories</a></li>
<li><a href="#link-index">Link Index</a></li>
<li><a href="#call-delicious">Call Delicious</a></li><!--TOC_End--></ul><h1 id="week11-hyperexplorer">Week11-HyperExplorer</h1>
<p>by Charlie Calvert</p>
<h2 id="grunt-check">Grunt Check</h2>
<p>Be sure that <strong>grunt check</strong> passes. By this time, most of the errors returned from <strong>grunt jscs</strong> are probably pretty trivial, but be sure that you final is clean before turning it in. You should also be sure that <strong>grunt jshint</strong> passes.</p>
<h2 id="setup-pages">Setup Pages</h2>
<p>Be sure you call initialize or setup on your pages when you load them.</p>
<p>In the <strong>call-server.js</strong> file that I gave you is the following code:</p>
<pre><code class="lang-javascript">loadTwitter: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    'use strict'</span>;
    $(<span class="hljs-string">'#displayContainer'</span>).load(<span class="hljs-string">'/twitter'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response, status, xhr</span>) </span>{
        <span class="hljs-keyword">if</span> (status == <span class="hljs-string">'error'</span>) {
            <span class="hljs-keyword">var</span> msg = <span class="hljs-string">'Sorry but there was an error: '</span>;
            <span class="hljs-comment">// $( '#error' ).html( msg + xhr.status + ' ' + xhr.statusText );</span>
            <span class="hljs-built_in">console</span>.log(msg + xhr.status + <span class="hljs-string">' '</span> + xhr.statusText);
        } <span class="hljs-keyword">else</span> {
            elfTwitter.twitterSetup();
        }
    });
}
</code></pre>
<p>As you can see, this code calls elfTwitter.twitterSetup. It will not work, of course, unless the <strong>twitterSetup</strong> method exists:</p>
<pre><code class="lang-javascript">twitterSetup: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    'use strict'</span>;
    elfTwitter.clearControls();
    $(<span class="hljs-string">'#getTimeline'</span>).click(elfTwitter.getTimeline);
    $(<span class="hljs-string">'#search'</span>).click(elfTwitter.search);
}
</code></pre>
<h2 id="methods-in-elfdelicious">Methods in elfDelicious</h2>
<p>Most of you delicious and twitter in objects. This means that your code in your jade files needs to qualify the methods in these objects with the object name. Don&#39;t write this:</p>
<pre><code class="lang-javascript"><span class="hljs-tag">button</span><span class="hljs-class">.btn</span><span class="hljs-class">.btn-primary</span>(onclick=<span class="hljs-string">"delicious()"</span>) Search Delicious
</code></pre>
<p>Instead write this:</p>
<pre><code class="lang-javascript"><span class="hljs-tag">button</span><span class="hljs-class">.btn</span><span class="hljs-class">.btn-primary</span>(onclick=<span class="hljs-string">"elfDelicious.delicious()"</span>) Search Delicious
</code></pre>
<p>The difference is <strong>delicious</strong> vs <strong>elfDelicious.delicious</strong>.</p>
<h2 id="forms-not-needed">Forms not Needed</h2>
<p>In most cases, we don&#39;t really need HTML <strong>forms</strong> for our code. But if you do use a form, be sure to handle the submit button in your setup methods for <strong>twitter</strong>, <strong>delicious</strong>, <strong>bitly</strong> or any place you use forms:</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">"#target"</span>).submit(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
    event.preventDefault();
    <span class="hljs-keyword">var</span> userFormData = $(<span class="hljs-keyword">this</span>).serialize();
    etc...
});
</code></pre>
<p>Bit if you don&#39;t want to handle forms explicitly, then be sure to remove them from your jade. In other words, don&#39;t do this: </p>
<pre><code class="lang-jade"><span class="hljs-keyword">form</span>#<span class="hljs-type">target</span>
</code></pre>
<p>Instead do something like this:</p>
<pre><code class="lang-jade"><span class="hljs-preprocessor">#target</span>
</code></pre>
<p>Don&#39;t do this:</p>
<pre><code class="lang-jade">+<span class="hljs-function"><span class="hljs-title">elfFormPanel</span><span class="hljs-params">(<span class="hljs-string">"Options"</span>)</span></span><span class="hljs-id">#target</span>.elfDiv
</code></pre>
<p>Instead do this:</p>
<pre><code class="lang-jade">+<span class="hljs-function"><span class="hljs-title">elfPanel</span><span class="hljs-params">(<span class="hljs-string">"Options"</span>)</span></span><span class="hljs-id">#target</span>.elfDiv
</code></pre>
<p>Whether you use HTML <strong>forms</strong> or not is up to you, but we have tended not to use them in most of our code.</p>
<h2 id="call-rendertable-and-appendurl">Call renderTable and appendUrl</h2>
<p>In your delicious code, and elsewhere, you want to make sure that you are calling <strong>appendUrl</strong> and perhaps also <strong>renderTable</strong> from inside of <strong>elfDelicious.callDelicious</strong> and inside of <strong>elfTwitter.search</strong> and <strong>elfTwitter.timeLine</strong>. Depending on your approach to this part of the project, some of your code might look a bit like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> elfDelicious = {

    deliciousLinks: <span class="hljs-literal">null</span>,

    deliciousSetup: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-comment">// CODE OMITTED HERE</span>
    },

    delicious: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">        'use strict'</span>;
        <span class="hljs-keyword">var</span> subject = $(<span class="hljs-string">'#subject'</span>).val();
        elfDelicious.callDelicious(subject);
    },

    detailDelicious: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>) </span>{
<span class="hljs-pi">        'use strict'</span>;
        $(<span class="hljs-string">'#deliciousDetails'</span>).html(<span class="hljs-built_in">JSON</span>.stringify(elfDelicious.deliciousLinks[index], <span class="hljs-literal">null</span>, <span class="hljs-number">4</span>));
    },

    appendUrl: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, deliciousLink</span>) </span>{
        <span class="hljs-comment">// CODE OMITTED HERE</span>
    },

    callDelicious: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">subject</span>) </span>{
<span class="hljs-pi">        'use strict'</span>;
        <span class="hljs-keyword">var</span> feedUrl = <span class="hljs-string">'http://feeds.delicious.com/v2/json/charliecalvert/'</span> + subject;
        $.ajax({
            url: feedUrl,

            dataType: <span class="hljs-string">'jsonp'</span>,

            success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
                <span class="hljs-comment">// SOMEWHERE IN HERE CALL APPEND URL</span>
                <span class="hljs-comment">// IF YOU WANT THE TABLE, THEN ALSO CALL RENDERTABLE</span>
            }
        });
    },

    <span class="hljs-comment">// CODE OMITTED HERE</span>
};
</code></pre>
<h2 id="optional-tests">Optional Tests</h2>
<p>Most tests begin with <strong>test-</strong>. To include them, put this in the files object found in <strong>karma.conf.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-symbol">'spec</span>/test*.js',
</code></pre>
<p>Some tests are optional (extra credit) and begin with <strong>opt</strong>. These are mostly twitter tests, which were added so late in the quarter that I did not want to insist that you include them in the final. Instead I made them optional. These tests begin with <strong>spec/opt-test-</strong>. To include them, write the following in the <strong>files</strong> object found in <strong>karma.conf.js</strong> :</p>
<pre><code class="lang-javascript"><span class="hljs-symbol">'spec</span>/opt-test*.js',
</code></pre>
<p>When included these tests in my project, I had about 126 total tests.</p>
<p>You may also see some tests that begin <strong>charlie-test-</strong>. You can ignore these tests.</p>
<h2 id="test-directories">Test Directories</h2>
<p>In <strong>$ELF_TEMPLATES/UnitTest/HyperExplorer</strong> there are two directories called <strong>data</strong> and <strong>fixtures</strong>. Your data directory should hold files like:</p>
<ul>
<li>bitly-links.js</li>
<li>delicious-javascript-links.js</li>
<li>tweets.js</li>
<li>tweets-timeline.js</li>
</ul>
<p>There is also a fixture directory. Your fixture directory should hold files like this:</p>
<ul>
<li>bitly.html</li>
<li>delicious.html</li>
<li>fixture.html</li>
<li>test-local-cloud.html</li>
<li>twitter.html</li>
</ul>
<p>To create some of the fixture code, expand the code in the files directory for <strong>karma.conf.js</strong>:</p>
<pre><code class="lang-javascript">jade: {
    compile: {
        options: {
            pretty: <span class="hljs-literal">true</span>,
            data: {
                debug: <span class="hljs-literal">false</span>
            }
        },
        files: {
            <span class="hljs-symbol">'spec</span>/fixtures/delicious.html': [<span class="hljs-symbol">'views</span>/delicious.jade', <span class="hljs-char">'$ELF_TEMPLATES/JadeMixins/*.jade'</span>],
            <span class="hljs-symbol">'spec</span>/fixtures/fixture.html': [<span class="hljs-symbol">'views</span>/fixture.jade', <span class="hljs-char">'$ELF_TEMPLATES/JadeMixins/*.jade'</span>],
            <span class="hljs-symbol">'spec</span>/fixtures/twitter.html': [<span class="hljs-symbol">'views</span>/twitter.jade', <span class="hljs-char">'$ELF_TEMPLATES/JadeMixins/*.jade'</span>]

        }
    }
},
</code></pre>
<h2 id="link-index">Link Index</h2>
<p>in bitly.js, in getLinks, set linkIndex to 0:</p>
<pre><code class="lang-javascript">$.getJSON(url, function(<span class="hljs-literal">result</span>) {
    elfBitly.linkIndex = <span class="hljs-number">0</span>;
</code></pre>
<h2 id="call-delicious">Call Delicious</h2>
<p>In <strong>delicious.jade</strong>, call <strong>elfDelicious.delicious</strong>, not <strong>elfDelicious.callDelicious</strong>:</p>
<pre><code class="lang-jade"><span class="hljs-tag">button</span><span class="hljs-class">.btn</span><span class="hljs-class">.btn-primary</span>(type=<span class="hljs-string">"button"</span>, onclick=<span class="hljs-string">"elfDelicious.delicious()"</span>) Search Delicious
</code></pre>
<p>You need to call delicious so that the index gets sets correctly. Like this:</p>
<pre><code class="lang-javascript">delicious: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    'use strict'</span>;
    <span class="hljs-keyword">var</span> subject = $(<span class="hljs-string">'#subject'</span>).val();
    elfDelicious.callDelicious(subject);
},
</code></pre>
</div></body></html>