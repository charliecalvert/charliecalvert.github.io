<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>DeliciousQuery</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>DeliciousQuery</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#comments-on-week04-deliciousquery">Comments on Week04-DeliciousQuery</a></li>
<li><a href="#the-array-of-urls">The Array of URLs</a></li>
<li><a href="#mapping">Mapping</a></li>
<li><a href="#tags-map">Tags Map</a></li>
<li><a href="#the-wrong-way">The Wrong Way</a></li>
<li><a href="#wrong-way-two">Wrong Way 2</a></li>
<li><a href="#handling-filters">Handling Filters</a></li>
<li><a href="#calling-filters">Calling Filters</a></li><!--TOC_End--></ul><h1 id="comments-on-week04-deliciousquery">Comments on Week04-DeliciousQuery</h1>
<p>Various comments on creating filters. The recently enhanced question about filters can be found here:</p>
<ul>
<li><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/DeliciousQuery.html#filter">DeliciousQuery: Filters</a></li>
</ul>
<h2 id="the-array-of-urls">The Array of URLs</h2>
<p>I have updated the question asking for an &quot;array containing only the URL from each object&quot;. Hopefully it is now easier to understand. The updated question is here:</p>
<ul>
<li><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/DeliciousQuery.html#create-array">Updated Create Array Question</a></li>
</ul>
<h2 id="mapping">Mapping</h2>
<p>The JavaScript <strong>map</strong> function takes an array of one sort, and converts it into a modified array of a similar type. You pass it to a callback, and each element in the array will be passed to it. Inside that callback, you can transform the objects in the array. After map returns, you have a new array, one in which each element of your array has been transformed by your callback.</p>
<p>I have updated the question on mapping to provide more explanation of what I want. You can see the updated question here:</p>
<p><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/DeliciousQuery.html#create-map">updated mapping question</a></p>
<p>Please review the initial paragraphs in that section and see if they can help you better understand how to create maps.</p>
<h2 id="tags-map">Tags Map</h2>
<p>This section is for people who are getting an error such as:</p>
<pre><code class="lang-bash">TypeError: <span class="hljs-string">'undefined'</span> <span class="hljs-keyword">is</span> not an <span class="hljs-keyword">object</span> (evaluating <span class="hljs-string">'link.tags.indexOf'</span>)
</code></pre>
<p>To make the filters work properly, you have to first create a map from the original JSON to an array of objects that include a field called tags:</p>
<pre><code class="lang-javascript">queryDelicious.getDescriptionTag = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{ <span class="hljs-string">'use strict'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.deliciousLinks.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(link)</span> </span>{
        <span class="hljs-keyword">return</span> { <span class="hljs-string">"description"</span>: link.d, <span class="hljs-string">"url"</span>: link.u, <span class="hljs-string">"tags"</span>: link.t };
    });
};
</code></pre>
<p>Only then will the filter be able to find a field called tags:</p>
<pre><code class="lang-javascript">queryDelicious.<span class="hljs-built_in">filter</span> = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(map, filter)</span> { '<span class="hljs-title">use</span> <span class="hljs-title">strict</span>';</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">map</span>.<span class="hljs-built_in">filter</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(link)</span> {</span>
        <span class="hljs-keyword">return</span> link.<span class="hljs-keyword">tags</span>.indexOf(<span class="hljs-built_in">filter</span>) &gt; -<span class="hljs-number">1</span>;
    });
};
</code></pre>
<p>You will have to call <strong>getDescriptionTag</strong> before calling your filter.</p>
<h2 id="the-wrong-way">The Wrong Way</h2>
<p>It might be tempting to do something like this when creating a map:</p>
<pre><code class="lang-javascript">queryDelicious.getDescriptionTag = function(subject) { <span class="hljs-string">'use strict'</span><span class="hljs-comment">;</span>
    var data=queryDelicious.deliciousLinks<span class="hljs-comment">;</span>
    var dTMap=[]<span class="hljs-comment">;</span>
    $.each(data, function(index, obj) {
        var dTObj = {}<span class="hljs-comment">;</span>
        dTObj.description=obj.d<span class="hljs-comment">;</span>
        dTObj.url=obj.u<span class="hljs-comment">;</span>
        dTObj.tags=obj.t<span class="hljs-comment">;</span>
        dTMap.push(dTObj)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
    <span class="hljs-keyword">return</span> dTMap<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p>This is valid JavaScript, and it performs reasonably well. However, it is:</p>
<ul>
<li>Not what I&#39;m asking for in this assignment</li>
<li>Not an example of functional programming. We want to tell the compiler what to do, not how to do it. We just tell the compiler: <strong>map</strong>. We never really define how the map should be made. That is a difference between functional and imperative programming.</li>
</ul>
<p>The &quot;correct&quot; way to handle this map is shown above, in the section on <strong>Tag Maps</strong>.</p>
<h2 id="wrong-way-two">Wrong Way 2</h2>
<p>Consider this code:</p>
<pre><code class="lang-javascript">    getMapMidSize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{ <span class="hljs-string">'use strict'</span>;
        <span class="hljs-keyword">var</span> arrayLength = [];
        $.<span class="hljs-keyword">each</span>(data, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index, obj)</span> </span>{
            arrayLength.push(obj.length);
            <span class="hljs-keyword">return</span> arrayLength;
        });
    },
</code></pre>
<p>This code does not use the JavaScript <strong>map</strong> function. We are trying to learn how to use that function to transform an ugly or ungainly array of objects into one that is well suited to our application. In this assignment, all the methods that are named <strong>getMapXXXSize</strong> should call the <strong>map</strong> method. Once again, here is an example call similar to the one that should be found in <strong>getMidSizeMap</strong> method:</p>
<pre><code class="lang-javascript">    getMap: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{ <span class="hljs-string">'use strict'</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.deliciousLinks.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(link)</span> </span>{
            <span class="hljs-keyword">return</span> { <span class="hljs-string">'url'</span>: link.u };
        });
    }
</code></pre>
<p>The key code is the call to <strong>map</strong>:</p>
<pre><code class="lang-javascript">deliciousLinks.<span class="hljs-keyword">map</span>(<span class="hljs-keyword">function</span>(etc...
</code></pre>
<p>Reference: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">map</a></p>
<h2 id="handling-filters">Handling Filters</h2>
<p>Don&#39;t forget to read the hint on handling filters:</p>
<ul>
<li><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/DeliciousQuery.html#working-with-filters">Handling Filters</a></li>
</ul>
<h2 id="calling-filters">Calling Filters</h2>
<p>When you call the filter method, make sure that the signature of the call matches the signature of your method. For instance, here is a typical declaration for the filter method:</p>
<pre><code class="lang-javascript">filter: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(map, filter)</span> </span>{ <span class="hljs-string">'use strict'</span>;
</code></pre>
<p>And here is a call to <strong>filter</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> <span class="hljs-keyword">map</span> = queryDelicious.<span class="hljs-keyword">filter</span>();
</code></pre>
<p>Clearly this latter call is going to fail since we are not passing in an parameters. A correct call might look like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> <span class="hljs-keyword">map</span> = queryDelicious.getDescriptionTag();
<span class="hljs-keyword">var</span> <span class="hljs-keyword">filter</span> = queryDelicious.<span class="hljs-keyword">filter</span>(<span class="hljs-keyword">map</span>, 'nodejs');
</code></pre>
</div></body></html>