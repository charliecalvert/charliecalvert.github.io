<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>Isit320MidtermComments2015</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>Isit320MidtermComments2015</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#update-unit-tests">Update Unit Tests</a></li>
<li><a href="#update-mixins">Update Mixins</a></li>
<li><a href="#proper-naming">Proper Naming</a></li>
<li><a href="#form-panels-and-keyword-links">Form panels and keyword Links</a></li>
<li><a href="#jshint">JSHint</a></li>
<li><a href="#when-to-load-dynamic">When to Load Scripts Dynamically</a></li>
<li><a href="#debug-work-around">Script Debug Workaround</a></li><!--TOC_End--></ul><h2 id="overview">Overview</h2>
<p>Week08-Midterm</p>
<p>by Charlie Calvert</p>
<h2 id="update-unit-tests">Update Unit Tests</h2>
<p>Unit testing is an important part of this course. In most cases, I don&#39;t want anyone to radically change the way they implement the midterm simply to make it conform with my tests. Your approach should, however, conform closely enough to my model so that most tests pass with no changes to the tests, or only minor changes to the tests. In some cases, we may need to sit down together so that we can bring your code more closely in line with my tests without losing your unique approach to the problems posed by the midterm.</p>
<p>In any case, be sure you have the most recent copy of the unit tests.</p>
<p>To confirm that the directories are the same, issue this command in pristine lubuntu or similar GUI OS:</p>
<pre><code class="lang-javascript">meld spec/ <span class="hljs-variable">$ELF</span>_TEMPLATES/UnitTest/Isit320Midterm2015/
</code></pre>
<p>Issue this command in either cloud 9, pristine lubuntu, or virtually any Linux based environment:</p>
<pre><code class="lang-javascript">diff spec/ <span class="hljs-variable">$ELF</span>_TEMPLATES/UnitTest/Isit320Midterm2015/
</code></pre>
<p>On my system this currently yields:</p>
<pre><code class="lang-bash">$ diff spec<span class="hljs-regexp">/ $ELF_TEMPLATES/</span>UnitTest<span class="hljs-regexp">/Isit320Midterm2015/</span>
Only <span class="hljs-keyword">in</span> spec/: deleteme.txt
Common <span class="hljs-string">subdirectories:</span> spec<span class="hljs-regexp">/fixtures and /</span>home<span class="hljs-regexp">/charlie/</span>Git<span class="hljs-regexp">/JsObjects/</span>Utilities<span class="hljs-regexp">/Templates/</span>UnitTest<span class="hljs-regexp">/Isit320Midterm2015/</span>fixtures
</code></pre>
<p>This comparison tells me that the only difference between the two directories is a file called <strong>deletme.txt</strong>. That&#39;s the kind of name I give to temporary files that I eventually want to delete. Within reason, I don&#39;t mind if you have additional files in your directory. This is not an error.</p>
<p>I also see that both directories have a directory fixtures. Here is a comparison of those two directories:</p>
<pre><code class="lang-bash">$ diff spec/fixtures <span class="hljs-variable">$ELF</span>_TEMPLATES/UnitTest/Isit320Midterm2015/fixtures
Only <span class="hljs-keyword">in</span> spec/fixtures: bitly.html
Only <span class="hljs-keyword">in</span> spec/fixtures: fixture.html
</code></pre>
<p>This is what I&#39;d expect since both <strong>bitly.html</strong> and <strong>fixtures.html</strong> are files that will differ from student to student, so you need to create them.</p>
<p>Suppose I opened up <strong>test-basic.js</strong> and added a comment to line 18:</p>
<pre><code class="lang-javascript">elfBitly.getLinks(elfDownloads.dataTypes.dtBitly); <span class="hljs-comment">// random comment</span>
</code></pre>
<p>Now my local copy of <strong>test-basic.js</strong> differs from the one in JsObjects. When I run <strong>diff</strong> I get the following results:</p>
<pre><code class="lang-bash">$ diff spec<span class="hljs-regexp">/ $ELF_TEMPLATES/</span>UnitTest<span class="hljs-regexp">/Isit320Midterm2015/</span>
Only <span class="hljs-keyword">in</span> spec/: deleteme.txt
Common <span class="hljs-string">subdirectories:</span> spec<span class="hljs-regexp">/fixtures and /</span>home<span class="hljs-regexp">/charlie/</span>Git<span class="hljs-regexp">/JsObjects/</span>Utilities<span class="hljs-regexp">/Templates/</span>UnitTest<span class="hljs-regexp">/Isit320Midterm2015/</span>fixtures
diff spec<span class="hljs-regexp">/test-basic.js /</span>home<span class="hljs-regexp">/charlie/</span>Git<span class="hljs-regexp">/JsObjects/</span>Utilities<span class="hljs-regexp">/Templates/</span>UnitTest<span class="hljs-regexp">/Isit320Midterm2015/</span>test-basic.js
<span class="hljs-number">18</span>c18
&lt;         elfBitly.getLinks(elfDownloads.dataTypes.dtBitly); <span class="hljs-comment">// random comment</span>
---
&gt;         elfBitly.getLinks(elfDownloads.dataTypes.dtBitly);
</code></pre>
<p>In addition to the lines already explained, this output tells me that on line of test-basic.js there is a difference between the two files. That is not good. The files should be identical. </p>
<p>If I see a few minor changes to your files, such as a change to the <strong>accessToken</strong>, that is fine. But lots of changes are not good. If I see several hundred lines of differences such as the one shown above, then we have some work to do to get your code up to speed.</p>
<h2 id="update-mixins">Update Mixins</h2>
<p>You should be working my most recent mixins. To test that, run the following and be sure they come back clean:</p>
<pre><code class="lang-bash">diff views<span class="hljs-regexp">/mixin-buttons.jade /</span>home<span class="hljs-regexp">/charlie/</span>Git<span class="hljs-regexp">/JsObjects/</span>Utilities<span class="hljs-regexp">/Templates/</span>JadeMixins/mixin-buttons.jade
diff views<span class="hljs-regexp">/mixin-inputs.jade /</span>home<span class="hljs-regexp">/charlie/</span>Git<span class="hljs-regexp">/JsObjects/</span>Utilities<span class="hljs-regexp">/Templates/</span>JadeMixins/mixin-inputs.jade
diff views<span class="hljs-regexp">/mixin-radios.jade /</span>home<span class="hljs-regexp">/charlie/</span>Git<span class="hljs-regexp">/JsObjects/</span>Utilities<span class="hljs-regexp">/Templates/</span>JadeMixins/mixin-radios.jade
diff views<span class="hljs-regexp">/mixins.jade /</span>home<span class="hljs-regexp">/charlie/</span>Git<span class="hljs-regexp">/JsObjects/</span>Utilities<span class="hljs-regexp">/Templates/</span>JadeMixins/mixins.jade
</code></pre>
<h2 id="proper-naming">Proper Naming</h2>
<p>Be sure to name your objects properly. Don&#39;t call an object <strong>delicious</strong>, call it <strong>elfDelicious</strong>.</p>
<p>There is no reason for this kind of problem to appear in your code. It breaks a lot of unit tests, which we designed explicitly to be sure that you did follow set naming conventions. Your ability to conform the specification outlined in the unit tests is an important part of this class.</p>
<p>When you change the name of a class, this frequently breaks your code in several places. I want to see that you know how to fix these kinds of problems. </p>
<p>Summary:</p>
<ul>
<li>I want to be sure you can follow a specification laid out in a unit test.</li>
<li>I want to be sure that you can fix certain problems, such as name mismatches, that frequently occur in code.</li>
</ul>
<h2 id="form-panels-and-keyword-links">Form panels and keyword Links</h2>
<p>Here is the code for my input controls in <strong>bitly.jade</strong>:</p>
<pre><code class="lang-javascript">+<span class="hljs-function"><span class="hljs-title">elfFormPanel</span><span class="hljs-params">(<span class="hljs-string">"Bitly Link Record"</span>)</span></span><span class="hljs-class">.elfDiv</span>

    +<span class="hljs-function"><span class="hljs-title">elfInputVB</span><span class="hljs-params">(<span class="hljs-string">"Keyword Link"</span>, <span class="hljs-string">"keywordLink"</span>, <span class="hljs-string">"keywordLink"</span>)</span></span><span class="hljs-id">#keywordLink</span><span class="hljs-class">.form-control</span><span class="hljs-class">.input-sm</span>
    +<span class="hljs-function"><span class="hljs-title">elfInputVB</span><span class="hljs-params">(<span class="hljs-string">"Link Title"</span>, <span class="hljs-string">"linkTitle"</span>, <span class="hljs-string">"linkTitle"</span>)</span></span><span class="hljs-id">#linkTitle</span><span class="hljs-class">.form-control</span><span class="hljs-class">.input-sm</span>
    +<span class="hljs-function"><span class="hljs-title">elfInputVB</span><span class="hljs-params">(<span class="hljs-string">"Aggregate Link"</span>, <span class="hljs-string">"aggregateLink"</span>, <span class="hljs-string">"aggregateLink"</span>)</span></span><span class="hljs-id">#aggregateLink</span><span class="hljs-class">.form-control</span><span class="hljs-class">.input-sm</span>
    +<span class="hljs-function"><span class="hljs-title">elfInputVB</span><span class="hljs-params">(<span class="hljs-string">"Long URL"</span>, <span class="hljs-string">"longUrl"</span>, <span class="hljs-string">"longUrl"</span>)</span></span><span class="hljs-id">#longUrl</span><span class="hljs-class">.form-control</span><span class="hljs-class">.input-sm</span>
    +<span class="hljs-function"><span class="hljs-title">elfInputVB</span><span class="hljs-params">(<span class="hljs-string">"Client ID"</span>, <span class="hljs-string">"clientId"</span>, <span class="hljs-string">"clientId"</span>)</span></span><span class="hljs-id">#clientId</span><span class="hljs-class">.form-control</span><span class="hljs-class">.input-sm</span>
    +<span class="hljs-function"><span class="hljs-title">elfInputVB</span><span class="hljs-params">(<span class="hljs-string">"Link"</span>, <span class="hljs-string">"link"</span>, <span class="hljs-string">"link"</span>)</span></span><span class="hljs-id">#link</span><span class="hljs-class">.form-control</span><span class="hljs-class">.input-sm</span>
    +<span class="hljs-function"><span class="hljs-title">elfInputVB</span><span class="hljs-params">(<span class="hljs-string">"User Time Stamp"</span>, <span class="hljs-string">"userTs"</span>, <span class="hljs-string">"userTs"</span>)</span></span><span class="hljs-id">#userTs</span><span class="hljs-class">.form-control</span><span class="hljs-class">.input-sm</span>
    +<span class="hljs-function"><span class="hljs-title">elfInputVB</span><span class="hljs-params">(<span class="hljs-string">"Created At"</span>, <span class="hljs-string">"createdAt"</span>, <span class="hljs-string">"createAt"</span>)</span></span><span class="hljs-id">#createdAt</span><span class="hljs-class">.form-control</span><span class="hljs-class">.input-sm</span>
    +<span class="hljs-function"><span class="hljs-title">elfInputVB</span><span class="hljs-params">(<span class="hljs-string">"Modified At"</span>, <span class="hljs-string">"modifiedAt"</span>, <span class="hljs-string">"modifiedAt"</span>)</span></span><span class="hljs-id">#modifiedAt</span><span class="hljs-class">.form-control</span><span class="hljs-class">.input-sm</span>

    hr

    <span class="hljs-tag">div</span><span class="hljs-class">.row</span>
        <span class="hljs-tag">div</span><span class="hljs-class">.col-sm-6</span>
            +<span class="hljs-function"><span class="hljs-title">forwardBack</span><span class="hljs-params">(<span class="hljs-string">"elfMovement.left()"</span>, <span class="hljs-string">"elfMovement.right()"</span>)</span></span>
        <span class="hljs-tag">div</span><span class="hljs-class">.col-sm-6</span>
            +<span class="hljs-function"><span class="hljs-title">elfCheckBox</span><span class="hljs-params">(<span class="hljs-string">"Private"</span>, <span class="hljs-string">"checkBoxPrivate"</span>, <span class="hljs-string">"checkBoxPrivate"</span>)</span></span><span class="hljs-id">#checkBoxPrivate</span>
            +<span class="hljs-function"><span class="hljs-title">elfCheckBox</span><span class="hljs-params">(<span class="hljs-string">"Archived"</span>, <span class="hljs-string">"checkBoxArchived"</span>, <span class="hljs-string">"checkBoxArchived"</span>)</span></span>#checkBoxArchived
</code></pre>
<p>The <strong>elfFormPanel</strong> is flush left in the editor. I separate the checkboxes and forward backward buttons from the input controls with an HR element, which was, called a <em>horizontal rule</em>, but which is now represents a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/hr">thematic break</a>.</p>
<p>I believe that formatting your code this way ensures that it will pass the following test:</p>
<pre><code class="lang-javascript">it<span class="hljs-list">(<span class="hljs-quoted">'shows</span> we can get some of the attributes of the text input keywordLink', function<span class="hljs-list">()</span> {
    var element = document.getElementById<span class="hljs-list">(<span class="hljs-quoted">'keywordLink</span>')</span><span class="hljs-comment">;</span>
    var arr = elfTestUtils.getAttributesFromElement<span class="hljs-list">(<span class="hljs-keyword">element</span>)</span><span class="hljs-comment">;</span>
    // elfTestUtils.showAttributes<span class="hljs-list">(<span class="hljs-keyword">element</span>, arr)</span><span class="hljs-comment">;</span>
    expect<span class="hljs-list">(<span class="hljs-keyword">arr</span>.length)</span>.toBeGreaterThan<span class="hljs-list">(<span class="hljs-number">4</span>)</span><span class="hljs-comment">;</span>
})</span><span class="hljs-comment">;</span>
</code></pre>
<h2 id="jshint">JSHint</h2>
<p>I want to get see clean JSHint results when I type <strong>grunt test</strong>. One student&#39;s midterm produced these results:</p>
<pre><code class="lang-javascript">$ grunt test
Running <span class="hljs-string">"jshint:files"</span> (jshint) task

<span class="hljs-keyword">public</span>/javascripts/link/delicious.js
  line <span class="hljs-number">6</span>   col <span class="hljs-number">9</span>   Missing <span class="hljs-string">"use strict"</span> statement.
  line <span class="hljs-number">10</span>  col <span class="hljs-number">9</span>   Missing <span class="hljs-string">"use strict"</span> statement.
  line <span class="hljs-number">18</span>  col <span class="hljs-number">9</span>   Missing <span class="hljs-string">"use strict"</span> statement.
  line <span class="hljs-number">45</span>  col <span class="hljs-number">9</span>   Missing <span class="hljs-string">"use strict"</span> statement.
  line <span class="hljs-number">73</span>  col <span class="hljs-number">42</span>  Missing semicolon.
  line <span class="hljs-number">77</span>  col <span class="hljs-number">9</span>   Missing <span class="hljs-string">"use strict"</span> statement.

  ✖  <span class="hljs-number">5</span> errors
  ⚠  <span class="hljs-number">1</span> warnings

Warning: Task <span class="hljs-string">"jshint:files"</span> failed. Use --force to <span class="hljs-keyword">continue</span>.

Aborted due to warnings.
</code></pre>
<p>The good side of the above results is that they are limited to problems in one file: everything else came back clean. On the other hand, these are simple problems to fix, and turning on <strong>strict</strong> can help us find problems in our code.</p>
<h2 id="when-to-load-dynamic">When to Load Scripts Dynamically</h2>
<p>At least one student decided to load JavaScript not in <strong>layout.jade</strong> but dynamically as needed:</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">'input[id="delicious"]'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    elfMidterm.clear();
    $(<span class="hljs-string">'#displayContainer'</span>).load(<span class="hljs-string">'/delicious'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response, status, xhr</span>) </span>{
        <span class="hljs-keyword">if</span> (status == <span class="hljs-string">'error'</span>) {
            <span class="hljs-keyword">var</span> msg = <span class="hljs-string">'Sorry but there was an error: '</span>;
            $(<span class="hljs-string">'#error'</span>).html(msg + xhr.status + <span class="hljs-string">' '</span> + xhr.statusText);
            <span class="hljs-built_in">console</span>.log(msg + xhr.status + <span class="hljs-string">' '</span> + xhr.statusText);
        }
    });
    $.getScript(<span class="hljs-string">'javascripts/link/delicious.js'</span>);
});
</code></pre>
<p><strong>NOTE</strong>: <em>The Chrome and Firefox debuggers have a hard time with code like this, but there is a simple work around covered near the end of this document in a section called <strong>Script Debug Work Around</strong>.</em></p>
<p>The problem with the above code is that that the script will frequently be loaded before the HTML has loaded. As a result, the buttons and other controls do not get hooked up properly. The solution is to do this:</p>
<pre><code class="lang-javascript">`<span class="javascript"></span>``<span class="javascript">javascript
$(<span class="hljs-string">'input[id="delicious"]'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    elfMidterm.clear();
    $(<span class="hljs-string">'#displayContainer'</span>).load(<span class="hljs-string">'/delicious'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response, status, xhr</span>) </span>{
        <span class="hljs-keyword">if</span> (status == <span class="hljs-string">'error'</span>) {
            <span class="hljs-keyword">var</span> msg = <span class="hljs-string">'Sorry but there was an error: '</span>;
            $(<span class="hljs-string">'#error'</span>).html(msg + xhr.status + <span class="hljs-string">' '</span> + xhr.statusText);
            <span class="hljs-built_in">console</span>.log(msg + xhr.status + <span class="hljs-string">' '</span> + xhr.statusText);
        }
        $.getScript(<span class="hljs-string">'javascripts/link/delicious.js'</span>);
    });
});</span>
</code></pre>
<p>By putting the <strong>getScript</strong> call in the callback, we can be certain script gets loaded after the HTML is ready. As a results, checkboxes, radiobuttons and other controls get hooked up properly.</p>
<h2 id="debug-work-around">Script Debug Workaround</h2>
<p>If you choose to load scripts dynamically, which is not wrong, but also not something I&#39;d recommend for most students, you should add the following code to your project so that you can properly debug it. You&#39;d want this at least during the coding and debugging phase of your development cycle. It overrides the original jQuery version of <strong>getScript</strong>. I put this code in the main <strong>document.ready</strong>:</p>
<pre><code class="lang-javascript">jQuery.extend({
    getScript: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, callback</span>) </span>{
        <span class="hljs-keyword">var</span> head = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">"head"</span>)[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">var</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"script"</span>);
        script.src = url;

        <span class="hljs-comment">// Handle Script loading</span>
        {
            <span class="hljs-keyword">var</span> done = <span class="hljs-literal">false</span>;

            <span class="hljs-comment">// Attach handlers for all browsers</span>
            script.onload = script.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                <span class="hljs-keyword">if</span> ( !done &amp;&amp; (!<span class="hljs-keyword">this</span>.readyState ||
                    <span class="hljs-keyword">this</span>.readyState == <span class="hljs-string">"loaded"</span> || <span class="hljs-keyword">this</span>.readyState == <span class="hljs-string">"complete"</span>) ) {
                    done = <span class="hljs-literal">true</span>;
                    <span class="hljs-keyword">if</span> (callback)
                        callback();

                    <span class="hljs-comment">// Handle memory leak in IE</span>
                    script.onload = script.onreadystatechange = <span class="hljs-literal">null</span>;
                }
            };
        }

        head.appendChild(script);

        <span class="hljs-comment">// We handle everything using the script element injection</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
    }
});
</code></pre>
<ul>
<li><a href="http://stackoverflow.com/a/691661/253576">Reference</a></li>
</ul>
</div></body></html>