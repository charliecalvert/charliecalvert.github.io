<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>BitlyRefineComments</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>BitlyRefineComments</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#bitly-refine-comments">Bitly Refine Comments</a></li>
<li><a href="#include-jade-for-the-table">Include Jade for the Table</a></li>
<li><a href="#render-the-table">Render the Table</a></li>
<li><a href="#clear-data">Clear Data</a></li>
<li><a href="#don-t-forget-the-movement-object">Don&#39;t forget the Movement Object</a></li>
<li><a href="#don-t-forget-the-downloads-object">Don&#39;t forget the Downloads Object</a></li>
<li><a href="#consistent-naming">Consistent Naming</a></li>
<li><a href="#don-t-directly-link-to-json-files">Don&#39;t Directly Link to JSON Files</a></li><!--TOC_End--></ul><h1 id="bitly-refine-comments">Bitly Refine Comments</h1>
<p>Notes on Bitly Refine by Charlie Calvert</p>
<h2 id="include-jade-for-the-table">Include Jade for the Table</h2>
<p>Be sure you include this code in <strong>index.jade</strong>:</p>
<pre><code class="lang-jade">+<span class="hljs-function"><span class="hljs-title">elfPanel</span><span class="hljs-params">(<span class="hljs-string">"Bitly Links Table"</span>)</span></span><span class="hljs-class">.elfDiv</span>
    <span class="hljs-tag">div</span><span class="hljs-class">.scroller</span>
        <span class="hljs-tag">table</span>.table#tableLinks
</code></pre>
<p>Without this code, the rest of your project will never work as the code that you insert into your table will not have a home in your HTML.</p>
<h2 id="render-the-table">Render the Table</h2>
<p>Here is the correct code for rendering the table:</p>
<pre><code class="lang-javascript">renderTable: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">links</span>) </span>{
<span class="hljs-pi">    'use strict'</span>;
    $.each(links, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, link</span>) </span>{
        <span class="hljs-keyword">var</span> title = <span class="hljs-string">'&lt;td&gt;'</span> + link.title + <span class="hljs-string">'&lt;/td&gt;'</span>;
        <span class="hljs-keyword">var</span> keyword = <span class="hljs-string">'&lt;td&gt;'</span> + link.keyword_link + <span class="hljs-string">'&lt;/td&gt;'</span>;
        <span class="hljs-keyword">var</span> tableRowStart = <span class="hljs-string">'&lt;tr class="linkTitle" index='</span> + index + <span class="hljs-string">'&gt;'</span>;
        $(<span class="hljs-string">'#tableLinks'</span>).append(tableRowStart + title + keyword + <span class="hljs-string">'&lt;tr&gt;'</span>);
    });
    $(<span class="hljs-string">'.linkTitle'</span>).click(elfDisplay.showTableSelection);
},
</code></pre>
<p>Some students try to write code like this:</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">var</span> title = <span class="hljs-string">"&lt;td&gt;"</span> + <span class="hljs-keyword">link</span><span class="hljs-built_in">.</span>text + <span class="hljs-string">"&lt;/td&gt;"</span>;
<span class="hljs-built_in">var</span> <span class="hljs-built_in">keyword</span> = <span class="hljs-string">"&lt;td&gt;"</span> + <span class="hljs-keyword">link</span><span class="hljs-built_in">.</span>user + <span class="hljs-string">"&lt;/td&gt;"</span>;
</code></pre>
<p>That code won&#39;t work because Bitly does not return data with a property called <strong>text</strong> or <strong>user</strong>. Instead it has properties called <strong>title</strong> and <strong>keyword_link</strong>.</p>
<h2 id="clear-data">Clear Data</h2>
<p>Before you fill in the table, you should clear any data that might already be in it. Otherwise our code continually appends code to the table. It is unlikely the user would even know this is happening since the new rows are not visible. We can only see four or five rows at a time, so if you append data down on the 25th row, for instance, the user won&#39;t be able to see it.</p>
<p>There are several reasonable solutions to this problem. One simple fix might be to write code like this:</p>
<pre><code class="lang-javascript">renderTable: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">links</span>) </span>{
<span class="hljs-pi">    'use strict'</span>;
    $(<span class="hljs-string">"#tableLinks"</span>).empty();
    $.each(links, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, link</span>) </span>{ 

    <span class="hljs-comment">// Code omitted here...</span>
},
</code></pre>
<p>The call to empty ensures that the any data appended to the table will at least begin on row 1. This ensures that at least the first few rows of data are visible, and that the user is given a visual cue that something has changed.</p>
<h2 id="don-t-forget-the-movement-object">Don&#39;t forget the Movement Object</h2>
<p>A few students did not link in the <strong>movement</strong> object. It is described in general terms in the <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/BitlyInteractive.html#iterate">Iterate section</a> of the Bitly Interactive assignment. Those of you who turned that assignment in should also have the complete code for that object.</p>
<h2 id="don-t-forget-the-downloads-object">Don&#39;t forget the Downloads Object</h2>
<p>A number of students failed to include the <strong>downloads</strong> module in the project. It was given to you in <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/BitlyInteractive.html#the-downloads-module">bitly interactive</a>.</p>
<h2 id="consistent-naming">Consistent Naming</h2>
<p>If you rename an object, be sure you change all references to that object. If you change any identifier, you have to rename all instances of that identifier. Consider this code:</p>
<pre><code class="lang-javascript">elfDownloads = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    'use strict'</span>;
};

downloads.accessToken = <span class="hljs-string">'2ac etc...'</span>; <span class="hljs-comment">//YOUR TOKEN HERE. AS A STRING...;</span>

downloads.dataTypes = {
    <span class="hljs-string">'dtLocal'</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">'dtCloud'</span>: <span class="hljs-number">1</span>
};
</code></pre>
<p>In the first line, the <strong>downloads</strong> object has been renamed to <strong>elfDownloads</strong>, per my instructions. This student did not, however, rename all instances of this variable. In particular, <strong>acccessToken</strong> and <strong>dataTypes</strong> still have the old object name of <strong>downloads</strong>. It should be changed from <strong>downloads.accessToken</strong> to <strong>elfDownloads.accessToken</strong>. When the changes are complete, the code should look like this:</p>
<pre><code class="lang-javascript">elfDownloads = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    'use strict'</span>;
};

elfDownloads.accessToken = <span class="hljs-string">'2ac etc...'</span>; <span class="hljs-comment">//YOUR TOKEN HERE. AS A STRING...;</span>

elfDownloads.dataTypes = {
    <span class="hljs-string">'dtLocal'</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">'dtCloud'</span>: <span class="hljs-number">1</span>
};

etc...
</code></pre>
<h2 id="don-t-directly-link-to-json-files">Don&#39;t Directly Link to JSON Files</h2>
<p>Some students wrote <strong>layout.jade</strong> files that look like this:</p>
<pre><code class="lang-jade">doctype <span class="hljs-tag">html</span>
<span class="hljs-tag">html</span>
  head
    title= title
    <span class="hljs-function"><span class="hljs-title">link</span><span class="hljs-params">(rel=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'/stylesheets/style.css'</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">link</span><span class="hljs-params">(rel=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'/components/bootstrap/dist/css/bootstrap.css'</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"components/jquery/dist/jquery.js"</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"components/bootstrap/dist/js/bootstrap.js"</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/control.js"</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"data/bitly-links.json"</span>)</span></span>
  <span class="hljs-tag">body</span>
    block <span class="hljs-attribute">content</span>
</code></pre>
<p>This file is mostly correct, but the <strong>script</strong> tag that attempts to link in <strong>bitly-links.json</strong> causes an error. <strong>JSON</strong> files follow JavaScript syntax, but there are differences. As a result, they should not be directly linked into a web application using a <strong>script</strong> tag. </p>
<p>Consider this JavaScript object:</p>
<pre><code class="lang-javascript"><span class="hljs-variable"><span class="hljs-keyword">var</span> myObject</span> = {
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"George"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Washington"</span>
};
</code></pre>
<p>This is a JavaScript <a href="http://www.dyn-web.com/tutorials/object-literal/">object literal</a> with two string properties that consist of name-value pairs. These name-value pairs can be of type <strong>function</strong>. It has been assigned to the identifier <strong>myObject</strong> and it ends with a semicolon.</p>
<p>Now consider this JSON object:</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">firstName</span>": <span class="hljs-value"><span class="hljs-string">"George"</span></span>,
    "<span class="hljs-attribute">lastName</span>": <span class="hljs-value"><span class="hljs-string">"Washington"</span>
</span>}
</code></pre>
<p>It too consists of a list of name-value pairs separated by a comma. Functions, however, are not allowed. Nor is the object assigned to a variable. In JSON, strings must be in double quotes.</p>
<p>We can link JavaScript files into a web application with a <strong>script</strong> tag. We should not link JSON files into our projects with a script tag. Instead, we usually access JSON in a web application by loading it with an http request (<strong>ajax</strong>).</p>
</div></body></html>