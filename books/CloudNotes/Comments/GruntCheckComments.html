<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>GruntCheckComments</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><!-- script(src="/libs/scripts/Control.js")--><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>GruntCheckComments</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#run-grunt-check">Run Grunt Check</a></li>
<li><a href="#invalid-quotes">Invalid Quotes</a></li>
<li><a href="#illegal-whitespace">Illegal Trailing WhiteSpace</a></li>
<li><a href="#two-blank-lines">Two Blank Lines</a></li>
<li><a href="#no-bitlylinks">Can&#39;t Find BitlyLinks</a></li>
<li><a href="#fixture-issues">Fixture Issues</a></li><!--TOC_End--></ul><h2 id="overview">Overview</h2>
<p>Comments on the Grunt Check assignment.</p>
<h2 id="getting-started">Getting Started</h2>
<p>The first step in this project is to make sure that you have valid files for checking your code. This usually means updating the following files:</p>
<pre><code class="lang-bash"><span class="hljs-bullet">- </span>package.json
<span class="hljs-bullet">- </span>Gruntfile.js
<span class="hljs-bullet">- </span>karma.conf.js
<span class="hljs-bullet">- </span>.jscsrc

You can find a valid versions of all these files in the setup section of the [<span class="hljs-string">assigment</span>][<span class="hljs-symbol">gruntfile</span>].

Also there are some more or less valid versions of these files in this directory:

<span class="hljs-code">```</span>bash
$ELF_TEMPLATES/UnitTest
</code></pre>
<p>From the root of your repository, on Pristine Lubuntu, you can compare the version in your directory with the versions in JsObject with a command like this:</p>
<pre><code class="lang-bash">$ meld Week04-JavaScriptObjects/ $ELF_TEMPLATES/UnitTest
</code></pre>
<h2 id="run-grunt-check">Run Grunt Check</h2>
<p>Don&#39;t forget to run <strong>grunt check</strong> before turning in your midterm. It is important to get your code cleaned up so that I don&#39;t have to fuss with it too much. If beautify changes a bunch of your files on my end, then I have to clean that up before I can do another <strong>git pull</strong>. That&#39;s a time sink for me, and during midterms you want me thinking fondly of you....</p>
<p>A simple way to make sure you get this right is to issue the following command:</p>
<pre><code><span class="hljs-attribute">grunt</span> jscs
</code></pre><p>If that gives you errors because of spacing issues, then try running <strong>grunt check</strong> so that it forces jsbeautify to process all your files. Then check in your code for the midterm.</p>
<h2 id="invalid-quotes">Invalid Quotes</h2>
<p>If you see a message about invalid quote marks, you can generally do a search and replace on double quotes, replacing them with single quote. For example, as you can see from the error, code like this needs to be updated:</p>
<pre><code class="lang-bash">Invalid quote mark found at <span class="hljs-keyword">public</span>/javascripts/display.js :
    <span class="hljs-number">12</span> |        <span class="hljs-string">'use strict'</span>;
    <span class="hljs-number">13</span> |        $.<span class="hljs-keyword">each</span>(links, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index, link)</span> </span>{
    <span class="hljs-number">14</span> |            <span class="hljs-keyword">var</span> title = <span class="hljs-string">"&lt;td&gt;"</span> + link.text + <span class="hljs-string">"&lt;/td&gt;"</span>;
-----------------------------------------------------^
    <span class="hljs-number">15</span> |            <span class="hljs-keyword">var</span> keyword = <span class="hljs-string">"&lt;td&gt;"</span> + link.user + <span class="hljs-string">"&lt;/td&gt;"</span>;
</code></pre>
<p>The modified code might look something like this:</p>
<pre><code class="lang-bash">Invalid quote mark found at public/javascripts/display.js :
<span class="hljs-meta">'use strict'</span>;
$.each(links, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, link</span>) </span>{
    <span class="hljs-keyword">var</span> title = <span class="hljs-string">'&lt;td&gt;'</span> + link.text + <span class="hljs-string">'&lt;/td&gt;'</span>;
    <span class="hljs-keyword">var</span> keyword = <span class="hljs-string">'&lt;td&gt;'</span> + link.user + <span class="hljs-string">'&lt;/td&gt;'</span>;
</code></pre>
<p>Here is another example:</p>
<pre><code class="lang-bash">$ grunt <span class="hljs-keyword">check</span>
Running <span class="hljs-string">"jsbeautifier:files"</span> (jsbeautifier) task
Beautified <span class="hljs-number">5</span> files, <span class="hljs-keyword">changed</span> <span class="hljs-number">2</span> files...OK

Running <span class="hljs-string">"jscs:src"</span> (jscs) task
Invalid quote mark <span class="hljs-keyword">found</span> <span class="hljs-keyword">at</span> <span class="hljs-keyword">work</span>.js :
     <span class="hljs-number">1</span> |<span class="hljs-keyword">var</span> person = {
     <span class="hljs-number">2</span> |    firstName: <span class="hljs-string">"George"</span>,
<span class="hljs-comment">-----------------------^</span>
     <span class="hljs-number">3</span> |    lastName: <span class="hljs-string">"Washington"</span>,
     <span class="hljs-number">4</span> |    fullName: <span class="hljs-keyword">function</span>() {
&gt;&gt; X code <span class="hljs-keyword">style</span> <span class="hljs-keyword">errors</span> <span class="hljs-keyword">found</span>!
</code></pre>
<p>To fix these kinds of errors, just do a search and replace. For instance, we start with this:</p>
<pre><code><span class="hljs-symbol">firstName:</span> <span class="hljs-string">"George"</span>,
</code></pre><p>The corrected code looks like this:</p>
<pre><code><span class="hljs-string">firstName:</span> <span class="hljs-string">'George'</span>,
</code></pre><p>The point is not so much that one type of quote is provably better than the other. It is just that JavaScript gives us a choice, and we ought to pick one or the other and stick with our decision. The <strong>jscs</strong> helps us stay honest about our decision. Which decision you make is configurable, but for not we are going with single quotes.</p>
<h2 id="illegal-whitespace">Illegal Trailing WhiteSpace</h2>
<p>The error might look a bit like this:</p>
<pre><code class="lang-bash">$ grunt jscs
Running <span class="hljs-string">"jscs:src"</span> (jscs) task
Illegal trailing whitespace at <span class="hljs-keyword">public</span>/javascripts/display.js :
    <span class="hljs-number">38</span> |        $(<span class="hljs-string">'#client_id'</span>).val(bitlyLink.client_id);
    <span class="hljs-number">39</span> |        $(<span class="hljs-string">'#link'</span>).val(bitlyLink.link);
    <span class="hljs-number">40</span> |        
----------------^
    <span class="hljs-number">41</span> |        $(<span class="hljs-string">'#userTs'</span>).val(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(bitlyLink.user_ts * <span class="hljs-number">1000</span>));
    <span class="hljs-number">42</span> |        $(<span class="hljs-string">'#createdAt'</span>).val(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(bitlyLink.created_at * <span class="hljs-number">1000</span>));
&gt;&gt; <span class="hljs-number">1</span> code style errors found!
Warning: Task <span class="hljs-string">"jscs:src"</span> failed. Use --force to <span class="hljs-keyword">continue</span>.

Aborted due to warnings.
</code></pre>
<p>JsBeautify should fix this error. If you don&#39;t want to run that tool, another solution is to open it in Geany and choose <strong>Document | Strip Trailing Spaces</strong>.</p>
<h2 id="two-blank-lines">Two Blank Lines</h2>
<pre><code class="lang-bash">getMap should have at most 2 line(s) between them at public/javascripts/elf-bitly.js :
<span class="hljs-code">    78 |        return this.bitlyLinks.data.link_history[0];</span>
<span class="hljs-code">    79 |</span>
<span class="hljs-section">    80 |    },
--------------^</span>
<span class="hljs-code">    81 |</span>
<span class="hljs-code">    82 |</span>
&gt;&gt; 4 code style errors found!
Warning: Task "jscs:src" failed. Use --force to continue.

Aborted due to warnings.
</code></pre>
<p>When you get this error, that means you have two blank lines in a row. Delete that line so there is only one line in your code. This is important. When your teacher, or an employer, sees a bunch of blank lines in your code, it frequently looks like you have careless habits. Clean it up!</p>
<h2 id="no-bitlylinks">Can&#39;t Find BitlyLinks</h2>
<p>You might get this error:</p>
<pre><code>Can't <span class="hljs-built_in">find</span> variable: bitlyLinks
</code></pre><p>That usually means that you are not loading <strong>bitly-links.js</strong> in <strong>karma.conf.js</strong>:</p>
<pre><code class="lang-javascript">files: [
    <span class="hljs-symbol">'public</span>/components/jquery/dist/jquery.min.js',
    <span class="hljs-symbol">'public</span>/javascripts/*.js',
    <span class="hljs-symbol">'spec</span>/test*.js',
    <span class="hljs-symbol">'spec</span>/bitly-links.js'
],
</code></pre>
<p>Of course, you also need to have a copy of <strong>bitly-links.js</strong> in the spec directory or this won&#39;t work. There are copies of this file in various projects that we created this quarter. There are also copies in <strong>$ELF_TEMPLATES/UnitTest/...</strong></p>
<p>If you are looking for a file in a set of directories, try:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">find</span> . -iname bitly-links.js
</code></pre>
<h2 id="fixture-issues">Fixture Issues</h2>
<p>You may get an error such as <strong>null is not an object (evaluating &#39;document.getElementById etc...</strong></p>
<p>The fix for that problem can now be found in the Bitly Interactive assignment, in the section on <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/BitlyInteractive.html#jasmine-fixtures">fixtures</a>.</p>
<p>As a reminder, the key lines of code are: </p>
<pre><code class="lang-javascript">beforeEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> fixture =
        <span class="hljs-string">'&lt;div id="fixture"&gt;'</span> +
            <span class="hljs-comment">// QUOTE YOUR HTML IN HERE</span>
        <span class="hljs-string">'&lt;/div&gt;'</span>;

    <span class="hljs-built_in">document</span>.body.insertAdjacentHTML(<span class="hljs-string">'afterbegin'</span>,  fixture);
});

<span class="hljs-comment">// remove the html fixture from the DOM</span>
afterEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">document</span>.body.removeChild(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'fixture'</span>));
});
</code></pre>
</div></body></html>