<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>DelicousQuery</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body ng-app="elfApp"><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>DelicousQuery</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#week04-deliciousquery">Week04-DeliciousQuery</a></li>
<li><a href="#the-array-of-urls">The Array of URLs</a></li>
<li><a href="#mapping">Mapping</a></li>
<li><a href="#tags-map">Tags Map</a></li>
<li><a href="#the-wrong-way">The Wrong Way</a></li>
<li><a href="#handling-filters">Handling Filters</a></li>
<li><a href="#calling-filters">Calling Filters</a></li><!--TOC_End--></ul><h1 id="week04-deliciousquery">Week04-DeliciousQuery</h1>
<p>Various comments on creating filters. The recently enhanced question about filters can be found here:</p>
<ul>
<li><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/DeliciousQuery.html#filter">DeliciousQuery: Filters</a></li>
</ul>
<h2 id="the-array-of-urls">The Array of URLs</h2>
<p>I have updated the question asking for an &quot;array containing only the URL from each object&quot;. Hopefully it is now easier to understand. The updated question is here:</p>
<ul>
<li><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/DeliciousQuery.html#create-array">Updated Create Array Question</a></li>
</ul>
<h2 id="mapping">Mapping</h2>
<p>I have updated the question on mapping to provide more explanation of what I want. You can see the updated question here:</p>
<p><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/DeliciousQuery.html#create-map">updated mapping question</a></p>
<p>Please review the initial paragraphs in that section and see if they can help you better understand how to create maps.</p>
<h2 id="tags-map">Tags Map</h2>
<p>This section is for people who are getting an error such as:</p>
<pre><code class="lang-bash">TypeError: &#39;undefined&#39; is not an object (evaluating &#39;link.tags.indexOf&#39;)
</code></pre>
<p>To make the filters work properly, you have to first create a map from the original JSON to an array of objects that include a field called tags:</p>
<pre><code class="lang-javascript">queryDelicious.getDescriptionTag = function() { &#39;use strict&#39;;
    return this.deliciousLinks.map(function(link) {
        return { &quot;description&quot;: link.d, &quot;url&quot;: link.u, &quot;tags&quot;: link.t };
    });
};
</code></pre>
<p>Only then will the filter be able to find a field called tags:</p>
<pre><code class="lang-javascript">queryDelicious.filter = function(map, filter) { &#39;use strict&#39;;
    return map.filter(function (link) {
        return link.tags.indexOf(filter) &gt; -1;
    });
};
</code></pre>
<p>You will have to call <strong>getDescriptionTag</strong> before calling your filter.</p>
<h2 id="the-wrong-way">The Wrong Way</h2>
<p>It might be tempting to do something like this when creating a map:</p>
<pre><code class="lang-javascript">queryDelicious.getDescriptionTag = function(subject) { &#39;use strict&#39;;
    var data=queryDelicious.deliciousLinks;
    var dTMap=[];
    $.each(data, function(index, obj) {
        var dTObj = {};
        dTObj.description=obj.d;
        dTObj.url=obj.u;
        dTObj.tags=obj.t;
        dTMap.push(dTObj);
    });
    return dTMap;
};
</code></pre>
<p>This is valid JavaScript, and it performs reasonably well. However, it is:</p>
<ul>
<li>Not what I&#39;m asking for in this assignment</li>
<li>Not an example of functional programming. We want to tell the compiler what to do, not how to do it. We just tell the compiler: <strong>map</strong>. We never really define how the map should be made. That is a difference between functional and imperative programming.</li>
</ul>
<p>The &quot;correct&quot; way to handle this map is shown above, in the section on <strong>Tag Maps</strong>.</p>
<h2 id="handling-filters">Handling Filters</h2>
<p>Don&#39;t forget to read the hint on handling filters:</p>
<ul>
<li><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/DeliciousQuery.html#working-with-filters">Handling Filters</a></li>
</ul>
<h2 id="calling-filters">Calling Filters</h2>
<p>When you call the filter method, make sure that the signature of the call matches the signature of your method. For instance, here is a typical declaration for the filter method:</p>
<pre><code class="lang-javascript">filter: function(map, filter) { &#39;use strict&#39;;
</code></pre>
<p>And here is a call to <strong>filter</strong>:</p>
<pre><code class="lang-javascript">var map = queryDelicious.filter();
</code></pre>
<p>Clearly this latter call is going to fail since we are not passing in an parameters. A correct call might look like this:</p>
<pre><code class="lang-javascript">var map = queryDelicious.getDescriptionTag();
var filter = queryDelicious.filter(map, &#39;nodejs&#39;);
</code></pre>
</div></body></html>