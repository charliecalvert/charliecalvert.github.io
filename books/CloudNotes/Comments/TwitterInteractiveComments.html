<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>TwitterInteractiveComments</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body ng-app="elfApp"><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>TwitterInteractiveComments</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#twitter-interactive-comments">Twitter Interactive Comments</a></li>
<li><a href="#iterate">Use jQuery Each to Iterate</a></li>
<li><a href="#test-urls">Test for URLS</a></li>
<li><a href="#branch-on-url-state">Branch On URL State</a></li>
<li><a href="#format-jade">Format Jade</a></li><!--TOC_End--></ul><h1 id="twitter-interactive-comments">Twitter Interactive Comments</h1>
<p>Notes for students by Charlie Calvert</p>
<h2 id="iterate">Use jQuery Each to Iterate</h2>
<p>Don&#39;t forget to iterate over the records you get back from Twitter:</p>
<pre><code class="lang-javascript">$.getJSON('/search', function(<span class="hljs-literal">result</span>) {
    $('<span class="hljs-comment">#tweetData').html(JSON.stringify(result, null, 4));</span>
    $.each(<span class="hljs-literal">result</span>.statuses, function(index, tweet) {
        // <span class="hljs-type">Branching</span> <span class="hljs-keyword">in</span> here, <span class="hljs-keyword">as</span> described below.
    });
});
</code></pre>
<p>In this case, the array we want to iterate over is called <strong>result.statuses</strong>. This is an array of objects. We can iterate over it with the jQuery <a href="http://api.jquery.com/jquery.each/">each method</a>.</p>
<h2 id="test-urls">Test for URLS</h2>
<p>We need to detect if a Twitter record contains a URL, and to branch one way if it does, and another way if it does not.</p>
<p>If you do not test to see if there are any items in the urls array, then you might get the following error:</p>
<pre><code>Uncaught TypeError: Cannot <span class="hljs-operator">read</span> <span class="hljs-keyword">property</span><span class="hljs-title"> </span>'url' of undefined
</code></pre><p>Part of the fix is test if there are any items in the array:</p>
<pre><code class="lang-javascript"><span class="hljs-tag">if</span>(<span class="hljs-tag">tweet</span><span class="hljs-class">.entities</span><span class="hljs-class">.urls</span><span class="hljs-class">.length</span> &gt; 0)
</code></pre>
<h2 id="branch-on-url-state">Branch On URL State</h2>
<p>Now let&#39;s talk about how to properly branch after you have detected the status of the <strong>urls</strong> array. Some students wrote code like this:</p>
<pre><code class="lang-javascript"> $.each(<span class="hljs-literal">result</span>.statuses, function(index, tweet) {
    console.log(tweet);
    appendUrl('<span class="hljs-comment">#tweetList', index, tweet.text, tweet.entities.urls[0].url);</span>
    renderTable(tweet.text, tweet.user.name);
});
</code></pre>
<p>This won&#39;t work because it contains no test to see if there are items in the <strong>urls</strong> array. As result, it can through the <strong>url of undefined</strong> error shown above.</p>
<p>Some students wrote code like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span>(tweet.<span class="hljs-built_in">entities</span>.urls.length &gt; <span class="hljs-number">0</span>)
{
appendUrl(<span class="hljs-string">'#tweetList'</span>, index, tweet.<span class="hljs-built_in">text</span>, tweet.<span class="hljs-built_in">entities</span>.urls[<span class="hljs-number">0</span>].url);
}
renderTable(tweet.<span class="hljs-built_in">text</span>, tweet.user.<span class="hljs-built_in">name</span>);
</code></pre>
<p>This code is not properly formated. It should look like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span>(tweet.<span class="hljs-built_in">entities</span>.urls.length &gt; <span class="hljs-number">0</span>) {
    appendUrl(<span class="hljs-string">'#tweetList'</span>, index, tweet.<span class="hljs-built_in">text</span>, tweet.<span class="hljs-built_in">entities</span>.urls[<span class="hljs-number">0</span>].url);
}
renderTable(tweet.<span class="hljs-built_in">text</span>, tweet.user.<span class="hljs-built_in">name</span>);
</code></pre>
<p>The curly brace was on the wrong line, and the <strong>appendUrl</strong> method was not properly indented. These types of formatting errors are dangerous. Without properly it can be hard to see the primary problem here, which is that the <strong>renderTable</strong> method is outside of any branch of the <strong>if</strong> statement.</p>
<p>Before seeing the solution, remember that our code should add the tweet text:</p>
<ul>
<li>to the list as a hyperlink if it has a Url</li>
</ul>
<p>If it does not have a url, it should add it:</p>
<ul>
<li>to the list but without a hyperlink</li>
<li>To the table</li>
</ul>
<p><strong>NOTE</strong>: <em>I&#39;ll accept other solutions, so long as you make some clear distinction between links with a URL those without a URL.</em></p>
<p>One solution looks like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span> (tweet.entities.urls.length &gt; <span class="hljs-number">0</span>) {
    appendUrl(<span class="hljs-string">'#tweetList'</span>, index, tweet.<span class="hljs-keyword">text</span>, tweet.entities.urls[<span class="hljs-number">0</span>].url);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-variable">$(</span><span class="hljs-string">'#tweetList'</span>).append(<span class="hljs-string">'&lt;li&gt;'</span> + tweet.<span class="hljs-keyword">text</span> + <span class="hljs-string">'&lt;/li&gt;'</span>);
    renderTable(tweet.<span class="hljs-keyword">text</span>, tweet.user.name);
}
</code></pre>
<p>Here we append the url and a hyperlink to the list if the url exists. If there is no url, then we add it to the list, but without a hyperlink. We also add it to the table.</p>
<h2 id="format-jade">Format Jade</h2>
<p>Some people had trouble properly formatting their Jade. Here is a correctly formatted file:</p>
<pre><code class="lang-jade">extends layout
<span class="hljs-built_in">include</span> mixin-inputs
<span class="hljs-built_in">include</span> mixin-radios
<span class="hljs-built_in">include</span> mixin-buttons
<span class="hljs-built_in">include</span> mixins

block content
    h1= title
    p Welcome <span class="hljs-built_in">to</span> <span class="hljs-comment">#{title}</span>

    +elfPanel(<span class="hljs-string">"Tweets Table"</span>).elfDiv
        <span class="hljs-operator">div</span>.scroller
            table.table<span class="hljs-comment">#tableLinks</span>

    +elfPanel(<span class="hljs-string">"Debug"</span>, <span class="hljs-string">"panel-default"</span>).elfDiv
        button.btn.btn-default<span class="hljs-comment">#getTweets(type='button') Get Tweets</span>
        button.btn.btn-default<span class="hljs-comment">#search(type='button') Search</span>

    <span class="hljs-operator">div</span>
        ul<span class="hljs-comment">#tweetList</span>
    <span class="hljs-operator">div</span>
        pre<span class="hljs-comment">#tweetData</span>
</code></pre>
<p>Indentation is crucial in Jade. You usually start with no indent, and then work in from there. First level has one tab, the second two tabs, and so on. The number of spaces for a tab is up to you. It can 2, 3 or 4 spaces. Or use tabs. You have lots of choices, but you must be consistent. In one of our earlier assignments I detailed how to view tabs and spaces in various editors.</p>
</div></body></html>