<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ConvertJsonToFieldDefinitions</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>ConvertJsonToFieldDefinitions</h1><p>Welcome to ConvertJsonToFieldDefinitions</p><ul><!--TOC_Start--><li><a href="#convert-json-to-field-definitions">Convert JSON to Field Definitions</a></li>
<li><a href="#get-copy-of-json">Get Copy of JSON</a></li>
<li><a href="#debug-logger">Debug Logger</a></li>
<li><a href="#promises">Promises</a></li>
<li><a href="#create-output">Create output</a></li>
<li><a href="#why-output-text">Why output text</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="convert-json-to-field-definitions"></a>
<h1>Convert JSON to Field Definitions</h1>
<p>This program can, and probably should, be written in ES5. Put in a directory called <strong>git-convert</strong> that is part of the <strong>GitExplorer</strong> project. In short, you will have three directories in the root of the project:</p>
<ul>
<li>client</li>
<li>git-convert</li>
<li>server</li>
</ul>
<p>The goal is to convert the <strong>git-user.json</strong> file that we get from GitHub into one of our <strong>field-definitions</strong>.</p>
<a class="anchor" id="get-copy-of-json"></a>
<h2>Get Copy of JSON</h2>
<p>First, get the JSON:</p>
<pre>curl https://api.github.com/users/charliecalvert > git-user.json
</pre>
<p>The file &#39;git-user.json&#39; contains the JSON you will be working with. You will need to load this with <strong>fs.readFile</strong>, as described below.</p>
<a class="anchor" id="debug-logger"></a>
<h2>Debug Logger</h2>
<p>If at all possible, use the <a href="https://www.npmjs.com/package/debug">debug</a> package for logging. You will run <strong>npm init</strong> to create <strong>package.json</strong> and then add the <strong>debug</strong> module to it:</p>
<pre>npm install debug --save
</pre>
<p>And in your code:</p>
<pre>var debug = require('debug')('git-convert');
debug('this is a test');
</pre>
<p>At the command line, say that you want to see debug messages for <strong>git-convert</strong>:</p>
<pre>export DEBUG='git-convert'
</pre>
<p>Now run your program and you should see: <strong>git-convert this is a test +Xms</strong></p>
<p>Now at the command line turn logging off:</p>
<pre>export DEBUG=
</pre>
<p>Which set DEBUG to nothing, which makes our logging statements go away. You can achieve the same effect by setting DEBUG to anything but <strong>git-convert</strong>.</p>
<p>Except at the very end, to output your final result, don&#39;t use <strong>console.log</strong>. Instead, use the debug module in at least 3 places.</p>
<p>You can read more here, but for now you need go no further than example shown above. You need not turn on any special features.:</p>
<ul>
<li><a href="https://www.npmjs.com/package/debug">DEBUG on NPM</a></li>
</ul>
<p>I&#39;ll accept your assignment with <strong>console.log</strong> instead of <strong>debug</strong>, but it will cost 3 points.</p>
<a class="anchor" id="promises"></a>
<h2>Promises</h2>
<p>If at all possible, use a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a> when reading the JSON file you created with your call to <strong>curl</strong>:</p>
<pre>var fs=require("fs");

function readFile(fileName) {
    return new Promise(function(resolve, reject) {
        fs.readFile( /*YOUR CODE HERE*/ );
    });
}

readFile('git-user.json').then(function(text) {
    // CODE OMITTED. This is where you solve the core of the assignment.
});
</pre>
<p><strong>NOTE</strong>: <em>Don&#39;t get intimidated by promises. They are really quite easy to use. And I know we have not covered them in any depth this quarter or last, but I want to see if you can figure it out on your own.</em></p>
<p>I&#39;ll accept it without the promise, but it will cost 3 points. In other words, if you just call <strong>fs.readFile</strong> with a callback instead of <strong>.then</strong> chained method, that will be okay, sort of.</p>
<a class="anchor" id="create-output"></a>
<h2>Create output</h2>
<p>You will need to iterate over the contents of the GitHub JSON file you load from disk. Remember that you are reading a text file, and JSON is an object, not a string. So you will have to do some conversion.</p>
<p>Then you will need to iterate over your JSON. In ES5, this is an appropriate way to get started:</p>
<pre>for (var property in json) {
    if (json.hasOwnProperty(property)) {
      // YOUR WORK HERE
    }
}
console.log( /* LOG YOUR ARRAY OF OBJECTS */)
</pre>
<p>You&#39;ll need an array. Create some objects, each shaped like one entry in our <strong>field-definitions</strong> file.  Push the object into the array.</p>
<p>Sample output might look something like this. Make sure it is valid JSON. (Go to Google or similar and search on &quot;json validator&quot;):</p>
<pre>[
    {
        "id": "login",
        "label": "login-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "id",
        "label": "id-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "avatar_url",
        "label": "avatar_url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "gravatar_id",
        "label": "gravatar_id-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "url",
        "label": "url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "html_url",
        "label": "html_url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "followers_url",
        "label": "followers_url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "following_url",
        "label": "following_url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "gists_url",
        "label": "gists_url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "starred_url",
        "label": "starred_url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "subscriptions_url",
        "label": "subscriptions_url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "organizations_url",
        "label": "organizations_url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "repos_url",
        "label": "repos_url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "events_url",
        "label": "events_url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "received_events_url",
        "label": "received_events_url-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "type",
        "label": "type-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "site_admin",
        "label": "site_admin-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "name",
        "label": "name-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "company",
        "label": "company-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "blog",
        "label": "blog-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "location",
        "label": "location-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "email",
        "label": "email-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "hireable",
        "label": "hireable-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "bio",
        "label": "bio-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "public_repos",
        "label": "public_repos-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "public_gists",
        "label": "public_gists-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "followers",
        "label": "followers-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "following",
        "label": "following-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "created_at",
        "label": "created_at-name",
        "type": "paragraph",
        "sample": "login-unknown"
    },
    {
        "id": "updated_at",
        "label": "updated_at-name",
        "type": "paragraph",
        "sample": "login-unknown"
    }
]
</pre>
<a class="anchor" id="why-output-text"></a>
<h2>Why output text</h2>
<p>Why do I have the program output text? Because this is the Linux way of doing things.</p>
<pre>npm start > 'field-definitions.js'
</pre>
<p>All I really care about at this time is that you create the proper set of fields, as shown above. We can tweak the structure of <strong>field-definitsion.js</strong> to make it usable in our program at a later date.</p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>I want to be able to pull your project, navigate to the <strong>GitExplorer/git-convert</strong> folder, and then run the following command:</p>
<pre>npm start
</pre>
<p>I will expect to see the array of objects shown above or something much like it. For now, all the fields can be of type <strong>paragraph</strong>. Or what have you. Just give me something that looks more or less like the above, and I&#39;ll be happy. I hope.</p>
</div></body></html>