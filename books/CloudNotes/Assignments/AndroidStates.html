<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>AndroidStates</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>AndroidStates</h1><p>Welcome to AndroidStates</p><ul><!--TOC_Start--><li><a href="#getting-started">Getting Started</a></li>
<li><a href="#don-t-check-in-the-platform-directory">Don&#39;t Check in the platform Directory</a></li>
<li><a href="#no-access-control">No access control</a></li><!--TOC_End--></ul></div><div class="container"><p>#Mobile State Population</p>
<p>The goal is to query the census bureau about state populations. Create a web that does this. Then create an Cordova based mobile app that does that same thing.</p>
<a class="anchor" id="getting-started"></a>
<h2>Getting Started</h2>
<p>You need to <a href="http://www.census.gov/data/developers/data-sets.html">get a key</a> from the US Census bureau. </p>
<p>Deck with at least a few notes on US Census: <a href="http://bit.ly/elven-programmable-web">http://bit.ly/elven-programmable-web</a></p>
<p>I want you to turn in two projects:</p>
<ul>
<li>Week04-StatePopulation (A web app)</li>
<li>Week04-MobileStatePopulation (Essentially the same app, but on a mobile device with Cordova)</li>
</ul>
<p>Watch the video: <a href="http://youtu.be/VFb4cn7Bg5Q">http://youtu.be/VFb4cn7Bg5Q</a></p>
<a class="anchor" id="don-t-check-in-the-platform-directory"></a>
<h2>Don&#39;t Check in the platform Directory</h2>
<p>Before turning in the Cordova project, be sure to add <strong>platforms</strong> to your <strong>.gitignore</strong> file. When you type <strong>cordova platform add android</strong>, a number of big files get placed in the <strong>platforms/android</strong> directory. Before you issued the command, the platforms directory should be empty. Just to be sure we don&#39;t check in any platform specific code, let&#39;s omit the whole <strong>platforms</strong> folder, which I can easily recreate on my side.</p>
<p>To be sure everything is working out correctly, after you add <strong>platforms</strong> to your <strong>.gitignore</strong> file, go ahead and add everything in your project:</p>
<pre><code>git <span class="hljs-keyword">add</span><span class="bash"> .</span>
</code></pre><p>Now check your status:</p>
<pre><code><span class="hljs-attribute">git status</span>
</code></pre><p>If you see that somehow <strong>platforms</strong> is being added to your check in, you can easily undo the <strong>add</strong> like this:</p>
<pre><code><span class="hljs-attribute">git reset platforms</span>
</code></pre><p>The actual path to your <strong>platforms</strong> directory may differ. For instance, it might look like this:</p>
<pre><code>git <span class="hljs-built_in">reset</span> Cordova01/platforms
</code></pre><p>Or what have you. The point is that it is easy to undo a <strong>git add</strong>. Now fiddle with your <strong>.gitignore</strong> file and try again. Please try to avoid checking in the <strong>platforms</strong> folder. </p>
<p>##Hints</p>
<p>I was able to start the web app from WebStorm by right clicking my HTML file in the <strong>Project</strong> window at the left of the IDE. I chose <strong>run</strong> from the menu.</p>
<p>The <strong>package.json</strong> file, with a few fields you should change to mark your own repository and homepage.</p>
<pre><code>{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"StatePopulation"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Query the Census Bureau"</span>,
  <span class="hljs-attr">"main"</span>: <span class="hljs-string">"index.js"</span>,
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"mocha --watch Test"</span>
  },
  <span class="hljs-attr">"repository"</span>: {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"git"</span>,
    <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://git@github.com/charliecalvert/JsObjects.git"</span>
  },
  <span class="hljs-attr">"keywords"</span>: [
    <span class="hljs-string">"javascript"</span>
  ],
  <span class="hljs-attr">"author"</span>: <span class="hljs-string">"Charlie Calvert"</span>,
  <span class="hljs-attr">"license"</span>: <span class="hljs-string">"MIT"</span>,
  <span class="hljs-attr">"bugs"</span>: {
    <span class="hljs-attr">"url"</span>: <span class="hljs-string">"https://github.com/charliecalvert/JsObjects/issues"</span>
  },
  <span class="hljs-attr">"homepage"</span>: <span class="hljs-string">"http://www.elvenware.com/charlie"</span>,
  <span class="hljs-attr">"devDependencies"</span>: {
    <span class="hljs-attr">"mocha"</span>: <span class="hljs-string">"^2.1.0"</span>,
    <span class="hljs-attr">"chai"</span>: <span class="hljs-string">"^1.10.0"</span>,
    <span class="hljs-attr">"grunt"</span>: <span class="hljs-string">"^0.4.5"</span>,
    <span class="hljs-attr">"grunt-contrib-clean"</span>: <span class="hljs-string">"~0.6.0"</span>,
    <span class="hljs-attr">"grunt-contrib-compress"</span>: <span class="hljs-string">"~0.13.0"</span>,
    <span class="hljs-attr">"grunt-contrib-copy"</span>: <span class="hljs-string">"~0.7.0"</span>,
    <span class="hljs-attr">"grunt-contrib-jshint"</span>: <span class="hljs-string">"~0.10.0"</span>
  }
}
</code></pre><p>There is nothing new about the call to \$.ajax:</p>
<pre><code><span class="hljs-string">$.ajax({</span>
<span class="hljs-attr">     type:</span> <span class="hljs-string">'GET'</span><span class="hljs-string">,</span>
<span class="hljs-attr">     url:</span> <span class="hljs-string">queryUrl,</span>
<span class="hljs-attr">     success:</span> <span class="hljs-string">successFunc,</span>
<span class="hljs-attr">     error:</span> <span class="hljs-string">errorFunc</span>
<span class="hljs-string">});</span>
</code></pre><p>For a bit I thought that turning off caching might help (<strong>cache: false</strong>). However, this seems to break my queries, so don&#39;t use that option.</p>
<p>How to create the URL you pass in when calling \$.ajax:</p>
<pre><code class="lang-JavaScript"><span class="hljs-attribute">params</span> = <span class="hljs-string">"&amp;for=state:"</span> + $(<span class="hljs-string">"#statePick option:selected"</span>).attr(<span class="hljs-string">'data_index'</span>);
<span class="hljs-attribute">var queryUrl</span> = <span class="hljs-string">"http://api.census.gov/data/2010/sf1?key="</span> + myKey + <span class="hljs-string">"&amp;get=P0010001,NAME"</span> + params;
</code></pre>
<p>The select code:</p>
<pre><code>&lt;<span class="hljs-keyword">select</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"01"</span>&gt;Alabama&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"02"</span>&gt;Alaska&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"04"</span>&gt;Arizona&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"05"</span>&gt;Arkansas&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"06"</span>&gt;California&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"08"</span>&gt;Colorado&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"09"</span>&gt;Connecticut&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"10"</span>&gt;Delaware&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"11"</span>&gt;District <span class="hljs-keyword">of</span> Columbia&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"12"</span>&gt;Florida&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"13"</span>&gt;Georgia&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"15"</span>&gt;Hawaii&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"16"</span>&gt;Idaho&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"17"</span>&gt;Illinois&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"18"</span>&gt;Indiana&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"19"</span>&gt;Iowa&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"20"</span>&gt;Kansas&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"21"</span>&gt;Kentucky&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"22"</span>&gt;Louisiana&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"23"</span>&gt;Maine&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"24"</span>&gt;Maryland&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"25"</span>&gt;Massachusetts&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"26"</span>&gt;Michigan&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"27"</span>&gt;Minnesota&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"28"</span>&gt;Mississippi&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"29"</span>&gt;Missouri&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"30"</span>&gt;Montana&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"31"</span>&gt;Nebraska&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"32"</span>&gt;Nevada&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"33"</span>&gt;<span class="hljs-keyword">New</span> Hampshire&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"34"</span>&gt;<span class="hljs-keyword">New</span> Jersey&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"35"</span>&gt;<span class="hljs-keyword">New</span> Mexico&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"36"</span>&gt;<span class="hljs-keyword">New</span> York&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"37"</span>&gt;North Carolina&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"38"</span>&gt;North Dakota&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"39"</span>&gt;Ohio&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"40"</span>&gt;Oklahoma&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"41"</span>&gt;Oregon&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"42"</span>&gt;Pennsylvania&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"44"</span>&gt;Rhode Island&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"45"</span>&gt;South Carolina&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"46"</span>&gt;South Dakota&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"47"</span>&gt;Tennessee&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"48"</span>&gt;Texas&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"49"</span>&gt;Utah&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"50"</span>&gt;Vermont&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"51"</span>&gt;Virginia&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"53"</span>&gt;Washington&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"54"</span>&gt;West Virginia&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"55"</span>&gt;Wisconsin&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"56"</span>&gt;Wyoming&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> data_index=<span class="hljs-string">"72"</span>&gt;Puerto Rico&lt;/<span class="hljs-keyword">option</span>&gt;
&lt;/<span class="hljs-keyword">select</span>&gt;
</code></pre><p>And this one:</p>
<pre><code>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"populationPick"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">data_index</span>=<span class="hljs-string">"P0010001"</span>&gt;</span>total<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">data_index</span>=<span class="hljs-string">"P0080003"</span>&gt;</span>whites<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">data_index</span>=<span class="hljs-string">"P0080004"</span>&gt;</span>blacks<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">data_index</span>=<span class="hljs-string">"P0080006"</span>&gt;</span>asians<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">data_index</span>=<span class="hljs-string">"H00010001"</span>&gt;</span>house_units<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">data_index</span>=<span class="hljs-string">"H0100001"</span>&gt;</span>occupied_house<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre><a class="anchor" id="no-access-control"></a>
<h2>No access control</h2>
<p>You might get an error message like this:</p>
<pre><code> XMLHttpRequest cannot <span class="hljs-keyword">load</span> <span class="hljs-keyword">http</span>://api.census.gov/<span class="hljs-keyword">data</span>/<span class="hljs-number">2010</span>/sf1?<span class="hljs-keyword">key</span>=f2be9166735a2e23ac561c42ebcec7dfecaafc44&amp;<span class="hljs-keyword">get</span>=P0010001,<span class="hljs-keyword">NAME</span>&amp;<span class="hljs-keyword">for</span>=state:<span class="hljs-number">01</span>&amp;_=<span class="hljs-number">1422639787489.</span> <span class="hljs-keyword">No</span> <span class="hljs-string">'Access-Control-Allow-Origin'</span> header <span class="hljs-keyword">is</span> <span class="hljs-keyword">present</span> <span class="hljs-keyword">on</span> the requested resource. Origin <span class="hljs-string">'http://localhost:63342'</span> <span class="hljs-keyword">is</span> therefore <span class="hljs-keyword">not</span> allowed access. The response had <span class="hljs-keyword">HTTP</span> <span class="hljs-keyword">status</span> code <span class="hljs-number">400.</span>
</code></pre><p>This makes it look like we are getting cross domain error. But that is not the case. For me, this error usually just means that I have some syntax error in my program. When I fix the syntax error, then the message shown above goes away. We will probably be able to avoid this mess altogether if we create the mock (httpbackend) tests in jasmine.</p>
<p>##Turn it in</p>
<p>Submit both projects and a screen shot of your application running in a VirtualBox AndroidX86, or on your phone, or both. Feel free to add a bit of CSS to make it more interesting.</p>
<p><img src="https://drive.google.com/uc?export=view&amp;id=0B25UTAlOfPRGN1JZZE1FYlEwUlk" alt="AndroidStates"></p>
<p>Here is what the web app looks like, at least on my system:</p>
<p><img src="https://drive.google.com/uc?export=view&amp;id=0B25UTAlOfPRGMWtPeDAyMXI5djA" alt="WebApp"></p>
</div></body></html>