<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>AngularMongoDbStarter</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><script src="/libs/scripts/jquery.min.js"></script><script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/index.html" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/contents.html">About</a></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>AngularMongoDbStarter</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#angular-mongodb-starter">Angular MongoDb Starter</a></li>
<li><a href="#step-one">Step One</a></li>
<li><a href="#step-two">Step Two</a></li>
<li><a href="#step-three">Step Three</a></li>
<li><a href="#step-four">Step Four</a></li>
<li><a href="#step-four">Step Four</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul><h1 id="angular-mongodb-starter">Angular MongoDb Starter</h1>
<p>Use Angular and MongoDb in a single express project.</p>
<p>The image shown below shows the first row in the database as it is displayed by the angular ng-repeat loop. At this point there is only one document in the collection, so <strong>Rows in DB</strong> count is set to <strong>1</strong>, and there is only one list item with three fields. Below it are a series of input fields containing the data from the first record.</p>
<p><img src="https://drive.google.com/uc?id=0B25UTAlOfPRGRUZ4REF1ZGY5b1E" alt="Angular MongoDb Starter"></p>
<p>In this version of this app, the Add President button does not work, neither do the Delete or Update buttons. Later, we will use CSS to format the buttons and the fields in this page, but for now, they are just arranged more or less as we declare them in the raw Jade file.</p>
<h2 id="step-one">Step One</h2>
<pre><code>express Week04-AngularMongoStart
cd Week04-AngularMongoStart
npm install
bower init
</code></pre><p>Create a .bowerrc:</p>
<pre><code>{
  &quot;directory&quot;: &quot;public/components&quot;
}
</code></pre><p>Add the following bower packages:</p>
<pre><code>bower install angular --save
bower install angular-mocks --save
bower install angular-resource --save
bower install bootstrap --save
bower install jquery --save
</code></pre><p>Use <strong>nodemon</strong> and start on port 30025. In <strong>routes/index.js</strong> set the title to <strong>AngularMongoDbStarter</strong>.</p>
<h2 id="step-two">Step Two</h2>
<p>Link in angular and bootstrap. In <strong>layout.jade</strong>:</p>
<pre><code>    // Latest compiled and minified CSS
    link(rel=&#39;stylesheet&#39;, href=&#39;components/bootstrap/dist/css/bootstrap.min.css&#39;)
    // Optional theme
    link(rel=&#39;stylesheet&#39;, href=&#39;components/bootstrap/dist/css/bootstrap-theme.min.css&#39;)
    // JavaScript
    script(src=&#39;components/jquery/dist/jquery.js&#39;)
    script(src=&#39;components/bootstrap/dist/js/bootstrap.min.js&#39;)
    script(src=&#39;components/angular/angular.js&#39;)
    script(src=&#39;components/angular-resource/angular-resource.js&#39;)

body(ng-app=&#39;elvenApp&#39;)
</code></pre><h2 id="step-three">Step Three</h2>
<p>Put the data in the database</p>
<ul>
<li>Create an account on MongoLab<ul>
<li>Your account credentials are not going to be your database credentials</li>
</ul>
</li>
<li>Create a database called prog219-lastname<ul>
<li>Amazon | Single Node | Sandbox | Free</li>
</ul>
</li>
<li>Create a user by clicking on the database<ul>
<li>Create a username and password and give yourself read write</li>
</ul>
</li>
<li>Create a collection called <strong>scientists</strong><ul>
<li>Add a document</li>
</ul>
</li>
<li>Go back to database page and get your URI<ul>
<li>mongodb://<dbuser>:<dbpassword>@ds031832.mongolab.com:31832/prog219-calvert</dbpassword></dbuser></li>
</ul>
</li>
</ul>
<p>Your document:</p>
<pre><code>{
    &quot;firstName&quot;: &quot;Marie&quot;,
    &quot;lastName&quot;: &quot;Curie&quot;,
    &quot;city&quot;: &quot;Paris&quot;,
    &quot;country&quot;: &quot;France&quot;,
    &quot;subject&quot;: &quot;radiation&quot;
}
</code></pre><h2 id="step-four">Step Four</h2>
<p>Add this to the bottom of index.jade:</p>
<pre><code>  #monogoData(ng-controller=&#39;MyController&#39;)
    p This project retrieves data from a Mongo DB Server.
    button(ng-click=&#39;loadPresidents()&#39;) Load President Data
    br
    .inputDiv
      p Rows in DB: {{presidentsLength}}
      ul
        li(ng-repeat=&#39;scientist in scientists&#39;)
          p
          | FirstName: {{scientist.firstName}}
          br
          | LastName: {{scientist.lastName}}
          br
          | Subject: {{scientist.subject}}
      div(ng-bind-html-unsafe=&#39;hint&#39;)
    .inputDiv
      input(type=&#39;text&#39;, ng-model=&#39;firstName&#39;)
      input(type=&#39;text&#39;, ng-model=&#39;lastName&#39;, placeholder=&#39;termStart&#39;)
      input(type=&#39;text&#39;, ng-model=&#39;subject&#39;, placeholder=&#39;termEnd&#39;)
      button(ng-click=&#39;newPresident()&#39;) Add President
      hr
      input(type=&#39;number&#39;, ng-change=&#39;indexChange()&#39;, ng-model=&#39;indexOfItemToDelete&#39;, min=&#39;0&#39;, max=&#39;{{presidentsLength-1}}&#39;)
      button(ng-click=&#39;deleteRow()&#39;) Delete
      button(ng-click=&#39;updateRow()&#39;) Update
      p {{selectedIndex}}
</code></pre><h2 id="step-four">Step Four</h2>
<p>Create the angular modules that will query and display the database.</p>
<pre><code>/**
 * Created by charlie on 4/29/2015.
 */

angular.module(&#39;pres&#39;, [&#39;ngResource&#39;])
    .constant(&#39;CONFIG&#39;, {
        DB_NAME: &#39;prog219-lastname&#39;,
        COLLECTION: &#39;scientists&#39;,
        API_KEY: &#39;&lt;YOUR_KEY&gt;&#39;
    })
    .factory(&#39;scientists&#39;, function ($resource, CONFIG) {
        console.log(&#39;Scientists factory called&#39;);
        var scientists = $resource(
            &#39;https://api.mongolab.com/api/1/databases/&#39; + CONFIG.DB_NAME +
            &#39;/collections/&#39; + CONFIG.COLLECTION + &#39;/:id&#39;, {
                apiKey: CONFIG.API_KEY
            },
            {
                update: {method: &#39;PUT&#39;}
            });

        scientists.prototype.getFirstName = function () {
            return this.firstName;
        };

        scientists.prototype.getLastName = function () {
            return this.lastName;
        };

        scientists.prototype.getSubject = function () {
            return this.subject;
        };

        return scientists;
    });
</code></pre><p>and in mongodb: </p>
<pre><code>angular.module(&#39;elvenApp&#39;, [&#39;pres&#39;])
    .controller(&#39;MyController&#39;, function($scope, $http, scientists) {
        $scope.hint = &quot;&lt;p&gt;Start with &lt;strong&gt;node server.js&lt;/strong&gt; to retrieve JSON from Server&lt;/p&gt;&quot;;

        $scope.loadPresidents = function() {
            $scope.scientists = scientists.query({}, function(scientists) {
                $scope.presidentsLength = scientists.length;
                $scope.firstName = scientists[0].firstName;
                $scope.lastName = scientists[0].lastName;
                console.log(scientists[0].firstName);
                console.log(scientists[0].lastName);
                console.log(scientists[0].getFirstName());
            });
        };
    });
</code></pre><p>And then add to <strong>layout.jade</strong>:</p>
<pre><code>script(src=&#39;javascripts/resources.js&#39;)
script(src=&#39;javascripts/control.js&#39;)
</code></pre><p>Your api key is on your Account page near the very bottom. It does
not look like a URI. Rather it looks like a long string of meaningless
numbers and letters. Though much shorter, it looks a bit like the keys 
in an SSH file.</p>
<h2 id="turn-it-in">Turn it in</h2>
<p>Put the folder in your repository and check it in. Include the URI of your repository and the name of the folder your used. </p>
</div></body></html>