<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>SystemCheck</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>SystemCheck</h1><p>Welcome to SystemCheck</p><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#get-started">Get Started</a></li>
<li><a href="#ct01">Commit and Tag Part I</a></li>
<li><a href="#set-up-systemd">Set up systemd</a></li>
<li><a href="#ct02">Commit and Tag Part II</a></li>
<li><a href="#install-eslint">Install EsLint</a></li>
<li><a href="#setup-script-running">Setup Script Running</a></li>
<li><a href="#call-the-server-from-the-client">Call the Server from the Client</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="overview"></a>
<h2>Overview</h2>
<p>Create a program that will allow us to check various system services by running scripts.</p>
<p>This program should be setup as a service running on port 30032</p>
<a class="anchor" id="get-started"></a>
<h2>Get Started</h2>
<pre><code>    <span class="hljs-built_in">mkdir</span> week06-<span class="hljs-built_in">system</span>-check
    <span class="hljs-keyword">cd</span> week06-<span class="hljs-built_in">system</span>-check/
    <span class="hljs-built_in">get</span>-gist
</code></pre><p>Run the <strong>Create Concurrently</strong> option and then exit <strong>get-gist</strong>.</p>
<p>Run <strong>./elf-concur</strong> to create the server and client. When prompted, choose <strong>s</strong> for server.</p>
<p>After <strong>elf-concur</strong> completes, immediately, before doing anything else, go on to the <em>Commit and Tag Part I</em> step. Complete that step before doing anything else.</p>
<a class="anchor" id="ct01"></a>
<h2>Commit and Tag Part I</h2>
<p>Immediately after <strong>elf-concur</strong> completes, commit and tag your work.</p>
<p>Use exactly this commit message: &quot;Finished elf-concur for SystemCheck.&quot;</p>
<p>Then tag your work, following this template as closely as possible:</p>
<pre><code>    git <span class="hljs-keyword">tag</span> <span class="hljs-title">-a</span> vXXX -m <span class="hljs-string">"Finished elf-concur for SystemCheck on branch &lt;BRANCH_NAME&gt;."</span>
</code></pre><p>I don&#39;t care what the version number for your tag is, but specify the name of the branch where you are working in the appropriate place.</p>
<p><strong>NOTE</strong>: <em>It&#39;s probably clear that I want to be able to confirm that you are starting your project from scratch. This is an important part of this process, so be sure to commit and tag your work as described above.</em></p>
<a class="anchor" id="set-up-systemd"></a>
<h2>Set up systemd</h2>
<p>Before doing anything else, let&#39;s set up systemd.</p>
<p>Run <strong>get-gist</strong> and select &quot;Elven Node systemd Tools&quot; or similar from the menu.</p>
<p>Edit the setup-environment file:</p>
<pre><code>    <span class="hljs-builtin-name">export</span> <span class="hljs-attribute">SYSTEMD_PROJECT_NAME</span>=<span class="hljs-string">"systemcheck"</span>
    <span class="hljs-builtin-name">export</span> <span class="hljs-attribute">SYSTEMD_DESCRIPTION</span>=<span class="hljs-string">"System Check Service"</span>
    <span class="hljs-builtin-name">export</span> <span class="hljs-attribute">SYSTEMD_PORT</span>=<span class="hljs-string">"SERVER_PORT=30033"</span>
</code></pre><p>Run the code:</p>
<pre><code>    source <span class="hljs-built_in">setup</span>-environment-service
    ./<span class="hljs-built_in">run</span>-<span class="hljs-built_in">setup</span>-service
</code></pre><p>Check to make sure your service is running by browsing to <strong>localhost:30033</strong>.</p>
<p>After completing this step, immediately, before doing anything else, go on to the <em>Commit and Tag Part II</em> step. Complete that step before doing anything else.</p>
<a class="anchor" id="ct02"></a>
<h2>Commit and Tag Part II</h2>
<p>Immediately after setting up systemd commit and tag your work.</p>
<p>Use exactly this commit message: &quot;Finished systemd for SystemCheck.&quot;</p>
<p>Then tag your work, following this template as closely as possible:</p>
<pre><code>    git <span class="hljs-keyword">tag</span> <span class="hljs-title">-a</span> vXXX -m <span class="hljs-string">"Finished systemd for SystemCheck on branch &lt;BRANCH_NAME&gt;."</span>
</code></pre><p>I don&#39;t care what the version number for your tag is, but specify the name of the branch where you are working in the appropriate place.</p>
<p><strong>NOTE</strong>: <em>This is an important part of this process, so be sure to commit and tag your work as described above.</em></p>
<a class="anchor" id="install-eslint"></a>
<h2>Install EsLint</h2>
<p>Close WebStorm temporarily. Run the following</p>
<pre><code>    npm <span class="hljs-keyword">install </span>-g eslint <span class="hljs-keyword">babel-eslint </span>eslint-plugin-react prettier
</code></pre><p>Now run <strong>get-gist</strong> and select the first item, that sets up <strong>eslint</strong> and <strong>prettier</strong>.</p>
<p>Run prettier in both client and server:</p>
<pre><code>    chmod +<span class="hljs-keyword">x</span> prettier # Needs <span class="hljs-keyword">to</span> <span class="hljs-keyword">be</span> done <span class="hljs-keyword">only</span> once
    ./prettier
</code></pre><p>This will properly format your documents. You should do this now and just before turning in an assignment.</p>
<p>Restart WebStorm. It may complain that it can&#39;t find the eslint package. If necessary, click the settings link WebStorm provides and point Webstorm to the version of eslint that you installed into <strong>~/npm/bin</strong>.</p>
<p>Eslint will help catch errors, including formatting errors, in your JavaScript code.</p>
<a class="anchor" id="setup-script-running"></a>
<h2>Setup Script Running</h2>
<p>Last week we created an assignment called EC2 Copy File. Get the
script-pusher.js file from that assignment and put it in the <strong>server/routes</strong> folder.</p>
<p>Now link it into your server application. You&#39;ve done this before, so use the Copy File code as a guide.</p>
<p>As a review, here are the steps involved in making <strong>script-pusher</strong> a part of your server side code. Open up <strong>server/app.js</strong> and <strong>require</strong> your <strong>routes/script-pusher.js</strong> file:</p>
<pre><code class="lang-javascript"><span class="hljs-attribute">const scriptPusher</span> = require(<span class="hljs-string">"WHAT GOES HERE?"</span>);
</code></pre>
<p>A little further down, tell Express to use the file:</p>
<pre><code class="lang-javascript">app.<span class="hljs-keyword">use</span>(<span class="hljs-string">'/script-pusher'</span>, scriptPusher);
</code></pre>
<p>This code tells the node js package called <strong>Express</strong> that if it sees an HTTP request from the client that begins with the path <strong>/script-pusher</strong> then it should route the request to <strong>server/script-pusher.js</strong>.</p>
<p>Note that <strong>app</strong> is part of Express. Look further up in <strong>app.js</strong> and study this code and see if you can make sense of it:</p>
<pre><code class="lang-javascript"><span class="hljs-attribute">var express</span> = require(<span class="hljs-string">'express'</span>);
<span class="hljs-attribute">var app</span> = express();
</code></pre>
<p><strong>NOTE</strong>: <em>If the people who first taught and auto-generated this code had called the variable <strong>express</strong> rather than app, then I think a lot of confusion could have been avoided.</em></p>
<a class="anchor" id="call-the-server-from-the-client"></a>
<h2>Call the Server from the Client</h2>
<p>Get the Copy File button and <strong>copyFile</strong> method from the Copy File program and paste them into <strong>client/App.js</strong>.</p>
</div></body></html>