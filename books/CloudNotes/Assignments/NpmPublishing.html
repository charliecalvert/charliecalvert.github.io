<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>NpmPublishing</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>NpmPublishing</h1><p>Welcome to NpmPublishing</p><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#account">Account</a></li>
<li><a href="#log-in">Log In</a></li>
<li><a href="#create-your-package">Create Your Package</a></li>
<li><a href="#publish">Publish</a></li>
<li><a href="#use-your-package">Use Your Package</a></li>
<li><a href="#client-side">Client side</a></li>
<li><a href="#link-in-react">Link in React</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="overview"></a>
<h2>Overview</h2>
<p>The goals of this assignment are to:</p>
<ul>
<li>Learn how to publish a library of your code on NPM.</li>
<li>Integrate React components into an Express based client.</li>
</ul>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/npm-publishing-client.png" alt="The Interface"></p>
<a class="anchor" id="account"></a>
<h2>Account</h2>
<p>Go to the <a href="https://www.npmjs.com/">NPM</a> website and create an account.</p>
<p><strong>NOTE</strong>: <em>At some point in this process you are going to be asked for a public facing email account. They will tell you explicitly that the email they want you to enter is public facing. When they do that, you might want to go to Yahoo, Google, Microsoft or somewhere and create a trash account that you never intend to use.</em></p>
<p><strong>OPTIONAL</strong>: <em>Go to Gravatar and add this trash address to your account so that you can have your picture published.</em></p>
<a class="anchor" id="log-in"></a>
<h2>Log In</h2>
<p>Once you have the account set up and verified, go to the command line and log in:</p>
<pre>npm login
</pre>
<p>That should be all you have to do. Sometimes it takes a long time to log in. If the login process does not go smoothly the first time, you may have to also use this command:</p>
<pre>npm adduser
</pre>
<p>When run, <strong>adduser</strong> asks you to enter the user name and password that you just set up.</p>
<p>Verify that all is good by going to this site:</p>
<ul>
<li><a href="https://npmjs.com/~">https://npmjs.com/~</a></li>
</ul>
<p>And by issuing this command:</p>
<pre>npm config ls
</pre>
<a class="anchor" id="create-your-package"></a>
<h2>Create Your Package</h2>
<p>Create a folder in your repository called <strong>NpmLastName</strong> where LastName is your last name. Put a <strong>package.json</strong> file in your folder:</p>
<pre>npm init
</pre>
<p>The <strong>name</strong> and <strong>version</strong> fields are required. For your name, use only small letters. Add something like <strong>isit322-lastname</strong>, for instance, <strong>isit322-calvert</strong>.</p>
<p>Put the following code in a file called <strong>index.js</strong>:</p>
<pre>exports.getPackageDescription = function() {
  return "This is Charlie Calvert's package";
}
</pre>
<p>You should, of course, put your name rather than mine in your package.</p>
<a class="anchor" id="publish"></a>
<h2>Publish</h2>
<p>After you have created a library that you and others can use, you will need to publish it to the NPM website so that others can use it. The first time you do this all you need to do is type:</p>
<pre>npm publish
</pre>
<p>The second time, and each time thereafter, the process is a bit more complicated. You will need to first increment the version of your package. The version information is found in <strong>package.json</strong>, usually near the top:</p>
<pre>"version": "1.2.3",
</pre>
<p>The version number has three parts:</p>
<ul>
<li>major (The 1 in the example above: 1.X.X)</li>
<li>minor (The 2 in the example above: X.2.X)</li>
<li>patch (The 3 in the example above: X.X.3)</li>
</ul>
<p>Taken together, the major, minor and patch portions of your version number look like this: <strong>1.2.3</strong>. The first number is the major number, the second the minor number and the third is a patch number:</p>
<ul>
<li>major.minor.patch</li>
<li>0.0.0</li>
</ul>
<p>So if the major number is 3, the minor number is 2, and patch number is 1, then the version number is:</p>
<ul>
<li>3.2.1</li>
</ul>
<p><strong>NOTE</strong>: <em>The versioning system described here is captured in a standard called <a href="http://semver.org/">semver</a>. It is very widely used and is something that you, as a developer, should understand.</em></p>
<p>As a rule, we only increment a major version number when we publish a breaking change. The minor version number is usually for new features. The patch is when we publish a bug fix.</p>
<p>So, if we are about to publish a bug fix, we do this:</p>
<pre>npm version patch
npm publish
</pre>
<p>By writing <strong>npm version patch</strong>, the patch portion of the version number in your <strong>package.json</strong> file is automatically incremented by one. For instance, <strong>1.2.3</strong> becomes <strong>1.2.4</strong>. You can also type <strong>npm version minor</strong> to increment the minor version number, and so on.</p>
<a class="anchor" id="use-your-package"></a>
<h2>Use Your Package</h2>
<p>In your repository create a project:</p>
<pre>CreateAllExpress Week03-NpmProject
</pre>
<p>Working from the root of your new project, take steps to use, to integrate, your package into your new project. The following code will install your package into <strong>node_modules</strong>, thereby making it available to your project:</p>
<pre>npm install <mypackage> --save
</pre>
<p>From <strong>routes/index.js</strong> first <strong>require</strong> your package and then create a <strong>get</strong> method that sends the output from your <strong>getPackageDescription</strong> method back to your client. On the server side, place this code near the top of <strong>routes/index.js</strong>:</p>
<pre>const getPackageDescription  = require('isit322-calvert');
</pre>
<p>This code imports the sole function exported from your package for use in your project. Base the code that that sends the package description to the client on the server side code you created for the <strong>RestBasics</strong> assignment:</p>
<ul>
<li><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/React/RestBasics.html#routing-middleware">See the foo route from api.js</a></li>
</ul>
<p>In this case you can set the route to <strong>packageInfo</strong> and put the method you create in <strong>routes/index.js</strong>:</p>
<pre>router.get('/package-info', function(request, response) { ... })
</pre>
<a class="anchor" id="client-side"></a>
<h2>Client side</h2>
<p>Create a method on the client that uses <strong>fetch</strong>. That method should retrieve the value from the server and display it. You can display the string that is returned in an HTML paragraph tag.</p>
<p>Base your work on the <strong>App.js</strong> component from <strong>RestBasics</strong>.</p>
<p><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/React/RestBasics.html#rewrite-the-client">Use <strong>fetch</strong> to call the <strong>/api/foo</strong> route</a></p>
<a class="anchor" id="link-in-react"></a>
<h2>Link in React</h2>
<p>The main issue we are facing here is our combination of the standard &quot;old school&quot; express app and the modern React code. We have, however, faced this kind of problem before. In Week01, we worked through the ReactBasics assignment. In that lesson, we learned how to use <strong>WebPack</strong> and <strong>Babel</strong> to transpile ES6 code into ES5:</p>
<ul>
<li><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/React/ReactBasics.html#transpiling-with-webpack">Transpile with WebPack</a></li>
</ul>
<p>At some point, you are going to have to absorb how WebPack works, but for now I will give you some hints. I&#39;ve placed the React component in <strong>/public/javascripts/GetPackageInfo.js</strong>:</p>
<pre>var path = require('path');
var webpack = require('webpack');

module.exports = {
    entry: './public/javascripts/GetPackageInfo.js',
    output: {path: __dirname, filename: './public/javascripts/bundle.js'},
    module: {
        loaders: [
            {
                test: /GetPackageInfo.js?$/,
                loader: 'babel-loader',
                exclude: /node_modules/,
                query: {presets: ['env', 'react']}
            }
        ]
    },
};
</pre>
<p>There are other steps you will need to take, but they are all outlined in the <strong>ReactBasics</strong> assignment. In quoting the code above, I just wanted to provide some help with three properties from <strong>webpack.config.js</strong>:</p>
<ul>
<li><strong>entry</strong>: This is the first, and in our case only, file that contains ES6 that needs to be transpiled.</li>
<li><strong>output</strong>: Where to put the transpiled code</li>
<li><strong>module.loaders.test</strong>: Tell WebPack and Babel which file or files need to be processed to create our package.</li>
</ul>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Submit your repository. I&#39;ll review the two new folders your created and test your code to be sure it works. I&#39;m expecting to see two folders:</p>
<ul>
<li><strong>Week03-NpmProject</strong></li>
<li><strong>NpmLastName</strong>. For instance, <strong>NpmCalvert</strong></li>
</ul>
<p>When I run <strong>Week03-NpmProject</strong> I&#39;m expecting to see output from your package in the browser.</p>
</div></body></html>