<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ExpressJQuery</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>ExpressJQuery</h1><p>Welcome to ExpressJQuery</p><ul><!--TOC_Start--><li><a href="#express-and-jquery-in-class">Express and JQuery In Class</a></li>
<li><a href="#create">Step 01: Create</a></li>
<li><a href="#control">Step 02: Control.js</a></li>
<li><a href="#layout">Step Three: Bower Layout</a></li>
<li><a href="#jade">Step Four: Jade or Pug</a></li>
<li><a href="#lists">Step Five: Lists</a></li>
<li><a href="#marie">Step Six: Add Marie</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#extra-credit">Extra Credit</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="express-and-jquery-in-class"></a>
<h1>Express and JQuery In Class</h1>
<p>Goals:</p>
<ul>
<li>Module Pattern</li>
<li>Document Ready</li>
<li>Jade</li>
<li>JQuery and DOM basics</li>
<li>JSON and Lists</li>
</ul>
<a class="anchor" id="create"></a>
<h2>Step 01: Create</h2>
<p>Create a new express app by issuing these commands starting from the root of your repository:</p>
<pre><code>CreateExpressProject Week03-ExpressJQuery
<span class="hljs-built_in">cd</span> Week03-ExpressJQuery
npm install
</code></pre><p>Open up your project in WebStorm.</p>
<p>Open <strong>bin/www</strong>. Check that the port is set to 30025:</p>
<pre><code class="lang-javascript"><span class="hljs-attribute">var port</span> = normalizePort(process.env.PORT || <span class="hljs-string">'30025'</span>);
</code></pre>
<p>In <strong>package.json</strong>, make sure you are using  <strong>nodemon</strong> instead of <strong>node</strong>:</p>
<pre><code class="lang-javascript">"<span class="hljs-keyword">start</span><span class="hljs-string">": "</span>nodemon ./<span class="hljs-keyword">bin</span>/www<span class="hljs-string">"</span>
</code></pre>
<p>Set the title in <strong>routes/index.js</strong> to some string that contains your last name.</p>
<pre><code class="lang-javascript">router.get(<span class="hljs-string">'/'</span>, <span class="hljs-keyword">function</span>(req, res, <span class="hljs-keyword">next</span>) { <span class="hljs-string">'use strict'</span>;
     res.render(<span class="hljs-string">'index'</span>, { title: <span class="hljs-string">'ExpressJQuery-LastName'</span> });
});
</code></pre>
<a class="anchor" id="control"></a>
<h2>Step 02: Control.js</h2>
<p>In the <strong>public/javascripts</strong> folder create a JavaScript file called <strong>Control.js</strong>.</p>
<p>Put the following code in <strong>Control.js</strong>:</p>
<pre><code class="lang-javascript">
<span class="hljs-keyword">var</span> MyObject = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

        <span class="hljs-comment">// constructor</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyObject</span>(<span class="hljs-params"></span>) </span>{
    }

    MyObject.prototype.readyCalled = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">"#readyCalled"</span>).html(<span class="hljs-string">"Ready was called and myObjected created"</span>);
    };

    <span class="hljs-keyword">return</span> MyObject;
}());


$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> myObject = <span class="hljs-keyword">new</span> MyObject();
    myObject.readyCalled();
});
</code></pre>
<a class="anchor" id="layout"></a>
<h2>Step Three: Bower Layout</h2>
<p>The <strong>CreateExpressProject</strong> script automates the setup of Bower. To read more about exactly what it does, see this section from the Elvenware site:</p>
<ul>
<li><a href="http://www.elvenware.com/charlie/development/web/JavaScript/NodePackages.html#bower">Bower on Elvenware</a></li>
</ul>
<a class="anchor" id="jade"></a>
<h2>Step Four: Jade or Pug</h2>
<p>In <strong>index.jade</strong> use Jade to create a button and two paragraphs. To do this, just paste in the following code, but be careful of your indents:</p>
<pre><code><span class="hljs-meta">button#</span><span class="bash">sendString Send String</span>
<span class="hljs-meta">p#</span><span class="bash">stringHolder</span>
<span class="hljs-meta">p#</span><span class="bash">readyCalled</span>
</code></pre><p>The code above adds a button to <strong>index.jade</strong> with an id of <strong>sendString</strong> and the caption <strong>Send String</strong>.</p>
<p>In your JavaAScript, use the constuctor of <strong>MyObject</strong> to set up a handler for the button click. Create a private method of <strong>MyObject</strong> called <strong>stringSender</strong> that places a string in your <strong>stringHolder</strong> paragraph.</p>
<p>When the user clicks on the button a method must be called. To make that possible, add code in the constructor that defines an event handler for the button click. And then outside the constructor add a method called <strong>showString</strong> to handle the event:</p>
<pre><code class="lang-javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyObject</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">'#sendString'</span>).click(showString);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showString</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">'#stringHolder'</span>).html(<span class="hljs-string">'Send string was clicked'</span>);
    }
</code></pre>
<p><strong>NOTE</strong>: <em>The above code should appear in <strong>control.js</strong>. As a rule, it makes no sense to place JavaScript code in a Jade file. The purpose of a Jade file is to create HTML. It is not a place for, or a means of creating, JavaScript.</em></p>
<a class="anchor" id="lists"></a>
<h2>Step Five: Lists</h2>
<p>Create <strong>ul</strong> element in your <strong>index.jade</strong>:</p>
<pre><code><span class="hljs-meta">ul#</span><span class="bash">myList</span>
</code></pre><p>Add a button:</p>
<pre><code><span class="hljs-keyword">button#getItems </span><span class="hljs-meta">Get</span> <span class="hljs-keyword">Items</span>
</code></pre><p>In <strong>Control.js</strong>, in the constructor we handle another button click like this:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyObject</span>(<span class="hljs-params"></span>) </span>{
    $(<span class="hljs-string">'#getItems'</span>).click(showItems);
}
</code></pre><p>In <strong>Control.js</strong> we add items to the list with this <strong>showItems</strong> method:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showItems</span>(<span class="hljs-params"></span>) </span>{
    $(<span class="hljs-string">"#myList"</span>).append(<span class="hljs-string">'&lt;li&gt;'</span> + <span class="hljs-string">'item01'</span> + <span class="hljs-string">'&lt;/li&gt;'</span>);
    $(<span class="hljs-string">"#myList"</span>).append(<span class="hljs-string">'&lt;li&gt;'</span> + <span class="hljs-string">'item02'</span> + <span class="hljs-string">'&lt;/li&gt;'</span>);
    $(<span class="hljs-string">"#myList"</span>).append(<span class="hljs-string">'&lt;li&gt;'</span> + <span class="hljs-string">'item03'</span> + <span class="hljs-string">'&lt;/li&gt;'</span>);
}
</code></pre>
<a class="anchor" id="marie"></a>
<h2>Step Six: Add Marie</h2>
<p>Add a marie button to <strong>index.jade</strong>:</p>
<pre><code><span class="hljs-keyword">button#getMarie </span><span class="hljs-meta">Get</span> <span class="hljs-keyword">Marie</span>
</code></pre><p>Handle it like this in <strong>Control.js</strong>:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyObject</span>(<span class="hljs-params"></span>) </span>{
    $(<span class="hljs-string">'#sendString'</span>).click(showString);
    $(<span class="hljs-string">'#getItems'</span>).click(showItems);
    $(<span class="hljs-string">'#getMarie'</span>).click(showMarie);
}
</code></pre><p>Inside the <strong>showMarie</strong> method create a JavaScript object that follows the rules of JSON:</p>
<pre><code class="lang-javascript"><span class="hljs-attribute">var marie</span> = {
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Marie"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Curie"</span>,
    <span class="hljs-string">"city"</span>: <span class="hljs-string">"Paris"</span>,
    <span class="hljs-string">"country"</span>: <span class="hljs-string">"France"</span>
};
</code></pre>
<p>Cut and paste the curly braces and the syntax between them into <a href="jsonlint.com">jsonlint.com</a> to be sure it is valid JSON:</p>
<pre><code class="lang-javascript">{
    <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"Marie"</span>,
    <span class="hljs-attr">"lastName"</span>: <span class="hljs-string">"Curie"</span>,
    <span class="hljs-attr">"city"</span>: <span class="hljs-string">"Paris"</span>,
    <span class="hljs-attr">"country"</span>: <span class="hljs-string">"France"</span>
}
</code></pre>
<p>Now inside <strong>showMarie</strong> iterate over the items and add them to your list:</p>
<pre><code class="lang-javascript">for (var <span class="hljs-keyword">property</span><span class="hljs-title"> </span><span class="hljs-keyword">in</span> marie) {
    if (marie.hasOwnProperty(<span class="hljs-keyword">property</span><span class="hljs-title"></span>)) {
        $(<span class="hljs-string">"#myList"</span>).append('<span class="hljs-tag">&lt;li&gt;</span>' + marie[<span class="hljs-keyword">property</span><span class="hljs-title"></span>] + '<span class="hljs-tag">&lt;/li&gt;</span>');        
    }
}
</code></pre>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Place the contents of your project in your repository in a folder called <strong>Week02-ExpressJQuery</strong>.</p>
<p>When you make the submission remind me of the URL of your repository and specify the folder in your repository where the project resides.</p>
<p>When I open the folder that contains your project, I should see the code for your project, not another folder that contains the code.</p>
<p>Good:</p>
<pre><code>...<span class="hljs-regexp">/Git/</span>prog219-lastname<span class="hljs-regexp">/Week02-ExpressjQuery/</span><span class="hljs-keyword">package</span>.json
</code></pre><p>Not so good:</p>
<pre><code>...<span class="hljs-regexp">/Git/</span>prog219-lastname<span class="hljs-regexp">/Week02-ExpressjQuery/</span>ExpressProject/<span class="hljs-keyword">package</span>.json
</code></pre><a class="anchor" id="extra-credit"></a>
<h2>Extra Credit</h2>
<p>Try loading the JSON with <a href="http://api.jquery.com/jquery.getjson/">$.getJSON</a>. Save the Maire object into the public directory as <strong>marie.json</strong>. Now load it with getJSON:</p>
<pre><code class="lang-javascript">$.getJSON(<span class="hljs-string">'mairie.json'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">marie</span>) </span>{
    <span class="hljs-comment">// The variable marie now holds your JSON. Process it and display it as shown above.</span>
});
</code></pre>
<p>If for some reason it doesn&#39;t work, try moving <strong>marie.json</strong> around to different directories.</p>
</div></body></html>