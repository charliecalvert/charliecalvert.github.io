<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ExpressJQuery</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><!-- script(src="/libs/scripts/Control.js")--><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>ExpressJQuery</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#express-and-jquery-in-class">Express and JQuery In Class</a></li>
<li><a href="#create">Step 01: Create</a></li>
<li><a href="#control">Step 02: Control.js</a></li>
<li><a href="#layout">Step Three: Layout</a></li>
<li><a href="#jade">Step Four: Jade</a></li>
<li><a href="#lists">Step Five: Lists</a></li>
<li><a href="#marie">Step Six: Add Marie</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul><h1 id="express-and-jquery-in-class">Express and JQuery In Class</h1>
<p>Goals:</p>
<ul>
<li>Module Pattern</li>
<li>Document Ready</li>
<li>Jade</li>
<li>JQuery and DOM basics</li>
<li>JSON and Lists</li>
</ul>
<h2 id="create">Step 01: Create</h2>
<p>Create a new express app:</p>
<pre><code>express Week02-ExpressJQuery
<span class="hljs-built_in">cd</span> Week02-ExpressJQuery
npm install
</code></pre><p>Open up your project in WebStorm.</p>
<p>Open <strong>bin/www</strong>. Set the port to 30025. In <strong>package.json</strong>,  plug in <strong>nodemon</strong> instead of <strong>node</strong>. Set the title in <strong>routes/index.js</strong> to some string that contains your last name.</p>
<h2 id="control">Step 02: Control.js</h2>
<p>In the <strong>public/javascripts</strong> folder create a JavaScript file called <strong>Control.js</strong>.</p>
<p>Put the following code in <strong>Control.js</strong>:</p>
<pre><code class="lang-javascript">
<span class="hljs-keyword">var</span> MyObject = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyObject</span>(<span class="hljs-params"></span>) </span>{
    }

    MyObject.prototype.readyCalled = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">"#readyCalled"</span>).html(<span class="hljs-string">"Ready was called and myObjected created"</span>);
    };

    <span class="hljs-keyword">return</span> MyObject;
}());


$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> myObject = <span class="hljs-keyword">new</span> MyObject();
    myObject.readyCalled();
});
</code></pre>
<h2 id="layout">Step Three: Layout</h2>
<p>Bower is like npm. Use NPM for server side code. Use Bower for client side code. This is not absolutely necessary, but it is common. As a result, we will learn about both NPM and Bower in this class.</p>
<p>Install Bower:</p>
<pre><code>npm <span class="hljs-keyword">install</span> -<span class="hljs-keyword">g</span> bower
</code></pre><p>Create a <strong>bower.json</strong> file in the root of your current project:</p>
<pre><code><span class="hljs-keyword">bower </span>init
</code></pre><p>You will be prompted for input. Take all the defaults or use your common sense to fill in the fields as you are prompted for them.</p>
<p>Remember that Windows does not like to start a file with a period. As a result, we need to create <strong>.bowerrc</strong> like this:</p>
<pre><code><span class="hljs-selector-tag">echo</span> { } &gt; <span class="hljs-selector-class">.bowerrc</span>
</code></pre><p>Edit <strong>.bowerrc</strong> in geany and add the following so that we will install bower components into the <strong>public/components</strong> directory:</p>
<pre><code class="lang-javascript">{
  "<span class="hljs-attr">directory</span>": <span class="hljs-string">"public/components"</span>,
  "<span class="hljs-attr">json</span>": <span class="hljs-string">"bower.json"</span>
}
</code></pre>
<p>Again, test in <strong>jsonlint.com</strong> to make sure it is valid.</p>
<p>Install jquery:</p>
<pre><code><span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span><span class="hljs-keyword">jquery </span>--save
</code></pre><p>The <strong>--save</strong> parameter saves your request for jquery into the <strong>bower.json file.</strong>  </p>
<p>My <strong>bower.json</strong> file now looks like this:</p>
<pre><code class="lang-javascript">{
  "<span class="hljs-attr">name</span>": <span class="hljs-string">"Week02-ExpressJQuery"</span>,
  "<span class="hljs-attr">version</span>": <span class="hljs-string">"0.0.0"</span>,
  "<span class="hljs-attr">authors</span>": [
    <span class="hljs-string">"Charlie CedarIsle Calvert &lt;charlie@elvenware.com&gt;"</span>
  ],
  "<span class="hljs-attr">description</span>": <span class="hljs-string">"JQuery Demo"</span>,
  "<span class="hljs-attr">main</span>": <span class="hljs-string">"bin/www"</span>,
  "<span class="hljs-attr">keywords</span>": [
    <span class="hljs-string">"JQuery"</span>
  ],
  "<span class="hljs-attr">license</span>": <span class="hljs-string">"MIT"</span>,
  "<span class="hljs-attr">homepage</span>": <span class="hljs-string">"www.elvenware.com"</span>,
  "<span class="hljs-attr">ignore</span>": [
    <span class="hljs-string">"**/.*"</span>,
    <span class="hljs-string">"node_modules"</span>,
    <span class="hljs-string">"bower_components"</span>,
    <span class="hljs-string">"test"</span>,
    <span class="hljs-string">"tests"</span>
  ],
  "<span class="hljs-attr">dependencies</span>": {
    "<span class="hljs-attr">jquery</span>": <span class="hljs-string">"~2.1.3"</span>
  }
}
</code></pre>
<p>The most important part is the <strong>dependencies</strong> object at the end of the file.</p>
<p>Modify <strong>/views/layout.jade</strong> to include jquery and <strong>Control.js</strong></p>
<pre><code>doctype <span class="hljs-selector-tag">html</span>
<span class="hljs-selector-tag">html</span>
    head
        title= title
        link(rel=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'/stylesheets/style.css'</span>)
        script(src=<span class="hljs-string">'components/jquery/dist/jquery.js'</span>)
        etc...
</code></pre><p><strong>NOTE</strong>: <em>When I type <strong>etc...</strong>, that can sometimes be translated as: &quot;Filling in this part of the file is left as an exercise for the reader.&quot;</em></p>
<h2 id="jade">Step Four: Jade</h2>
<p>In <strong>index.jade</strong> use Jade to create a button and two paragraphs:</p>
<pre><code><span class="hljs-keyword">button</span><span class="hljs-meta">#sendString Send String</span>
p<span class="hljs-meta">#stringHolder</span>
p<span class="hljs-meta">#readyCalled</span>
</code></pre><p>Add a button to index.jade with an id of <strong>sendString</strong>. Use the constuctor of <strong>MyObject</strong> to set up a handler for the button click. Create a private method of <strong>MyObject</strong> called <strong>stringSender</strong> that places a string in your <strong>stringHolder</strong> paragraph.</p>
<p>When the user clicks on the button a method must be called. To make the possible, add code in the constructor that defines an event handler for the button click and method to handle the event:</p>
<pre><code class="lang-javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyObject</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">'#sendString'</span>).click(showString);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showString</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">'#stringHolder'</span>).html(<span class="hljs-string">'Send string was clicked'</span>);
    }
</code></pre>
<p><strong>NOTE</strong>: <em>The above code should appear in <strong>Control.js</strong>. As a rule, it makes no sense to place JavaScript code in a Jade file. The purpose of a Jade file is to create HTML. It is not a place for, or a means of creating, JavaScript.</em></p>
<h2 id="lists">Step Five: Lists</h2>
<p>Create <strong>ul</strong> element in your <strong>index.jade</strong>:</p>
<pre><code>ul<span class="hljs-meta">#myList</span>
</code></pre><p>Add a button:</p>
<pre><code><span class="hljs-keyword">button#getItems </span><span class="hljs-meta">Get</span> <span class="hljs-keyword">Items</span>
</code></pre><p>In <strong>Control.js</strong> we handle the button click like this:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyObject</span>(<span class="hljs-params"></span>) </span>{
    $(<span class="hljs-string">'#getItems'</span>).click(showItems);
}
</code></pre><p>In <strong>Control.js</strong> we add items to the list with this <strong>showItems</strong> method:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showItems</span>(<span class="hljs-params"></span>) </span>{
    $(<span class="hljs-string">"#myList"</span>).append(<span class="hljs-string">'&lt;li&gt;'</span> + <span class="hljs-string">'item01'</span> + <span class="hljs-string">'&lt;/li&gt;'</span>);
    $(<span class="hljs-string">"#myList"</span>).append(<span class="hljs-string">'&lt;li&gt;'</span> + <span class="hljs-string">'item02'</span> + <span class="hljs-string">'&lt;/li&gt;'</span>);
    $(<span class="hljs-string">"#myList"</span>).append(<span class="hljs-string">'&lt;li&gt;'</span> + <span class="hljs-string">'item03'</span> + <span class="hljs-string">'&lt;/li&gt;'</span>);
}
</code></pre>
<h2 id="marie">Step Six: Add Marie</h2>
<p>Add a marie button to <strong>index.jade</strong>:</p>
<pre><code><span class="hljs-keyword">button#getMarie </span><span class="hljs-meta">Get</span> <span class="hljs-keyword">Marie</span>
</code></pre><p>Handle it like this in <strong>Control.js</strong>:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyObject</span>(<span class="hljs-params"></span>) </span>{
    $(<span class="hljs-string">'#sendString'</span>).click(showString);
    $(<span class="hljs-string">'#getItems'</span>).click(showItems);
    $(<span class="hljs-string">'#getMarie'</span>).click(showMarie);
}
</code></pre><p>Inside the <strong>showMarie</strong> method create a JavaScript object that follows the rules of JSON:</p>
<pre><code class="lang-javascript"><span class="hljs-variable"><span class="hljs-keyword">var</span> marie</span> = {
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Marie"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Curie"</span>,
    <span class="hljs-string">"city"</span>: <span class="hljs-string">"Paris"</span>,
    <span class="hljs-string">"country"</span>: <span class="hljs-string">"France"</span>
};
</code></pre>
<p>Cut and paste the curly braces and the syntax between them into <a href="jsonlint.com">jsonlint.com</a> to be sure it is valid JSON:</p>
<pre><code class="lang-javascript">{
    "<span class="hljs-attr">firstName</span>": <span class="hljs-string">"Marie"</span>,
    "<span class="hljs-attr">lastName</span>": <span class="hljs-string">"Curie"</span>,
    "<span class="hljs-attr">city</span>": <span class="hljs-string">"Paris"</span>,
    "<span class="hljs-attr">country</span>": <span class="hljs-string">"France"</span>
}
</code></pre>
<p>Now inside <strong>showMarie</strong> iterate over the items and add them to your list:</p>
<pre><code class="lang-javascript">for (var <span class="hljs-keyword">property</span><span class="hljs-title"> </span><span class="hljs-keyword">in</span> marie) {
    if (marie.hasOwnProperty(<span class="hljs-keyword">property</span><span class="hljs-title"></span>)) {
        $(<span class="hljs-string">"#myList"</span>).append('<span class="hljs-tag">&lt;li&gt;</span>' + marie[<span class="hljs-keyword">property</span><span class="hljs-title"></span>] + '<span class="hljs-tag">&lt;/li&gt;</span>');        
    }
}
</code></pre>
<h2 id="turn-it-in">Turn it in</h2>
<p>Place the contents of your project in your repository in a folder called <strong>Week02-ExpressJQuery</strong>.</p>
<p>When you make the submission remind me of the URL of your repository and specify the folder in your repository where the project resides.</p>
<p>When I open the folder that contains your project, I should see the code for your project, not another folder that contains the code.</p>
<p>Good:</p>
<pre><code>...<span class="hljs-regexp">/Git/</span>prog219-lastname<span class="hljs-regexp">/Week02-ExpressjQuery/</span><span class="hljs-keyword">package</span>.json
</code></pre><p>Not so good:</p>
<pre><code>...<span class="hljs-regexp">/Git/</span>prog219-lastname<span class="hljs-regexp">/Week02-ExpressjQuery/</span>ExpressProject/<span class="hljs-keyword">package</span>.json
</code></pre></div></body></html>