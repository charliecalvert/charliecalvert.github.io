<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>Isit320Final2017</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>Isit320Final2017</h1><p>Welcome to Isit320Final2017</p><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#routes">Routes</a></li>
<li><a href="#the-config-file">The Config File</a></li>
<li><a href="#merge-code-you-forked">Merge Code you Forked</a></li>
<li><a href="#delete-all-old-jquery-code">Delete all old jQuery code</a></li>
<li><a href="#get-lates-isit-code-and-isit-site-tools">Get lates isit-code and isit-site-tools</a></li>
<li><a href="#tests">Tests</a></li>
<li><a href="#firebase">Firebase</a></li>
<li><a href="#ec2-ports-and-security-groups">EC2 Ports and Security Groups</a></li>
<li><a href="#all-projects-should-build-on-ec2">All projects Should Build on EC2</a></li>
<li><a href="#the-gitignore-file">The .gitignore File</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#long-link-to-ec2">Long Link to EC2</a></li>
<li><a href="#attitude">Attitude</a></li>
<li><a href="#server-ports">Server Ports</a></li>
<li><a href="#gratuitous-hint">Gratuitous Hint</a></li>
<li><a href="#i-get-is-not-defined">I get $ is not defined</a></li>
<li><a href="#close-down-ec2-instances">Close Down EC2 Instances</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="overview"></a>
<h2>Overview</h2>
<p>THIS IS A WORK IN PROGRESS. IT IS NOT THE FINAL FINAL, BUT HOPEFULLY CLOSE ENOUGH TO LET YOU GET MOST OF THE WORK DONE.</p>
<p>The goal of the final is to demonstrate your ability to deploy web sites to the cloud. In particular, I want to see:</p>
<ul>
<li>WebCrafts working</li>
<li>The specified tests working</li>
<li>Code running on EC2</li>
<li>Code running on the Firebase site</li>
<li>Docker Container running on Port 30028</li>
</ul>
<p>Please get the FirebaseReact assignment melded into your WebCrafts assignment.</p>
<p>Handy links to at least some assignments:</p>
<ul>
<li><a href="http://www.ccalvert.net/">http://www.ccalvert.net/</a></li>
</ul>
<a class="anchor" id="routes"></a>
<h2>Routes</h2>
<p>Everyone must understand routes to do well in this class. Here is an assignment to show me that you are up to speed:</p>
<ul>
<li>At the root of your repository, run1:<ul>
<li><strong>CreateExpressProject final-routes</strong></li>
<li><strong>cd final-routes</strong></li>
</ul>
</li>
<li>In <strong>routes/index.js</strong> implement three routes:<ul>
<li>One that returns { &quot;result&quot; : &quot;route01&quot;}</li>
<li>One that returns { &quot;result&quot; : &quot;route02&quot;}</li>
<li>One that returns { &quot;result&quot; : &quot;route03&quot;}</li>
</ul>
</li>
<li>In <strong>index.pug</strong> define three buttons that have the labels:<ul>
<li>Route01, Route02, Route03</li>
</ul>
</li>
<li>In <strong>control.js</strong> write code so that the button called<ul>
<li><strong>Route01</strong> uses <strong>fetch</strong> to call <strong>/route01</strong></li>
<li><strong>Route02</strong> uses <strong>fetch</strong> to call <strong>/route02</strong></li>
<li><strong>Route03</strong> uses <strong>fetch</strong> to call <strong>/route03</strong></li>
<li>Each button should display the result in a <strong>PRE</strong> tag.</li>
</ul>
</li>
</ul>
<p>By this time, fetch should just be built into the JavaScript implementation for all major browsers, so you probably don&#39;t need to run: <strong>npm install whatwg-fetch</strong>.</p>
<p>You don&#39;t have to use React or any other specific tools other than <strong>Express</strong> routes and <strong>fetch</strong>. Just make it work! </p>
<a class="anchor" id="the-config-file"></a>
<h2>The Config File</h2>
<p>Place your working ElvenConfig.json file in a folder of your repository called <strong>ElvenConfig</strong>. Include a section of the users node called <strong>lastname</strong>, where lastname is your last name. For instance, if your last name is Smith:</p>
<pre><code class="lang-json">{
  <span class="hljs-string">"users"</span>: {
    <span class="hljs-string">"calvert"</span>:<span class="hljs-meta">{...}</span>,
    <span class="hljs-string">"smith"</span>: <span class="hljs-meta">{...}</span>
  },
  <span class="hljs-string">"selectedElvenImages"</span>: [...],
  <span class="hljs-string">"elvenImages"</span>: [...]
}
</code></pre>
<p>Go through your tests and find the places where the &#39;calvert&#39; user is being used explicitly, and replace it with your last name. For instance, replace it with Smith.</p>
<p>The goal is to allow me to insert your lastname section in my ElvenConfig file and have it work out of the box.</p>
<p>Make sure the most recent Config file is on EC2.</p>
<p>When I run <strong>Week10-FirebaseReact</strong>, turn to the <strong>Show Users</strong> page and click a button, I expect them to be configured to use <strong>/home/ubuntu</strong>.</p>
<p>Here is how to change all instances of <strong>bcuser</strong> to <strong>ubuntu</strong> inside the <strong>ElvenConfig.json</strong> file:</p>
<pre><code>sed -<span class="hljs-selector-tag">i</span> <span class="hljs-string">"s/bcuser/ubuntu/g"</span> ElvenConfig.json
</code></pre><a class="anchor" id="merge-code-you-forked"></a>
<h2>Merge Code you Forked</h2>
<p>Be sure to merge in the latest changes from the repositories that you forked. I made changes as recently as November 29, 2017, but may do more.</p>
<p>If you have things set up correctly, per the <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/WebCrafts/WebCraftsUpToDate.html">UpToDate</a> assigment, it should be relatively easy to <strong>fetch</strong> and <strong>pull</strong>.</p>
<p>The Atom editor makes merging conflicts easier:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/up-to-date-merge-atom.png" alt="Atom makes merging easy"></p>
<a class="anchor" id="delete-all-old-jquery-code"></a>
<h2>Delete all old jQuery code</h2>
<p>For instance:</p>
<p>Put a breakpoint here in make-html.js and make sure it never gets called:</p>
<pre><code class="lang-javascript">$.getJSON(<span class="hljs-string">'/makers/config'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">configSummary</span>) </span>{ ... })
</code></pre>
<p>Then just delete the entire file.</p>
<a class="anchor" id="get-lates-isit-code-and-isit-site-tools"></a>
<h2>Get lates isit-code and isit-site-tools</h2>
<p>Run <strong>npm outdated</strong></p>
<p>If there are problems, to fix, run <strong>npm update</strong> or get in there and fix it by hand.</p>
<pre>$ npm outdated
Package                   Current  Wanted  Latest  Location
babel-eslint                8.0.1   8.0.2   8.0.2  isit-web-crafts
enzyme                      3.1.0   3.2.0   3.2.0  isit-web-crafts
enzyme-adapter-react-16     1.0.2   1.1.0   1.1.0  isit-web-crafts
eslint                     4.10.0  4.12.1  4.12.1  isit-web-crafts
eslint-plugin-react         7.4.0   7.5.1   7.5.1  isit-web-crafts
isit-code-lastname         1.0.0   1.0.1   1.0.1  isit-web-crafts
isit-sitetools-lastname    1.0.1   1.0.3   1.0.3  isit-web-crafts
mongoose                   4.12.4  4.13.5  4.13.5  isit-web-crafts
react                      16.0.0  16.2.0  16.2.0  isit-web-crafts
react-dom                  16.0.0  16.2.0  16.2.0  isit-web-crafts
react-test-renderer        16.0.0  16.2.0  16.2.0  isit-web-crafts
webpack                     3.8.1   3.9.1   3.9.1  isit-web-crafts
webpack-dev-server          2.9.3   2.9.5   2.9.5  isit-web-crafts
charlie@rohan-mintc ~/Git/WebCrafts-Isit320/jespinoza/isit-webcrafts-jespinoza (master)
$ npm update
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.3 (node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.3: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ isit-sitetools-lastname@1.0.3
+ isit-code-lastname@1.0.1
+ react-dom@16.2.0
+ react@16.2.0
+ babel-eslint@8.0.2
+ enzyme@3.2.0
+ eslint-plugin-react@7.5.1
+ enzyme-adapter-react-16@1.1.0
+ eslint@4.12.1
+ mongoose@4.13.5
+ react-test-renderer@16.2.0
+ webpack-dev-server@2.9.5
+ webpack@3.9.1
added 138 packages, removed 17 packages, updated 49 packages and moved 5 packages in 11.72s
`
</pre>
<a class="anchor" id="tests"></a>
<h2>Tests</h2>
<p>The following programs should the specified number of tests passing.</p>
<a class="anchor" id="firebase"></a>
<h2>Firebase</h2>
<p>Your Firebase app should:</p>
<ul>
<li>Run on the Firebase cloud. We also have Firebase running on EC2, but this should have firebaseapp.com in the URL.</li>
<li>I should be able to query for, and add new, Presidents.</li>
</ul>
<p>Part of the security mechanism for Firebase is to make sure that the app can only be run from authorized locations. When you move to EC2, you might get an error like this one: <strong>uncaught exception: Error: This domain (34.333.134.3) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -&gt; Auth section -&gt; Sign in method tab.</strong></p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/firebase-not-auth.png" alt="Firebase EC2 Error"></p>
<p>When adding the domain, use the long name from EC2. It looks something like this:</p>
<pre><code>ec2<span class="hljs-number">-34</span><span class="hljs-number">-233</span><span class="hljs-number">-323</span><span class="hljs-number">-3.</span>us-west<span class="hljs-number">-2.</span>compute.amazonaws.com
</code></pre><p>You can find it on the AWS EC2 <strong>instances</strong> page.</p>
<a class="anchor" id="ec2-ports-and-security-groups"></a>
<h2>EC2 Ports and Security Groups</h2>
<p>View your EC2 instances <strong>inbound rules</strong> and make sure 30025, 30026 and 30027 are listed as open:</p>
<ul>
<li><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/Ec2GetStarted.html#step-04-b-security-groups">Details are here</a></li>
</ul>
<a class="anchor" id="all-projects-should-build-on-ec2"></a>
<h2>All projects Should Build on EC2</h2>
<p>This is not the same thing as saying that they work. It just means I can go into any directory in your repository and type <strong>npm install</strong> and it will complete without errors. I should also be able to type <strong>npm start</strong> and go to the browser and see that the application loads without error. It need not run correctly, but it should not throw errors when it loads. No red text!</p>
<a class="anchor" id="the-gitignore-file"></a>
<h2>The .gitignore File</h2>
<p>Must contain the following:</p>
<ul>
<li>.idea</li>
<li>node_modules</li>
<li>bower_components</li>
<li>bundle.js</li>
<li>bundle.js.map</li>
</ul>
<p>And should contain:</p>
<ul>
<li>.c9</li>
</ul>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Here is a preliminary list of what I&#39;m looking for:</p>
<ul>
<li>Webcrafts should work<ul>
<li>Markdown to HTML</li>
<li>Images to HTML</li>
</ul>
</li>
<li>On EC2 and kept running with <strong>systemd</strong><ul>
<li>WebCrafts running on port 30025</li>
<li>Firebase React on 30026</li>
<li>Firebase Express (the HTML version) on 30027</li>
<li>Send me the link to the long name for your app:<ul>
<li>ec2-xxx-us.west-2-compute-amazonaws.com:3002X.</li>
</ul>
</li>
<li>Install Apache and after I run WebCrafts I should be able to see pages there.</li>
</ul>
</li>
<li>Repositories:<ul>
<li>Webcrafts<ul>
<li>Webcrafts</li>
<li>isit-code</li>
<li>isit-site-tools</li>
</ul>
</li>
<li>Main Repository:<ul>
<li>...</li>
</ul>
</li>
</ul>
</li>
<li>Firebase<ul>
<li>Load code that allows me to log in</li>
<li>The URL of your application running on the Firebase servers. Not a local copy, a copy running in the Firebase cloud. (We also have Firebase code running on EC2, but that is a different part of the assignment.)</li>
</ul>
</li>
<li>Tests<ul>
<li>Read the tests section above and make sure you meet the requirements</li>
</ul>
</li>
</ul>
<p>For all the code I need to see:</p>
<ul>
<li>repository</li>
<li>directory</li>
<li>branch</li>
</ul>
<p>I&#39;m expecting to find your <em>final</em> code in <strong>master</strong>, but it would not be a serious mistake to have it elsewhere so long as you say where. If you don&#39;t say where, I will look only in master. But I want to see that you have been working in various branches with checkin dates distributed throughout the quarter.</p>
<p>The command <strong>npm outdated</strong> should show that you have the most recent versions of your <strong>isit-code</strong> and <strong>isit-site-tools</strong> in your <strong>package.json</strong>. This is not just a minor point. Make sure you have this right! Your code probably won&#39;t work if it is not right.</p>
<p>Projects should build on EC2. See the list of projects that need to build on EC2 in the appropriate section above.</p>
<a class="anchor" id="long-link-to-ec2"></a>
<h2>Long Link to EC2</h2>
<p>This is reminder to send me the long link to your EC2 instance. It might look a bit like this:</p>
<ul>
<li>ec2-xxx-us.west-2-compute-amazonaws.com.</li>
</ul>
<a class="anchor" id="attitude"></a>
<h2>Attitude</h2>
<p>Complete as much of the exam as you can. It is better to get it in, and get it in more or less on time, than to spin trying to complete something you don&#39;t understand.</p>
<p>I&#39;m mostly interested in seeing that you:</p>
<ul>
<li>Show clear evidence that you learned something</li>
<li>Did the homework more or less on time</li>
<li>Came to class</li>
</ul>
<p>Students start in different places. I&#39;m looking for evidence that a student worked hard and learned something new rather than being overly concerned with whether they can complete each assignment perfectly.</p>
<p>When I was growing up, A&#39;s were not fetishized. People could and very frequently did get into Ivy League colleges with a B average. Today, in the technical world, what matters is the interview, not your grades. As a result, I try to keep things simple and give students the grade they deserve.</p>
<a class="anchor" id="server-ports"></a>
<h2>Server Ports</h2>
<p>Make sure programs that run on a server port such as 30026 are set up like this in <strong>www/bin</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-attribute">var port</span> = normalizePort(process.env.SERVER_PORT || <span class="hljs-string">'30026'</span>);
</code></pre>
<p>Note that we are using <strong>SERVER_PORT</strong> rather than <strong>PORT</strong>.</p>
<a class="anchor" id="gratuitous-hint"></a>
<h2>Gratuitous Hint</h2>
<p>Fancier Bash hints on current repo. Near top of <strong>.bashrc</strong>:</p>
<pre><code class="lang-bash">COLOR_RED=<span class="hljs-string">"\033[0;31m"</span>
COLOR_YELLOW=<span class="hljs-string">"\033[0;33m"</span>
COLOR_GREEN=<span class="hljs-string">"\033[0;32m"</span>
COLOR_OCHRE=<span class="hljs-string">"\033[38;5;95m"</span>
COLOR_BLUE=<span class="hljs-string">"\033[0;34m"</span>
COLOR_WHITE=<span class="hljs-string">"\033[0;37m"</span>
COLOR_RESET=<span class="hljs-string">"\033[0m"</span>

<span class="hljs-keyword">function</span> git_color {
  <span class="hljs-built_in">local</span> git_status=<span class="hljs-string">"<span class="hljs-variable">$(git status 2&gt; /dev/null)</span>"</span>

  <span class="hljs-keyword">if</span> [[ ! <span class="hljs-variable">$git_status</span> =~ <span class="hljs-string">"working directory clean"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$COLOR_RED</span>
  <span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$git_status</span> =~ <span class="hljs-string">"Your branch is ahead of"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$COLOR_YELLOW</span>
  <span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$git_status</span> =~ <span class="hljs-string">"nothing to commit"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$COLOR_GREEN</span>
  <span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$COLOR_OCHRE</span>
  <span class="hljs-keyword">fi</span>
}

<span class="hljs-keyword">function</span> git_branch {
  <span class="hljs-built_in">local</span> git_status=<span class="hljs-string">"<span class="hljs-variable">$(git status 2&gt; /dev/null)</span>"</span>
  <span class="hljs-built_in">local</span> on_branch=<span class="hljs-string">"On branch ([^<span class="hljs-variable">${IFS}</span>]*)"</span>
  <span class="hljs-built_in">local</span> on_commit=<span class="hljs-string">"HEAD detached at ([^<span class="hljs-variable">${IFS}</span>]*)"</span>

  <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$git_status</span> =~ <span class="hljs-variable">$on_branch</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">local</span> branch=<span class="hljs-variable">${BASH_REMATCH[1]}</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"(<span class="hljs-variable">$branch</span>)"</span>
  <span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$git_status</span> =~ <span class="hljs-variable">$on_commit</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">local</span> commit=<span class="hljs-variable">${BASH_REMATCH[1]}</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"(<span class="hljs-variable">$commit</span>)"</span>
  <span class="hljs-keyword">fi</span>
}
</code></pre>
<p>Below the PS1 statements and right before <strong>unset color prompt</strong> :</p>
<pre><code class="lang-bash">PS1+=<span class="hljs-string">"\[\$(git_color)\]"</span>
PS1+=<span class="hljs-string">"\$(git_branch)"</span>                       <span class="hljs-comment"># prints current branch</span>
PS1+=<span class="hljs-string">"\[$COLOR_BLUE\]\n\$\[$COLOR_RESET\] "</span>   <span class="hljs-comment"># '#' for root, else '$'</span>
</code></pre>
<a class="anchor" id="i-get-is-not-defined"></a>
<h2>I get $ is not defined</h2>
<p>If you get a <strong>$ is not defined</strong> it probably means you have not run <strong>bower install</strong>.</p>
<a class="anchor" id="close-down-ec2-instances"></a>
<h2>Close Down EC2 Instances</h2>
<p>You can keep, delete, mangle, change in whatever way you want your EC2 instances after December 11, 2017. See the Canvas announcement on this subject for more information.</p>
</div></body></html>