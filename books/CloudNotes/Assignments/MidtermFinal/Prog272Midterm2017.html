<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>Prog272Midterm2017</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div id="navbar" class="navbar-collapse collapse">       <ul class="nav navbar-nav"><li ng-class="{ active: isActive('/')}" class="trigger-collapse"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img alt="Elvenware" src="/images/elvenwarelogo.png" class="elf-normal"/></figure><h1>Prog272Midterm2017</h1><p>Welcome to Prog272Midterm2017</p><ul><!--TOC_Start--><li><a href="#prog272-midterm-2017">Prog272 Midterm 2017</a></li>
<li><a href="#goals">Goals</a></li>
<li><a href="#elfdebugenzyme">ElfDebugEnzyme</a></li>
<li><a href="#jscs">JSCS</a></li>
<li><a href="#jscs-punctuator">JSCS Punctuator</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#shallow-button-clicks">Shallow Button Clicks</a></li>
<li><a href="#contains-matching-element">Contains Matching Element</a></li>
<li><a href="#don-t-use-fetch-on-midterm">Don&#39;t Use Fetch on Midterm</a></li>
<li><a href="#filter-tests">Filter Tests</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="prog272-midterm-2017"></a>
<h1>Prog272 Midterm 2017</h1>
<p>A description of what I want to see on the midterm.</p>
<a class="anchor" id="goals"></a>
<h2>Goals</h2>
<ul>
<li>Display at least three views:<ul>
<li><strong>AddressShow</strong></li>
<li><strong>AddressEdit</strong></li>
<li><strong>SmallNumbers</strong><ul>
<li>Show at least five numbers, but you can update them with a single button click.</li>
</ul>
</li>
<li>It&#39;s best if React components are in a file that begins with a capital letter and uses Pascal casing.</li>
</ul>
</li>
<li>Menu<ul>
<li>Make sure you are <a href="https://www.w3schools.com/css/css_navbar.asp">styling it</a>.</li>
<li>I picked the first of the <strong>Horizontal Navigation Bar Examples</strong></li>
<li>Replace the default &quot;Atom&quot; <strong>logo.svg</strong> file with one of your own choosing.</li>
</ul>
</li>
<li>Iterate back and forth over at least 5 addresses<ul>
<li>Extra credit button go to first and last</li>
<li>Be able to edit any of the address</li>
<li>Changes should remain through the session</li>
</ul>
</li>
<li>Testing<ul>
<li>You should have at least 5 test files</li>
<li><strong>Address.test.js</strong>, <strong>AddressEdit.test.js</strong>, <strong>AddressShow.test.js</strong></li>
<li><strong>ElfHeader.test.js</strong> and <strong>SmallNumbers.test.js</strong></li>
</ul>
</li>
<li>Refactoring<ul>
<li>Make sure you have the following folders with appropriate content:</li>
<li><strong>src/__tests__</strong></li>
<li><strong>src/components</strong></li>
<li><strong>src/css</strong></li>
<li><strong>src/images</strong></li>
<li>I&#39;ll get back to you with more details of how many tests I want to see, but for now, assume that 30 reasonable tests across all files.</li>
</ul>
</li>
</ul>
<a class="anchor" id="elfdebugenzyme"></a>
<h2>ElfDebugEnzyme</h2>
<p>  You can find ElfDebugEnzyme here:</p>
<ul>
<li><a href="https://gist.github.com/charliecalvert/51daef341699943b07c9570c3ad2cbab">DebugEnzyme</a></li>
</ul>
<p>Here is an example of how to use it:</p>
<pre><code class="lang-javascript">  <span class="hljs-keyword">import</span> ElfDebugEnzyme <span class="hljs-keyword">from</span> <span class="hljs-string">'../ElfDebugEnzyme'</span>;
  <span class="hljs-keyword">const</span> elfDebug = <span class="hljs-keyword">new</span> ElfDebugEnzyme(<span class="hljs-literal">true</span>);

  elfDebug.getIndex(wrapper, <span class="hljs-string">'.AddressShowDiv'</span>, <span class="hljs-number">0</span>);
</code></pre>
<a class="anchor" id="jscs"></a>
<h2>JSCS</h2>
<p>I couldn&#39;t figure out what was going on with JSCS earlier in the quarter, or perhaps WebStorm was broken with ES6 code. At any rate, something has changed either in my head or in the world.</p>
<p>If you have not done so already, install JSCS globally:</p>
<p>  npm install -g jscs</p>
<p>Make sure JSCS <em><strong>is turned on</strong></em> in WebStorm. Go to <strong>Settings | Languages and Frameworks | JavaScript | Code Quality Tools | JSCS</strong> and make sure it is <strong>enabled</strong>.</p>
<p>Put this <strong>.jscsrc</strong> file in the root of your projects. Probably one for <strong>client</strong> and one for <strong>server</strong>:</p>
<pre><code class="lang-json">{
    <span class="hljs-attr">"preset"</span>: <span class="hljs-string">"google"</span>,
    <span class="hljs-attr">"maximumLineLength"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">"validateIndentation"</span>: <span class="hljs-number">4</span>,
    <span class="hljs-attr">"excludeFiles"</span>: [
        <span class="hljs-string">"**/node_modules/**"</span>,
        <span class="hljs-string">"**/config/**"</span>,
        <span class="hljs-string">"**/scripts/**"</span>,
        <span class="hljs-string">"**/bower_components/**"</span>,
        <span class="hljs-string">"**/address-list.js"</span>,
        <span class="hljs-string">"**/mock-user-info.js"</span>
    ]
}
</code></pre>
<p>Go to <strong>Setting | Editor | Code Style | JavaScript</strong>. On the Settings tab, in the first section, called <strong>Before Parentheses</strong>, set <strong>In Function Expression</strong> to false (unchecked). This means there should be no space after the word <strong>function.</strong>. Our code should look like this: <strong>function() {}</strong>. Not like this <strong>function () {}</strong>. Note the space after the word function in the second example.</p>
<p>JSCS should pass for your files. You can probably make this happen by choosing <strong>Code | Reformat</strong> in WebStorm, or by running the NPM package called <strong>js-beautify</strong>, which should be installed on your system in the global ~/npm/bin directory. If it is not installed, install it. But I do most of my formatting with WebStorm not <strong>js-beautify</strong>.</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/jscs-config.png" alt="Hopefully works for you too"></p>
<a class="anchor" id="jscs-punctuator"></a>
<h2>JSCS Punctuator</h2>
<p>Here is our current AddressChange:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">onAddressChange</span> = <span class="hljs-params">(event)</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.addressIndex += <span class="hljs-number">1</span>;
    const address = addresses[<span class="hljs-keyword">this</span>.addressIndex];

    <span class="hljs-keyword">this</span>.setState({
        address: address
    })
};
</code></pre>
<p>Get rid of the arrow function syntax, which is cutting edge experimental code that JSCS is not handling correctly:</p>
<pre><code class="lang-javascript">onAddressChange(event) {
    <span class="hljs-keyword">this</span>.addressIndex += <span class="hljs-number">1</span>;
    const address = addresses[<span class="hljs-keyword">this</span>.addressIndex];

    <span class="hljs-keyword">this</span>.setState({
        address: address
    })
};
</code></pre>
<p>All this is good and well, but now the <strong>this</strong> variable in <strong>onAddressChange</strong> is no longer valid. To fix it, add this code to the <strong>constructor</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">this</span>.onAddressChange = <span class="hljs-keyword">this</span>.onAddressChange.bind(<span class="hljs-keyword">this</span>);
</code></pre>
<p>The call to bind shown above is the traditional way to solve this problem. I was enamored of the arrow function syntax and thought it a nice better way to solve the &quot;invalid this&quot; problem. But that solution is not certain to make it into the final ES6 spec. So I&#39;m opting for this alternative solution, even if we lose the array function syntax.</p>
<p>See the <strong>setQuiet</strong> method in this gist for a complete working example of the fix:</p>
<ul>
<li><a href="https://gist.github.com/charliecalvert/cf20ae73a21bb34d6605a1f533c9d988">https://gist.github.com/charliecalvert/cf20ae73a21bb34d6605a1f533c9d988</a></li>
</ul>
<p><strong>NOTE</strong>: <em>When I got the punctuator error, the editor did not usually point right at the source of the problem. Instead, for me, it was often pointing at the first <strong>import</strong> statement at the top of the file. Eventually, I realized the problem was not the <strong>import</strong> statement, but the arrow functions. I found this to be quite confusing, and it took me several tries before I sorted it out. Once I removed the arrow function, however, the other JSCS errors were easier to find, and WebStorm pointed me at the place in the file where the error occurred.</em></p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Git <strong>add</strong>, <strong>commit</strong> and <strong>push</strong>. Git <strong>tag</strong> and/or create a <strong>branch</strong>. (If you are doing both, add the tag after you create the branch.) Use the word <strong>Midterm</strong> in your tag and/or branch messages. If there is any doubt as to which folder and branch your midterm is in, be sure to spell it out. For instance:</p>
<ul>
<li>Branch: <strong>midterm</strong></li>
<li>Tag: v6.00 with a message for <strong>midterm</strong></li>
<li>Folder: <strong>CongressAddress</strong></li>
</ul>
<p>I&#39;m happy if your branch is master, but if you feel comfortable creating a <strong>midterm</strong> branch, then do so just before you submit the assignment. You can update the branch at any time until the actual due date for the assignment. Even then, I would probably prefer a late update to a broken program.</p>
<a class="anchor" id="shallow-button-clicks"></a>
<h2>Shallow Button Clicks</h2>
<p>By definition, enzyme <strong>shallow</strong> works with only one component at a time. When we use <strong>shallow</strong>, it is therefore not possible to check if a button click is working correctly since that involves the interaction of two components.</p>
<p>However, even when we use shallow, an onClick function can be created within a button test to validate that the button responds to clicks. We implement the <strong>onClick</strong> function as a callback, and then confirm that when we click the button the callback is executed.</p>
<p>Here is an example:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// button test</span>
it(<span class="hljs-string">'responds to a button click'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-comment">//create variable to track button click status</span>
    <span class="hljs-keyword">let</span> clicked = <span class="hljs-literal">false</span>;
    <span class="hljs-comment">//create function to assign as onClick</span>
    <span class="hljs-keyword">const</span> callback = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        clicked = <span class="hljs-literal">true</span>;
    };

    <span class="hljs-keyword">const</span> wrapper = shallow(&lt;AddressShow onSetAddress = {callback} address={address}/&gt;);
    wrapper.find(<span class="hljs-string">'button#setAddress'</span>).simulate(<span class="hljs-string">'click'</span>);
    expect(clicked).toEqual(<span class="hljs-literal">true</span>);

});
</code></pre>
<p>Thanks to Andrew Wilson for inspiring this tip!</p>
<a class="anchor" id="contains-matching-element"></a>
<h2>Contains Matching Element</h2>
<p>Remember that for tests on our input elements we need to use containsMatching element:</p>
<p><strong>contains</strong> insists that all attributes for a tag match exactly, while <strong>containsMatchingElement</strong> allows you to match just one out of multiple attributes. In other words, it ignores attributes you don&#39;t care about. We have to use <strong>containsMatchingElement</strong> when testing our input controls since they contain <strong>onChange</strong> functions, and it is not easy or perhaps not even possible to match a function:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> inputElement = &lt;input <span class="hljs-keyword">value</span>=<span class="hljs-string">'Robin Dudette'</span>/&gt;;
<span class="hljs-comment">// Code omitted</span>
expect(wrapper.containsMatchingElement(inputElement)).toEqual(<span class="hljs-literal">true</span>);
</code></pre>
<p>This works even if the <strong>input</strong> control has a number of other attributes other than <strong>value</strong>.</p>
<a class="anchor" id="don-t-use-fetch-on-midterm"></a>
<h2>Don&#39;t Use Fetch on Midterm</h2>
<p>Unless you are absolutely sure you know what you are doing, don&#39;t call <strong>fetch</strong> on the midterm as it will break your tests. Just continue to get the data from <strong>address-list.js</strong>.</p>
<a class="anchor" id="filter-tests"></a>
<h2>Filter Tests</h2>
<p>Also, notice the menu the tests give you. Note the p option for filtering files. Suppose one of your test files is called Foo.test.js and one is called Bar.test.js. Press p and enter Foo. Only Foo.test.js will run:</p>
<pre><code>Watch Usage
 › Press <span class="hljs-keyword">a</span> <span class="hljs-built_in">to</span> run all tests.
 › Press o <span class="hljs-built_in">to</span> only run tests related <span class="hljs-built_in">to</span> changed <span class="hljs-built_in">files</span>.
 › Press p <span class="hljs-built_in">to</span> <span class="hljs-built_in">filter</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">a</span> filename regex pattern.
 › Press q <span class="hljs-built_in">to</span> quit watch mode.
 › Press Enter <span class="hljs-built_in">to</span> trigger <span class="hljs-keyword">a</span> test run.

 pattern › Foo
</code></pre><p>The result might look like this:</p>
<pre><code> PASS src/__tests__/Foo.test.js
 React Foo Suite
 ✓ see if true is true (6ms)

<span class="hljs-keyword">Test </span>Suites: 1 passed, 1 total
Tests: 1 passed, 1 total
Snapshots: 0 total
<span class="hljs-keyword">Time:</span> 0.545s, estimated 1s
Ran all test suites matching "Foo".

Watch Usage
 › Press a to run all tests.
 › Press o to only run tests related to changed files.
 › Press p to filter by a filename regex pattern.
 › Press q to quit watch mode.
 › Press Enter to trigger a test run.
</code></pre><p>Even though I had several tests in my __tests__ folder, only the one that had <strong>Foo</strong> in its name was run.</p>
<ul>
<li><a href="https://facebook.github.io/jest/docs/api.html">More information in the docs</a></li>
</ul>
</div></body></html>