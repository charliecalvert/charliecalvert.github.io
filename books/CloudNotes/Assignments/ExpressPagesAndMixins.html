<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ExpressPagesAndMixins</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>ExpressPagesAndMixins</h1><p>Welcomes to ExpressPagesAndMixins</p><ul><!--TOC_Start--><li><a href="#express-pages-and-mixins">Express Pages and Mixins</a></li>
<li><a href="#steps">Steps</a></li>
<li><a href="#create-page">Create page</a></li>
<li><a href="#bootstrap">BootStrap</a></li>
<li><a href="#bootswatch">Bootswatch</a></li>
<li><a href="#the-javascript">The JavaScript</a></li>
<li><a href="#the-mixins">The Mixins</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul><h1 id="express-pages-and-mixins">Express Pages and Mixins</h1>
<p>In class exercise</p>
<p>References:</p>
<ul>
<li><a href="http://bit.ly/jade-mixins">http://bit.ly/jade-mixins</a></li>
<li><a href="http://bit.ly/noderoutes">http://bit.ly/noderoutes</a></li>
<li>Bootstrap Slides: <a href="http://bit.ly/elf-bootstrap">http://bit.ly/elf-bootstrap</a></li>
</ul>
<h2 id="steps">Steps</h2>
<ul>
<li>Create a new express project: <strong>yo express</strong><ul>
<li>Or better, start with <a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/Design/JadeMixinSimple">JadeMixinSimple</a> from JsObjects.</li>
</ul>
</li>
<li>Add a new page called <strong>About</strong></li>
<li>Create bootstrap menus</li>
<li>Use Jade Mixins</li>
</ul>
<h2 id="create-page">Create page</h2>
<p>The details are in the slides listed above, in a slide from noderoutes called <strong>Add About Page</strong>. It&#39;s about the third slide in the deck. Two key lines are:</p>
<pre><code><span class="hljs-keyword">var</span> <span class="hljs-keyword">about</span> = require('./routes/<span class="hljs-keyword">About</span>');
<span class="hljs-comment">// Code omitted here</span>
<span class="hljs-keyword">app</span>.<span class="hljs-keyword">use</span>('/<span class="hljs-keyword">about</span>', <span class="hljs-keyword">about</span>);
</code></pre><h2 id="bootstrap">BootStrap</h2>
<pre><code><span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span><span class="hljs-keyword">bootstrap </span>--save-dev
</code></pre><pre><code>extends layout

block <span class="hljs-attribute">content</span>

    <span class="hljs-selector-class">.header</span>
        +nav(<span class="hljs-string">"Prog272 Midterm"</span>, <span class="hljs-string">"navigationbar"</span>, <span class="hljs-string">"navbar-default navbar-fixed-top"</span>)
            +nav_item( <span class="hljs-string">"/"</span>, <span class="hljs-string">"home"</span>, <span class="hljs-string">"active"</span> ) Home
            +nav_item( <span class="hljs-string">"json-ajax"</span>, <span class="hljs-string">"json-ajax"</span>) JsonAjax
            +nav_item( <span class="hljs-string">"about"</span>, <span class="hljs-string">"about"</span> ) About
            +nav_item_dropdown( <span class="hljs-string">"#"</span> )( label=<span class="hljs-string">"Dropdown"</span> )
                +nav_item( <span class="hljs-string">"#"</span> ) Action
                +nav_item( <span class="hljs-string">"#"</span> ) Another action
                +nav_item( <span class="hljs-string">"#"</span> ) Something <span class="hljs-keyword">else</span> here
                +nav_divider
                +nav_header Nav <span class="hljs-selector-tag">header</span>
                +nav_item( <span class="hljs-string">"#"</span> ) Separated link
                +nav_item( <span class="hljs-string">"#"</span> ) One more separated link
</code></pre><p>Set the active menu:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setActiveMenuItem</span>(<span class="hljs-params"></span>) </span>{

    $(<span class="hljs-string">".nav li"</span>).removeClass(<span class="hljs-string">"active"</span>);

    <span class="hljs-comment">// var menuItem = $('a[href=".' + this.location.pathname + '"]');</span>
    <span class="hljs-keyword">var</span> name = <span class="hljs-keyword">this</span>.location.pathname;
    <span class="hljs-keyword">var</span> name = name.slice(<span class="hljs-number">1</span>, name.length).trim();
    <span class="hljs-keyword">if</span> (name.length === <span class="hljs-number">0</span>) { name = <span class="hljs-string">'home'</span>; }
    <span class="hljs-keyword">var</span> selector = <span class="hljs-string">'#'</span> + name;
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">var</span> menuItem1 = $(selector);
        menuItem1.addClass(<span class="hljs-string">'active'</span>);
    } <span class="hljs-keyword">catch</span>(e) {
       <span class="hljs-comment">// console.log('Could not find selector. This is expected when testing.', e);</span>
    }

}
</code></pre><p>After we covered this method in class, I realized that it would throw an exception in your unit tests because it may not be able to find the menus, which at least for now, may not be part of your tests. So I have added a <strong>try catch</strong> statement to suppress the exception if it occurs.</p>
<h2 id="bootswatch">Bootswatch</h2>
<p><a href="https://bootswatch.com/">Bootswatch</a> is a tool for adding themes to bootstrap. When working with our mixins, try using it like this:</p>
<pre><code>+bootswatch(&#39;cerulean&#39;)
</code></pre><p>For instance:</p>
<pre><code><span class="hljs-keyword">extends </span>menu-mixin

<span class="hljs-keyword">block </span>append content
  h1= title
  p Welcome to <span class="hljs-comment">#{title}</span>

  +attribution

  +<span class="hljs-keyword">bio
</span>
  +<span class="hljs-keyword">bootswatch('cerulean')</span>
</code></pre><p>Here bcerulean** is one of the bootswatch themes. Don&#39;t, as a number of you did, try using it like this, as it just throws an error:</p>
<pre><code><span class="hljs-addition">+bootswatch</span>
</code></pre><p>You have to pass in the name of the theme you want to use, as described above.    </p>
<h2 id="the-javascript">The JavaScript</h2>
<p>Create two files in <strong>public/javascripts</strong>:</p>
<ul>
<li><strong>Control.js</strong>: For the main page</li>
<li><strong>About.js</strong>: For the about page</li>
</ul>
<p>But a button on each page. </p>
<ul>
<li>First button:     <ul>
<li>id: mainButton</li>
</ul>
</li>
<li>Second button <ul>
<li>id: aboutButton</li>
</ul>
</li>
</ul>
<p>When the user clicks on either button, place text on the appropriate page in an HTML paragraph element.</p>
<p>Put the button handler for the main page in <strong>Control.js</strong>.</p>
<p>Put the button handler for the about in <strong>About.js</strong></p>
<p>Put document ready in <strong>Control.js.</strong> Use the module pattern for each page:</p>
<pre><code><span class="hljs-keyword">var</span> = Main = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// Code to initialize button handler (click) goes here.</span>
   }

   <span class="hljs-keyword">return</span> Main;
})();
</code></pre><p>Details are on <a href="http://elvenware.com/charlie/development/web/JavaScript/JavaScriptModules.html">Elvenware</a>.</p>
<h2 id="the-mixins">The Mixins</h2>
<p>Place the following code in <strong>/views/mixins.jade</strong></p>
<pre><code>mixin bootswatch(theme)
    link(href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.0/" + theme + "/bootstrap.min.css", rel="stylesheet")

//- Navbar mixins
mixin nav(name, id, style)
    - var style = (typeof style === 'undefined') ? "navbar-default" : style
    nav(class=["navbar", style], role="navigation")
        .container-fluid#navfluid
            .navbar-header
                button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#navigationbar')
                    span.sr-only Toggle navigation
                    span.icon-bar
                    span.icon-bar
                    span.icon-bar
                a.navbar-brand(href='./index.html') Project name
            .collapse.navbar-collapse( id=id )
                ul.nav.navbar-nav
                    block

mixin nav_item(href, idName, active)
    li(class=active, id=idName): a( href=href )
        block

mixin nav_item_dropdown(href, active)
    li.dropdown
        a.dropdown-toggle(href=href, data-toggle='dropdown', role='button', aria-expanded='false')
            | Dropdown
            span.caret
        ul.dropdown-menu(role='menu')
            block

mixin nav_item_dropdowna(href, active)
    li(class=["dropdown", active])
        a.dropdown-toggle( href=href, data-toggle="dropdown", role="button", aria-expanded="false" )= attributes.label
        span.caret
        ul.dropdown-menu( role="menu" )
            block

mixin nav_divider
    li.divider

mixin nav_header
    li.dropdown-header
        block
//- <span class="hljs-keyword">End</span> navbar mixins

//- Panel mixin
mixin panel(<span class="hljs-keyword">heading</span>, <span class="hljs-keyword">style</span>)
    - <span class="hljs-keyword">var</span> <span class="hljs-keyword">style</span> = (typeof <span class="hljs-keyword">style</span> === <span class="hljs-string">'undefined'</span>) ? <span class="hljs-string">"default"</span> : <span class="hljs-keyword">style</span>
    <span class="hljs-keyword">div</span>( <span class="hljs-keyword">class</span>=[<span class="hljs-string">"panel"</span>, <span class="hljs-string">"panel-"</span> + <span class="hljs-keyword">style</span>] )
        .panel-<span class="hljs-keyword">heading</span>= <span class="hljs-keyword">heading</span>
        .panel-<span class="hljs-keyword">body</span>
            <span class="hljs-keyword">block</span>

//- Button mixin
mixin button(<span class="hljs-keyword">style</span>, href, <span class="hljs-keyword">size</span>)
    - <span class="hljs-keyword">var</span> <span class="hljs-keyword">style</span> = (typeof <span class="hljs-keyword">style</span> === <span class="hljs-string">'undefined'</span>) ? <span class="hljs-string">"default"</span> : <span class="hljs-keyword">style</span>
    - <span class="hljs-keyword">var</span> href = (typeof href === <span class="hljs-string">'undefined'</span>) ? <span class="hljs-string">"#"</span> : href
    <span class="hljs-keyword">case</span> <span class="hljs-keyword">size</span>
        <span class="hljs-keyword">when</span> <span class="hljs-string">"large"</span>
            - <span class="hljs-keyword">size</span> = <span class="hljs-string">"btn-lg"</span>
        <span class="hljs-keyword">when</span> <span class="hljs-string">"small"</span>
            - <span class="hljs-keyword">size</span> = <span class="hljs-string">"btn-sm"</span>
        <span class="hljs-keyword">when</span> <span class="hljs-string">"mini"</span>
            - <span class="hljs-keyword">size</span> = <span class="hljs-string">"btn-xs"</span>
    a( <span class="hljs-keyword">class</span>=[<span class="hljs-string">"btn"</span>, <span class="hljs-string">"btn-"</span> + <span class="hljs-keyword">style</span>, <span class="hljs-keyword">size</span>], href=href )
        <span class="hljs-keyword">block</span>

//- <span class="hljs-keyword">List</span> <span class="hljs-keyword">group</span> mixins
- <span class="hljs-keyword">var</span> groupType
mixin listGroup(<span class="hljs-keyword">type</span>, <span class="hljs-keyword">id</span>)
    - groupType = <span class="hljs-keyword">type</span>
    <span class="hljs-keyword">case</span> groupType
        <span class="hljs-keyword">when</span> <span class="hljs-string">'list'</span>
            ul.<span class="hljs-keyword">list</span>-<span class="hljs-keyword">group</span>(<span class="hljs-keyword">id</span>=<span class="hljs-keyword">id</span>)
                <span class="hljs-keyword">block</span>
        <span class="hljs-keyword">default</span>
            .<span class="hljs-keyword">list</span>-<span class="hljs-keyword">group</span>(<span class="hljs-keyword">id</span>=<span class="hljs-keyword">id</span>)
                <span class="hljs-keyword">block</span>

mixin listItem(arg1, arg2)
    <span class="hljs-keyword">case</span> groupType
        <span class="hljs-keyword">when</span> <span class="hljs-string">'list'</span>
            li( <span class="hljs-keyword">class</span>=[<span class="hljs-string">"list-group-item"</span>, arg1] )
                <span class="hljs-keyword">block</span>
        <span class="hljs-keyword">when</span> <span class="hljs-string">'links'</span>
            a( href=arg1, <span class="hljs-keyword">class</span>=[<span class="hljs-string">"list-group-item"</span>, arg2] )
                <span class="hljs-keyword">block</span>
        <span class="hljs-keyword">default</span>
            .<span class="hljs-keyword">list</span>-<span class="hljs-keyword">group</span>-item( <span class="hljs-keyword">class</span>=[<span class="hljs-string">"list-group-item"</span>, arg1] )
                <span class="hljs-keyword">block</span>

mixin listHeading
    h4.<span class="hljs-keyword">list</span>-<span class="hljs-keyword">group</span>-item-<span class="hljs-keyword">heading</span>
        <span class="hljs-keyword">block</span>

mixin listText
    .<span class="hljs-keyword">list</span>-<span class="hljs-keyword">group</span>-item-<span class="hljs-built_in">text</span>
        <span class="hljs-keyword">block</span>
</code></pre><h2 id="turn-it-in">Turn it in</h2>
<p>In Week07-InClassMixin</p>
</div></body></html>