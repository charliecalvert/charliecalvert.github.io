<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>Isit320Midterm2015</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>Isit320Midterm2015</h1><p>Welcomes to Isit320Midterm2015</p><ul><!--TOC_Start--><li><a href="#isit320-midterm-2015">Isit320 Midterm 2015</a></li>
<li><a href="#overview">What to Build</a></li>
<li><a href="#what-to-test">What to Test</a></li>
<li><a href="#objects">Objects</a></li>
<li><a href="#showing-images">Showing Images</a></li>
<li><a href="#create-modules">Create Modules</a></li>
<li><a href="#finding-images">Finding Images</a></li>
<li><a href="#creative-common-s-images">Creative Common&#39;s Images</a></li>
<li><a href="#google-search">Google Search</a></li>
<li><a href="#creative-commons-search">Creative Commons Search</a></li>
<li><a href="#aws-s3">AWS S3</a></li>
<li><a href="#icon-missing">Fav-Icon Missing - 404</a></li>
<li><a href="#create-launcher">Create Launcher</a></li>
<li><a href="#call-server">Call Server</a></li>
<li><a href="#test-downloads">Test Downloads</a></li><!--TOC_End--></ul><h1 id="isit320-midterm-2015">Isit320 Midterm 2015</h1>
<p>This document is still being tweaker, but there is enough here to get you to a reasonably complete state.</p>
<p>Here are the steps to complete the midterm:</p>
<p>Polish the following programs, making sure they work smoothly and are reasonably complete:</p>
<ul>
<li><strong>BitlyRefine</strong></li>
<li><strong>TwitterRefine</strong> </li>
<li><strong>BootstrapDelicious</strong></li>
</ul>
<p>Extend at least one of these programs to support viewing images stored in the cloud. Twitter might be a good choice for this.</p>
<p>Create a new program called <strong>Week08-Midterm</strong>. The program should integrate Delicious, Bitly and Twitter.</p>
<p>Store links in:</p>
<ul>
<li>Bitly</li>
<li>Delicious</li>
<li>Twitter</li>
</ul>
<p><strong>NOTE</strong>: I have pulled this section of the midterm as too ambitious: View a <em>gallery</em> of images created from Bitly or Delicious links and Twitter posts. We will do this before the quarter ends, but not yet.</p>
<h2 id="overview">What to Build</h2>
<p>Create a new project based on <strong>Week08-Single-Page-Express</strong>. Alternatively, copy your <strong>Bitly Refine</strong> or <strong>Twitter Refine</strong> application into a new folder labeled: <strong>Week08-Midterm</strong>. If you copied a project, make all the appropriate changes regarding the name of the application. When changing the title in <strong>/routes/index.js</strong> make sure to include your name. For instance: <strong>midterm-lastname</strong>.</p>
<p>Your modified app should have the following.</p>
<p>Four radio buttons in a panel labeled <strong>Image Source</strong>:</p>
<ul>
<li>Bitly</li>
<li>Delicious</li>
<li>Twitter</li>
<li>Local</li>
</ul>
<p>When the buttons are selected, search Bitly, Delicious or Twitter for your images. These means you need to create groups or hash tags in Bitly, Delicious and Twitter that will return the results you expect. For instance here is a possible twitter tag for my images: <strong>#calvert-images</strong>.</p>
<p>To make all this work, I created three three files and put them in <strong>public/javascripts/link</strong>:</p>
<ul>
<li>bitly.js</li>
<li>twitter.js</li>
<li>delicious.js</li>
</ul>
<p>The code for handling our various link options is in each of these files. The bitly cloud and bitly local requests are handled in <strong>bitly.js</strong>, the twitter requests in <strong>twitter.js</strong>, and the delicious requests in <strong>delicious.js</strong>. In general, the code from the:</p>
<ul>
<li>TwitterRefine version of <strong>control.js</strong> is found in <strong>twitter.js</strong></li>
<li>DelicousBootstrap version of <strong>control.js</strong> is found in <strong>delicious.js</strong></li>
<li>BitlyRefine version of <strong>control.js</strong> is found in <strong>bitly.js</strong></li>
</ul>
<p>I tweaked the code here and there, and wrapped stand alone functions in JavaScript literal objects, but otherwise the majority of the code ported over unchanged. In general, the code changes were focused on changes in naming conventions, not in a program logic.</p>
<p>For instance, consider this excerpt from the sole object found in <strong>delicious.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> elfDelicious = {

    <span class="hljs-comment">// CODE OMITTED HERE</span>

    delicious: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">        'use strict'</span>;
        <span class="hljs-keyword">var</span> subject = $(<span class="hljs-string">'#subject'</span>).val();
        elfDelicious.callDelicious(subject);
    },

    <span class="hljs-comment">// CODE OMITTED HERE</span>
}
</code></pre>
<p>As you can see, this is similar to a method found in <strong>BootstrapDelicious</strong>. There was only one change:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">callDelicious</span><span class="hljs-params">(subject)</span></span> -&gt; elfDelicious.<span class="hljs-function"><span class="hljs-title">callDelicious</span><span class="hljs-params">(subject)</span></span>
</code></pre>
<p>Make some other minor changes. For instance:</p>
<ul>
<li>For better of worse, I have changed <strong>elfDownloads.getBitlyData</strong> to <strong>elfDownloads.getLinks</strong>.</li>
</ul>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/isit320-midterm-uml-2015.png" alt="Midterm Uml Diagram"></p>
<h2 id="what-to-test">What to Test</h2>
<p>There is a folder called $ELF_TEMPLATES/UnitTest/Isit320Midterm2015 which currently contains at least one test suite. Over the weekend I will be moving more tests into it.</p>
<p>Make sure all the tests for <strong>BitlyRefine</strong> pass, as expained <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/BitlyRefine.html#unit-tests">here</a>.</p>
<p>Make sure the <strong>check-karma-grunt-config</strong> bash script passes. This file shold be in your <strong>~/bin</strong> directory:</p>
<pre><code class="lang-bash">cp <span class="hljs-variable">$JSOBJECTS</span>/Utilities/NodeInstall/check-karma-grunt-config ~/bin/.
</code></pre>
<p>Then copy the tests from the Isit320Midterm2015 directory to your <strong>spec</strong> folder and make sure they all pass. The goal here is to help you complete the midterm, but getting the tests to pass also effects your grade.</p>
<p>You can have tests of your own besides the ones that I create. It would be good to prefix your tests with your last name:</p>
<ul>
<li>lastname-test-basic.js</li>
<li>lastname-custom-tests.js</li>
</ul>
<p>And so on. I&#39;m not concerned about the name you give you the test files, only that I can easily tell your tests from my tests.</p>
<h2 id="objects">Objects</h2>
<p>The main class in <strong>control.js</strong> should now be called <strong>elfMidterm</strong>. In the past similar objects have had names such as <strong>elfBitly</strong>, <strong>queryDelicious</strong> and <strong>bitlyUrlParser</strong></p>
<ul>
<li><strong>#isit320-calvert-images</strong></li>
</ul>
<p>Make sure the dashes work. I tried this on Bitly: <strong>elf-image</strong>. It did not work. But <strong>image</strong> did. I assume the trouble was the tag.</p>
<p>The query on bitly:</p>
<pre><code><span class="hljs-string">https:</span><span class="hljs-comment">//api-ssl.bitly.com/v3/user/link_history?access_token=&lt;TOKEN&gt;&amp;query=image</span>
</code></pre><p>Display the images in a clickable list. When the user clicks on an item, display the image.</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/isit320-midterm-2015.png" alt="Midterm Overview"></p>
<h2 id="showing-images">Showing Images</h2>
<p>To show an image dynamically, you can start with an image tag in your HTML:</p>
<pre><code class="lang-jade">+<span class="hljs-function"><span class="hljs-title">elfPanel</span><span class="hljs-params">(<span class="hljs-string">"Image Display"</span>)</span></span><span class="hljs-class">.elfDiv</span>
    img#image
</code></pre>
<p>Then its nice to have a little code that will fill in the <strong>src</strong> field of the image tag when the user selects an image:</p>
<pre><code class="lang-javascript">hyperlinkUrl: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, text, url</span>) </span>{
    <span class="hljs-keyword">var</span> anchor = <span class="hljs-string">'&lt;a href="'</span> + url + <span class="hljs-string">'" target="_blank"&gt;'</span> + text + <span class="hljs-string">'&lt;/a&gt;'</span>;
    <span class="hljs-keyword">var</span> details = <span class="hljs-string">'&lt;a onclick="elfDisplay.displayImage('</span> + index + <span class="hljs-string">')"&gt;Details&lt;/a&gt;'</span>;
    <span class="hljs-keyword">return</span> { title: anchor, keyword: details };
},

displayImage: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>) </span>{
    <span class="hljs-keyword">var</span> link = elfBitly.getLinkHistoryItem(index);
    $(<span class="hljs-string">'#image'</span>).attr(<span class="hljs-string">'src'</span>, link.keyword_link);
},
</code></pre>
<p>You have seen a variation of the first method before under the name <strong>appendUrl</strong>. It is used to wrap a bit of text in an anchor. This makes it clickable; it turns it into a hyperlink.</p>
<p>Here is what you <strong>img</strong> tag looks like before the <strong>displayImage</strong> method is called:</p>
<pre><code class="lang-xml">&lt;<span class="hljs-tag">img</span> id=<span class="hljs-string">"image"</span>&gt;
</code></pre>
<p>After the <strong>displayImage</strong> method is called, the HTML that you create looks like this:</p>
<pre><code class="lang-xml">&lt;<span class="hljs-tag">img</span> id=<span class="hljs-string">"image"</span> src=<span class="hljs-string">"http://bit.ly/bootstrap-basics-01"</span>&gt;
</code></pre>
<p>The second line of code in the method sets the <strong>src</strong> attribute of the <strong>img</strong> element. This is all that needs to be done to load the image. If you are at all unclear on how the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img">img tag</a> and its <strong>src</strong> attribute work, please take a moment to do some research on the web. You have to understand those subjects to understand this code, or to continue doing any kind of serious work on the web.</p>
<p><strong>NOTE</strong>: <em>In my implementation, both the <strong>hyperlinkUrl</strong> method, which you have seen before, and the <strong>displayImage</strong> method, are part of the <strong>elfDisplay</strong> object.</em></p>
<h2 id="create-modules">Create Modules</h2>
<p>I might well need more before I&#39;m done, but I&#39;m working hard to create small, easy to manage objects:</p>
<pre><code class="lang-bash">[charlie@rohan-gate ~/Git/isit320-calvert-<span class="hljs-number">2015</span>/Week08-Midterm]
$ ls -l <span class="hljs-keyword">public</span>/javascripts/
total <span class="hljs-number">16</span>
-rw-rw-r-- <span class="hljs-number">1</span> charlie charlie <span class="hljs-number">2467</span> Nov  <span class="hljs-number">7</span> <span class="hljs-number">15</span>:<span class="hljs-number">19</span> control.js
-rw-rw-r-- <span class="hljs-number">1</span> charlie charlie <span class="hljs-number">2357</span> Nov  <span class="hljs-number">7</span> <span class="hljs-number">15</span>:<span class="hljs-number">47</span> display.js
-rw-rw-r-- <span class="hljs-number">1</span> charlie charlie <span class="hljs-number">1143</span> Nov  <span class="hljs-number">7</span> <span class="hljs-number">15</span>:<span class="hljs-number">26</span> downloads.js
-rw-rw-r-- <span class="hljs-number">1</span> charlie charlie  <span class="hljs-number">475</span> Nov  <span class="hljs-number">7</span> <span class="hljs-number">14</span>:<span class="hljs-number">51</span> movement.js
</code></pre>
<p>Of course, you will have to load this code in <strong>layout.jade:</strong></p>
<pre><code class="lang-jade">doctype <span class="hljs-tag">html</span>
<span class="hljs-tag">html</span>
  head
    <span class="hljs-function"><span class="hljs-title">meta</span><span class="hljs-params">(charset=<span class="hljs-string">'UTF-8'</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">meta</span><span class="hljs-params">(name=<span class="hljs-string">'viewport'</span>, content=<span class="hljs-string">'width=device-width'</span>)</span></span>
    title= title
    <span class="hljs-function"><span class="hljs-title">link</span><span class="hljs-params">(rel=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'/stylesheets/style.css'</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">link</span><span class="hljs-params">(rel=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'/components/bootstrap/dist/css/bootstrap.css'</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"components/jquery/dist/jquery.js"</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"components/bootstrap/dist/js/bootstrap.js"</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/control.js"</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/downloads.js"</span>)</span></span>
    etc...
</code></pre>
<h2 id="finding-images">Finding Images</h2>
<p>There are two ways that I know about for storing images in the cloud:</p>
<ul>
<li>Free services</li>
<li>Pay services</li>
</ul>
<p>Both Google Photos (with Picassa Web) and Imagur provide at least a limited ability to create galleries and show them on your web site. However, these services have real limitations, and they feel, to me at least, a bit tentative, as if they may not be available for very long.</p>
<p>As a result, I want you to use a combination of:</p>
<ul>
<li>Free Creative Commons Images</li>
<li>Images from S3 for which you must pay</li>
</ul>
<h2 id="creative-common-s-images">Creative Common&#39;s Images</h2>
<p>The images under the creative commons license are usually free for you to use in your own program. Sometimes you need to provide attribution, and some images can be edited and others can&#39;t, but overall, this is a great source of free images. Here are two simple ways to find creative commons images:</p>
<ul>
<li>Google search</li>
<li>Creative commons search</li>
</ul>
<h3 id="google-search">Google Search</h3>
<ul>
<li>Go to Google. Search on subject, for instance: <a href="http://www.google.com/search?q=cpu">cpu</a></li>
<li>Click on Images: <a href="http://www.google.com/search?q=cpu&amp;source=lnms&amp;tbm=isch">CPU Image Search</a></li>
<li>Click on Search Tools</li>
<li>Set the license option to: <a href="http://www.google.com/search?q=cpu&amp;source=lnms&amp;tbm=isch&amp;tbs=sur:fmc">labeled for reuse with modification</a></li>
</ul>
<p>You are looking at images that you are free to reuse. Right click and choose <strong>Copy image url</strong>.</p>
<p><strong>NOTE</strong>: <em>By clicking on some of these images, you can sometimes drill down to the site on which they are hosted. In those cases, you can often get more information, such as licensing, links to images of various sizes, etc.</em></p>
<p>Here is a freely reusable image found on Google search:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images-test-01/cpu-564772_640.jpg" alt="cpu"></p>
<p>Below is a thumbnail which you can click to get the full size image.</p>
<p><a href="https://upload.wikimedia.org/wikipedia/commons/thumb/4/42/80486DX2_arch.svg/2000px-80486DX2_arch.svg.png"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/42/80486DX2_arch.svg/500px-80486DX2_arch.svg.png" alt="arch"></a></p>
<h3 id="creative-commons-search">Creative Commons Search</h3>
<p>Go to the creative commons search site:</p>
<ul>
<li><a href="https://search.creativecommons.org/">https://search.creativecommons.org/</a>.</li>
</ul>
<p>Enter a search string such as <strong>sailing</strong>. Select one of the boxes under the <strong>Search using</strong> tag:</p>
<ul>
<li>Flickr Images</li>
<li>Google Images</li>
<li>Pixabay</li>
</ul>
<p>Muck around until you get the URL for your image.</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images-test-01/ships-701596_640.jpg" alt="Sailing"></p>
<p><strong>NOTE</strong>: *Apparently pixabay images can&#39;t loaded directly from their site. You will therefore have to download them, and then host them on another site, such as S3.</p>
<h2 id="aws-s3">AWS S3</h2>
<p>When all is said and done, I think the simplest way to store images in the cloud that you want to view on your web site is to pay for it. To make a long story short, Amazon Web Services S3 option allows you store images in the cloud for pennies a month. For instance, most of the images that you see on our Isit320 web sites are stored on S3, and I paid three cents last months for the privilege.</p>
<p>It simply makes no sense to go through the hastle of trying to get around the limitations of the Google and Imagur services when Amazon provides such an inexpensive solution.</p>
<p>One pay service that I use frequently is Amazon Web Services S3. Anyone can create an AWS account and use it (within reason) for one year for free. After that, you need to start paying.</p>
<p>First sign up for [the free tier][free-tier] or sign into your existing account. Then start to <a href="http://www.elvenware.com/charlie/development/cloud/WebServices.html#s3">use S3</a>.</p>
<p><strong>NOTE</strong>: <em>AWS offers one year of free usage for reasonable requests. Be sure to sign up for the free tier. If you have any doubts, please wait until Tuesday before creating your account. However, it is not really that complicated.</em></p>
<ul>
<li>Use the free tier</li>
<li>Have a credit card and a phone ready.</li>
<li>Follow <a href="http://www.elvenware.com/charlie/development/cloud/WebServices.html#s3">my instructions</a> to start uploading images to your S3 account.</li>
</ul>
<p><a href="http://www.elvenware.com/charlie/development/cloud/WebServices.html#aws">free-tier</a></p>
<ul>
<li><a href="http://calculator.s3.amazonaws.com/index.html">http://calculator.s3.amazonaws.com/index.html</a></li>
</ul>
<h2 id="icon-missing">Fav-Icon Missing - 404</h2>
<p>Sometimes, on startup, you get an error about your favorite icon missing. I believe the <strong>CreateExpressProject</strong> script will put a 32 X 32 image file called called <strong>favicon.png</strong> in your <strong>public</strong> directory. To display the icon, you need to open <strong>app.js</strong>. Around line 17 you will find this code:</p>
<pre><code class="lang-javascript">// uncomment <span class="hljs-keyword">after</span> placing your favicon <span class="hljs-keyword">in</span> /public
//app.<span class="hljs-keyword">use</span>(favicon(path.join(__dirname, <span class="hljs-attribute">'public</span>', <span class="hljs-attribute">'favicon</span>.ico')));
</code></pre>
<p>Uncomment the second line and change <strong>favicon.ico</strong> to <strong>favicon.png</strong>.</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// uncomment after placing your favicon in /public</span>
app.<span class="hljs-keyword">use</span>(favicon(path.join(__dirname, <span class="hljs-string">'public'</span>, <span class="hljs-string">'favicon.png'</span>)));
</code></pre>
<p>Now the error should go away. You can use any image editor you want to modify the <strong>favicon.png</strong> file. On Linux, the tool of choice is called <strong>gimp</strong>, but simpler tools will probably a do simple job like this just as well.</p>
<h2 id="create-launcher">Create Launcher</h2>
<p>When we run our tests, <strong>control.js</strong> gets loaded. At the bottom (or top) of <strong>control.js</strong> is this code:</p>
<pre><code class="lang-javascript">$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    'use strict'</span>;
    $(<span class="hljs-string">'#localData'</span>).prop(<span class="hljs-string">'checked'</span>, <span class="hljs-literal">true</span>);
    elfMidterm.getLinks(elfDownloads.dataTypes.dtLocal);
    $(<span class="hljs-string">'#dataSource'</span>).click(elfDownloads.dataTypeSelection);
});
</code></pre>
<p>Notice in particular the call to <strong>getBitlyLinks</strong>. This call, or any similar call, will fail when we are running our tests. There are several solutions to this, but on simple solution is to move <strong>documennt ready</strong> into its own file, and then exclude that file from our tests. In particular, we can create a file called <strong>loader.js</strong>:</p>
<pre><code class="lang-javascript">$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    'use strict'</span>;
    elfMidterm.initialize();
});
</code></pre>
<p>My elfMidterm is in <strong>control.js</strong> and looks like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> elfMidterm = {

    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">        'use strict'</span>;
        $(<span class="hljs-string">'#localData'</span>).prop(<span class="hljs-string">'checked'</span>, <span class="hljs-literal">true</span>);
        elfCallServer.loadBitly();
        elfBitly.getLinks(elfDownloads.dataTypes.dtLocal);
        $(<span class="hljs-string">'#dataSource'</span>).click(elfDownloads.dataTypeSelection);
    },

};
</code></pre>
<p>Then load the file in <strong>layout.jade</strong></p>
<pre><code class="lang-javascript">doctype <span class="hljs-tag">html</span>
<span class="hljs-tag">html</span>
    head
        <span class="hljs-function"><span class="hljs-title">meta</span><span class="hljs-params">(charset=<span class="hljs-string">'UTF-8'</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">meta</span><span class="hljs-params">(name=<span class="hljs-string">'viewport'</span>, content=<span class="hljs-string">'width=device-width'</span>)</span></span>
        title= title
        <span class="hljs-function"><span class="hljs-title">link</span><span class="hljs-params">(rel=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'/stylesheets/style.css'</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">link</span><span class="hljs-params">(rel=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'/components/bootstrap/dist/css/bootstrap.css'</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"components/jquery/dist/jquery.js"</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"components/bootstrap/dist/js/bootstrap.js"</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/loader.js"</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/control.js"</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/downloads.js"</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/movement.js"</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/display.js"</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/twitter.js"</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/delicious.js"</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/bitly.js"</span>)</span></span>
        <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/call-server.js"</span>)</span></span>
    <span class="hljs-tag">body</span>
        block <span class="hljs-attribute">content</span>
</code></pre>
<p>And exclude it form <strong>karma.conf.js</strong>:</p>
<pre><code class="lang-javascript">        <span class="hljs-attribute">files</span>: [
            <span class="hljs-string">'public/components/jquery/dist/jquery.min.js'</span>,
            <span class="hljs-string">'public/javascripts/*.js'</span>,
            <span class="hljs-string">'spec/test*.js'</span>,
            <span class="hljs-string">'spec/bitly-links.js'</span>
        ],

        <span class="hljs-comment">// list of files to exclude</span>
        <span class="hljs-attribute">exclude</span>: [<span class="hljs-string">'public/javascripts/loader.js'</span>],
</code></pre>
<p>Now our <strong>document ready</strong> function will get loaded when we run our program, but not when we run our tests.</p>
<h2 id="call-server">Call Server</h2>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> elfCallServer = {

    loadBitly: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">        'use strict'</span>;
        $(<span class="hljs-string">'#displayContainer'</span>).load(<span class="hljs-string">'/bitly'</span>);
    },

    loadDelicious: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">        'use strict'</span>;
        $(<span class="hljs-string">'#displayContainer'</span>).load(<span class="hljs-string">'/delicious'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response, status, xhr</span>) </span>{
            <span class="hljs-keyword">if</span> (status == <span class="hljs-string">'error'</span>) {
                <span class="hljs-keyword">var</span> msg = <span class="hljs-string">'Sorry but there was an error: '</span>;
                <span class="hljs-comment">// $('#error' ).html( msg + xhr.status + ' ' + xhr.statusText );</span>
                <span class="hljs-built_in">console</span>.log(msg + xhr.status + <span class="hljs-string">' '</span> + xhr.statusText);
            } <span class="hljs-keyword">else</span> {
                elfDelicious.deliciousSetup();
            }
        });
    },

    loadTwitter: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">        'use strict'</span>;
        $(<span class="hljs-string">'#displayContainer'</span>).load(<span class="hljs-string">'/twitter'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response, status, xhr</span>) </span>{
            <span class="hljs-keyword">if</span> (status == <span class="hljs-string">'error'</span>) {
                <span class="hljs-keyword">var</span> msg = <span class="hljs-string">'Sorry but there was an error: '</span>;
                <span class="hljs-comment">// $( '#error' ).html( msg + xhr.status + ' ' + xhr.statusText );</span>
                <span class="hljs-built_in">console</span>.log(msg + xhr.status + <span class="hljs-string">' '</span> + xhr.statusText);
            } <span class="hljs-keyword">else</span> {
                elfTwitter.twitterSetup();
            }
        });

    }
};
</code></pre>
<h2 id="test-downloads">Test Downloads</h2>
<p>The code for testing downloads is in <strong>spec/test-downloads.js</strong>. The latest version is in:</p>
<pre><code><span class="hljs-variable">$ELF</span>_TEMPLATES/UnitTest/Isit320Midterm2015
</code></pre></div></body></html>