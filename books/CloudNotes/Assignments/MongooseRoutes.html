<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>MongooseRoutes</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body ng-app="elfApp"><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>MongooseRoutes</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#description">Description</a></li>
<li><a href="#menus">Menus</a></li>
<li><a href="#sorting">Sorting</a></li>
<li><a href="#routing-comments">Routing Comments</a></li>
<li><a href="#routing-login">Routing Login</a></li><!--TOC_End--></ul><h2 id="description">Description</h2>
<p>In this assignment we will integrate our comments into our main application.</p>
<p>Key points:</p>
<ul>
<li>Establish a stand-alone <strong>connect</strong> object for connecting to Mongoose.</li>
<li>Set up a separate route for <strong>comments</strong>. We don&#39;t route these requests throught <strong>routes/index.js</strong>. Instead, we set up <strong>routes/comment.js</strong>.</li>
</ul>
<h2 id="menus">Menus</h2>
<p>The menu starts like this:</p>
<pre><code>nav.navbar-default.navbar-fixed-top
    .container-fluid
</code></pre><p>Inside the div with the class <strong>container-fluid</strong> we want to put two more divs. The first is the hamburger menu:</p>
<pre><code>div.navbar-header
    button(type=&quot;button&quot; class=&quot;navbar-toggle collapsed&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#myTarget&quot;)
        span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
        a.navbar-brand(href=&quot;#/&quot;) Final
</code></pre><p>Then we put in our menu, giving it the same id as the data-target from <strong>navbar-header</strong>. The
point is that this is the menu that will collapse into the hamburger menu:</p>
<pre><code>#myTarget.collapse.navbar-collapse
    ul.nav.navbar-nav
        li(ng-class=&quot;{ active: isActive(&#39;/&#39;)}&quot;)
            a(ng-href=&#39;#/&#39;) Home
        li(ng-class=&quot;{ active: isActive(&#39;/edit&#39;)}&quot;)
            a(ng-href=&#39;#/edit&#39;) Edit
        li(ng-class=&quot;{ active: isActive(&#39;/subjects&#39;)}&quot;)
            a(ng-href=&#39;#/subjects&#39;) Subjects
        li(ng-class=&quot;{ active: isActive(&#39;/comments&#39;)}&quot;)
            a(ng-href=&#39;#/comments&#39;) Comments
        li(ng-class=&quot;{ active: isActive(&#39;/about&#39;)}&quot;)
            a(ng-href=&#39;#/about&#39;) About
</code></pre><p>In Chrome, choose the <strong>Toggle Device Mode</strong> option and select your mobile device, or several mobile devices.</p>
<p>Don&#39;t forget to add in the meta data in <strong>layout.jade</strong>:</p>
<pre><code>html
    head
        meta(charset=&#39;utf-8&#39;)
        meta(name=&#39;description&#39;, content=&#39;Final by Charlie Calvert for Prog 219 Spring 2015&#39;)
        meta(name=&#39;viewport&#39;, content=&#39;width=device-width, initial-scale=1&#39;)
        title= title
        etc...
</code></pre><p>The viewport is essential to make it work on a mobile device. See HTML5 Boilerplate web site for latest and details.</p>
<p>This is the example that I use when I get confused about how to build menus:</p>
<ul>
<li><a href="http://getbootstrap.com/examples/theme/#">http://getbootstrap.com/examples/theme/#</a></li>
</ul>
<h2 id="sorting">Sorting</h2>
<p>Arrays have a sort function. For simple arrays, you can just call sort
and JavaScript will figure out what to do. If you have an array of
object, however, it is often necessary to create a custom callback. The
callback allows you to compare two items from the array, returning:</p>
<ul>
<li>one if the first is larger</li>
<li>Minus 1 if the second is larger</li>
<li>0 if they are equal</li>
</ul>
<p>Lets assume we have a simple object with an id and name. We place these
objects in an array:</p>
<pre><code>var allNames = [{id: scientist._id, name: scientist.firstName + &#39; &#39; + scientist.lastName}];
</code></pre><p>Here we have only one item in the array, but if we had more items we would
want to sort the array by name. We could approach that task like this:</p>
<pre><code>allDataNames.sort(function(scientistA, scientistB) {
    if (scientistA.name &gt; scientistB.name) {
        return 1;
    }
    if (scientistA.name &lt; scientistB.name) {
        return -1;
    }
    // a must be equal to b
    return 0;
});
</code></pre><h2 id="routing-comments">Routing Comments</h2>
<p>We need to set up a separate route for comments. This means making edits to the server side <strong>app.js</strong> and adding a new file called <strong>routes/comment.js</strong>.</p>
<p>We should also have a separate http factory. It contains everything from our subdocs code that is not already in mongoFactory. In particular, get the code for updating, inserting and deleting comments.</p>
<h2 id="routing-login">Routing Login</h2>
</div></body></html>