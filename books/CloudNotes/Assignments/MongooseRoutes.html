<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>MongooseRoutes</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><script src="/libs/scripts/Control.js"></script><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/charlie/development/index.html">Strongly Typed</a></li><li><a href="/charlie/development/web/index.html">Web & Scripts</a></li><li><a href="/charlie/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/charlie/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>MongooseRoutes</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#description">Description</a></li>
<li><a href="#menus">Menus</a></li>
<li><a href="#sorting">Sorting</a></li>
<li><a href="#routing-comments">Routing Comments</a></li>
<li><a href="#routing-login">Routing Login</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul><h2 id="description">Description</h2>
<p>In this assignment we will integrate menus and sorting into a single application. The goal is provide you a blue print for doing the same thing in your final. </p>
<h2 id="menus">Menus</h2>
<p>The menu starts like this:</p>
<pre><code><span class="hljs-selector-tag">nav</span><span class="hljs-selector-class">.navbar-default</span><span class="hljs-selector-class">.navbar-fixed-top</span>
    .container-fluid
</code></pre><p>Inside the div with the class <strong>container-fluid</strong> we want to put two more divs. The first is the hamburger menu:</p>
<pre><code><span class="hljs-selector-class">.navbar-header</span>
    button(type=<span class="hljs-string">"button"</span> class=<span class="hljs-string">"navbar-toggle collapsed"</span> data-toggle=<span class="hljs-string">"collapse"</span> data-target=<span class="hljs-string">"#myTarget"</span>)
        <span class="hljs-selector-tag">span</span><span class="hljs-selector-class">.sr-only</span> Toggle navigation
            <span class="hljs-selector-tag">span</span><span class="hljs-selector-class">.icon-bar</span>
            <span class="hljs-selector-tag">span</span><span class="hljs-selector-class">.icon-bar</span>
            <span class="hljs-selector-tag">span</span><span class="hljs-selector-class">.icon-bar</span>
        <span class="hljs-selector-tag">a</span>.navbar-brand(href=<span class="hljs-string">"#/"</span>) Final
</code></pre><p>The hamburger menu is boilerplate. It will look the same in all code, with the exception of the last line, <strong>navbar-brand</strong> which is the title of your application. The <strong>data-target</strong> can also change, as explained below.</p>
<p>Then we put in our menu, giving it the same id as the <strong>data-target</strong> from <strong>navbar-header</strong>. The ID we assign to <strong>data-target</strong> ties this list of menu items to the hamburger menu. It is what tells <strong>bootstrap</strong> what to show when the user selects the hamburger menu. The point is that this is the menu that will collapse into the hamburger menu:</p>
<pre><code><span class="hljs-selector-id">#myTarget</span><span class="hljs-selector-class">.collapse</span><span class="hljs-selector-class">.navbar-collapse</span>
    <span class="hljs-selector-tag">ul</span><span class="hljs-selector-class">.nav</span><span class="hljs-selector-class">.navbar-nav</span>
        <span class="hljs-selector-tag">li</span>(ng-class=<span class="hljs-string">"{ active: isActive('/')}"</span>)
            <span class="hljs-selector-tag">a</span>(ng-href=<span class="hljs-string">'#/'</span>) <span class="hljs-selector-tag">Home</span>
        <span class="hljs-selector-tag">li</span>(ng-class=<span class="hljs-string">"{ active: isActive('/edit')}"</span>)
            <span class="hljs-selector-tag">a</span>(ng-href=<span class="hljs-string">'#/edit'</span>) <span class="hljs-selector-tag">Edit</span>
        <span class="hljs-selector-tag">li</span>(ng-class=<span class="hljs-string">"{ active: isActive('/subjects')}"</span>)
            <span class="hljs-selector-tag">a</span>(ng-href=<span class="hljs-string">'#/subjects'</span>) <span class="hljs-selector-tag">Subjects</span>
        <span class="hljs-selector-tag">li</span>(ng-class=<span class="hljs-string">"{ active: isActive('/comments')}"</span>)
            <span class="hljs-selector-tag">a</span>(ng-href=<span class="hljs-string">'#/comments'</span>) <span class="hljs-selector-tag">Comments</span>
        <span class="hljs-selector-tag">li</span>(ng-class=<span class="hljs-string">"{ active: isActive('/about')}"</span>)
            <span class="hljs-selector-tag">a</span>(ng-href=<span class="hljs-string">'#/about'</span>) <span class="hljs-selector-tag">About</span>
</code></pre><p>In Chrome, choose the <strong>Toggle Device Mode</strong> option and select your mobile device, or several mobile devices.</p>
<p>Don&#39;t forget to add in the meta data in <strong>layout.jade</strong>:</p>
<pre><code><span class="hljs-selector-tag">html</span>
    head
        meta(charset=<span class="hljs-string">'utf-8'</span>)
        meta(name=<span class="hljs-string">'description'</span>, <span class="hljs-attribute">content</span>=<span class="hljs-string">'Final by Charlie Calvert for Prog 219 Spring 2015'</span>)
        meta(name=<span class="hljs-string">'viewport'</span>, <span class="hljs-attribute">content</span>=<span class="hljs-string">'width=device-width, initial-scale=1'</span>)
        title= title
        etc...
</code></pre><p>The viewport is essential to make it work on a mobile device. See HTML5 Boilerplate web site for latest and details.</p>
<p>Also add this code to make sure we can see the whole of the jumbotron:</p>
<pre><code>    .elf-container
        <span class="hljs-keyword">div</span>.jumbotron
            h1= title
            p Welcome <span class="hljs-keyword">to</span> <span class="hljs-comment">#{title}</span>

        <span class="hljs-comment">#monogoData(data-ng-view="")</span>
</code></pre><p>And this CSS in <strong>JavaScripts/css/Styles.css</strong>:</p>
<pre><code><span class="hljs-selector-class">.elf-container</span> {
  <span class="hljs-attribute">border</span>: solid <span class="hljs-number">#004b63</span> thin;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">25px</span>;
</code></pre><p>Below is my complete for my menus. It&#39;s nice to be able to just paste this in, but it is much better if you can see the two main sections:</p>
<ul>
<li>The Hamburger menu which is the begings with <strong>.navbar-header</strong></li>
<li>The menu items, which bigin with the div labeled <strong>#myTarget.collapse.navbar-collapse</strong></li>
<li>Notice that the id <strong>#myTarget</strong> ties the two sections together. If you don&#39;t match the two ids, then when you click on the hamburger menu, nothing happens.</li>
</ul>
<pre><code>extends layout
block content
    nav.navbar-default.navbar-fixed-top
        .container-fluid
            .navbar-header
                button(<span class="hljs-keyword">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">"navbar-toggle collapsed"</span> data-toggle=<span class="hljs-string">"collapse"</span> data-target=<span class="hljs-string">"#myTarget"</span>)
                    span.sr-only Toggle navigation
                    span.icon-bar
                    span.icon-bar
                    span.icon-bar
                a.navbar-brand(href=<span class="hljs-string">"#/"</span>) Final
            #myTarget.<span class="hljs-keyword">collapse</span>.navbar-<span class="hljs-keyword">collapse</span>
                ul.nav.navbar-nav
                    <span class="hljs-keyword">li</span>(ng-<span class="hljs-keyword">class</span>=<span class="hljs-string">"{ active: isActive('/')}"</span>)
                        a(ng-href='#/') Home
                    <span class="hljs-keyword">li</span>(ng-<span class="hljs-keyword">class</span>=<span class="hljs-string">"{ active: isActive('/edit')}"</span>)
                        a(ng-href='#/<span class="hljs-keyword">edit</span>') <span class="hljs-keyword">Edit</span>
                    <span class="hljs-keyword">li</span>(ng-<span class="hljs-keyword">class</span>=<span class="hljs-string">"{ active: isActive('/subjects')}"</span>)
                        a(ng-href='#/subjects') Subjects
                    <span class="hljs-keyword">li</span>(ng-<span class="hljs-keyword">class</span>=<span class="hljs-string">"{ active: isActive('/comments')}"</span>)
                        a(ng-href='#/comments') Comments
                    <span class="hljs-keyword">li</span>(ng-<span class="hljs-keyword">class</span>=<span class="hljs-string">"{ active: isActive('/about')}"</span>)
                        a(ng-href='#/<span class="hljs-keyword">about</span>') <span class="hljs-keyword">About</span>
    div.jumbotron
        h1= title
        p Welcome to #{title}

    #monogoData(data-ng-<span class="hljs-keyword">view</span>=<span class="hljs-string">""</span>)
</code></pre><p>This is the example that I use when I get confused about how to build menus:</p>
<ul>
<li><a href="http://getbootstrap.com/examples/theme/#">http://getbootstrap.com/examples/theme/#</a></li>
</ul>
<h2 id="sorting">Sorting</h2>
<p>Arrays have a sort function. For simple arrays, you can just call sort
and JavaScript will figure out what to do. If you have an array of
object, however, it is often necessary to create a custom callback. The
callback allows you to compare two items from the array, returning:</p>
<ul>
<li>one if the first is larger</li>
<li>Minus 1 if the second is larger</li>
<li>0 if they are equal</li>
</ul>
<p>Lets assume we have a simple object with an id and name. We place these
objects in an array:</p>
<pre><code class="lang-javascript">    var allNames = [{<span class="hljs-string">id:</span> scientist._id, <span class="hljs-string">name:</span> scientist.firstName + <span class="hljs-string">' '</span> + scientist.lastName}];
</code></pre>
<p>Here we have only one item in the array, but if we had more items we would
want to sort the array by name. We could approach that task like this:</p>
<pre><code class="lang-javascript">allDataNames.sort(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(scientistA, scientistB)</span></span> {
    <span class="hljs-keyword">if</span> (scientistA.<span class="hljs-keyword">name</span> &gt; scientistB.<span class="hljs-keyword">name</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }
    <span class="hljs-keyword">if</span> (scientistA.<span class="hljs-keyword">name</span> &lt; scientistB.<span class="hljs-keyword">name</span>) {
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
    // a must be equal to b
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
});
</code></pre>
<h2 id="routing-comments">Routing Comments</h2>
<p>This part of this assignment has been moved into a new, separate assignment, called <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/MongooseComments.html">MongooseComments</a>.</p>
<h2 id="routing-login">Routing Login</h2>
<p>This part of this assignment will not be graded. It is included in a <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/MongooseSignInComments.html">new document</a> which is purely informational, it is not an assignment.</p>
<h2 id="turn-it-in">Turn it in</h2>
<p>Put your work in a folder called either <strong>Week11-MongooseRoutes</strong> or <strong>Week11-MongooseMenuSort</strong>, which is a better name for this project. Please specify the name of the folder that contains your work when you submit this assignment.</p>
<p>If your project already contains a solution for the <strong>MongooseComments</strong> assignment, that is, if it contains a working page that handles comments in <strong>routes/comments.js</strong> and <strong>public/javascript/comment-factory.js</strong>, then that is fine. I will give you credit for that work in the <strong><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/MongooseComments.html">MongooseComments</a></strong> assignment.</p>
</div></body></html>