<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>Prog272Midterm2015</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>Prog272Midterm2015</h1><p>Welcome to Prog272Midterm2015</p><ul><!--TOC_Start--><li><a href="#prog-272-midterm-2015">Prog 272 Midterm 2015</a></li>
<li><a href="#resources">Example Program and other Resources</a></li>
<li><a href="#details">Details</a></li>
<li><a href="#new-pages">New Pages</a></li>
<li><a href="#bootstrap-mixin">Bootstrap with Mixins</a></li>
<li><a href="#ids">IDs for Controls</a></li>
<li><a href="#divs">DIVs</a></li>
<li><a href="#buttons">Buttons</a></li>
<li><a href="#input-controls">Input Controls</a></li>
<li><a href="#paragraphs">Paragraphs or Spans in Paragraphs</a></li>
<li><a href="#radiobuttons">RadioButtons</a></li>
<li><a href="#create-a-new-page">Create a new Page</a></li>
<li><a href="#unit-tests">Unit Tests</a></li>
<li><a href="#test-maincode">Tests and MainCode.html</a></li>
<li><a href="#GruntStart">Starting your App with Grunt</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="prog-272-midterm-2015"></a>
<h1>Prog 272 Midterm 2015</h1>
<p>Our main goals are to understand and demonstrate knowledge:</p>
<ul>
<li>jQuery</li>
<li>Bootstrap</li>
<li>Jade Mixins</li>
<li>Express</li>
<li>Unit Testing</li>
<li>HTML and CSS</li>
<li>JavaScript</li>
<li>Grunt </li>
</ul>
<a class="anchor" id="resources"></a>
<h2>Example Program and other Resources</h2>
<p>This example program from JsObjects should help you get started:</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/UnitTests/MochaIntegrationTest">JsObjects/JavaScript/Design/UnitTests/MochaIntegrationTest</a></li>
</ul>
<p>A few of the slides near the beginning of this deck might prove useful:</p>
<ul>
<li><a href="http://bit.ly/ajaxjq">http://bit.ly/ajaxjq</a></li>
</ul>
<p>And don&#39;t forget the elvenware <a href="http://elvenware.com/charlie/development/web/JavaScript/JQueryBasic.html">jQuery page</a>.</p>
<a class="anchor" id="details"></a>
<h2>Details</h2>
<ul>
<li>Add address field</li>
<li>Call getFirstName getName</li>
<li>Add getAll button</li>
<li>Refactor button click calls so that method is separate </li>
<li>Add styling to buttons</li>
</ul>
<a class="anchor" id="new-pages"></a>
<h2>New Pages</h2>
<ul>
<li>Move Json and Ajax code to a new page.</li>
<li>Create an about page</li>
</ul>
<p>I don&#39;t care much how the page looks, but mine looks like this:</p>
<p><img src="https://drive.google.com/uc?export=view&amp;id=0B25UTAlOfPRGS21ZNUhrS1JtVzg" alt="About Page"></p>
<p>I use <a href="https://en.gravatar.com/">gravatar</a> to manage my picture.</p>
<a class="anchor" id="bootstrap-mixin"></a>
<h2>Bootstrap with Mixins</h2>
<p>You should use mixins for all, or nearly all, the elements that use bootstrap. For instance, you should use mixins for these bootstrap elements:</p>
<ul>
<li>jumbotron</li>
<li>menus (nav, nav-item)</li>
<li>button</li>
<li>listgroup (Use these for the ul that holds the items you pull from the JSON file. This is the Isaac, Albert etc list in the <strong>Create a New Page</strong> screenshot.)<ul>
<li>Do it like this: <strong>+listGroup(&#39;list&#39;, &#39;jsonDisplay&#39;)</strong></li>
</ul>
</li>
</ul>
<p>When you add items to the list-group, do it like this:</p>
<pre><code>$(<span class="hljs-string">"#jsonDisplay"</span>).<span class="hljs-keyword">append</span>('&lt;<span class="hljs-keyword">li</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">"list-group-item"</span>&gt;' + etc...
</code></pre><p><img src="https://drive.google.com/uc?export=view&amp;id=0B25UTAlOfPRGSi15ZVZ2MjlvVmc" alt="Bootstrap Mixin"></p>
<p>The version of Bootstrap that you use is important. My bower file looks like this:</p>
<pre><code>{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"seltest"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.0.1"</span>,
  <span class="hljs-attr">"ignore"</span>: [
    <span class="hljs-string">"**/.*"</span>,
    <span class="hljs-string">"node_modules"</span>,
    <span class="hljs-string">"components"</span>
  ],
  <span class="hljs-attr">"dependencies"</span>: {
    <span class="hljs-attr">"bootstrap"</span>: <span class="hljs-string">"~3.3.2"</span>
  }
}
</code></pre><p>You can see that I&#39;m using 3.3.2 bootstrap. That brought with it, automatically, jquery. It is version 2.1.3. Here is the header for that version of <strong>jquery.js</strong>:</p>
<pre><code><span class="hljs-string">/*!</span>
 <span class="hljs-string">*</span> <span class="hljs-string">jQuery</span> <span class="hljs-string">JavaScript</span> <span class="hljs-string">Library</span> <span class="hljs-string">v2.1.3</span>
 <span class="hljs-string">*</span> <span class="hljs-attr">http://jquery.com/</span>
 <span class="hljs-string">*</span>
 <span class="hljs-string">*</span> <span class="hljs-string">Includes</span> <span class="hljs-string">Sizzle.js</span>
 <span class="hljs-string">*</span> <span class="hljs-attr">http://sizzlejs.com/</span>
 <span class="hljs-string">*</span>
 <span class="hljs-string">*</span> <span class="hljs-string">Copyright</span> <span class="hljs-number">2005</span><span class="hljs-string">,</span> <span class="hljs-number">2014</span> <span class="hljs-string">jQuery</span> <span class="hljs-string">Foundation,</span> <span class="hljs-string">Inc.</span> <span class="hljs-string">and</span> <span class="hljs-string">other</span> <span class="hljs-string">contributors</span>
 <span class="hljs-string">*</span> <span class="hljs-string">Released</span> <span class="hljs-string">under</span> <span class="hljs-string">the</span> <span class="hljs-string">MIT</span> <span class="hljs-string">license</span>
 <span class="hljs-string">*</span> <span class="hljs-attr">http://jquery.org/license</span>
 <span class="hljs-string">*</span>
 <span class="hljs-string">*</span> <span class="hljs-attr">Date:</span> <span class="hljs-number">2014</span><span class="hljs-bullet">-12</span><span class="hljs-bullet">-18</span><span class="hljs-attr">T15:11Z</span>
 <span class="hljs-string">*/</span>
</code></pre><p>It is not necessarily important that you have those exact versions, but you should have versions that work well together. If you screen looks like the image shown below, then something is wrong, and one likely candidate is the versions of bootstrap that you are loading. In particular, the image below is what things look like if no CSS has been applied to the web page.</p>
<p><img src="https://drive.google.com/uc?export=view&amp;id=0B25UTAlOfPRGcmo3eDk0UkgweEU" alt="Bad Bootstrap CSS"></p>
<p>You are looking at plain, default HTML with no CSS. Below you can see what the menu should look like.</p>
<p><img src="https://drive.google.com/uc?export=view&amp;id=0B25UTAlOfPRGRkVvaFlwa1VWWnc" alt="Good CSS Menu"></p>
<a class="anchor" id="ids"></a>
<h2>IDs for Controls</h2>
<p>Here are the IDs for a number of the controls used in the program.</p>
<a class="anchor" id="divs"></a>
<h3>DIVs</h3>
<ul>
<li>mainArea</li>
<li>jsonArea</li>
<li>displayArea</li>
</ul>
<a class="anchor" id="buttons"></a>
<h3>Buttons</h3>
<ul>
<li>insertMale</li>
<li>insertFemale</li>
<li>clear</li>
<li>getFirstName</li>
<li>getAge</li>
<li>getCityStateZip</li>
<li>getJson</li>
<li>getAjax</li>
</ul>
<a class="anchor" id="input-controls"></a>
<h3>Input Controls</h3>
<ul>
<li>inputLastName</li>
<li>inputFirstName</li>
<li>inputAddress</li>
<li>inputCity</li>
<li>inputState</li>
<li>inputZip</li>
</ul>
<a class="anchor" id="paragraphs"></a>
<h3>Paragraphs or Spans in Paragraphs</h3>
<ul>
<li>firstName</li>
<li>lastName</li>
<li>city</li>
<li>state</li>
<li>zip</li>
<li>age</li>
</ul>
<a class="anchor" id="radiobuttons"></a>
<h3>RadioButtons</h3>
<ul>
<li>radioResult</li>
<li>maleFemaleGroup</li>
<li>femaleboot</li>
<li>maleboot</li>
</ul>
<p>##Menus on Each Page {#menus}</p>
<p>Each page should have a copy of the menu. For instance, there will be three jade files involved in composing each page. They are named like this</p>
<pre><code>layout.jade : headers
The menu <span class="hljs-keyword">in</span>: menu-mix-in.jade
The new<span class="hljs-built_in"> page </span><span class="hljs-keyword">in</span> index.jade, <span class="hljs-keyword">or</span> <span class="hljs-keyword">in</span> about.jade, etc.
</code></pre><p>And of course at least the last two pages will both have <strong>mixins.jade</strong> in it. I gave you a new copy of <strong>mixins.jade</strong> in the <a href="https://github.com/charliecalvert/JsObjects/blob/master/JavaScript/Design/JadeMixinComplete/views/mixins.jade">JadeMixinsComplete</a> project.</p>
<p>There is a hierarchy in the three files used to compose each page:</p>
<ul>
<li><strong>menu-mix-in.jade</strong> extends <strong>layout.jade</strong></li>
<li><strong>about.jade</strong> and <strong>index.jade</strong> extends <strong>menu-mix-in.jade</strong></li>
</ul>
<p>For instance, top of <strong>menu-mix-in.jade</strong>, might look like this:</p>
<pre><code><span class="hljs-keyword">extends</span> layout

<span class="hljs-meta"><span class="hljs-meta-keyword">include</span> mixins</span>
</code></pre><p>The top of <strong>index.jade</strong> and your <strong>JsonAjax</strong> page might look like this:</p>
<pre><code>extends menu-mix-<span class="hljs-keyword">in</span>

<span class="hljs-built_in">block</span> <span class="hljs-built_in">append</span> <span class="hljs-built_in">content</span>
</code></pre><p><strong>NOTE</strong>: <em>If you decide to use <strong>mixins</strong> in <strong>layout.jade</strong> then you should move the <strong>include</strong> statement back to the top of <strong>layout.jade</strong>.</em></p>
<p>I gave you the actual menu to use during the in-class assignment on Thursday. You also saw the code for high-lighting the menus.</p>
<a class="anchor" id="create-a-new-page"></a>
<h2>Create a new Page</h2>
<p>You need to create a new page for displaying a list of the loaded JSON. It should look like this:</p>
<p><img src="https://drive.google.com/uc?export=view&amp;id=0B25UTAlOfPRGd0VpVHFOM3R6bm8" alt="JSON"></p>
<p>Here we are using a <strong>bootstrap</strong> <a href="http://getbootstrap.com/components/#list-group">list-group</a> to display the scientists names. We have a <strong>mixin</strong> for this as described above.</p>
<a class="anchor" id="unit-tests"></a>
<h2>Unit Tests</h2>
<p>One of the trickier parts of unit tests, perhaps, is handling <a href="http://www.elvenware.com/charlie/development/web/JavaScript/JQueryBasic.html#jquery-ajax-with-json">ajax</a> calls. Please see these resources.</p>
<ul>
<li><a href="http://bit.ly/integration-tests">Integration Tests</a></li>
<li><a href="http://www.elvenware.com/charlie/development/web/JavaScript/JQueryBasic.html#jquery-ajax-with-json">ajax on elvenware</a></li>
<li><a href="http://www.elvenware.com/charlie/development/web/JavaScript/JQueryBasic.html#getJSON">getJSON on elvenware</a></li>
<li><a href="http://www.elvenware.com/charlie/development/web/JavaScript/JQueryBasic.html#the-ajax-success-function">ajax success handlers on elvenware</a></li>
<li><a href="http://www.elvenware.com/charlie/development/web/JavaScript/JQueryBasic.html#the-ajax-error-handler">ajax errors on elvenware</a></li>
</ul>
<p>In your tests, you may optionally continue to use the HTML for <strong>MainCode.html</strong> generated for the jQuery assignment. The underlying structure of the program has not really changed structure very much, so it is semi-acceptable to do that. Even though we have split the program into two pages, we can, at least for now, continue to pretend in our tests that it is all one page. Please check back here for possible updates on this issue.</p>
<a class="anchor" id="test-maincode"></a>
<h2>Tests and MainCode.html</h2>
<p>I originally taught you to put code to load <strong>Control.js</strong> and other files at the top <strong>MainCode.html</strong>. I knew that was strange from the start, but it has taken me a long time to see the problem. Here is what you should do.</p>
<ul>
<li>Select and cut all the code from inside <strong>\$(document.ready)</strong>. Place it above <strong>\$(document).ready</strong> in a method called <strong>initialize</strong>. Leave the public methods outside of <strong>initialize</strong>.</li>
<li>Call <strong>initialize</strong> from inside <strong>$(document).ready</strong>.</li>
</ul>
<p>Here is what it looks like, minus a few details such as the <strong>getAjax</strong> method:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">errorHandler</span>(<span class="hljs-params">jqxhr, textStatus, error</span>) </span>{
    <span class="hljs-keyword">var</span> err = textStatus + <span class="hljs-string">", "</span> + error;
    $(<span class="hljs-string">'#debug'</span>).html(<span class="hljs-string">"Request Failed: "</span> + err);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getJson</span>(<span class="hljs-params">callback</span>) </span>{
    <span class="hljs-keyword">var</span> result = $.getJSON(<span class="hljs-string">'./Presidents.json'</span>, callback);
    result.fail(errorHandler);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span>(<span class="hljs-params"></span>) </span>{
   <span class="hljs-comment">// place all the code from document ready here.</span>
   <span class="hljs-comment">// This is mostly the jquery onClick handlers that begin $("#... </span>
}

$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    initialize();
});
</code></pre><p>At the top of the tests I gave you, add a call to <strong>initialize</strong> after <strong>MainCode.html</strong> has been loaded:</p>
<pre><code>beforeEach(<span class="hljs-name">function</span> (<span class="hljs-name">done</span>) {
    $('#mainArea').load('./MainCode.html', function() {
        initialize()<span class="hljs-comment">;  // &lt;&lt; Add this call</span>
        $(<span class="hljs-string">"#insertMale"</span>).trigger('click')<span class="hljs-comment">;</span>
        $(<span class="hljs-string">"#getFirstName"</span>).trigger(<span class="hljs-string">"click"</span>)<span class="hljs-comment">;</span>
        $(<span class="hljs-string">"#getAge"</span>).trigger(<span class="hljs-string">"click"</span>)<span class="hljs-comment">;</span>
        $(<span class="hljs-string">"#getCityStateZip"</span>).trigger(<span class="hljs-string">"click"</span>)<span class="hljs-comment">;</span>
        done()<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre><p>Now you can load jquery and your css in <strong>index.html</strong>:</p>
<pre><code>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mainArea"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- include source files here... --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"../public/css/style.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../public/components/jquery/dist/jquery.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../public/js/Control.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>The point is that we have to initialize the onclick methods after we have loaded the HTML. JQuery does not know how to connect your on click methods to your HTML unless the HTML is already loaded. So first we load MainCode.html, then we ask jquery to connect you onclick events to the HTML by writing code like this:</p>
<pre><code> $(<span class="hljs-string">'#getJson'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        getJson(display);
});
</code></pre><p>Its these types of methods that need to be in <strong>initialize</strong>. You should have a good number of them.</p>
<p>Once you are done, you no longer need to paste any script or link tags at the top of <strong>MainCode.html</strong></p>
<p>For more guidance, see the <a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/UnitTests/MochaIntegrationTest">MochaIntegrationTests</a> from JsObjects.</p>
<a class="anchor" id="GruntStart"></a>
<h2>Starting your App with Grunt</h2>
<p>To start the application, type: <strong>grunt</strong>. This does two things:</p>
<ul>
<li>Runs your application with <strong>grunt-develop</strong></li>
<li>Ensures that <strong>live-reload</strong> is running so that the app will <strong>grunt-contrib-watch</strong> your files and restart when you make changes to your code.</li>
</ul>
<p>See these parts of <strong>Gruntfiles.js</strong>:</p>
<pre><code>grunt.registerTask(<span class="hljs-string">'delayed-livereload'</span>, <span class="hljs-string">'Reload after server start.'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
   etc...

grunt.registerTask(<span class="hljs-string">'default'</span>, [
    <span class="hljs-string">'develop'</span>,
    <span class="hljs-string">'watch'</span>
  ]);
</code></pre><p>And in <strong>package.json</strong> we load <strong>watch</strong> and <strong>grunt-develop</strong>:</p>
<pre><code><span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"grunt"</span>: <span class="hljs-string">"~0.4.5"</span>,
    <span class="hljs-string">"grunt-develop"</span>: <span class="hljs-string">"~0.4.0"</span>,
    <span class="hljs-string">"grunt-contrib-watch"</span>: <span class="hljs-string">"~0.6.1"</span>,
    etc...
  }
</code></pre><p>The point here is that you can configure Grunt to do all kinds of background tasks during development.</p>
<p>##Turn it in</p>
<p>Place your work in a folder called <strong>Week08-Midterm</strong>. Include screenshots of the main pages of your application. This time I would prefer for you to attach the screenshots to the assignment when you submit. Put the project in your repository, and attach the screen shots to your assignment.</p>
<p>Screenshots:</p>
<ul>
<li>Main page</li>
<li>About page</li>
<li>JsonAjax page</li>
<li>Test page</li>
</ul>
<p>Summary (Thanks to Mr. Yee):</p>
<ul>
<li>Use bootstrap to make the page appear look nice and to prepare for use on mobile devices.</li>
<li>The only thing in the <strong>$(document).ready()</strong> jQuery statement should be a call to <strong>initialize()</strong>. The <strong>initialize()</strong> method should contain, at minimum, the jQuery <strong>click</strong> event handlers.  </li>
<li>Use the tests from <strong>Week06_JQueryMocha</strong>, but edit them so that a call to <strong>initialize()</strong> is at the top of the <strong>beforeEach</strong> calls in the test.js tests)</li>
</ul>
</div></body></html>