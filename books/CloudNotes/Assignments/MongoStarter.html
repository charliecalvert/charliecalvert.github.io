<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>MongoStarter</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>MongoStarter</h1><p>Welcome to MongoStarter</p><ul><!--TOC_Start--><li><a href="#in-class-mongo">In Class Mongo</a></li>
<li><a href="#step-1-mongo-account">Step 1: Mongo Account</a></li>
<li><a href="#step-2-install-mongo-on-linux">Step 2: Install Mongo on Linux</a></li>
<li><a href="#step-3-mongotalk-json">Step 3: MongoTalk.json</a></li>
<li><a href="#step-04-insert-data">Step 04: Insert Data</a></li>
<li><a href="#step-05-view-the-data-in-the-database">Step 05: View the data in the database</a></li>
<li><a href="#step06-mongolab-urls-and-users">Step06: MongoLab URLs and Users</a></li>
<li><a href="#step07-an-express-mongo-program">Step07: An Express Mongo Program</a></li>
<li><a href="#step-08-build-the-client">Step 08: Build the client</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="in-class-mongo"></a>
<h1>In Class Mongo</h1>
<p>In many cases, you will be asked to only do the first five or six steps in this assignment.</p>
<a class="anchor" id="step-1-mongo-account"></a>
<h2>Step 1: Mongo Account</h2>
<p>Create an account on <a href="https://mongolab.com/">MongoLab</a>.</p>
<a class="anchor" id="step-2-install-mongo-on-linux"></a>
<h2>Step 2: Install Mongo on Linux</h2>
<p>To install on Cloud 9:</p>
<pre><code><span class="hljs-keyword">cd</span>
mkdir data
<span class="hljs-keyword">echo</span> 'mongod <span class="hljs-params">--bind_ip=</span>$IP <span class="hljs-params">--dbpath=data</span> <span class="hljs-params">--nojournal</span> <span class="hljs-params">--rest</span> <span class="hljs-string">"$@"</span>' &gt; ~<span class="hljs-string">/mongod</span>
chmod a+x ~<span class="hljs-string">/mongod</span>
<span class="hljs-string">./mongod</span>
</code></pre><p>Otherwise, follow the steps outlined in the Elvenware <a href="http://www.elvenware.com/charlie/development/database/NoSql/MongoDb.html#install">Install Mongo</a> section to install MongoDb on your system. When you are done with the install, come back to this assignment.</p>
<a class="anchor" id="step-3-mongotalk-json"></a>
<h2>Step 3: MongoTalk.json</h2>
<p>Many of the MongoSamples use a JSON file called MongoTalk.json. To learn how to set it up, read the section of the <a href="https://github.com/charliecalvert/JsObjects/blob/master/Data/README.md">JsObjects/Data README file</a> that covers <strong>MongoTalk.json</strong>.</p>
<a class="anchor" id="step-04-insert-data"></a>
<h2>Step 04: Insert Data</h2>
<p>Create a copy of <a href="https://github.com/charliecalvert/JsObjects/tree/master/Data/MongoCreateData">JsObjects/Data/MongoCreateData</a>. For instance, to create a copy in the Source directory:</p>
<pre>
cd ~/Source
cp -r ~/Git/JsObjects/Data/MongoCreateData/ .
</pre>

<p><strong>NOTE</strong>: <em>If <strong>~/Source</strong> does not exist, then create it like this <strong>mkdir ~/Source</strong>.</em></p>
<p>Run <strong>npm install</strong>.</p>
<p>To learn how to use the program, see the <a href="https://github.com/charliecalvert/JsObjects/blob/master/Data/MongoCreateData/README.md">README</a>.</p>
<a class="anchor" id="step-05-view-the-data-in-the-database"></a>
<h2>Step 05: View the data in the database</h2>
<p>MongoDb ships with a client. Elvenware has <a href="http://www.elvenware.com/charlie/development/database/NoSql/MongoDb.html#sample-session">a description</a> of how to use it.</p>
<a class="anchor" id="step06-mongolab-urls-and-users"></a>
<h2>Step06: MongoLab URLs and Users</h2>
<p>Unless you are using Mlab/MongoLab, you can skip this step.</p>
<p>Learn about them on <a href="http://www.elvenware.com/charlie/development/database/NoSql/MongoDb.html#set-up-a-mongolab-url">Elvenware</a>.</p>
<a class="anchor" id="step07-an-express-mongo-program"></a>
<h2>Step07: An Express Mongo Program</h2>
<p>In some cases, we will move to another assignment and not complete this or the other steps in this assignment.</p>
<ul>
<li>Create a new express program called <strong>Week09-InClassMongoView</strong><ul>
<li>CreateAllExpress Week09-InClassMongoView</li>
</ul>
</li>
<li>Add in <strong>mongodb</strong> support: <strong>npm install mongodb --save</strong></li>
<li>Add in require to layout.jade: <strong>script(src=&quot;javascripts/require.js&quot; data-main=&quot;javascripts/Main&quot;)</strong></li>
<li>Add in <strong>public/javascripts/Main.js</strong> and jquery</li>
</ul>
<p>Main might start by looking like this:</p>
<pre><code>    <span class="hljs-built_in">require</span>.config({
      <span class="hljs-attr">paths</span>: {
        <span class="hljs-string">"jquery"</span>: <span class="hljs-string">"jquery-2.1.0"</span>,
      }
    });

    <span class="hljs-built_in">require</span>([<span class="hljs-string">"jquery"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">jq</span>) </span>{
<span class="hljs-meta">        'use strict'</span>;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Main called."</span>);
    });
</code></pre><p>Add in the Elvenware <strong>QueryMongo</strong> library to routes:</p>
<pre>
cd routes
wget http://www.elvenware.com/charlie/development/web/JavaScript/Scripts/QueryMongo.js
wget http://www.elvenware.com/charlie/development/web/JavaScript/Scripts/LoadConfig.js
</pre>

<p>Open <strong>QueryMongo.js</strong> and set the <strong>collectionName</strong> to <strong>lincoln</strong>.</p>
<p>Load the library into the index route:</p>
<pre><code><span class="hljs-attribute">var queryMongo</span> = require(<span class="hljs-string">'./QueryMongo'</span>).QueryMongo;
</code></pre><p><strong>NOTE</strong>: <em>The following assumes that you used the instructions above to create the <strong>lincoln</strong> collection in the <strong>test</strong> database.</em></p>
<p>And call <strong>readAll</strong>:</p>
<pre><code class="lang-javascript">    <span class="hljs-comment">//Read the collection</span>
    router.get(<span class="hljs-string">'/readAll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response</span>) </span>{<span class="hljs-string">'use strict'</span>;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"ReadAll route is called"</span>);
        queryMongo.getAllDocuments(response);
    });
</code></pre>
<a class="anchor" id="step-08-build-the-client"></a>
<h2>Step 08: Build the client</h2>
<p>On the client side, create MongoClient.js:</p>
<pre><code>define(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> MongoClient = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MongoClient</span><span class="hljs-params">()</span> </span>{

        }

        <span class="hljs-keyword">return</span> MongoClient;

    }());

    <span class="hljs-keyword">return</span> MongoClient;

})
</code></pre><p>Add it in to <strong>Main.js</strong>.</p>
<p>Create a button click handler and use getJSON to pull your <strong>/readAll</strong>
route.</p>
<ul>
<li>The button has an id of readAll and a caption of Read All.</li>
<li>Define a click handler in MongoClient. Set up the click handler in the
constructor. Have it call a private method named <strong>readAll</strong>.</li>
</ul>
<p>Handle the data and display it to the user.</p>
<ul>
<li>In the getJSON callback, define a parameter called serverData.</li>
<li>Start by popping up an alert</li>
<li>Inside the alert: JSON.stringify(serverData[0], null, 4);</li>
</ul>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>If you are in <strong>Prog 272</strong>, take a picture of MongoLab, showing any collection that you were able to insert into your database.</p>
<p><strong>NOTE</strong>: <em>Do not put your screen shot in a zip file or embed it in a word document. Simply attach the screen shot to your assignment when you turn it in.</em></p>
<p>If you are in <strong>Prog 219</strong>, attach a screenshot of the mongo client running in the bash shell and using <strong>find</strong> to show the contents of a collection you created. To start the mongo client, aka <a href="https://docs.mongodb.com/getting-started/shell/client/">mongo shell</a>, just type <strong>mongo</strong> at the bash shell. Then run a few commands such as <strong>show dbs</strong>, <strong>use test</strong>, <strong>show collections</strong> and then show the contents of a collection. For instance, take a screenshot showing the output of these or similar commands:</p>
<pre>
db.lincoln.find()
db.prog219_lastname.settings()
</pre>

<p>Sample output when starting the mongo shell:</p>
<pre>
$ mongo
MongoDB shell version: 3.2.7
connecting to: test
// A FEW WARNINGS OMITTED HERE
> show dbs
local          0.000GB
prog219-renew  0.000GB
renew          0.000GB
test           0.000GB
>
</pre>

<p>Reference:</p>
<ul>
<li><a href="https://docs.mongodb.com/getting-started/shell/client/">https://docs.mongodb.com/getting-started/shell/client/</a></li>
</ul>
<p>If you completed the whole assignment, you should also push your work to your repository.</p>
</div></body></html>