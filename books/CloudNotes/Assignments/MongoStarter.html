<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>MongoStarter</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><script src="/libs/scripts/Control.js"></script><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>MongoStarter</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#in-class-mongo">In Class Mongo</a></li>
<li><a href="#step-1-mongo-account">Step 1: Mongo Account</a></li>
<li><a href="#step-2-install-mongo-on-linux">Step 2: Install Mongo on Linux</a></li>
<li><a href="#step-3-mongotalk-json">Step 3: MongoTalk.json</a></li>
<li><a href="#step-04-insert-data">Step 04: Insert Data</a></li>
<li><a href="#step-05-view-the-data-in-the-database">Step 05: View the data in the database</a></li>
<li><a href="#step06-mongolab-urls-and-users">Step06: MongoLab URLs and Users</a></li>
<li><a href="#step07-an-express-mongo-program">Step07: An Express Mongo Program</a></li>
<li><a href="#step-08-build-the-client">Step 08: Build the client</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul><h1 id="in-class-mongo">In Class Mongo</h1>
<p>In many cases, you will be asked to only do the first five or six steps in this assignment.</p>
<h2 id="step-1-mongo-account">Step 1: Mongo Account</h2>
<p>Create an account on <a href="https://mongolab.com/">MongoLab</a>.</p>
<h2 id="step-2-install-mongo-on-linux">Step 2: Install Mongo on Linux</h2>
<p>To install on Cloud 9:</p>
<pre><code><span class="hljs-comment">cd</span>
<span class="hljs-comment">mkdir</span> <span class="hljs-comment">data</span>
<span class="hljs-comment">echo</span> <span class="hljs-comment">'mongod</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">bind_ip=$IP</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">dbpath=data</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">nojournal</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rest</span> <span class="hljs-comment">"$@"'</span> &gt; <span class="hljs-comment">~/mongod</span>
<span class="hljs-comment">chmod</span> <span class="hljs-comment">a</span><span class="hljs-literal">+</span><span class="hljs-comment">x</span> <span class="hljs-comment">~/mongod</span>
<span class="hljs-string">.</span><span class="hljs-comment">/mongod</span>
</code></pre><p>Otherwise, follow the steps outlined in the Elvenware <a href="http://www.elvenware.com/charlie/development/database/NoSql/MongoDb.html#install">Install Mongo</a> section to install MongoDb on your system. When you are done with the install, come back to this assignment.</p>
<h2 id="step-3-mongotalk-json">Step 3: MongoTalk.json</h2>
<p>Many of the MongoSamples use a JSON file called MongoTalk.json. To learn how to set it up, read the section of the <a href="https://github.com/charliecalvert/JsObjects/blob/master/Data/README.md">JsObjects/Data README file</a> that covers <strong>MongoTalk.json</strong>.</p>
<h2 id="step-04-insert-data">Step 04: Insert Data</h2>
<p>Create a copy of <a href="https://github.com/charliecalvert/JsObjects/tree/master/Data/MongoCreateData">JsObjects/Data/MongoCreateData</a>. For instance, to create a copy in the Source directory:</p>
<pre>
cd ~/Source
cp -r ~/Git/JsObjects/Data/MongoCreateData/ .
</pre>

<p><strong>NOTE</strong>: <em>If <strong>~/Source</strong> does not exist, then create it like this <strong>mkdir ~/Source</strong>.</em></p>
<p>Run <strong>npm install</strong>.</p>
<p>To learn how to use the program, see the <a href="https://github.com/charliecalvert/JsObjects/blob/master/Data/MongoCreateData/README.md">README</a>.</p>
<h2 id="step-05-view-the-data-in-the-database">Step 05: View the data in the database</h2>
<p>MongoDb ships with a client. Elvenware has <a href="http://www.elvenware.com/charlie/development/database/NoSql/MongoDb.html#sample-session">a description</a> of how to use it.</p>
<h2 id="step06-mongolab-urls-and-users">Step06: MongoLab URLs and Users</h2>
<p>Unless you are using Mlab/MongoLab, you can skip this step.</p>
<p>Learn about them on <a href="http://www.elvenware.com/charlie/development/database/NoSql/MongoDb.html#set-up-a-mongolab-url">Elvenware</a>.</p>
<h2 id="step07-an-express-mongo-program">Step07: An Express Mongo Program</h2>
<p>In some cases, we will move to another assignment and not complete this or the other steps in this assignment.</p>
<ul>
<li>Create a new express program called <strong>Week09-InClassMongoView</strong><ul>
<li>CreateAllExpress Week09-InClassMongoView</li>
</ul>
</li>
<li>Add in <strong>mongodb</strong> support: <strong>npm install mongodb --save</strong></li>
<li>Add in require to layout.jade: <strong>script(src=&quot;javascripts/require.js&quot; data-main=&quot;javascripts/Main&quot;)</strong></li>
<li>Add in <strong>public/javascripts/Main.js</strong> and jquery</li>
</ul>
<p>Main might start by looking like this:</p>
<pre><code>    <span class="hljs-built_in">require</span>.config({
      paths: {
        <span class="hljs-string">"jquery"</span>: <span class="hljs-string">"jquery-2.1.0"</span>,
      }
    });

    <span class="hljs-built_in">require</span>([<span class="hljs-string">"jquery"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">jq</span>) </span>{
<span class="hljs-meta">        'use strict'</span>;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Main called."</span>);
    });
</code></pre><p>Add in the Elvenware <strong>QueryMongo</strong> library to routes:</p>
<pre>
cd routes
wget http://www.elvenware.com/charlie/development/web/JavaScript/Scripts/QueryMongo.js
wget http://www.elvenware.com/charlie/development/web/JavaScript/Scripts/LoadConfig.js
</pre>

<p>Open <strong>QueryMongo.js</strong> and set the <strong>collectionName</strong> to <strong>lincoln</strong>.</p>
<p>Load the library into the index route:</p>
<pre><code><span class="hljs-keyword">var</span> queryMongo = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./QueryMongo'</span>).QueryMongo;
</code></pre><p><strong>NOTE</strong>: <em>The following assumes that you used the instructions above to create the <strong>lincoln</strong> collection in the <strong>test</strong> database.</em></p>
<p>And call <strong>readAll</strong>:</p>
<pre><code class="lang-javascript">    <span class="hljs-comment">//Read the collection</span>
    router.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/readAll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(request, response)</span> </span>{<span class="hljs-string">'use strict'</span>;
        console.log(<span class="hljs-string">"ReadAll route is called"</span>);
        queryMongo.getAllDocuments(response);
    });
</code></pre>
<h2 id="step-08-build-the-client">Step 08: Build the client</h2>
<p>On the client side, create MongoClient.js:</p>
<pre><code>define(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> MongoClient = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MongoClient</span><span class="hljs-params">()</span> </span>{

        }

        <span class="hljs-keyword">return</span> MongoClient;

    }());

    <span class="hljs-keyword">return</span> MongoClient;

})
</code></pre><p>Add it in to <strong>Main.js</strong>.</p>
<p>Create a button click handler and use getJSON to pull your <strong>/readAll</strong>
route.</p>
<ul>
<li>The button has an id of readAll and a caption of Read All.</li>
<li>Define a click handler in MongoClient. Set up the click handler in the
constructor. Have it call a private method named <strong>readAll</strong>.</li>
</ul>
<p>Handle the data and display it to the user.</p>
<ul>
<li>In the getJSON callback, define a parameter called serverData.</li>
<li>Start by popping up an alert</li>
<li>Inside the alert: JSON.stringify(serverData[0], null, 4);</li>
</ul>
<h2 id="turn-it-in">Turn it in</h2>
<p>If you are in <strong>Prog 272</strong>, take a picture of MongoLab, showing any collection that you were able to insert into your database.</p>
<p><strong>NOTE</strong>: <em>Do not put your screen shot in a zip file or embed it in a word document. Simply attach the screen shot to your assignment when you turn it in.</em></p>
<p>If you are in <strong>Prog 219</strong>, attach a screenshot of the mongo client running in the bash shell and using <strong>find</strong> to show the contents of a collection you created. To start the mongo client, aka <a href="https://docs.mongodb.com/getting-started/shell/client/">mongo shell</a>, just type <strong>mongo</strong> at the bash shell. Then run a few commands such as <strong>show dbs</strong>, <strong>use test</strong>, <strong>show collections</strong> and then show the contents of a collection. For instance, take a screenshot showing the output of these or similar commands:</p>
<pre>
db.lincoln.find()
db.prog219_lastname.settings()
</pre>

<p>Sample output when starting the mongo shell:</p>
<pre>
$ mongo
MongoDB shell version: 3.2.7
connecting to: test
// A FEW WARNINGS OMITTED HERE
> show dbs
local          0.000GB
prog219-renew  0.000GB
renew          0.000GB
test           0.000GB
>
</pre>

<p>Reference:</p>
<ul>
<li><a href="https://docs.mongodb.com/getting-started/shell/client/">https://docs.mongodb.com/getting-started/shell/client/</a></li>
</ul>
<p>If you completed the whole assignment, you should also push your work to your repository.</p>
</div></body></html>