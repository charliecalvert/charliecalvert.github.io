<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ExpressBasics</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><script src="/libs/scripts/Control.js"></script><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/charlie/About.html">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/charlie/development/index.html">Strongly Typed</a></li><li><a href="/charlie/development/web/index.html">Web & Scripts</a></li><li><a href="/charlie/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/charlie/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>ExpressBasics</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#express-basics">Express Basics</a></li>
<li><a href="#goals">Goals</a></li>
<li><a href="#get-started">Get Started</a></li>
<li><a href="#change-the-title">Change the Title</a></li>
<li><a href="#create-custom-javascript">Create Custom JavaScript</a></li>
<li><a href="#modify-your-pug-files">Modify your Pug Files</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#debug">Debug</a></li><!--TOC_End--></ul><h1 id="express-basics">Express Basics</h1>
<p>This assignment is designed to introduce you to <a href="http://expressjs.com/">Express Js</a>. Express is the library most often used by NodeJs developers when creating web applications. It is not the only way to create an application, but it is by far the most common.</p>
<p><strong>NOTE</strong>: <em>Express is rarely used on its own. It is simply the foundation on which more complex applications are built. In most cases, other libraries such as jQuery, Angular or React will also be used.</em></p>
<ul>
<li>Express Presentation: <a href="http://bit.ly/JavaScriptNode">http://bit.ly/JavaScriptNode</a></li>
</ul>
<p><strong>NOTE</strong>: <em>The default Express template library used to be called Jade, but is now called Pug. At this stage, at least, the two tools are essentially identical. If you find places where I reference Jade, you can simply mentally translate that to Pug, or vice-versa, depending on your needs.</em></p>
<h2 id="goals">Goals</h2>
<ul>
<li>Create an express application</li>
<li>Change the title that appears in <strong>index.pug</strong> and on the main page of the application at run time</li>
<li>Load <a href="https://jquery.com/">jQuery</a> and a custom JavaScript page</li>
<li>Use jQuery to display a line of text in an HTML paragraph tag</li>
<li>Switch from using <strong>node</strong> to using <strong>nodemon</strong></li>
<li>Set the port to 30025</li>
</ul>
<h2 id="get-started">Get Started</h2>
<p>The <a href="https://expressjs.com/en/starter/generator.html">express-generator</a> automatically generates a default express application. It is installed automatically by the following scripts, which are described in the <a href="https://github.com/charliecalvert/JsObjects/blob/master/README.md">JsObjects README</a>:</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/blob/master/Utilities/NodeInstall/InstallNodePackages.sh">InstallNodePackages</a></li>
<li><a href="https://github.com/charliecalvert/JsObjects/blob/master/Utilities/SetupLinuxBox/UbuntuAndCloudNineSetup">UbuntuAndCloudNineSetup</a></li>
</ul>
<p>However, if you find it is missing, or need to update it, this is the install command:</p>
<pre><code class="lang-bash">npm <span class="hljs-keyword">install</span> -<span class="hljs-keyword">g</span> express-generator
</code></pre>
<p>To use the <strong>express-generator</strong>, simply type the word <strong>express</strong> followed by the name of the project you want to create. The generator will create a folder for your project and place the project inside it. Here then, are the three basic steps you may perform to create an express application:</p>
<pre><code>express <span class="hljs-comment">--pug Week03-ExpressBasics</span>
cd Week03-ExpressBasics
npm <span class="hljs-keyword">install</span>
</code></pre><p>Load the project in WebStorm. Open up <strong>/bin/www</strong> and set the port 30025. Then open up <strong>package.json</strong> and ensure that you are using <strong>nodemon</strong> rather than <strong>node</strong> to <em>start</em> your project when you type <strong>npm start</strong>.</p>
<p><strong>NOTE</strong>: <em>You will need to install <strong>nodemon</strong> if you have not done so already. To install, issue this command <strong>npm install -g nodemon</strong>.</em></p>
<p>Now start the project:</p>
<pre><code><span class="hljs-built_in">npm</span> start
</code></pre><p>Load the project in a browser:</p>
<pre><code><span class="hljs-string">http:</span><span class="hljs-comment">//localhost:30025</span>
</code></pre><h2 id="change-the-title">Change the Title</h2>
<p>Open up <strong>/routes/index.js</strong>. Change the title to <strong>Prog272-LastName</strong>, where LastName is your last name.</p>
<h2 id="create-custom-javascript">Create Custom JavaScript</h2>
<p>Create a file called <strong>/public/javascripts/control.js</strong>. It should contain the following code:</p>
<pre><code class="lang-javascript">$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"control.js loaded"</span>);
    $(<span class="hljs-string">"#dynamic"</span>).html(<span class="hljs-string">"control.js loaded"</span>);
});
</code></pre>
<p><strong>NOTE</strong>: <em>It is often better to use <strong>document ready</strong> rather than <strong>window.onload</strong> because jQuery will call each instance of <strong>document ready</strong> that you create.</em></p>
<h2 id="modify-your-pug-files">Modify your Pug Files</h2>
<p>First load the JavaScript in <strong>/views/layout.pug</strong>:</p>
<pre><code>doctype <span class="hljs-selector-tag">html</span>
<span class="hljs-selector-tag">html</span>
  head
    title= title
    link(rel=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'/stylesheets/style.css'</span>)
    script(src=<span class="hljs-string">'//code.jquery.com/jquery-1.11.2.min.js'</span>)
    script(src=<span class="hljs-string">"/javascripts/control.js"</span>)
  <span class="hljs-selector-tag">body</span>
    block <span class="hljs-attribute">content</span>
</code></pre><p>Also, in <strong>index.pug</strong>, be sure you have created a paragraph in which to display your custom text:</p>
<pre><code>p<span class="hljs-meta">#dynamic</span>
</code></pre><h2 id="turn-it-in">Turn it in</h2>
<p>Place your project files in the folder of your repository specified above. In the root of same folder of your repository, or attached to your assignment, include a screen shot of your project running in a browser.</p>
<p><img src="https://drive.google.com/uc?export=view&amp;id=0B25UTAlOfPRGS0lFaUNiY3RjOUE" alt="shot"></p>
<p>When you turn in the the assignment, include the URL of your repository. It should look something like this:</p>
<pre><code>git<span class="hljs-meta">@bitbucket</span>.<span class="hljs-string">com:</span>lastname/prog219_lastname.git
</code></pre><h2 id="debug">Debug</h2>
<p>It is possible to create debug output that is only displayed if the environment variable called <strong>DEBUG</strong> is set to a certain value. Look in <strong>bin/www</strong>. Find a line like this:</p>
<pre><code class="lang-javascript">var debug = require('debug')('Week03-ExpressBasics<span class="hljs-symbol">:server</span>')<span class="hljs-comment">;</span>
</code></pre>
<p>This statement says that debug output will be shown if the environment variable <strong>DEBUG</strong> is set to <strong>Week03-ExpressBasics:server</strong>.</p>
<p>To set it, go to the bash shell and set the DEBUG environment variable like this:</p>
<pre><code>export DEBUG=Week03-ExpressBasics:<span class="hljs-keyword">server</span>
</code></pre><p>When you run your program you should now see additional output in the shell:</p>
<pre><code class="lang-bash">$ npm <span class="hljs-keyword">start</span>

&gt; Week03-ExpressBasics@<span class="hljs-number">0.0</span><span class="hljs-number">.0</span> <span class="hljs-keyword">start</span> /home/charlie/Git/prog272-calvert<span class="hljs-number">-2016</span>/Week03-ExpressBasics
&gt; nodemon ./<span class="hljs-keyword">bin</span>/www

[nodemon] <span class="hljs-number">1.9</span><span class="hljs-number">.1</span>
[nodemon] <span class="hljs-keyword">to</span> restart <span class="hljs-keyword">at</span> <span class="hljs-keyword">any</span> <span class="hljs-keyword">time</span>, enter <span class="hljs-string">`rs`</span>
[nodemon] watching: *.*
[nodemon] <span class="hljs-keyword">starting</span> <span class="hljs-string">`node ./bin/www`</span>
  Week03-ExpressBasics:<span class="hljs-keyword">server</span> Listening <span class="hljs-keyword">on</span> port <span class="hljs-number">30025</span> +<span class="hljs-number">0</span>ms
</code></pre>
<p>You are getting extra debug output, such as the last line showing what port you are running on. In particular, see if you can find code like this near the bottom of <strong>bin/www</strong></p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onListening</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">var</span> addr = server.address();
  <span class="hljs-keyword">var</span> bind = <span class="hljs-keyword">typeof</span> addr === <span class="hljs-string">'string'</span>
    ? <span class="hljs-string">'pipe '</span> + addr
    : <span class="hljs-string">'port '</span> + addr.port;
  debug(<span class="hljs-string">'Listening on '</span> + bind);  &lt;==== THE DEBUG STATEMENT
}
</code></pre>
</div></body></html>