<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>WebCraftsReduxData</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>WebCraftsReduxData</h1><p>Welcome to WebCraftsReduxData</p><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#client-and-server">Client and Server</a></li>
<li><a href="#concurrently">Concurrently</a></li>
<li><a href="#promises">Promises</a></li>
<li><a href="#load-the-config-file">Load the config File</a></li>
<li><a href="#the-client">The client</a></li>
<li><a href="#redux">Redux</a></li>
<li><a href="#config-reducer">Config Reducer</a></li>
<li><a href="#error-on-prepare-styles">Error on Prepare styles</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="overview"></a>
<h2>Overview</h2>
<p>We start working with our <strong>ElvenConfig.json</strong> file via Redux.</p>
<a class="anchor" id="client-and-server"></a>
<h2>Client and Server</h2>
<p>You know the drill:</p>
<pre><code><span class="hljs-string">mkdir </span><span class="hljs-string">Week09-ReduxData
</span><span class="hljs-string">cd </span><span class="hljs-string">Week09-ReduxData
</span><span class="hljs-built_in">create-react-app</span> <span class="hljs-string">client
</span><span class="hljs-string">CreateExpressProject </span><span class="hljs-string">server</span>
</code></pre><a class="anchor" id="concurrently"></a>
<h2>Concurrently</h2>
<p>Do the <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/Npm/RunConcurrently.html">concurrently</a> assignment.</p>
<a class="anchor" id="promises"></a>
<h2>Promises</h2>
<div style="position:relative;height:0;padding-bottom:56.25%"><iframe src="https://www.youtube.com/embed/nWV4Ed2gckk?ecver=2" width="640" height="360" frameborder="0" gesture="media" style="position:absolute;width:100%;height:100%;left:0" allowfullscreen></iframe></div>

<a class="anchor" id="load-the-config-file"></a>
<h2>Load the config File</h2>
<p>On the server, in <strong>routes/index.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> config = <span class="hljs-keyword">require</span>(<span class="hljs-string">'isit-code-lastname'</span>).elfConfig;

---

router.get(<span class="hljs-string">'/getConfig'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(req, res, next)</span> </span>{ <span class="hljs-string">'use strict'</span>;
    config.loadAsync()
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(configuration)</span> </span>{
            <span class="hljs-comment">// WRITE CODE TO SEND THE CONFIGURATION</span>
            <span class="hljs-comment">// VIA HTTP</span>
        })
        .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> </span>{
            <span class="hljs-keyword">throw</span> err
        })
});
</code></pre>
<a class="anchor" id="the-client"></a>
<h2>The client</h2>
<p>Install Material UI</p>
<pre><code>npm <span class="hljs-keyword">install</span> <span class="hljs-comment">--save material-ui</span>
npm <span class="hljs-keyword">install</span> <span class="hljs-comment">--save redux</span>
npm <span class="hljs-keyword">install</span> <span class="hljs-comment">--save react-redux</span>
</code></pre><p>Use <strong>RaisedButton</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> RaisedButton <span class="hljs-keyword">from</span> <span class="hljs-string">'material-ui/RaisedButton'</span>;
</code></pre>
<p>Put in Redux:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> {connect} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;

<span class="hljs-keyword">let</span> App = <span class="hljs-function">(<span class="hljs-params">{put, the, dispatched, functions, here}</span>) =&gt;</span> {

    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App-header"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{logo}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App-logo"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"logo"</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App-title"</span>&gt;</span>Welcome to React<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App-intro"</span>&gt;</span>
          App Reducer
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        // YOUR JSX HERE
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    );

};

const mapStateToProps = (state) =&gt; {};

const mapDispatchToProps = (dispatch) =&gt; {};

App = connect(
    mapStateToProps,
    mapDispatchToProps
)(App);</span>
</code></pre>
<a class="anchor" id="redux"></a>
<h2>Redux</h2>
<p>In <strong>index.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>;
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;
<span class="hljs-keyword">import</span> configReducer <span class="hljs-keyword">from</span> <span class="hljs-string">'./config-reducer'</span>;
<span class="hljs-keyword">import</span> {Provider} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
<span class="hljs-keyword">import</span> {createStore} <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;
<span class="hljs-keyword">import</span> registerServiceWorker <span class="hljs-keyword">from</span> <span class="hljs-string">'./registerServiceWorker'</span>;

<span class="hljs-keyword">let</span> store = createStore(configReducer);
<span class="hljs-keyword">const</span> root = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>);

ReactDOM.render(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span>, root);
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
registerServiceWorker();
</code></pre>
<a class="anchor" id="config-reducer"></a>
<h2>Config Reducer</h2>
<p>Basing your work on Spokesman from our Redux Starter assignment, create a reducer. Only this time, also create a promise in get-config that loads <strong>ElvenConfig.json</strong>.</p>
<p>The actions we respond to in the reducer:</p>
<ul>
<li>ALL</li>
<li>BOOTSWATCH</li>
<li>SITE_DIRS</li>
<li>DESTINATION_DIRS</li>
</ul>
<pre><code class="lang-javascript">import getConfig <span class="hljs-keyword">from</span> './get-config';
const <span class="hljs-keyword">state</span> = getConfig();


const spokesman = (<span class="hljs-keyword">state</span> = <span class="hljs-keyword">state</span>, action) =&gt; {
    switch (action.type) {
        <span class="hljs-keyword">default</span>:
            return <span class="hljs-keyword">state</span>;
    }
};

export <span class="hljs-keyword">default</span> spokesman;
</code></pre>
<a class="anchor" id="error-on-prepare-styles"></a>
<h2>Error on Prepare styles</h2>
<p>Error: <strong>Cannot read property &#39;prepareStyles&#39; of undefined</strong></p>
<p>Don&#39;t forget the MuiThemeProvider!</p>
</div></body></html>