<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>LampMarkdown</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><script src="/libs/scripts/Control.js"></script><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/charlie/development/index.html">Strongly Typed</a></li><li><a href="/charlie/development/web/index.html">Web & Scripts</a></li><li><a href="/charlie/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/charlie/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>LampMarkdown</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#step-one">Step One</a></li>
<li><a href="#step-two">Step Two</a></li>
<li><a href="#install-script">Install Script</a></li>
<li><a href="#step-three">Step Three</a></li>
<li><a href="#step-four">Step Four</a></li>
<li><a href="#step-five">Step Five</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#example-images">Example Images</a></li>
<li><a href="#hint">Hint</a></li>
<li><a href="#hint">Hint</a></li><!--TOC_End--></ul><h2 id="overview">Overview</h2>
<p>The goal of this project is to help you move quickly from raw markdown files to a working Apache based web site.</p>
<p>A video associated with this assignment is available here:</p>
<ul>
<li><a href="https://youtu.be/kz2R1EIpnis">Lamp Markdown Video</a></li>
</ul>
<h2 id="step-one">Step One</h2>
<p>You need to get the most recent code from <strong>JsObjects</strong>. Navigate to your JsObjects directory:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">cd</span> ~/Git/JsObjects
</code></pre>
<p>Now type <strong>git pull</strong>.</p>
<p>If you get an error, type the following and try again to pull down the updates:</p>
<pre><code class="lang-bash"><span class="hljs-attribute">git</span> stash
</code></pre>
<h2 id="step-two">Step Two</h2>
<p>It is not a good idea to do work in JsObjects. So let&#39;s copy the files that I want you to use from JsObjects into another folder. First, create a place in your home folder where you can store programs:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">mkdir</span> ~/Source
</code></pre>
<p>Now copy the program I want you to use into it:</p>
<pre><code class="lang-bash">cp -r ~<span class="hljs-regexp">/Git/</span>JsObjects<span class="hljs-regexp">/JavaScript/</span>NodeCode<span class="hljs-regexp">/MakeHtml/</span> ~<span class="hljs-regexp">/Source/</span>.
</code></pre>
<p>Now set up the program, but don&#39;t run it yet:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">cd</span> ~/Source/MakeHtml
npm install
</code></pre>
<p>There is one last step, which involves installing a program called Jade. You can install it like this:</p>
<pre><code class="lang-bash">npm <span class="hljs-keyword">install</span> -<span class="hljs-keyword">g</span> jade
</code></pre>
<p>Now just leave that part of the project alone for a bit.</p>
<p>You can expect <strong>npm install</strong> to issue some warnings or even a few small errors. But if you hit serious errors when you run <strong>npm install</strong>, try several steps as listed below. The first (jou) should take you to the <strong>~/Git/JsObjects/Utilities</strong> directory. From there, navigate into the <strong>NodeInstall</strong> directory. Some of the install commands might not install anything because the program or programs may already be installed. When running <strong>InstallNodePackages</strong>, choose e for essentials.</p>
<pre><code class="lang-bash">jou
<span class="hljs-keyword">cd</span> NodeInstall/
./NodeInstall.<span class="hljs-keyword">sh</span>
./InstallNodePackages.<span class="hljs-keyword">sh</span>
sudo apt-<span class="hljs-built_in">get</span> install <span class="hljs-keyword">python</span>
sudo apt-<span class="hljs-built_in">get</span> install build-essential
sudo apt autoremove
</code></pre>
<h2 id="install-script">Install Script</h2>
<p>I also have a script called <strong>renewMakeHtml</strong>, which can help with the install or updating process. This automates the step by step process described above. So if you have already completed the previous section, you need not run <strong>renewMakeHtml</strong> at this time.</p>
<p><strong>NOTE</strong>: <em>I think it is best to go through step by step the first time both so you undrestand what is happening, and also so you can learn how to troubleshoot problems that may occur at each step. However, once you understand the process, the <strong>renewMakeHtml</strong> script can be useful because it can save time. It is also useful if you need to update <strong>MakeHtml</strong> because I have changed it. I will tell you if it has changed.</em></p>
<p>I keep this script in the <strong>MakeHtml</strong> folder. You don&#39;t, however, want to run <strong>renewMakeHtml</strong> from inside of the <strong>~/Source/MakeHtml</strong> folder. I store the file there, just because it belongs to that project, but it should, in our case, be run from <strong>~/Source</strong>.</p>
<p>It only needs to be run occasionally. For instance, run it after I have updated my <strong>MakeHtml</strong> program. (I perhaps should have called it <strong>updateMakeHtml</strong>, or <strong>copyLatestMakeHtml</strong>.)</p>
<p>There are only two reasons to run <strong>renewMakeHtml</strong>:</p>
<pre><code>To install <span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>MakeHtml<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>
To update <span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>MakeHtml<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>
</code></pre><p>The very first time you need to use <strong>MakeHtml</strong> on a new system, you should copy the script called <strong>renewMakeHtml</strong> from <strong>JsObjects</strong> to ~/<strong>Source</strong>:</p>
<pre><code>cp $JSOBJECTS/JavaScript/NodeCode/MakeHtml/renewMakeHtml ~/Source/.
</code></pre><p>Then run the script like this:</p>
<pre>
cd ~/Source
./renewMakeHtml
</pre>

<p><strong>NOTE</strong>: <em>Just to be clear, you would only need to do this in order to install <strong>MakeHtml</strong> the first time on a new system, or to update <strong>MakeHtml</strong> if I have made changes to it. If I&#39;ve made changes I would tell you. It is not something you need to figure out on your own.</em></p>
<p>But you only need to do this once on any particular system. For instance, once on Pristine Lubuntu at school, once on Pristine Lubuntu at home, and once on EC2. After that you can forget it, unless I specifically say: &quot;Hey, I updated <strong>MakeHtml</strong> to fix a bug or to get a new feature such as X or Y.&quot; Then you would run it to get the latest bits from <strong>JsObjects</strong> by running the script.</p>
<p>More specifically: after installing <strong>MakeHtml</strong>, you can use the script to update it. Suppose I have made a change to <strong>MakeHtml</strong> and wanted you to get my recent changes. Then you should switch to the ~/Source folder, and run <strong>renewMakeHtml</strong>. That will delete your old copy of <strong>~/Source/MakeHtml</strong> and copy out a new one from <strong>JsObjects</strong>.</p>
<p>The major take away: don&#39;t run <strong>renewMakeHtml</strong> too often. When you run it, the <strong>config</strong> file gets overwritten, and then you need to edit it again. Only run the script to install the program the first time, or when I announce an update. In the normal course of things, updates are infrequent.</p>
<h2 id="step-three">Step Three</h2>
<p>Create a new folder in your <strong>Documents</strong> directory. Name the new folder <strong>AllTest</strong>:</p>
<pre><code class="lang-bash">mkdir ~<span class="hljs-regexp">/Documents/AllTest/</span>
</code></pre>
<p>Now use Remarkable to create some markdown files and place them in your new directory. You can use files that you already created, but by the time you are done, you should have at least six markdown files, and at least half of them have to be new: not ones that you used in a previous assignment.</p>
<p>Move at least two of the markdown files into a sub-directory of <strong>AllTest</strong>. You can call that directory whatever you want. For instance, <strong>MoreFiles</strong>:</p>
<pre><code class="lang-bash">mkdir ~<span class="hljs-regexp">/Documents/</span>AllTest/MoreFiles
</code></pre>
<h2 id="step-four">Step Four</h2>
<p>By this point in the class, you should already have LAMP installed, and have the correct permissions in your <strong>/var/www/html</strong> folder. But let&#39;s make sure it is set up correctly, with bcuser as the owner. Navigate to your <strong>/var/www/</strong> directory and issue this command:</p>
<pre><code class="lang-bash"><span class="hljs-symbol">sudo</span> chown -R <span class="hljs-keyword">bcuser:bcuser </span>html
</code></pre>
<p><strong>note</strong>: <em>If the /var/www/html directory is not present, you need to install LAMP. Directions are here:</em></p>
<ul>
<li><a href="http://www.elvenware.com/charlie/development/database/mysql/MySql.html#installOnLinux">http://www.elvenware.com/charlie/development/database/mysql/MySql.html#installOnLinux</a></li>
</ul>
<p>There is one other little piece that we need to put in place to make this work correctly. On <a href="http://www.elvenware.com">http://www.elvenware.com</a> there is a logo. A picture of mountains silhouetted against the sky. Go to the site, find the logo, right click on it, and save it to your <strong>Pictures</strong> directory of your home drive.</p>
<p>Now create an <strong>images</strong> folder for your website:</p>
<pre><code class="lang-bash">mkdir <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/im</span>ages
</code></pre>
<p>Copy your file into that directory, and set the correct permissions so that a user who is not you, who browses to the site, can read it:</p>
<pre><code class="lang-bash">cp <span class="hljs-regexp">~/Pictures/</span>elvenwarelogo.png <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>images/.
chmod <span class="hljs-number">644</span> <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>images/elvenwarelogo.png
</code></pre>
<p>When you write 644, you are saying the owner has read and write permissions, while everyone else has only read permissions:</p>
<pre><code>-rw-r--r-- <span class="hljs-number">1</span> <span class="hljs-keyword">bcuser </span><span class="hljs-keyword">bcuser </span><span class="hljs-number">37309</span> Jan <span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">49</span> /var/www/html/images/elvenwarelogo.png
</code></pre><p>Sadly, there is one last step. In order to get syntax highlighting after our triple backticks in our markdown, we need to include a special CSS file on our website. Here is how to copy it there. Here is what to do:</p>
<ul>
<li>Naviagate back to the <strong>~/Source/MakeHtml</strong> directory. Then issue these commands to create a folder for the CSS file, and then copy the file into that folder:</li>
</ul>
<pre><code>mkdir -p <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>css<span class="hljs-regexp">/highlight/</span>
cp .<span class="hljs-regexp">/node_modules/</span>highlight.js<span class="hljs-regexp">/styles/g</span>ooglecode.css <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>css<span class="hljs-regexp">/highlight/</span>.
</code></pre><p>If you are not in the <strong>~/Source/MakeHtml</strong> directory, then try this command:</p>
<pre><code>cp ~<span class="hljs-regexp">/Source/M</span>akeHtml<span class="hljs-regexp">/node_modules/</span>highlight.js<span class="hljs-regexp">/styles/g</span>ooglecode.css <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>css<span class="hljs-regexp">/highlight/</span>.
</code></pre><h2 id="step-five">Step Five</h2>
<p>It is now time to convert your markdown files into HTML and copy them out to your website.</p>
<p>From the <strong>~/Source/MakeHtml</strong> directory, issue this command twice:</p>
<pre><code><span class="hljs-built_in">npm</span> start
</code></pre><p>Now browse to your website:</p>
<ul>
<li><a href="http://localhost/master-list.html">http://localhost/master-list.html</a></li>
</ul>
<p>There should be at least one link in the file you see. Start clicking, and you should be able to navigate all the files in your site either directly, or through the back button.</p>
<p><strong>NOTE</strong>: <em>I reminded you above, but don&#39;t forget that you need to run <strong>npm install</strong> before the first time you run <strong>npm start</strong>. You usually only need to type <strong>npm install</strong> one time per project. Once you have issued the command, then the packages that that project relies on have been installed, and you need not issue the install command again. Type <strong>npm install</strong> one time. After that, you need only type <strong>npm start</strong> to run the project.</em></p>
<p>Here is a bit more detail for the technically minded:</p>
<ul>
<li>JavaScript is a programming language like C#, Java, Perl, Python, C++ and Ruby.</li>
<li>JavaScript can be run in the browser, and that is where we usually see it.</li>
<li>JavaScript can also be run on the server, or just run as a utility. Most of the time, when use it this way, it is via a compiler called <a href="https://nodejs.org">NodeJs</a>. <strong>MakeHtml</strong> program uses NodeJs. It is a custom program that I wrote. More specifically, it is a utility that converts markdown files to HTML and copies the HTML files to specific directory.</li>
<li>NodeJs has a system for creating and consuming libraries. This system is called <a href="https://www.npmjs.com/">NPM</a>, which stands for the Node Package Manager. So a library in Node is often called a Package. These libraries provide various services such as access to the file system, access to databases, access to the HTTP protocol.</li>
</ul>
<p>When we type <strong>npm start</strong>, behind the scenes we are running a command that might look something like this: <strong>node server.js</strong>. This command tells the node compiler to compile and run <strong>server.js</strong>, where <strong>server.js</strong> is a JavaScript source file.</p>
<h2 id="turn-it-in">Turn it in</h2>
<p>Take at least three screen shots of your pages running in the browser.</p>
<p>Issue the following command and take a screen shot of the results:</p>
<pre><code>ls <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>
</code></pre><p>Create a zip file called <strong>MakeHtml-LastName</strong> containing the contents of your <strong>/var/www</strong> folder and put it in our shared google drive folder:</p>
<pre><code>zip -r MakeHtml-Calvert <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>*
</code></pre><p>You should, of course, use your last name and not mine.</p>
<p>If you put images in Google Drive, don&#39;t wrap them in a zip file. This saves me a step.</p>
<p>Just to be clear: one part of this assignment, outlined in the first sentence of this section of the text, did involve creating a zip file with images. I&#39;m talking about the images of your page running that I want to see. Don&#39;t put them in a zip file.</p>
<p>Putting images in Google Drive is fine, though just attaching them to the assignment is perhaps better. Then put comments in the Canvas comments area. Thank you.</p>
<h2 id="example-images">Example Images</h2>
<p>Your images must be different from these, but they should have much in common with them:</p>
<p>The master list:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/LampMarkdown01.png" alt="Master"></p>
<p>The summary:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/LampMarkdown02.png" alt="Summary"></p>
<p>A random page:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/LampMarkdown03.png" alt="Typical Files"></p>
<h2 id="hint">Hint</h2>
<p>Here are some tips and thoughts about this program to help you understand it better.</p>
<ul>
<li>Whenever we add to or edit the markdown files in AllTest, we need to run MakeHtml (npm start) in order to have the changes we made in AllTest reflected in our web site (localhost).</li>
<li>There is a bug in the MakeHtml program that results in the summary.html or master-list.html files not being properly created when we first create a new directory in AllTest. As a result, we sometimes need to run npm start twice.</li>
</ul>
<p>Summary: The MakeHtml program converts our markdown in the AllTest folder to HTML. It copies the HTML to the <strong>/var/www/html</strong> folder. MakeHtml is not a service that runs continually. Therefore, each time we update files in the AllTest directory, we need to run (<strong>npm start</strong>) MakeHtml in order to update the files in <strong>/var/www/html</strong>. The conversion does not take place automatically, it only happens when we explicitly run the MakeHtml program by typing <strong>npm start</strong>.</p>
<p>NOTE: In Windows, we typically click on an executable to run it. Here, we are running a program implemented as a NodeJs script. The way to run the script is to type <strong>npm start</strong>.</p>
<h2 id="hint">Hint</h2>
<p>Check <strong>~/Source/MakeHtml/config/ElvenConfig.json</strong> to make sure it is compatible with your system. In particular, check the &quot;base-dir&quot;, which assumes that your home path is <strong>/home/bcuser</strong>.</p>
<pre><code>{
  "<span class="hljs-attr">calvert</span>": {
    "<span class="hljs-attr">base-dir</span>": <span class="hljs-string">"/home/bcuser/"</span>,
    "<span class="hljs-attr">site-dirs</span>": [
      <span class="hljs-string">"Documents/AllTest"</span>,
      <span class="hljs-string">"Documents/AllSite"</span>
    ],
    "<span class="hljs-attr">destination-dirs</span>": [
      <span class="hljs-string">"/var/www/html/"</span>,
      <span class="hljs-string">"/home/bcuser/temp/test-site/"</span>
    ]
  }
}
</code></pre></div></body></html>