<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ReactGitMenu</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>ReactGitMenu</h1><p>Welcome to ReactGitMenu</p><ul><!--TOC_Start--><li><a href="#react-git-menu">React Git Menu</a></li>
<li><a href="#install-react-router">Install React Router</a></li>
<li><a href="#rename-header-to-elfheader">Rename Header to ElfHeader</a></li>
<li><a href="#the-main-index">The Main Index</a></li>
<li><a href="#app">App</a></li>
<li><a href="#add-menu">Add Menu</a></li>
<li><a href="#defining-routes">Defining Routes</a></li>
<li><a href="#style-the-menu">Style the Menu</a></li>
<li><a href="#show-all-fields-of-git-user">Show All Fields of Git User</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#elfdebug">ElfDebug</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="react-git-menu"></a>
<h1>React Git Menu</h1>
<p>The goals of this assignment are:</p>
<ul>
<li>Create a menu with <a href="https://reacttraining.com/react-router/web/example/basic">react-router</a> no matter how limited</li>
<li>Switch views between <strong>Git View</strong>, <strong>BarFoo</strong> and <strong>SmallNumbers</strong></li>
</ul>
<p>In this serious of screen shots you can see the menu, and the various views it provides. In particular, each view features one component, or one component and its child components. This is a <a href="https://en.wikipedia.org/wiki/Single-page_application">SPA</a>, or Single Page App.</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-router-menu-git-user.png" alt="Git View"></p>
<p><strong>IMAGE</strong>: <em>Home page with styling and menu at bottom of header.</em></p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-router-menu-no-style.png" alt="Bar Foo"></p>
<p><strong>IMAGE</strong>: <em>Micro page with menu no styling.</em></p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-router-menu-styled.png" alt="Foo API"></p>
<p><strong>IMAGE</strong>: <em>Get Foo page with menu styling and menu at top.</em></p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-router-menu-comps.png" alt="The components folder"></p>
<p><strong>IMAGE</strong>: The components folder</p>
<a class="anchor" id="install-react-router"></a>
<h2>Install React Router</h2>
<p>Read the <a href="http://www.elvenware.com/charlie/development/web/JavaScript/JavaScriptReactMenu.html#router-install">React Router Dom Install</a> section from Elvenware then return to this document and install <strong>react-router-dom</strong> in the <strong>client</strong> directory.</p>
<a class="anchor" id="rename-header-to-elfheader"></a>
<h2>Rename Header to ElfHeader</h2>
<p>In this assignment we will be working the component that we use to display our header. We initially called this class <strong>Header</strong>. Let&#39;s do a small refactor here and change its name to <strong>ElfHeader</strong>. This will make it less likely that its name will collide with the HTML tag of the same name, or some other JavaScript variable with the same name.</p>
<p>I prefer to use Git to rename files:</p>
<p>  git mv src/components/Header.js src/components/ElfHeader.js</p>
<p>Then open up the file and change the name of the class itself from <strong>Header</strong> to <strong>ElfHeader</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ElfHeader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{ ... }

export <span class="hljs-keyword">default</span> <span class="hljs-type">ElfHeader</span>;
</code></pre>
<a class="anchor" id="the-main-index"></a>
<h2>The Main Index</h2>
<p>Recall how our modified <strong>index.js</strong> file looks:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/App'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./css/index.css'</span>;

ReactDOM.render(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">App</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>)
);
</code></pre>
<p><strong>NOTE</strong>: <em>Notice how easy it is for us to move classes and views around when we use the <strong>React</strong> architecture.  The small, focused loosely coupled components that we have created give us the flexibility to accept changes in specifications with a minimum of disruption.</em></p>
<a class="anchor" id="app"></a>
<h2>App</h2>
<p>We are going to fundamentally change the structure of our program. This means making changes to this JSX in App.js:</p>
<pre><code class="lang-javascript"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ElfHeader</span>/&gt;</span>                        
    <span class="hljs-tag">&lt;<span class="hljs-name">GitUser</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Micro</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ApiFoo</span> <span class="hljs-attr">appInit</span>=<span class="hljs-string">{appInit}/</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<a class="anchor" id="add-menu"></a>
<h2>Add Menu</h2>
<p>Let&#39;s add in the code in <strong>ElfHeader</strong> that defines the &quot;visible&quot; menu that the user will click on:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// IMPORTS OMITTED HERE</span>
<span class="hljs-keyword">import</span> {<span class="hljs-type">Link</span>} from <span class="hljs-string">"react-router-dom"</span>;


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ElfHeader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
    render() {
        <span class="hljs-keyword">return</span> (
            &lt;div className=<span class="hljs-string">"App"</span>&gt;
                &lt;header className=<span class="hljs-string">"App-header"</span>&gt;
                    &lt;div&gt;
                        &lt;ul&gt;
                            &lt;li&gt;
                                &lt;<span class="hljs-type">Link</span> to=<span class="hljs-string">"/"</span>&gt;<span class="hljs-type">Git</span> <span class="hljs-type">User</span>&lt;/<span class="hljs-type">Link</span>&gt;
                            &lt;/li&gt;
                            <span class="hljs-comment">// YOU WRITE LINKS FOR MICRO &amp; APIFOO</span>
                        &lt;/ul&gt;
                    &lt;/div&gt;
                    &lt;img ...&gt;
                    &lt;h1 ...&gt;
                &lt;/header&gt;
            &lt;/div&gt;
        );
    }
}

export <span class="hljs-keyword">default</span> <span class="hljs-type">ElfHeader</span>;
</code></pre>
<p>Here we are using the <strong>react-router-dom</strong> class called <strong>Link</strong> to help us create a link that behaves appropriately in this context. It will, for instance, turn the first two items into code that looks like this at run time:</p>
<pre><code class="lang-HTML">&lt;li&gt;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
&lt;li&gt;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/api-foo"</span>&gt;</span>ApiFoo<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
</code></pre>
<a class="anchor" id="defining-routes"></a>
<h2>Defining Routes</h2>
<p>The final step involves defining what the application will do when the user clicks on a particular menu item. Here is the basic structure:</p>
<pre><code class="lang-JavaScript"><span class="hljs-keyword">import</span> {<span class="hljs-type">BrowserRouter</span>, <span class="hljs-type">Route</span>} from <span class="hljs-string">"react-router-dom"</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
    render() {
        <span class="hljs-keyword">return</span> (
            &lt;<span class="hljs-type">BrowserRouter</span>&gt;
                &lt;div className=<span class="hljs-string">"App"</span>&gt;
                    &lt;<span class="hljs-type">ElfHeader</span>/&gt;
                    &lt;<span class="hljs-type">Route</span> exact path=<span class="hljs-string">"/"</span> component={<span class="hljs-type">GitUser</span>}/&gt;
                    <span class="hljs-comment">// YOU WRITE APIFOO AND MICRO</span>
                &lt;/div&gt;
            &lt;/<span class="hljs-type">BrowserRouter</span>&gt;
        );
    }
}
</code></pre>
<p>We do it like this for the home menu:</p>
<pre><code class="lang-HTML"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">exact</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{GitUser}/</span>&gt;</span>
</code></pre>
<p>Note the user of the flag <strong>exact</strong>. This is necessary because a simple match on &#39;/&#39; will pass both &#39;/&#39; and &#39;/api-foo&#39;. In fact, it will match any URL beginning &#39;/&#39;. So we tell the router that we want an exact match.</p>
<p>I want you to have to figure out at least one of these routes on your own, so I will let you discover the solution for creating the Route to GetFoo. It isn&#39;t hard, so try not to over-complicate it.</p>
<p>The normal pattern is to define the path, and then the component:</p>
<pre><code class="lang-javascript"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/my-component"</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{MyComponent}/</span>&gt;</span>
</code></pre>
<p>You cannot, however, pass props to <strong>MyComponent</strong> the same way you can elsewhere in a React application. Instead, you use <strong>render</strong> instead of <strong>component</strong>, and the syntax looks like this in our case:</p>
<pre><code class="lang-javascript"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/api-foo"</span>
    <span class="hljs-attr">render</span>=<span class="hljs-string">{(props)</span> =&gt;</span> (
        <span class="hljs-tag">&lt;<span class="hljs-name">ApiFoo</span> {<span class="hljs-attr">...props</span>}
            <span class="hljs-attr">appInit</span>=<span class="hljs-string">{appInit}</span> /&gt;</span>
    )}
/&gt;
</code></pre>
<p>We use this syntax because <strong>react-router-dom</strong> passes a certain number of props to a component by default, and we don&#39;t want to lose them. Here we use the <a href="http://es6-features.org/#SpreadOperator">spread-operator</a> to pass the Router props and then we pass our own props.</p>
<p>Here is what it looks like in the debugger when working with a different component than the one we use in program:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/small-number-props.png" alt="Local Scope Props Numbers"></p>
<p><strong>IMAGES</strong>: <em>You can see the <strong>Sources</strong> tab of Chrome Developer Tools</em></p>
<p>I&#39;ve run to a breakpoint on line 10 of <strong>SmallNumbers.js</strong>. At the bottom right we can see that <strong>props</strong> for SmallNumbers is in the <strong>Local Scope</strong>. The debugger displays our <strong>Numbers</strong> prop, along with three properties passed by the <strong>react-router-dom</strong>:</p>
<ul>
<li>history</li>
<li>location</li>
<li>match</li>
</ul>
<p>They can come in useful in more advanced scenarios than the one we see here. In particular, they can help preserve history so the user can move back and forth through your site.</p>
<a class="anchor" id="style-the-menu"></a>
<h2>Style the Menu</h2>
<p>Read about it <a href="http://www.elvenware.com/charlie/development/web/JavaScript/JavaScriptReactMenu.html#style-the-menu">here</a></p>
<a class="anchor" id="show-all-fields-of-git-user"></a>
<h2>Show All Fields of Git User</h2>
<p>Be sure to replace the field-definitions.js file with new code from the <strong>Git Convert</strong> assignment. You should be able to display all the fields that are returned from Git.</p>
<p>You will need to make some edits here to the string that is assignment to the value attribute:</p>
<pre><code class="lang-javascript">&lt;ElfElements {...field}
      value={this<span class="hljs-selector-class">.props</span><span class="hljs-selector-class">.gitUser</span>[field.id]}
      onChange={this<span class="hljs-selector-class">.props</span><span class="hljs-selector-class">.onChange</span>}
</code></pre>
<p>I ended up calling a function and doing my work there:</p>
<pre><code class="lang-javascript">value={getValue(this<span class="hljs-selector-class">.props</span><span class="hljs-selector-class">.gitUser</span>)}
</code></pre>
<p>In the getValue function, you might want to use syntax like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">return</span> testMe <span class="hljs-params">||</span> <span class="hljs-string">''</span>
</code></pre>
<p>That code will return an empty string if <strong>testMe</strong> is <strong>null</strong> or <strong>undefined</strong>. You will also need to handle the case with <strong>gitUser[field.id]</strong> is a <strong>boolean</strong>.</p>
<p>When everything is working right, you won&#39;t see messages like this in the debugger: <em>Warning: <code>value</code> prop on <code>input</code> should not be null. Consider using the empty string to clear the component or <code>undefined</code> for uncontrolled components.</em> Also, your boolean fields such as <strong>site-admin</strong> will have strings in them rather than being blank. The point being, of course, that your code should run without warnings or errors.</p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Add, commit, push, tag and/or branch. Let me know the tag and/or branch as well as the directory for your work. Make sure all your tests pass. For now.</p>
<a class="anchor" id="elfdebug"></a>
<h2>ElfDebug</h2>
<p> <a href="https://gist.github.com/charliecalvert/51daef341699943b07c9570c3ad2cbab">ElfEnzymeDebug</a></p>
</div></body></html>