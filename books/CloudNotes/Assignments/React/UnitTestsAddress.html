<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>UnitTestsAddress</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>UnitTestsAddress</h1><p>Welcome to UnitTestsAddress</p><ul><!--TOC_Start--><li><a href="#unit-test-address">Unit Test Address</a></li>
<li><a href="#review">Review</a></li>
<li><a href="#change-name-of-getfile">Change Name of getFile</a></li>
<li><a href="#add-firstname-test">Add firstName test</a></li>
<li><a href="#add-firstname">Add firstName</a></li>
<li><a href="#add-address-button">Add Address Button</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#hints">Hints</a></li>
<li><a href="#philosophy">Philosophy</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="unit-test-address"></a>
<h1>Unit Test Address</h1>
<p>The goal of this assignment is to display and test a complete address with FirstName, LastName, Street, City, State, Zip or more. There should be tests for each field.</p>
<p>This assignment builds on the <a href="http://bit.ly/jest-cra">Unit Tests with Jest</a> assignment. Complete that assignment first. You should turn in only one project, which will contain both the <strong>Unit Tests with Jest</strong> and the <strong>Unit Tests with Address</strong> assignments. You can turn in the <strong>Unit Tests with Jest</strong> assignment first, if you want. In other words, your project need not include both completed assignments before you turn in the first assignment.</p>
<a class="anchor" id="review"></a>
<h2>Review</h2>
<p>The interface for our <strong>Unit Tests with Jest</strong> by end of class Wednesday:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-jest-view.png" alt="View Unit Jest"></p>
<p>In the <strong>Unit Tests with Jest</strong> assignment we had four key pieces of code for our component. This code is found in <strong>/src/Apps.js</strong>.</p>
<p><strong>The Constructor with State Declaration:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">constructor</span><span class="hljs-params">()</span> <span class="hljs-comment">{
    super();
    this.state = {
        file: 'unknown'
    }</span>
}</span>
</code></pre>
<p><strong>The JSX for HTML paragraph and button elements:</strong></p>
<pre><code class="lang-javascript">&lt;<span class="hljs-selector-tag">p</span> className=<span class="hljs-string">"App-intro"</span>&gt;
    Nine: {this<span class="hljs-selector-class">.state</span><span class="hljs-selector-class">.file</span>}
&lt;/p&gt;

&lt;<span class="hljs-selector-tag">button</span> className=<span class="hljs-string">"elf"</span> onClick={this.bar}&gt;Get Nine&lt;/button&gt;
</code></pre>
<p><strong>The getFile method:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">getFile</span> = <span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({
        file: <span class="hljs-string">'url-file.js'</span>
    })
};
</code></pre>
<p><strong>The Tests</strong></p>
<p>Our tests are designed to ensure that our component is working correctly. The tests for our program are found in <strong>App.test.js</strong>:</p>
<pre><code class="lang-javascript">describe('React Jest Suite', function () {

    it('renders without our App component without crashing', () =&gt; {
        const div = document.createElement('div')<span class="hljs-comment">;</span>
        ReactDOM.render(<span class="hljs-name">&lt;App</span> /&gt;, div)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

    it('renders and reads H1 text', () =&gt; {
        const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
        const welcome = &lt;h2&gt;Welcome to Prog272&lt;/h2&gt;<span class="hljs-comment">;</span>
        expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">welcome</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

    it('renders and displays the word Nine', () =&gt; {
        const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
        console.log(<span class="hljs-name">wrapper</span>)<span class="hljs-comment">;</span>
        const welcome = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;file: unknown&lt;/p&gt;<span class="hljs-comment">;</span>
        expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">welcome</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

    it('renders state of File paragraph after button click', () =&gt; {
       const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
       const file = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;file: url-file.js&lt;/p&gt;<span class="hljs-comment">;</span>
       wrapper.find('#getFile').simulate('click')<span class="hljs-comment">;</span>
       expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">file</span>)).toBe(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-jest-test.png" alt="Running the tests"></p>
<a class="anchor" id="change-name-of-getfile"></a>
<h2>Change Name of getFile</h2>
<p>Right now we have a method on our App class called <strong>getFile</strong>. Let&#39;s give it a more sensible name: <strong>getFileName</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">getFileName</span> = <span class="hljs-params">()</span> =&gt;</span> {
   <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'getFile called.'</span>);
   <span class="hljs-keyword">this</span>.setState({fileName: <span class="hljs-string">'url-file.js'</span>})
};
</code></pre>
<p>Make any other necessary changes to ensure that your application still runs. and all tests pass.</p>
<a class="anchor" id="add-firstname-test"></a>
<h2>Add firstName test</h2>
<p>Before we create a first name, let&#39;s write a test in <strong>App.test.js</strong> to see if it exists. The test will fail at first. Our goal in the next section is to get the test to pass.</p>
<pre><code class="lang-javascript">it('renders and displays the default first name', () =&gt; {
    const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
    const welcome = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;firstName: unknown&lt;/p&gt;<span class="hljs-comment">;</span>
    expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">welcome</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>You can, and should, add some <a href="http://airbnb.io/enzyme/docs/api/ShallowWrapper/debug.html">Enzyme debug</a> information to help us see what the last paragraph element on your form is actually rendering:</p>
<pre><code class="lang-javascript">const lastParagraph = wrapper.<span class="hljs-built_in">find</span>(<span class="hljs-string">'p'</span>).last().<span class="hljs-built_in">debug</span>();
console.<span class="hljs-built_in">log</span>(lastParagraph);
</code></pre>
<p><strong>TIP</strong>: <em>The call to last gets the last paragraph on your form. Beside <strong>last()</strong>, there is also a <strong>first()</strong>, and below I&#39;ll describe another method called <strong>childAt</strong>. See the <a href="http://airbnb.io/enzyme/docs/api/ReactWrapper/childAt.html">enzyme docs</a> for more info.</em></p>
<p>Like this:</p>
<pre><code class="lang-javascript">it('renders and displays the default first name', () =&gt; {
    const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
    const welcome = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;firstName: unknown&lt;/p&gt;<span class="hljs-comment">;</span>
    const firstName = wrapper.find('p').last().debug()<span class="hljs-comment">;  &lt;= WE ADDED LINE HERE</span>
    console.log(<span class="hljs-name">firstName</span>)<span class="hljs-comment">;                              &lt;= WE ADDED LINE HERE</span>
    expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">welcome</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>Please add similar methods to all your methods. For instance, in the simulate click tests, add the test after your call to <strong>.simulate(&#39;click&#39;)</strong>:</p>
<pre><code class="lang-javascript">it('renders state of File paragraph after button click', () =&gt; {
    const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
    const fileSign = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;file: url-file.js&lt;/p&gt;<span class="hljs-comment">;</span>
    wrapper.find('#getFile').simulate('click')<span class="hljs-comment">;</span>
    const paragraphData = wrapper.find('div').childAt(<span class="hljs-number">1</span>).debug()<span class="hljs-comment">;</span>
    console.log(<span class="hljs-name">paragraphData</span>)<span class="hljs-comment">;</span>
    expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">fileSign</span>)).toBe(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>Note that I&#39;m using a slightly different Enzyme debug technique. Here I&#39;m finding a paragraph by specifying its index. Our HTML is wrapped in a DIV, and I&#39;m specifying the index of a particular paragraph, counting down from the start of the DIV. For instance, if there three elements nested on the top level DIV on your page, and you want to get the second one, then write something like this:</p>
<pre><code class="lang-javascript"><span class="hljs-attribute">var paragraphData</span> = wrapper.find(<span class="hljs-string">'p'</span>).childAt(1).debug();
</code></pre>
<p>Don&#39;t include this with the assignment when you turn it in, but if you want to see all the HTML generated by your React component, write this:</p>
<pre><code class="lang-JavaScript">const wrapper = shallow(<span class="hljs-variable">&lt;App /&gt;</span>);
console.<span class="hljs-keyword">log</span>(wrapper.<span class="hljs-keyword">debug</span>());
</code></pre>
<p>That can help you see how lots of useful things, such as an easy, if mechanical, way to figure out the index of an individual item.</p>
<p>For instance, the last part of the debug output for your tests might look a bit like this:</p>
<pre><code class="lang-HTML">console<span class="hljs-selector-class">.log</span> src/App<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.js</span>:<span class="hljs-number">147</span>
  &lt;<span class="hljs-selector-tag">p</span> className=<span class="hljs-string">"App-intro"</span>&gt;
    fax:
    unknown
  &lt;/p&gt;

console<span class="hljs-selector-class">.log</span> src/App<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.js</span>:<span class="hljs-number">156</span>
  &lt;<span class="hljs-selector-tag">p</span> className=<span class="hljs-string">"App-intro"</span>&gt;
    fax:
    (<span class="hljs-number">202</span>) <span class="hljs-number">224</span>-<span class="hljs-number">0238</span>
  &lt;/p&gt;

console<span class="hljs-selector-class">.log</span> src/App<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.js</span>:<span class="hljs-number">164</span>
  &lt;<span class="hljs-selector-tag">p</span> className=<span class="hljs-string">"App-intro"</span>&gt;
    tollfree:
    unknown
  &lt;/p&gt;

console<span class="hljs-selector-class">.log</span> src/App<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.js</span>:<span class="hljs-number">173</span>
  &lt;<span class="hljs-selector-tag">p</span> className=<span class="hljs-string">"App-intro"</span>&gt;
    tollfree:
    (<span class="hljs-number">866</span>) <span class="hljs-number">481</span>-<span class="hljs-number">9186</span>
  &lt;/p&gt;
</code></pre>
<a class="anchor" id="add-firstname"></a>
<h2>Add firstName</h2>
<p>I&#39;m not going to talk you through all the steps, but let&#39;s make sure you know how to add one of the address fields. You will then add the others on your own.</p>
<p>In the constructor, add first name to state:</p>
<pre><code class="lang-javascript">this.<span class="hljs-keyword">state</span> = {
    file: '<span class="hljs-literal">unknown</span>',
    firstName: '<span class="hljs-literal">unknown</span>'
}
</code></pre>
<p>Display our property in the render method:</p>
<pre><code class="lang-javascript"><span class="hljs-variable">&lt;p className="App-intro"&gt;</span>
    firstName: {this.<span class="hljs-keyword">state</span>.firstName}
&lt;/p&gt;
</code></pre>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-jest-default-first-name.png" alt="testing first name"></p>
<a class="anchor" id="add-address-button"></a>
<h2>Add Address Button</h2>
<p>Write a failing tests that shows you can click on a button with a class name of <strong>setAddress</strong> and display the words <strong>firstName: Patty</strong>. Your goal will be to get the test to pass.</p>
<p>Add a new method called <strong>setAddress</strong> and ensure that it can set the <strong>firstName property</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">setAddress</span> = <span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({
        firstName: <span class="hljs-string">'Patty'</span>
    })
};
</code></pre>
<p>Call our method from a button click in our render method:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"setAddress"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.setAddress}</span>&gt;</span>Set Address<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-jest-patty.png" alt="Show patty"></p>
<p>You should now have six passing tests.</p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>When you are done, you should be able to display the complete address for Senator Patty Murray and have two tests for each field: one for the default value and one for the value in the field after you click the button. You can pick any Congress Person who interests you. It doesn&#39;t have to be Patty Murray. You should have tests that prove everything is displayed as expected both before and after you click the <strong>Set Address</strong> button. So we should be able to see in the component view, and in the tests, the <strong>FirstName</strong>, <strong>LastName</strong>, <strong>Steet</strong>, <strong>City</strong> etc fields...</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-jest-test-final.png" alt="Final app at runtime with dev tools"></p>
<p>Note that the Developer Tools show a clean run with no errors and no warnings. We can see two line of output from our console.log statements.</p>
<p>When you are done, you should have something like 16 to 20 tests. As I drew near the end of the assignment, my tests looked a bit like this:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-jest-test-address.png" alt="Final Tests"></p>
<p>Push your work to your repository. When you turn in the assignment, tell me the name of the folder that contains your work. (If appropriate, add the branch as well.) It is fine if this assignment is built on top of, and in the same directory as, the <strong>Unit Tests with Jest Assignment.</strong></p>
<a class="anchor" id="hints"></a>
<h2>Hints</h2>
<p>You don&#39;t need a button click handler for each new field you add. Set them all in <strong>setAddress</strong> handler:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">setAddress</span> = <span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({
        firstName: <span class="hljs-string">'Patty'</span>,
        lastName: <span class="hljs-string">'Murray'</span>,
        etc....
    })
};
</code></pre>
<p>You should create a new test for each property you add to your <strong>state</strong>, and for each <strong>state</strong> property that is displayed when you click the <strong>setAddress</strong> button. In other words, don&#39;t try to write one long test that confirms that all the parts of your <strong>state</strong> are set. Instead, write one test for the <strong>firstName</strong>, one for <strong>lastName</strong>, one for <strong>street</strong>, one for <strong>city</strong>, etc. You should also have one button click test for each property as it appears after the button is clicked.</p>
<p>Feel free to be creative with the HTML you generate, but I suggest not being too fancy. Even if you know fancy HTML and CSS for displaying an address, consider limiting, for now, just how fancy you get because the tests might become to hard to write.</p>
<a class="anchor" id="philosophy"></a>
<h2>Philosophy</h2>
<p>We have to remember what our Enzyme unit tests do: They return the HTML produced by our components. These Enzyme methods, especially debug, help us sort through and trigger events in the HTML that is returned so that we can prove to ourselves that our components are producing the right code. If you have one simple form, this makes little sense since you can just run your app and look at your form to see if it is rendering correctly. If you need to push one button, then you push it and see if it works. But if you have a dozen components - or two dozen - then checking the output becomes harder and harder as your app gains in complexity. Then unit testing becomes essential and a huge time saver. These Enzyme methods, once mastered, help us quickly and efficiently write the correct tests to confirm that our components work even after we fix bugs, refactor, or add features.</p>
<p>This is a skill. One is not born from the womb, wet behind the ears, knowing how to do this. But if you work at it and get good at it, then you have a skill that employers might want.</p>
<p>Jest isn&#39;t the only Unit Test library, not by any means. But all unit testing tools have similar features. Learn one library and you can more easily learn the next.</p>
<p><a href="https://www.google.com/search?q=address+for+patty+murray">Get Sen Murray&#39;s address</a></p>
</div></body></html>