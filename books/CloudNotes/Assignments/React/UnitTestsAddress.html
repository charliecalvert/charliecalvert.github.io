<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>UnitTestsAddress</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>UnitTestsAddress</h1><p>Welcome to UnitTestsAddress</p><ul><!--TOC_Start--><li><a href="#unit-test-address">Unit Test Address</a></li>
<li><a href="#review">Review</a></li>
<li><a href="#change-name-of-bar">Change Name of Bar</a></li>
<li><a href="#add-firstname-test">Add firstName test</a></li>
<li><a href="#add-firstname">Add firstName</a></li>
<li><a href="#add-address-button">Add Address Button</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#hints">Hints</a></li>
<li><a href="#philosophy">Philosophy</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="unit-test-address"></a>
<h1>Unit Test Address</h1>
<p>The goal of this assignment is to display and test a complete address with FirstName, LastName, Street, City, State, Zip or more. There should be tests for each field.</p>
<p>This assignment builds on the <a href="http://bit.ly/jest-cra">Unit Tests with Jest</a> assignment. Complete that assignment first. You should turn in only one project, which will contain both the <strong>Unit Tests with Jest</strong> and the <strong>Unit Tests with Address</strong> assignments. You can turn in the <strong>Unit Tests with Jest</strong> assignment first, if you want. In other words, your project need not include both completed assignments before you turn in the first assignment.</p>
<a class="anchor" id="review"></a>
<h2>Review</h2>
<p>The interface for our <strong>Unit Tests with Jest</strong> by end of class Wednesday:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-jest-view.png" alt="View Unit Jest"></p>
<p>In the <strong>Unit Tests with Jest</strong> assignment we had four key pieces of code.</p>
<p><strong>The Constructor with State Declaration:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">constructor</span><span class="hljs-params">()</span> <span class="hljs-comment">{
    super();
    this.state = {
        nine: '0'
    }</span>
}</span>
</code></pre>
<p><strong>The JSX for HTML paragraph and button elements:</strong></p>
<pre><code class="lang-javascript">&lt;<span class="hljs-selector-tag">p</span> className=<span class="hljs-string">"App-intro"</span>&gt;
    Nine: {this<span class="hljs-selector-class">.state</span><span class="hljs-selector-class">.nine</span>}
&lt;/p&gt;

&lt;<span class="hljs-selector-tag">button</span> className=<span class="hljs-string">"elf"</span> onClick={this.bar}&gt;Get Nine&lt;/button&gt;
</code></pre>
<p><strong>The bar method:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">bar</span> = <span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({
        nine: <span class="hljs-string">'9'</span>
    })
};
</code></pre>
<p><strong>The Tests</strong></p>
<pre><code class="lang-javascript">describe('React Jest Suite', function () {

    it('renders without our App component without crashing', () =&gt; {
        const div = document.createElement('div')<span class="hljs-comment">;</span>
        ReactDOM.render(<span class="hljs-name">&lt;App</span> /&gt;, div)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

    it('renders and reads H1 text', () =&gt; {
        const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
        const welcome = &lt;h2&gt;Welcome to Prog272&lt;/h2&gt;<span class="hljs-comment">;</span>
        expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">welcome</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

    it('renders and displays the word Nine', () =&gt; {
        const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
        console.log(<span class="hljs-name">wrapper</span>)<span class="hljs-comment">;</span>
        const welcome = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;Nine: <span class="hljs-number">0</span>&lt;/p&gt;<span class="hljs-comment">;</span>
        expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">welcome</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

    it('renders button click message', () =&gt; {
        const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
        const nineSign = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;Nine: <span class="hljs-number">9</span>&lt;/p&gt;<span class="hljs-comment">;</span>
        wrapper.find('button.elf').simulate('click')<span class="hljs-comment">;</span>
        expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">nineSign</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

})<span class="hljs-comment">;</span>
</code></pre>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-jest-test.png" alt="Running the tests"></p>
<a class="anchor" id="change-name-of-bar"></a>
<h2>Change Name of Bar</h2>
<p>Right now we have a method on our App class called <strong>bar</strong>. Let&#39;s give it a more sensible name: <strong>getNine</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">getNine</span> = <span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({
        nine: <span class="hljs-string">'9'</span>
    })
};
</code></pre>
<p>Make any other necessary changes to ensure that your app still runs.</p>
<a class="anchor" id="add-firstname-test"></a>
<h2>Add firstName test</h2>
<p>Before we create a first name, let&#39;s right to see if it exists. The test will fail at first. Our goal in the next section, is to get the test to pass.</p>
<pre><code class="lang-javascript">it('renders and displays the default first name', () =&gt; {
    const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
    const welcome = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;firstName: unknown&lt;/p&gt;<span class="hljs-comment">;</span>
    expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">welcome</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>If you are having trouble getting this test to pass, add some debug information to help you see what the last paragraph element on your form is actually rendering:</p>
<pre><code class="lang-javascript">const ninep = wrapper.<span class="hljs-built_in">find</span>(<span class="hljs-string">'p'</span>).last().<span class="hljs-built_in">debug</span>();
console.<span class="hljs-built_in">log</span>(ninep);
</code></pre>
<p><strong>TIP</strong>: <em>The call to last gets the last paragraph on your form. Beside <strong>last()</strong>, there is also a <strong>first()</strong>. See the enzyme docs for more info.</em></p>
<p>Like this:</p>
<pre><code class="lang-javascript">it('renders and displays the default first name', () =&gt; {
    const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
    const welcome = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;firstName: unknown&lt;/p&gt;<span class="hljs-comment">;</span>
    const firstName = wrapper.find('p').last().debug()<span class="hljs-comment">;  &lt;= WE ADDED LINE HERE</span>
    console.log(<span class="hljs-name">firstName</span>)<span class="hljs-comment">;                              &lt;= WE ADDED LINE HERE</span>
    expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">welcome</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<a class="anchor" id="add-firstname"></a>
<h2>Add firstName</h2>
<p>I&#39;m not going to talk you through all the steps, but let&#39;s make sure you know how to add one of the address fields. You will then add the others on your own.</p>
<p>In the constructor, add first name to state:</p>
<pre><code class="lang-javascript">this.<span class="hljs-keyword">state</span> = {
    nine: '<span class="hljs-number">0</span>',
    firstName: '<span class="hljs-literal">unknown</span>'
}
</code></pre>
<p>Display our property in the render method:</p>
<pre><code class="lang-javascript"><span class="hljs-variable">&lt;p className="App-intro"&gt;</span>
    firstName: {this.<span class="hljs-keyword">state</span>.firstName}
&lt;/p&gt;
</code></pre>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-jest-default-first-name.png" alt="testing first name"></p>
<a class="anchor" id="add-address-button"></a>
<h2>Add Address Button</h2>
<p>Write a failing tests that shows you can click on a button with a class name of <strong>setAddress</strong> and display the words <strong>firstName: Patty</strong>. Your goal will be to get the test to pass.</p>
<p>Add a new method called <strong>setAddress</strong> and ensure that it can set the <strong>firstName property</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">setAddress</span> = <span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({
        firstName: <span class="hljs-string">'Patty'</span>
    })
};
</code></pre>
<p>Call our method from a button click in our render method:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"setAddress"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.setAddress}</span>&gt;</span>Set Address<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-jest-patty.png" alt="Show patty"></p>
<p>You should now have six passing tests.</p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>When you are done, you should be able to display the complete address for Senator Patty Murray and have two tests for each field: one for the default value and one for the value in the field after you click the button. You can pick any Congress Person who interests you. It doesn&#39;t have to be Patty Murray. You should have tests that prove everything is displayed as expected both before and after you click the <strong>Set Address</strong> button. So we should be able to see in the component view, and in the tests, the <strong>FirstName</strong>, <strong>LastName</strong>, <strong>Steet</strong>, <strong>City</strong> etc fields...</p>
<p>When you are done, you should have something like 16 to 20 tests. As I drew near the end of the assignment, my tests looked a bit like this:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-jest-test-address.png" alt="Final Tests"></p>
<a class="anchor" id="hints"></a>
<h2>Hints</h2>
<p>You don&#39;t need a button click handler for each new field you add. Set them all in <strong>setAddress</strong> handler:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">setAddress</span> = <span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({
        firstName: <span class="hljs-string">'Patty'</span>,
        lastName: <span class="hljs-string">'Murray'</span>,
        etc....
    })
};
</code></pre>
<p>You probably should create a new test for each default field you add, and for each new field that is displayed when you click the <strong>setAddress</strong> button. In other words, don&#39;t try to write one long test that confirms that all the address fields are set. Instead, write one default test for the <strong>firstName</strong>, one for <strong>lastName</strong>, one for <strong>street</strong>, one for <strong>city</strong>, etc. You should also have one test for each field as it appears after the button is clicked.</p>
<p>Feel free to be creative with the HTML you generate. At this point, you will probably feel constrained by your ability to write reasonable tests for complex HTML. Hopefully our skills we improve so that we won&#39;t always feel that limitation. In other words, even if you know fancy HTML and CSS for displaying an address, consider limiting, for now, just how fancy you get because the tests might be become to hard.</p>
<a class="anchor" id="philosophy"></a>
<h2>Philosophy</h2>
<p>We have to remember what our Enzyme unit tests do: They return the HTML produced by our components. These Enzyme methods, especially debug, help us sort through and trigger events in the HTML that is returned so that we can prove to ourselves that our components are producing the right code. If you have one simple form, this makes little sense since you can just run your app and look at your form to see if it is rendering correctly. If you need to push one button, then you push it and see if it works. But if you have a dozen components - or two dozen - then checking the output becomes harder and harder as your app gains in complexity. Then unit testing becomes essential and a huge time saver. These Enzyme methods, once mastered, help us quickly and efficiently right the correct tests to confirm that our components work even after we fix bugs, refactor, or add features.</p>
<p>This is a skill. One is not born from the womb, wet behind the ears, knowing how to do this. But if you work at it and get good at it, then you have a skill that employers might want.</p>
<p>This isn&#39;t the only Unit Test library, not by any means. But all unit testing tools have similar features. Learn one library and you can more easily learn the next.</p>
<p><a href="https://www.google.com/search?q=address+for+patty+murray">Get Sen Murray&#39;s address</a></p>
</div></body></html>