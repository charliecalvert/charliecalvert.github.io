<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ReactClickRoute</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>ReactClickRoute</h1><p>Welcome to ReactClickRoute</p><ul><!--TOC_Start--><li><a href="#click-route-react">Click Route React</a></li>
<li><a href="#convert-to-pug">Convert to Pug</a></li>
<li><a href="#modify-_index-pug_">Modify <em>index.pug</em></a></li>
<li><a href="#set-up-react">Set up React</a></li>
<li><a href="#create-react-files">Create React Files</a></li>
<li><a href="#webpack-configuration">Webpack Configuration</a></li>
<li><a href="#integrate-with-require-js">Integrate with Require JS</a></li>
<li><a href="#package-json">Package.json</a></li>
<li><a href="#update-_hints-js_">Update <em>hints.js</em></a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="click-route-react"></a>
<h1>Click Route React</h1>
<p>Convert an Express app into one that supports React.</p>
<a class="anchor" id="convert-to-pug"></a>
<h2>Convert to Pug</h2>
<p>Rename all the files in the views directory from <strong>&#42;.jade</strong> to <strong>&#42;.pug</strong>. For instance:</p>
<ul>
<li>layout.jade =&gt; layout.pug</li>
<li>index.jade =&gt; index.pug</li>
<li>error.jade =&gt; error.pug</li>
</ul>
<p>Now ask NPM to switch from jade to pug:</p>
<pre>npm uninstall jade
npm install --save pug
</pre>
<p>Take a look at your <strong>package.json</strong> file and ensure that the <strong>dependencies</strong> no longer include <strong>jade</strong> and do include <strong>pug</strong>. You might expect to see something like this, where the details may differ on your system:</p>
<pre>"dependencies": {
    "body-parser": "~1.18.1",
    "cookie-parser": "~1.4.3",
    "debug": "~3.0.1",
    "express": "~4.15.4",
    "morgan": "~1.8.2",
    "pug": "^2.0.0-rc.4",
    "serve-favicon": "~2.4.4"
},
</pre>
<p>Finally, in <strong>app.js</strong>, tell express to switch the view engine from jade to pug:</p>
<pre>app.set('view engine', 'pug');
</pre>
<p>Before we made the change the code referenced jade rather than pug.</p>
<a class="anchor" id="modify-_index-pug_"></a>
<h2>Modify <em>index.pug</em></h2>
<p>Currently, index.pug looks like this:</p>
<pre>extends layout

block content
    h1= title
    p Welcome to #{title}

    p Hello from the server

    p#intro Test

    ul
        li.listItem Item01
        li.listItem Item02
        li.listItem Item03

    h2 Hint

    p.short.
        The link below calls the /Item01 route. It shows the result in
        a separate page. Obviously this is not the solution I'm looking for
        in this assignment, but I want to remind you that you can call
        routes by just appending the route to your URL:

    a(href='/Item01') http://localhost:30025/Item01

    p.short.
        To see the object sent back by the Item01 route, you can click
        the link above, or you can type in the URL manually. This trick
        can help when you want to test your <strong>Item02</strong> and
        <strong>Item03</strong> routes.
</pre>
<p>As a test of our ability to start integrating React into our application, let&#39;s remove the Hint and replace it with a single DIV that has an ID of <strong>hint</strong>:</p>
<pre>extends layout

block content
    h1= title
    p Welcome to #{title}

    p Hello from the server

    p#intro Test

    ul
        li.listItem Item01
        li.listItem Item02
        li.listItem Item03

    #hint
</pre>
<p>When creating DIVs, we don&#39;t have to tell Pug that we want to create a DIV. Instead, we can just write the symbol for an ID, and the DIV will be assumed. For instance, the following is redundant:</p>
<pre>div#hint
</pre>
<p>This short code produces identical output:</p>
<pre>#hint
</pre>
<p>In particular, both produce HTML that looks like this:</p>
<pre>&lt;div id="hint"&gt;&lt;/div&gt;
</pre>
<p>To be sure you understand this, open the Chrome debugger, turn the <strong>Elements</strong> page, and locate the DIV created by your &quot;#hint&quot; code.</p>
<a class="anchor" id="set-up-react"></a>
<h2>Set up React</h2>
<p>To install the libraries that our project needs, run these commands:</p>
<pre>npm install --save react react-dom webpack
npm install --save-dev babel-loader babel-core webpack-dev-server
npm install --save-dev babel-preset-react babel-preset-env
</pre>
<a class="anchor" id="create-react-files"></a>
<h2>Create React Files</h2>
<pre>import React from 'react';
import ReactDOM from 'react-dom';

export default class Hint extends React.Component {

    render() {
        return <h1>React Hint</h1>
    }
}

ReactDOM.render(
    <Hint/>,
    document.getElementById('hint')
);
</pre>
<a class="anchor" id="webpack-configuration"></a>
<h2>Webpack Configuration</h2>
<p>Save the following code in: <strong>webpack.config.js</strong>. Note that entry is <strong>server.js</strong> and output is <strong>bundle.js</strong>.</p>
<pre>var path = require('path');
var webpack = require('webpack');

module.exports = {
   entry: './source/main.js',
   output: {path: __dirname, filename: 'public/javascripts/bundle.js'},
   module: {
       loaders: [
           {
               test: /.js?$/,
               loader: 'babel-loader',
               exclude: /node_modules/,
               query: {presets: ['env', 'react']}
           }
       ]
   },
};
</pre>
<a class="anchor" id="integrate-with-require-js"></a>
<h2>Integrate with Require JS</h2>
<pre>require.config({
    baseUrl: '.',
    paths: {
        'jquery': 'bower_components/jquery/dist/jquery.min',
        'ClickEvents': 'javascripts/click-events',
        'reactBundle': 'javascripts/bundle',
    }
});

require(['jquery', 'reactBundle', 'ClickEvents'], function($, ReactBundle, ClickEvents) {
    'use strict';

    console.log('main called');
    $(document).ready(function() {
        var clickEvents = new ClickEvents();
    });
});
</pre>
<a class="anchor" id="package-json"></a>
<h2>Package.json</h2>
<p>In the start section, add the following code:</p>
<pre>"build": "node_modules/.bin/webpack --colors --watch"
</pre>
<p>To use it, type: <strong>npm run build</strong>. This will start webpack, compile your code, and leave webpack running. If you make changes to your code, then webpack will recompile your source automatically. The one drawback is that it keeps your command window busy. Hitting CTRL-C will end the process, but then you will no longer have your code recompiled automatically. There are at least two solutions:</p>
<ul>
<li>Open a second tab in the terminal window and run your program from there: <strong>npm start</strong></li>
<li>Run webpack with an ampersand: <strong>node_modules/.bin/webpack --colors --watch &amp;</strong></li>
</ul>
<p>If you choose the later option, then a simple return will get you back to bash shell prompt. Webpack will continue running in the background, and will recompile (transpile) your code as needed. To end the session, type <strong>jobs</strong>:</p>
<pre>$ jobs
[1]-  Running                 node_modules/.bin/webpack --colors --watch &
[2]+  Running                 meld README.md ~/Git/CloudNotes/Assignments/React/
</pre>
<p>Here the <strong>jobs</strong> command tells me that I am running two processes in the background. To bring one to the fore, I can do type <strong>fg 1</strong>, where 1 is the number of the job I want to bring forward:</p>
<pre>$ fg 1
node_modules/.bin/webpack --colors --watch
</pre>
<p>Now I can press CTRL-C to shutdown webpack.</p>
<p><strong>NOTE</strong> <em>Webpack in <strong>watch</strong> mode will automatically compile your code, but you still need to press <strong>F5</strong> in the browser to refresh your view and see the updates.</em></p>
<a class="anchor" id="update-_hints-js_"></a>
<h2>Update <em>hints.js</em></h2>
<pre>import React from 'react';
import ReactDOM from 'react-dom';

export default class Hint extends React.Component {

    render() {
        return <h1>Hinterland</h1>
    }
}

ReactDOM.render(
    <Hint/>,
    document.getElementById('hint')
);
</pre>
</div></body></html>