<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>UnitTestNumbers</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div id="navbar" class="navbar-collapse collapse">       <ul class="nav navbar-nav"><li ng-class="{ active: isActive('/')}" class="trigger-collapse"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img alt="Elvenware" src="/images/elvenwarelogo.png" class="elf-normal"/></figure><h1>UnitTestNumbers</h1><p>Welcome to UnitTestNumbers</p><ul><!--TOC_Start--><li><a href="#unit-test-numbers">Unit Test Numbers</a></li>
<li><a href="#tag">Tag</a></li>
<li><a href="#review">Review</a></li>
<li><a href="#add-test-first">Add Test First</a></li>
<li><a href="#add-eight-button-and-test">Add Eight Button and Test</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="unit-test-numbers"></a>
<h1>Unit Test Numbers</h1>
<p>The goal of this assignment is to display and test a complete set of numbers from 1 to 9, each of which has state and can be set with a button click.</p>
<p>This assignment builds on the <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/React/RestTests.html">React Jest Unit Tests</a> assignment. Also some reference materials <a href="http://bit.ly/jest-cra">here</a>.</p>
<p>Complete that assignment first. You should turn in only one project, which will contain both the <strong>React Jest Unit Tests</strong> and the <strong>Unit Tests Numbers</strong> assignments. You can turn in the <strong>React Jest Unit Tests</strong> assignment first, if you want. In other words, your project need not include both completed assignments before you turn in the first assignment.</p>
<a class="anchor" id="tag"></a>
<h2>Tag</h2>
<p>Since we are often working on a single project that has multiple phases, I suggest creating a git tag marking your current status:</p>
<pre><code class="lang-bash">$ git <span class="hljs-keyword">tag</span> <span class="hljs-title">-a</span> v3.<span class="hljs-number">0.0</span> -m <span class="hljs-string">"Start Week03"</span>
$ git push origin v3.<span class="hljs-number">0.0</span>
$ git <span class="hljs-keyword">tag</span> <span class="hljs-title">-n1</span>
</code></pre>
<p>The first command creates a tag that has a message associated with it. The message works much like the message in a commit.</p>
<p>The second command pushes the tag from your local machine to the cloud.</p>
<p>The last command lists your tags and their message on one line. If you have only a single tag, it is not particularly useful, but once you have multiple tags you will see how helpful this can be. Increase the value of the number after -n? to see more information about your tag. You can read about tags here:</p>
<ul>
<li><a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">git tag docs</a></li>
</ul>
<a class="anchor" id="review"></a>
<h2>Review</h2>
<p>We left things, I believe in this state:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-unit-test-view.png" alt="view"></p>
<p>With the tests like this:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-unit-test-output.png" alt="output"></p>
<p>The constructor:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">constructor</span><span class="hljs-params">()</span> <span class="hljs-comment">{
    super();
    this.state = {
        file: 'Get Nine Result will be placed here.',
        foo: 'waiting for express server',
        nine: '0'
    }</span>;</span>
}
</code></pre>
<p>Methods called getFoo and getNine:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">getNine</span> = <span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({nine: <span class="hljs-string">'9'</span>});
};
</code></pre>
<p>GetFoo is the one with the rest call. We are mocking that rest call for our tests. Here is the <em>mocked</em> mock object that we were using by the end of class Thursday:</p>
<pre><code class="lang-javascript">var fetch = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(parentThis)</span> {</span>
    parentThis.setState({
        foo: <span class="hljs-string">'bar'</span>,
        file: <span class="hljs-string">'api.js'</span>
    });

    <span class="hljs-keyword">return</span> {
        <span class="hljs-keyword">then</span>: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> {
                <span class="hljs-keyword">then</span>: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-keyword">catch</span>: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

                        }
                    }
                }
            }
        }
    }
};

module.exports.fetch = fetch;
</code></pre>
<p>I&#39;ll develop that further, but this is a start.</p>
<a class="anchor" id="add-test-first"></a>
<h2>Add Test First</h2>
<p>The correct way to implement tests is to follow TDD, or Test Driven Development. This includes the important <strong>Test First</strong> theory of development. That means we first create a failing test, then find a way to make it pass.</p>
<p>Start by creating a failing test for a property called <strong>eight</strong>. I&#39;ll show two tests here, the first a slightly modified click nine test, and the second our new test:</p>
<pre><code class="lang-javascript">it('renders button click message for nine', () =&gt; {
    const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
    const nineSign = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;state.nine: <span class="hljs-number">9</span>&lt;/p&gt;<span class="hljs-comment">;</span>
    wrapper.find('button.getNine').simulate('click')<span class="hljs-comment">;</span>
    expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">nineSign</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>

it('renders initial value of paragraph with state.eight', () =&gt; {
    const wrapper = shallow(<span class="hljs-name">&lt;App</span> /&gt;)<span class="hljs-comment">;</span>
    const eightSign = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;state.eight: <span class="hljs-number">0</span>&lt;/p&gt;<span class="hljs-comment">;</span>
    const eightp = wrapper.find('p').last().debug()<span class="hljs-comment">;</span>
    console.log(<span class="hljs-name">eightp</span>)<span class="hljs-comment">;</span>
    expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">eightSign</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>Note that I have removed the debug lines from the renders button click for nine test, and added it to the <strong>renders initial button state.eight</strong>. I also removed it for the <strong>render initial value of paragraph with state.nine</strong>. This is because that paragraph element will no longer be the <strong>last()</strong> paragraph on our form. The last paragraph on our form is now the one that displays <strong>eight.state</strong>. (We will need to make similar changes for other properties we create.)</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-unit-test-eight.png" alt="Jest Test with Eight"></p>
<p>Note the failing test. Your goal is to get it pass. Start by adding state for the value eight:</p>
<pre><code class="lang-javascript">this.state = {
    file: <span class="hljs-symbol">'Get</span> Nine <span class="hljs-built_in">Result</span> will <span class="hljs-keyword">be</span> placed here.',
    foo: <span class="hljs-symbol">'waiting</span> <span class="hljs-keyword">for</span> express server',
    nine: <span class="hljs-string">'0'</span>,
    eight: <span class="hljs-string">'0'</span>  &lt;====== HERE
};
</code></pre>
<p>The next step would be to add a paragraph in which to display its value. The result should look something like this at run time:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-unit-test-eight-view.png" alt="React Unit Test Eight View"></p>
<a class="anchor" id="add-eight-button-and-test"></a>
<h2>Add Eight Button and Test</h2>
<p>Now write a test to check that we can set a new value for <strong>state.eight</strong>. I&#39;ll leave that up to you, as it is really just a block copy of a previous test. Then replace certain obvious values.</p>
<p>To get the test to pass, add a button for updating and retrieving the value of <strong>state.eight</strong>. It should be fairly clear that you will also need a <strong>getEight</strong> method of your <strong>App</strong> component:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">getEight</span> = <span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({eight: <span class="hljs-string">'8'</span>});
};
</code></pre>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-unit-test-button-view.png" alt="React view for button eight"></p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Go ahead and add state, tests and button for numbers 7-1. When you are done, save your work and push.</p>
<p>Frankly, I&#39;ve totally lost track of which folder this should be in. Mine is in <strong>week02-rest-basics</strong>. Hopefully yours is in something similar. Probably the best course of action is to be sure to list the folder you want me to inspect when you turn the project in.</p>
<p><strong>NOTE</strong>: <em>One thing I&#39;m trying to do here is create one project for each set of related assignments, rather than the old technique of &quot;copy week02-react-foo into week03-react-bar. This is partially selfish, in that it makes my life simpler, but it should also make your life simpler. If you wanted to go crazy, you could use git tags or branches to delineate one assignment in a series from the next assignment in the series. But I will, when I can, just assume that if you can complete the second or third in a series of projects, then you also completed the first in the series.</em></p>
</div></body></html>