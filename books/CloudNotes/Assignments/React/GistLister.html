<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>GistLister</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div id="navbar" class="navbar-collapse collapse">       <ul class="nav navbar-nav"><li ng-class="{ active: isActive('/')}" class="trigger-collapse"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img alt="Elvenware" src="/images/elvenwarelogo.png" class="elf-normal"/></figure><h1>GistLister</h1><p>Welcome to GistLister</p><ul><!--TOC_Start--><li><a href="#gist-lister">Gist Lister</a></li>
<li><a href="#gistlister-test-start">GistLister Test Start</a></li>
<li><a href="#title">Title</a></li>
<li><a href="#writing-gist-lister">Writing Gist Lister</a></li>
<li><a href="#test-for-a-ul">Test for a UL</a></li>
<li><a href="#query-the-list">Query the List</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="gist-lister"></a>
<h1>Gist Lister</h1>
<p>Create a Component that can list gists.</p>
<p>This component might also be used to delete and display the content of gists.</p>
<a class="anchor" id="gistlister-test-start"></a>
<h2>GistLister Test Start</h2>
<p>We test first. So create an initial test:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;

<span class="hljs-keyword">import</span> {shallow} <span class="hljs-keyword">from</span> <span class="hljs-string">'enzyme'</span>;

describe(<span class="hljs-string">'ElfHeader Suite'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'renders the GistLister component without crashing'</span>, () =&gt; {
        <span class="hljs-keyword">const</span> div = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>);
        ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">GistLister</span> /&gt;</span>, div);
    });

});</span>
</code></pre>
<p>Get it to pass</p>
<a class="anchor" id="title"></a>
<h2>Title</h2>
<p>Write a test to check for a title.</p>
<pre><code class="lang-javascript">it('renders and reads GistLister H2 text', () =&gt; {
    const wrapper = shallow(<span class="hljs-name">&lt;GistLister</span> /&gt;)<span class="hljs-comment">;</span>
    elfDebugEnzyme.getAll(<span class="hljs-name">wrapper</span>)<span class="hljs-comment">;</span>
    const welcome = &lt;h2&gt;Gist Lister&lt;/h2&gt;<span class="hljs-comment">;</span>
    expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">welcome</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>Prove to your self that you have <strong>elfDebugEnzyme</strong> set up correctly. Before you add the header, it should produce something like this:</p>
<pre><code class="lang-html">&lt;<span class="hljs-selector-tag">div</span> className=<span class="hljs-string">"App"</span> /&gt;
</code></pre>
<p>Get it to pass.</p>
<a class="anchor" id="writing-gist-lister"></a>
<h2>Writing Gist Lister</h2>
<p>Start out with the simplest possible component. It should have an empty DIV in the render method. The constructor should use the <strong>ElfLogger</strong>. Something like this:</p>
<pre><code class="lang-javascript">imports here...
const logger = <span class="hljs-keyword">new</span> <span class="hljs-type">ElfLogger</span>(<span class="hljs-symbol">'gist</span>-lister');

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GistLister</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
    constructor(props) {
        <span class="hljs-keyword">super</span>(props);
        logger.log(<span class="hljs-symbol">'Gist</span> <span class="hljs-type">List</span> <span class="hljs-type">Constructor</span>');
    }

    render() {...}
}

export etc...
</code></pre>
<p>Set up the environment variable for the logger and test that ensure that your tests are working. Using &#39;p&#39; to filter so that you are seeing only this one test suite, the output from the two loggers should look something like this when both tests are passing:</p>
<pre><code>PASS  src/__tests__/GistLister.test.js
 ElfHeader Suite
   ✓ renders the GistLister component without crashing (<span class="hljs-number">5</span>ms)
   ✓ renders <span class="hljs-built_in">and</span> reads GistLister H2 text (<span class="hljs-number">3</span>ms)

Test Suite<span class="hljs-variable">s:</span> <span class="hljs-number">1</span> passed, <span class="hljs-number">1</span> total
Test<span class="hljs-variable">s:</span>       <span class="hljs-number">2</span> passed, <span class="hljs-number">2</span> total
Snapshot<span class="hljs-variable">s:</span>   <span class="hljs-number">0</span> total
Time:        <span class="hljs-number">0.369</span>s, estimated <span class="hljs-number">1</span>s
Ran <span class="hljs-keyword">all</span> test suites related <span class="hljs-keyword">to</span> changed <span class="hljs-keyword">files</span>.

Watch Usage
› Press <span class="hljs-keyword">a</span> <span class="hljs-keyword">to</span> run <span class="hljs-keyword">all</span> tests.
› Press <span class="hljs-keyword">p</span> <span class="hljs-keyword">to</span> <span class="hljs-built_in">filter</span> by <span class="hljs-keyword">a</span> filename regex pattern.
› Press q <span class="hljs-keyword">to</span> <span class="hljs-keyword">quit</span> watch <span class="hljs-keyword">mode</span>.
› Press Enter <span class="hljs-keyword">to</span> trigger <span class="hljs-keyword">a</span> test run.
 console.info src/elf-logger.<span class="hljs-keyword">j</span><span class="hljs-variable">s:49</span>
   gist-lister Gist List Constructor  

 console.info src/elf-logger.<span class="hljs-keyword">j</span><span class="hljs-variable">s:49</span>
   gist-lister Gist List Constructor  

 console.<span class="hljs-built_in">log</span> src/ElfDebugEnzyme.<span class="hljs-keyword">j</span><span class="hljs-variable">s:30</span>
   GistLister.test.<span class="hljs-keyword">j</span><span class="hljs-variable">s:</span>
   &lt;div className=<span class="hljs-string">"App"</span>&gt;
   <span class="hljs-symbol">&lt;h2&gt;</span>
   Gist Lister
   &lt;/h2&gt;
   &lt;/div&gt;
</code></pre><a class="anchor" id="test-for-a-ul"></a>
<h2>Test for a UL</h2>
<pre><code class="lang-javascript">it('renders GistLister UL Element', () =&gt; {
    const wrapper = shallow(<span class="hljs-name">&lt;GistLister</span> /&gt;)<span class="hljs-comment">;</span>
    elfDebugEnzyme.getElement(<span class="hljs-name">wrapper</span>,'ul')<span class="hljs-comment">;</span>
    //var a = wrapper.find('ul')<span class="hljs-comment">;</span>
    //console.log(<span class="hljs-name">a</span>.length)<span class="hljs-comment">;</span>
    expect(<span class="hljs-name">wrapper</span>.find('ul').length).toEqual(<span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<a class="anchor" id="query-the-list"></a>
<h2>Query the List</h2>
<p>Lets swtich to the server side for a second.</p>
<p>Create a file called <strong>gists.js</strong>. Rename <strong>api.js</strong> to <strong>users.js</strong>.</p>
<pre><code class="lang-javascript">me.listGists(
   ).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">{data}</span>) </span>{
       <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'USER PROMISE'</span>, data);
       <span class="hljs-keyword">const</span> results = data.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> ( {Return <span class="hljs-built_in">Object</span> <span class="hljs-keyword">with</span> <span class="hljs-number">4</span> props} );
       response.status(<span class="hljs-number">200</span>).send({
           <span class="hljs-string">'count'</span>: results.length,
           <span class="hljs-string">'result'</span>: results
       });
   }).catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
       <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'USER Promise Rejected'</span>, err);
       response.status(<span class="hljs-number">500</span>).send({<span class="hljs-string">'result'</span>: err});
   });
</code></pre>
</div></body></html>