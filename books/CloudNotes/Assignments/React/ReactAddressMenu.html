<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ReactAddressMenu</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div id="navbar" class="navbar-collapse collapse">       <ul class="nav navbar-nav"><li ng-class="{ active: isActive('/')}" class="trigger-collapse"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img alt="Elvenware" src="/images/elvenwarelogo.png" class="elf-normal"/></figure><h1>ReactAddressMenu</h1><p>Welcome to ReactAddressMenu</p><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#react-router-install">React Router Install</a></li>
<li><a href="#strategy">Strategy</a></li>
<li><a href="#address-changer">Address Changer</a></li>
<li><a href="#tests">Tests</a></li>
<li><a href="#the-main-index">The Main Index</a></li>
<li><a href="#define-a-menu">Define a Menu</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#hint">Hint</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="overview"></a>
<h2>Overview</h2>
<p>The goals of this assignment are:</p>
<ul>
<li>Create a menu, no matter how limited</li>
<li>Switch views between <strong>AddressShow</strong>, <strong>AddressEdit</strong> and <strong>SmallNumbers</strong></li>
</ul>
<a class="anchor" id="react-router-install"></a>
<h2>React Router Install</h2>
<p>We will use a tool called <strong>react-router</strong> to help us both route user selections through the application and also to switch between views. When we switch between views we frequently display a particular component and hide other components. This kind of technology is often talked about as a Single Page App, or SPA.</p>
<p>The first step is to install the library we will use to help us accomplish our goals:</p>
<pre><code class="lang-bash">npm <span class="hljs-keyword">install</span> <span class="hljs-comment">--save react-router-dom</span>
</code></pre>
<p>As you know, this will both install the <strong>react router</strong> and also place an entry for it in <strong>package.json</strong>. If you do this at school, then later pull your changed <strong>package.json</strong> and other files down your home machine, you will need to run <strong>npm install</strong>.</p>
<p><strong>NOTE</strong> <em>Running <strong>npm install</strong> in this situation usually does not result in our completely reinstalling all packages on our home machine, but only that the new <strong>react router</strong> package is installed on our home machine.</em></p>
<a class="anchor" id="strategy"></a>
<h2>Strategy</h2>
<p>We want to be able to display either the <strong>AddressShow</strong> component, or the <strong>AddressEdit</strong> component or the SmallNumbers component.</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-address-menu-01.png" alt="AddressShow"></p>
<p><strong>IMAGE</strong> <em>AddressShow with paragraph elements</em></p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-address-menu-02.png" alt="AddressEdit"></p>
<p><strong>IMAGE</strong>: <em>Address Edit with input elements</em></p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-address-menu-nine.png" alt="SmallNumbers"></p>
<p><strong>IMAGE</strong>: <em>Small Numbers, our hello world.</em></p>
<p>All this is well and good, but we have a problem. Our current architecture has us showing both the <strong>AddressShow</strong> and the <strong>AddressEdit</strong> component from the <strong>Address</strong> component. In particular, reclass this bit of code found in our current implementation of <strong>Address</strong>:</p>
<pre><code class="lang-javascript">render() {
       <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.quiet) { console.log(<span class="hljs-string">"ADDRESS RENDER"</span>); }
       <span class="hljs-keyword">return</span> (
           &lt;div className=<span class="hljs-string">"App"</span>&gt;
               &lt;AddressEdit
                   address={<span class="hljs-keyword">this</span>.state.address}
                   onAddressChange={<span class="hljs-keyword">this</span>.onAddressChange}
                   onNameChange={<span class="hljs-keyword">this</span>.onNameChange}
               /&gt;
               &lt;AddressShow
                   address={<span class="hljs-keyword">this</span>.state.address}
                   onAddressChange={<span class="hljs-keyword">this</span>.onAddressChange}
               /&gt;
           &lt;/div&gt;
       );
   }
</code></pre>
<p>Here we have the <strong>Address</strong> component displaying both <strong>AddressShow</strong> and <strong>AddressEdit</strong>. So far, that has been fine, as we only wanted to prove to ourselves that we could display them. But now, we want to show them one at a time.</p>
<p>The solution I have chosen, and there are many possible solutions, is to let <strong>Address</strong> continue to display <strong>AddressShow</strong>, bit to create a new specialization of <strong>Address</strong> called <strong>AddressChanger</strong>. It will extend <strong>Address</strong>, but display not <strong>AddressShow</strong> but <strong>AddressEdit</strong>.</p>
<p><strong>NOTE</strong>: <em>Hopefully we can come up with a better naming scheme at some point. For now, I&#39;m choosing the word <strong>AddressChanger</strong> because it captures that idea that this component can change, can edit, the values in an address.</em></p>
<a class="anchor" id="address-changer"></a>
<h2>Address Changer</h2>
<p>To create <strong>AddresChanger</strong>, first make a copy of <strong>Address</strong>. Have the component extend Address rather than <strong>Component</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AddressChanger</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Address</span> </span>{
}
</code></pre>
<p>Strip out everything except <strong>OnNameChange</strong> and <strong>render</strong>. Edit <strong>render</strong> to look like this:</p>
<pre><code class="lang-javascript">render() {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.quiet) { console.log(<span class="hljs-string">"ADDRESS RENDER"</span>); }
    <span class="hljs-keyword">return</span> (

        &lt;div className=<span class="hljs-string">"App"</span>&gt;
            &lt;AddressEdit
                address={<span class="hljs-keyword">this</span>.state.address}
                onAddressChange={<span class="hljs-keyword">this</span>.onAddressChange}
                onNameChange={<span class="hljs-keyword">this</span>.onNameChange}
            /&gt;

        &lt;/div&gt;
    );
}
</code></pre>
<p>As you can see, this is one half of what we had in the <strong>Address</strong> render method.</p>
<p>Having done this, we can strip <strong>AddressEdit</strong> code from the <strong>Address render</strong> method. I&#39;ll you do that on your own. It only involves deleting existing code, so it is a relatively simple operation.</p>
<a class="anchor" id="tests"></a>
<h2>Tests</h2>
<p>We should now make sure our tests handle the edits we have made.</p>
<a class="anchor" id="the-main-index"></a>
<h2>The Main Index</h2>
<p>We are going to fundamentally change the structure of our program. This means, at least for now, that <strong>index.js</strong> should no longer be responsible for showing <strong>AddressShow</strong>, <strong>AddressEdit</strong> or <strong>SmallNumbers</strong>. Instead, it should show only <strong>ElfHeader</strong> and the class we we will to switch between component views. It will be called <strong>ElfMenu</strong>. Here is our modified <strong>index.js</strong> file:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span> ElfHeader <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/ElfHeader'</span>;
<span class="hljs-keyword">import</span> ElfMenu <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/ElfMenu'</span>;

ReactDOM.render(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ElfHeader</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ElfMenu</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>)
);
</code></pre>
<p><strong>NOTE</strong>: <em>A crucial point, in fact, probably the central point, of this class, is how easy it is for us to move classes and views around when we use the <strong>React</strong> architecture. Yes, it is hard to get up to speed on React, and yes, it is fairly complex tool. But once you have everything set up, making relatively large changes to our programs architecture are simple. The small, focused loosely coupled components that we have created give us the flexibility to accept changes in specifications with a minimum of disruption.</em></p>
<a class="anchor" id="define-a-menu"></a>
<h2>Define a Menu</h2>
<p>At this stage, we have three components that can render the separate views that we want to display:</p>
<ul>
<li>Address renders the AddressShow view</li>
<li>AddressChange renders the AddressEdit view</li>
<li>And SmallNumbers renders <strong>getNine</strong> and similar views.</li>
</ul>
<p>The next step will be for us to define a menu that will allow us to switch between these views. We will do this in a file called <strong>components/ElfMenu.js</strong>.</p>
<p><strong>NOTE</strong>: <em>I call it <strong>ElfMenu</strong> rather than <strong>Menu</strong> in part because the word Menu is such a common word that it is likely to collide with some other name in our program or in the global name space. In particular, <strong>Menu</strong> is an element in HTML.</em></p>
<p>Start just with a sparsely populated class that brings in one class from <strong>react router</strong> called Router:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React, {Component} <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> Address <span class="hljs-keyword">from</span> <span class="hljs-string">'./Address'</span>;
<span class="hljs-keyword">import</span> AddressChanger <span class="hljs-keyword">from</span> <span class="hljs-string">'./AddressChanger'</span>;
<span class="hljs-keyword">import</span> SmallNumbers <span class="hljs-keyword">from</span> <span class="hljs-string">'./SmallNumbers'</span>;
<span class="hljs-keyword">import</span> {
    BrowserRouter <span class="hljs-keyword">as</span> Router,
    Route,
    Link
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'../css/App.css'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ElfMenu</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{

    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span>&gt;</span>    
            <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>
        );
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ElfMenu;
</code></pre>
<p>In the above code I&#39;ve imported <strong>React</strong> and the classes I want to display, as well as the <strong>react-router</strong> code. As mentioned above, the <strong><ROUTER></strong> class comes from <strong>react router</strong>.</p>
<p>We&#39;ll focus only on the <strong>render</strong> method, since the rest of the code in our file stays the same throughout this exercise.</p>
<p>Let&#39;s write code to display the simple menu shown in screenshots visible above. Don&#39;t fuss over the fact that the menu looks funky at this point. We can fix that later by adding some CSS. Right now, just focus on getting things working:</p>
<pre><code class="lang-javascript"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>AddressShow<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/edit"</span>&gt;</span>AdressEdit<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/small"</span>&gt;</span>SmallNumbers<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>Here we use a class from <strong>react router</strong> called <strong>Link</strong>. It automatically creates links from the elements we pass to it. For instance, it generates something like this:</p>
<pre><code class="lang-HTML">&lt;li&gt;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/edit"</span>&gt;</span>AddressEdit<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
</code></pre>
<p>Next, we define the <strong>Route</strong> itself. Here are the first two, you can create the third:</p>
<pre><code class="lang-javascript"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">exact</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{Address}/</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/edit"</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{AddressChanger}/</span></span>
</code></pre>
<p>Note that the home path has the word <strong>exact</strong> in front of it. This is because other paths, such as <strong>/edit</strong> contain both the <strong>/</strong> and the <strong>/edit</strong> paths. So we say that we want an exact match on <strong>/</strong> not a match on either <strong>/</strong> or <strong>/edit</strong>.</p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Add, commit, push, tag and/or branch. When you submit the assignment, let me know what tag and/or branch you used when submitting the assignment. </p>
<a class="anchor" id="hint"></a>
<h2>Hint</h2>
<p>If you needed to pass props to your router, and we don&#39;t, you would do it like this:</p>
<pre><code class="lang-javascript">&lt;Route path=<span class="hljs-string">"/about"</span>
       render={(props) =&gt; (&lt;AddressShow  {...props}
                 address={this<span class="hljs-selector-class">.props</span><span class="hljs-selector-class">.address</span>}
                 onAddressChange={this<span class="hljs-selector-class">.props</span><span class="hljs-selector-class">.onAddressChange</span>}
       /&gt;)}
/&gt;

&lt;Route path=<span class="hljs-string">"/topics"</span>
    render={(props) =&gt; (&lt;AddressEdit  {...props}
         address={this<span class="hljs-selector-class">.props</span><span class="hljs-selector-class">.address</span>}
         onAddressChange={this<span class="hljs-selector-class">.props</span><span class="hljs-selector-class">.onAddressChange</span>}
         onNameChange={this<span class="hljs-selector-class">.props</span><span class="hljs-selector-class">.onNameChange</span>}
    /&gt;)}
/&gt;
</code></pre>
<p>This code is not nearly as simple as the code we used when defining our Routes. However, it works, and once written we won&#39;t need to fuss with it very often.</p>
</div></body></html>