<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>AddressComponent</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div id="navbar" class="navbar-collapse collapse">       <ul class="nav navbar-nav"><li ng-class="{ active: isActive('/')}" class="trigger-collapse"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img alt="Elvenware" src="/images/elvenwarelogo.png" class="elf-normal"/></figure><h1>AddressComponent</h1><p>Welcome to AddressComponent</p><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#create-address-component">Create Address Component</a></li>
<li><a href="#tag">Tag</a></li>
<li><a href="#define-address">Define Address</a></li>
<li><a href="#clean-up-app-js">Clean Up App.js</a></li>
<li><a href="#add-address">Add Address to our Main File</a></li>
<li><a href="#address-list">Address List</a></li>
<li><a href="#addresses">Pass addresses to Address</a></li>
<li><a href="#props-in-address">Consume props</a></li>
<li><a href="#display-state">Display State</a></li>
<li><a href="#tests">Tests</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="overview"></a>
<h2>Overview</h2>
<p>Extend our <strong>week02-react-jest</strong> project to support new React components with <strong>props</strong>.</p>
<a class="anchor" id="create-address-component"></a>
<h2>Create Address Component</h2>
<p>In Webstorm:</p>
<ul>
<li>Create <strong>components</strong> directory.</li>
<li>Create <strong>components/Address.js</strong></li>
</ul>
<a class="anchor" id="tag"></a>
<h2>Tag</h2>
<p>Since we are often working on a single project that has multiple phases, I suggest creating a git tag marking your current status:</p>
<pre><code class="lang-bash">$ git <span class="hljs-keyword">tag</span> <span class="hljs-title">-a</span> v3.<span class="hljs-number">0.0</span> -m <span class="hljs-string">"Start Week03"</span>
$ git push origin v3.<span class="hljs-number">0.0</span>
$ git <span class="hljs-keyword">tag</span> <span class="hljs-title">-n1</span>
</code></pre>
<p>The first command creates a tag that has a message associated with it. The message works much like the message in a commit.</p>
<p>The second command pushes the tag from your local machine to the cloud.</p>
<p>The last command lists your tags and their message on one line. If you have only a single tag, it is not particularly useful, but once you have multiple tags you will see how helpful this can be. Increase the value of the number after -n? to see more information about your tag. You can read about tags here:</p>
<ul>
<li><a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">git tag docs</a></li>
</ul>
<a class="anchor" id="define-address"></a>
<h2>Define Address</h2>
<p>Block copy the contents of <strong>App.js</strong> into <strong>Address.js</strong>. Get rid of anything that is not directly associated with the idea of defining an address.</p>
<ul>
<li>Rename the class from <strong>App</strong> to <strong>Address</strong>. At the bottom of the file, export <strong>Address</strong> rather than <strong>App</strong>.</li>
<li>Inside <strong>Address.js</strong> Remove references <strong>state.nine</strong> and <strong>getNine</strong> from the <strong>constructor</strong> and <strong>render</strong> methods and from anywhere else you find them. Leave the tests alone. We are just editing <strong>Address.js</strong> in this step.</li>
<li>Remove the <strong>appHeader</strong> section from <strong>render</strong>.</li>
<li>Remove imports that are no longer needed such as <strong>logo.svg</strong>.</li>
</ul>
<a class="anchor" id="clean-up-app-js"></a>
<h2>Clean Up App.js</h2>
<p>In <strong>App.js</strong> do the mirror image of what you did in <strong>Address.js</strong>: remove all references to an address from the <strong>constructor</strong> and <strong>render</strong> methods, etc.</p>
<a class="anchor" id="add-address"></a>
<h2>Add Address to our Main File</h2>
<p>The next step is to display our new Address component. There are several ways to achieve this goal. One of the simplest is to render it in <strong>index.js</strong>. To do this, we will need to:</p>
<ul>
<li><strong>import</strong> our <strong>Address</strong> component,</li>
<li>Add a <strong>DIV</strong> to our <strong>render</strong> method</li>
<li>Display the <strong>Address</strong> component by adding its tag to the <strong>DIV</strong></li>
</ul>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;
<span class="hljs-keyword">import</span> Address <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Address'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>;

ReactDOM.render(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Address</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>)
);
</code></pre>
<a class="anchor" id="address-list"></a>
<h2>Address List</h2>
<pre><code class="lang-javascript">const <span class="hljs-literal">unknown</span> = '<span class="hljs-literal">unknown</span>';
const addresses = [
    {
        firstName: <span class="hljs-literal">unknown</span>,
        lastName: <span class="hljs-literal">unknown</span>,
        street: <span class="hljs-literal">unknown</span>,
        city: <span class="hljs-literal">unknown</span>,
        <span class="hljs-keyword">state</span>: <span class="hljs-literal">unknown</span>,
        zip: <span class="hljs-literal">unknown</span>
    },
    {
        firstName: 'Patty',
        lastName: 'Murray',
        street: <span class="hljs-literal">unknown</span>,
        city: 'Seattle',
        <span class="hljs-keyword">state</span>: 'WA',
        zip: <span class="hljs-literal">unknown</span>
    }

];

export <span class="hljs-keyword">default</span> addresses;
</code></pre>
<a class="anchor" id="addresses"></a>
<h2>Pass addresses to Address</h2>
<p>Use <strong>props</strong> to pass address list to Address. First link in both our <strong>Address</strong> component and the <strong>address-list</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> Address <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Address'</span>
<span class="hljs-keyword">import</span> addresses <span class="hljs-keyword">from</span> <span class="hljs-string">'./address-list'</span>;
</code></pre>
<p>Now pass the <strong>address-list</strong> to the <strong>Address</strong> component:</p>
<pre><code class="lang-javascript">&lt;<span class="hljs-keyword">Address </span><span class="hljs-keyword">addressList={addresses} </span>/&gt;
</code></pre>
<p>Altogether, it looks like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;
<span class="hljs-keyword">import</span> Address <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Address'</span>
<span class="hljs-keyword">import</span> addresses <span class="hljs-keyword">from</span> <span class="hljs-string">'./address-list'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>;

ReactDOM.render(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Address</span> <span class="hljs-attr">addressList</span>=<span class="hljs-string">{addresses}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>,
    document.getElementById('root')
);</span>
</code></pre>
<a class="anchor" id="props-in-address"></a>
<h2>Consume props</h2>
<p>We don&#39;t won&#39;t the <strong>Address</strong> component to be responsible for updating the <strong>address-list</strong>. Therefore, it does not own the list. Instead, it consumes it as props. We will set things up so the <strong>Address</strong> component can register changes to its state, but ultimately it will pass the changes back up the line and let some other component handle updated the <strong>address-list</strong>.</p>
<p>In the <strong>Address</strong> component, we need to consume the <strong>address-list</strong> passed in <strong>props</strong>:</p>
<pre><code class="lang-javascript">constructor(props) {
    super(props);

    console.<span class="hljs-keyword">log</span>('ADDRESS PROPS', typeof this.props);
    const address = this.props.addressList[<span class="hljs-number">0</span>];
    this.<span class="hljs-keyword">state</span> = {
        firstName: address.firstName,
        lastName: address.lastName,
        street: address.street,
        city: address.city,
        <span class="hljs-keyword">state</span>: address.<span class="hljs-keyword">state</span>,
        zip: address.zip,
        phone: address.phone,
        website: address.website
    }
}
</code></pre>
<p>We grab the first item in the <strong>address-list</strong> array and use it to initialize our state.</p>
<a class="anchor" id="display-state"></a>
<h2>Display State</h2>
<p>We now need to change what we display as our current state. At this point we are only part way to our solution, so we will simply get the second item in address-list, and display it to the user.</p>
<p>Note that the constructor gets the first item, this method gets the second item. This helps you see how the system works, but does not fully explain how our code will work in the long run.</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">set</span>Address = () =&gt; {
    const address = this.props.addressList[<span class="hljs-number">1</span>];

    this.<span class="hljs-built_in">set</span>State({
        firstName: address.firstName,
        lastName: address.lastName,
        street: address.street,
        city: address.city,
        <span class="hljs-keyword">state</span>: address.<span class="hljs-keyword">state</span>,
        zip: address.zip,
        phone: address.phone,
        website: address.website
    })
};
</code></pre>
<p>Note that we are violating DRY. There are two chunks of code, one in the constructor, one here, that are identical. How can that be fixed?</p>
<a class="anchor" id="tests"></a>
<h2>Tests</h2>
<p>As you refactor your components, your tests might need to change. For instance, if you move the H1 for your app into <strong>components/Header.js</strong>, you might need to change your tests. Consider this code:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;

<span class="hljs-comment">// Code omitted here</span>

it.only(<span class="hljs-string">'renders and reads H1 text'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = shallow(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>);
    const welcome = <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Welcome to React<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>;
    expect(wrapper.contains(welcome)).toEqual(true);
});</span>
</code></pre>
<p>It will likely end up like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> Header <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Header'</span>;

<span class="hljs-comment">// Code omitted here</span>

it.only(<span class="hljs-string">'renders and reads H1 text'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = shallow(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>);
    const welcome = <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Welcome to React<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>;
    expect(wrapper.contains(welcome)).toEqual(true);
});</span>
</code></pre>
<p>If you want to start to test the Address component, remember that it expects to passed some props. You already saw how to do this in the main program.</p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Commit your work, push.</p>
</div></body></html>