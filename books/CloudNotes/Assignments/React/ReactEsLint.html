<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ReactEsLint</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>ReactEsLint</h1><p>Welcome to ReactEsLint</p><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#video">Video</a></li>
<li><a href="#install-globally">Install Globally</a></li>
<li><a href="#alternative-local-installation">Alternative Local Installation</a></li>
<li><a href="#yarn-global">Getting Yarn&#39;s Global Bin Directory on your PATH</a></li>
<li><a href="#rc-file">RC File</a></li>
<li><a href="#arrow-functions">Arrow Functions</a></li>
<li><a href="#run-from-command-line">Run from command line</a></li>
<li><a href="#add-eslintignore">Add .eslintignore</a></li>
<li><a href="#fix">Fix</a></li>
<li><a href="#case-statements">Case Statements</a></li>
<li><a href="#webstorm">WebStorm</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#prettier">Prettier</a></li>
<li><a href="#beautify-files">Beautify Files</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="overview"></a>
<h2>Overview</h2>
<p>We want to lint our code to see if it meets some basic requirements. The most important part is setting up <a href="https://eslint.org/">ESLint</a> at the command line, but we also want it working WebStorm.</p>
<a class="anchor" id="video"></a>
<h2>Video</h2>
<p>This 15 minute video covers some of the same material discussed in this assignment. Most of what you need to know is in the first 5 to 8 minutes of the video:</p>
<ul>
<li><a href="https://youtu.be/bsxBHLxYMrA">Using ESLint and Prettier to Lint and Format Project Files</a></li>
</ul>
<a class="anchor" id="install-globally"></a>
<h2>Install Globally</h2>
<p>I now think there is value in installing these globally, and not just on a per-project basis. If you want to install it globally, try these commands:</p>
<pre>npm i -g eslint
npm i -g eslint-plugin-react
npm i -g eslint-plugin-requirejs
npm i -g babel-eslint
</pre>
<p>Read here <a href="https://www.npmjs.com/package/eslint">for more details</a>.</p>
<a class="anchor" id="alternative-local-installation"></a>
<h2>Alternative Local Installation</h2>
<p>Alternatively, you can install these packages locally:</p>
<pre><code>npm install --<span class="hljs-built_in">save</span>-<span class="hljs-built_in">dev</span> eslint
npm install --<span class="hljs-built_in">save</span>-<span class="hljs-built_in">dev</span> eslint-plugin-react
npm install --<span class="hljs-built_in">save</span>-<span class="hljs-built_in">dev</span> babel-eslint
</code></pre><p>Or:</p>
<pre><code>npm install --<span class="hljs-built_in">save</span>-<span class="hljs-built_in">dev</span> eslint eslint-plugin-react babel-eslint
</code></pre><p>If you do this, then you need to type something like this to reach eslint or prettier:</p>
<pre><code class="lang-bash">./node_modules/.<span class="hljs-keyword">bin/eslint </span>.
</code></pre>
<p>It&#39;s probably simpler to install them globally, but there are good reasons for each approach.</p>
<a class="anchor" id="yarn-global"></a>
<h2>Getting Yarn&#39;s Global Bin Directory on your PATH</h2>
<p>On Pristine Lubuntu, I long ago made sure that <strong>~/npm/bin</strong> is on the path. Therefore globally installed NPM packages are available to everyone. I have not, however, yet set up <strong>yarn&#39;s</strong> global directory to be on the path.</p>
<ul>
<li><a href="https://github.com/yarnpkg/yarn/issues/2049">https://github.com/yarnpkg/yarn/issues/2049</a></li>
</ul>
<p>So I guess what we want on the path is the directory I list here:</p>
<pre><code class="lang-bash">charlie@CedarIsle**:~/.config/yarn/global/node_modules/.bin**  
$ ll  
total<span class="hljs-number"> 0 </span> 
drwxrwxrwx<span class="hljs-number"> 1 </span>charlie charlie<span class="hljs-number"> 512 </span>May<span class="hljs-number"> 10 </span>11:11 ./  
drwxrwxrwx<span class="hljs-number"> 1 </span>charlie charlie<span class="hljs-number"> 512 </span>May<span class="hljs-number"> 10 </span>11:11 ../  
lrwxrwxrwx<span class="hljs-number"> 1 </span>charlie charlie<span class="hljs-number"> 18 </span>May<span class="hljs-number"> 10 </span>11:11 bower -&gt; ../bower/bin/bower*  
lrwxrwxrwx<span class="hljs-number"> 1 </span>charlie charlie<span class="hljs-number"> 28 </span>May<span class="hljs-number"> 10 </span>11:11 create-react-app -&gt; ../create-react-app/index.js*  
lrwxrwxrwx<span class="hljs-number"> 1 </span>charlie charlie<span class="hljs-number"> 37 </span>May<span class="hljs-number"> 10 </span>11:11 css-beautify -&gt; ../js-beautify/js/bin/css-beautify.js*  
lrwxrwxrwx<span class="hljs-number"> 1 </span>charlie charlie<span class="hljs-number"> 39 </span>May<span class="hljs-number"> 10 </span>11:11 express -&gt; ../express-generator/bin/express-cli.js*  
lrwxrwxrwx<span class="hljs-number"> 1 </span>charlie charlie<span class="hljs-number"> 38 </span>May<span class="hljs-number"> 10 </span>11:11 html-beautify -&gt; ../js-beautify/js/bin/html-beautify.js*  
lrwxrwxrwx<span class="hljs-number"> 1 </span>charlie charlie<span class="hljs-number"> 36 </span>May<span class="hljs-number"> 10 </span>11:11 js-beautify -&gt; ../js-beautify/js/bin/js-beautify.js*  
lrwxrwxrwx<span class="hljs-number"> 1 </span>charlie charlie<span class="hljs-number"> 25 </span>May<span class="hljs-number"> 10 </span>11:11 nodemon -&gt; ../nodemon/bin/nodemon.js*  
lrwxrwxrwx<span class="hljs-number"> 1 </span>charlie charlie<span class="hljs-number"> 21 </span>May<span class="hljs-number"> 10 </span>11:11 npm -&gt; ../npm/bin/npm-cli.js*  
lrwxrwxrwx<span class="hljs-number"> 1 </span>charlie charlie<span class="hljs-number"> 21 </span>May<span class="hljs-number"> 10 </span>11:11 npx -&gt; ../npm/bin/npx-cli.js*
</code></pre>
<p>We should, therefore, add this near the bottom of our <strong>~/.bashrc</strong>:</p>
<pre><code class="lang-bash"><span class="hljs-comment">#Yarn Support</span>

<span class="hljs-built_in">set-system-path</span> <span class="hljs-string">"$HOME/.config/yarn/global/node_modules/.bin"</span>
</code></pre>
<p>Here is <strong>set-system-path</strong>, which should already be in your <strong>.bashrc</strong>:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">set</span>-system-<span class="hljs-function"><span class="hljs-title">path</span></span> () {  
  <span class="hljs-keyword">if</span> ! <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$PATH</span>"</span> | /bin/grep -Eq <span class="hljs-string">"(^|:)<span class="hljs-variable">$1</span>($|:)"</span> ; <span class="hljs-keyword">then</span>  
    <span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"<span class="hljs-variable">$1</span>:<span class="hljs-variable">$PATH</span>"</span>  
  <span class="hljs-keyword">fi</span>  
}
</code></pre>
<p>That seems to be working for me, so I&#39;ve added it in JsObject for future generations.</p>
<p><strong>NOTE</strong>: <em>You might be in one of those generations, so perhaps this has already been done for you.</em></p>
<p>Check whether your apps are installed for Yarn (<strong>.config/yarn/global/node_modules/</strong>) or npm (<strong>~/npm/node_modules</strong>)?</p>
<p>Which is on your path? If you type <strong>which eslint</strong> what comes up? Here is how it looks for me:</p>
<pre><code class="lang-bash"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">which</span> eslint</span>
/home/charlie/npm/bin/eslint
</code></pre>
<p>That means I&#39;m running the NPM install of <strong>eslint</strong>, not the yarn install of <strong>eslint</strong>. Therefore, something like <strong>babel-eslint</strong> should be installed in with npm. Alternatively, uninstall the npm version of <strong>eslint</strong>.</p>
<a class="anchor" id="rc-file"></a>
<h2>RC File</h2>
<p>And here is at least a starter <strong>.eslintrc</strong> file:</p>
<ul>
<li><a href="https://gist.github.com/charliecalvert/c5952541925c04479150bbd8c40feac6">Charlie&#39;s ESLint Gist</a></li>
</ul>
<p>To get the gist, or other related files discussed in this assignment, try running my script called <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/Git/GetGist.html">get-gist</a>.</p>
<a class="anchor" id="arrow-functions"></a>
<h2>Arrow Functions</h2>
<p>I&#39;m not clear about this. Set &quot;parser&quot;: &quot;babel-eslint&quot; in <strong>.eslintrc</strong> to allow arrow functions.</p>
<a class="anchor" id="run-from-command-line"></a>
<h2>Run from command line</h2>
<p>Assuming your ES6 code is in project tree, do one of these, where the first is for the global install, and the second is for the local install:</p>
<pre><code class="lang-bash"><span class="hljs-meta">$</span><span class="bash"> eslint .</span>

OR:
<span class="hljs-meta">
$</span><span class="bash"> ./node_modules/.bin/eslint .</span>
</code></pre>
<p>Also, consider putting it in your <strong>package.json</strong> file in the <strong>scripts</strong> section. For instance you might write something like this in one of your <strong>package.json</strong> files:</p>
<pre><code class="lang-javascript"><span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"start"</span>: <span class="hljs-string">"DEBUG=firebase-express:server nodemon ./bin/www"</span>,
    <span class="hljs-string">"bundle"</span>: <span class="hljs-string">"node_modules/.bin/webpack --watch"</span>,
    <span class="hljs-string">"lint"</span>: <span class="hljs-string">"./node_modules/.bin/eslint ."</span>
},
</code></pre>
<p>When I ran <strong>npm run lint</strong>, it worked, but NPM reports an error until I get all the eslint errors and warnings out of my code. Then it returns cleanly. Before that, I see the results of my tests, but NPM reports an error</p>
<a class="anchor" id="add-eslintignore"></a>
<h2>Add .eslintignore</h2>
<p>Add a file called <strong>.eslintignore</strong> so that eslint does not try to parse files that we did not create. For instance, your file might have this content:</p>
<pre><code class="lang-bash"><span class="hljs-comment">**/registerServiceWorker.js</span>
<span class="hljs-comment">**/bundle.js</span>
</code></pre>
<a class="anchor" id="fix"></a>
<h2>Fix</h2>
<p>Often you can automatically fix errors in your code like this:</p>
<pre><code class="lang-bash">eslint <span class="hljs-comment">--fix .</span>
</code></pre>
<p>For instance, I run eslint and get multiple errors, then I run <strong>eslint . --fix</strong> and it afterwards eslint comes back clean:</p>
<pre><code>charlie<span class="hljs-variable">@rohan</span>-mintc ~<span class="hljs-regexp">/Git/isit</span>322-calvert-<span class="hljs-number">2018</span>/GitExplorer (Week06-Charlie)
<span class="hljs-variable">$ </span>eslint .

/home/charlie/Git/isit322-calvert-<span class="hljs-number">2018</span>/GitExplorer/client/src/components/App.js
  <span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">1</span>  error  Expected indentation of <span class="hljs-number">4</span> spaces but found <span class="hljs-number">0</span>  indent

/home/charlie/Git/isit322-calvert-<span class="hljs-number">2018</span>/GitExplorer/git-convert/git-test-create.js
  <span class="hljs-number">39</span><span class="hljs-symbol">:</span><span class="hljs-number">17</span>  warning  Strings must <span class="hljs-keyword">use</span> singlequote  quotes
  <span class="hljs-number">39</span><span class="hljs-symbol">:</span><span class="hljs-number">65</span>  warning  Strings must <span class="hljs-keyword">use</span> singlequote  quotes
  <span class="hljs-number">49</span><span class="hljs-symbol">:</span><span class="hljs-number">17</span>  warning  Strings must <span class="hljs-keyword">use</span> singlequote  quotes
  <span class="hljs-number">51</span><span class="hljs-symbol">:</span><span class="hljs-number">21</span>  warning  Strings must <span class="hljs-keyword">use</span> singlequote  quotes

✖ <span class="hljs-number">5</span> problems (<span class="hljs-number">1</span> error, <span class="hljs-number">4</span> warnings)
  <span class="hljs-number">1</span> error, <span class="hljs-number">4</span> warnings potentially fixable with the `--fix` option.

charlie<span class="hljs-variable">@rohan</span>-mintc ~<span class="hljs-regexp">/Git/isit</span>322-calvert-<span class="hljs-number">2018</span>/GitExplorer (Week06-Charlie)
<span class="hljs-variable">$ </span>eslint . --fix
charlie<span class="hljs-variable">@rohan</span>-mintc ~<span class="hljs-regexp">/Git/isit</span>322-calvert-<span class="hljs-number">2018</span>/GitExplorer (Week06-Charlie)
<span class="hljs-variable">$ </span>eslint .
charlie<span class="hljs-variable">@rohan</span>-mintc ~<span class="hljs-regexp">/Git/isit</span>322-calvert-<span class="hljs-number">2018</span>/GitExplorer (Week06-Charlie)
</code></pre><a class="anchor" id="case-statements"></a>
<h2>Case Statements</h2>
<p>I was having trouble with case statements and recently updated the [gist] file eslintrc.json to include this code:</p>
<pre><code class="lang-javascript"><span class="hljs-string">"indent"</span>: [<span class="hljs-string">"error"</span>, <span class="hljs-number">4</span>, {<span class="hljs-string">"SwitchCase"</span>: <span class="hljs-number">1</span>}],
</code></pre>
<p>The little <strong>SwitchCase</strong> object literal seems to have solved the problem. I hope.</p>
<a class="anchor" id="webstorm"></a>
<h2>WebStorm</h2>
<p>In WebStorm, turn on ESLint.</p>
<pre><code>File |<span class="hljs-built_in"> Settings </span>| Languages <span class="hljs-keyword">and</span> Frameworks | JavaScript | Code Quality Tools
</code></pre><p>My current thinking is that we should use EsLint, and EsLint only, to lint our React programs. You can, therefore, turn off JsHint and JSCS. You only need to be running ESLint.</p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Just point me at your midterm, final, or current project. When I open it, I&#39;ll expect to see a <strong>.eslintrc.json</strong> file and have most of the files relatively error free in terms of eslint errors.</p>
<a class="anchor" id="prettier"></a>
<h2>Prettier</h2>
<p>For help formatting files, I&#39;m moving from <a href="https://github.com/beautify-web/js-beautify">js-beautify</a> to <a href="https://github.com/prettier/prettier">prettier</a>. The first time we use it, we need to be sure it is installed. Once we have installed it, it stays installed. So we need to run one of these commands only once:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">npm</span> install --<span class="hljs-built_in">global</span> prettier
</code></pre>
<p>Install with yarn:</p>
<pre><code class="lang-bash"><span class="hljs-symbol">yarn</span> <span class="hljs-meta">global</span> <span class="hljs-keyword">add </span>prettier
</code></pre>
<p><strong>NOTE</strong>: <em>When installing npm packages globally, use NPM rather than yarn. If you really want yarn, make sure the place that yarn puts them is on your path. I&#39;ve already set things up on Pristine Lubuntu so that npm global packages are on your path. See the bottom of <strong>~/.bashrc</strong> for details.</em></p>
<p>You can set up a configuration file called .prettierrc in the root of your project or repository:</p>
<pre><code class="lang-javascript">{
    <span class="hljs-attr">"tabWidth"</span>: <span class="hljs-number">4</span>,
    <span class="hljs-attr">"singleQuote"</span>: <span class="hljs-literal">true</span>
}
</code></pre>
<p>We run <a href="https://github.com/prettier/prettier">prettier</a> to clean up the format of our files before we turn in an assignment. We don&#39;t want to run it on all files in our project. For instance, we don&#39;t want to format the files in <strong>node_modules</strong> since we don&#39;t own them.</p>
<p>To ensure we operate on only the files we want to format, create a script called <strong>prettier</strong> like this:</p>
<pre><code class="lang-bash">#!/bin/bash

find . -iname "*.js" \
  -<span class="ruby"><span class="hljs-keyword">not</span> -path <span class="hljs-string">"**/node_modules/**"</span> \
</span>  -<span class="ruby"><span class="hljs-keyword">not</span> -path <span class="hljs-string">"**/bower_components/**"</span> \
</span>  -<span class="ruby"><span class="hljs-keyword">not</span> -path <span class="hljs-string">"**/bundle.js"</span> \
</span>  -<span class="ruby"><span class="hljs-keyword">not</span> -path <span class="hljs-string">"**/registerServiceWorker.js"</span> \
</span>  -<span class="ruby">exec <span class="hljs-string">"prettier"</span> --write {} \;</span>
</code></pre>
<p>Make it executable:</p>
<pre><code class="lang-bash">chmod +<span class="hljs-keyword">x</span> prettier
</code></pre>
<p>Call it like this:</p>
<pre><code class="lang-bash"><span class="hljs-string">./prettier</span>
</code></pre>
<p>If you want more, see also <a href="https://github.com/charliecalvert/JsObjects/blob/master/Utilities/Templates/FindScripts/FindNpPrettier">FindNpPrettier</a> in JsObjects. You can install that script with these commands:</p>
<pre><code class="lang-bash">slb
<span class="hljs-string">./CreateSymbolicLinks</span>
</code></pre>
<p>See the <a href="https://github.com/charliecalvert/JsObjects/blob/master/Utilities/SetupLinuxBox/CreateSymbolicLinks">CreateSymbolicLinks</a> script on GitHub.</p>
<ul>
<li><a href="https://gist.github.com/charliecalvert/f19ea847f81f8634b37ef2b9c12a77e0">prettier</a></li>
<li><a href="https://gist.github.com/charliecalvert/2470c97a763ac6791e66f6cb7ff9ae23">prettierrc</a></li>
</ul>
<a class="anchor" id="beautify-files"></a>
<h2>Beautify Files</h2>
<p>I&#39;m moving from <a href="https://github.com/beautify-web/js-beautify">js-beautify</a> to <a href="https://github.com/prettier/prettier">prettier</a>, but don&#39;t quite want to delete this section yet. Use <strong>prettier</strong> instead of js-beautify because it handles JSX much better.</p>
<p>Before we had prettier, we used js-beautify, but not on all files in a directory. Create a script called <strong>pretty</strong> like this:</p>
<pre><code class="lang-bash"><span class="hljs-keyword">find</span> . -iname <span class="hljs-string">'*.js'</span> | <span class="hljs-keyword">grep</span> -vFf skip | xargs js-beautify -r
</code></pre>
<p>Where skip is a text file contents like this, which is a list of files or directories that you want to ignore:</p>
<pre><code class="lang-bash">bundle<span class="hljs-selector-class">.js</span>
registerServiceWorker<span class="hljs-selector-class">.js</span>
node_modules
</code></pre>
<p>These files might go in the root of a project or the root of your repository.</p>
<p>Alternatively, you could do this:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">find</span> . -iname *.js -<span class="hljs-built_in">type</span> f -<span class="hljs-keyword">not</span> -<span class="hljs-built_in">path</span> <span class="hljs-string">'**/node_modules/**'</span> -<span class="hljs-keyword">not</span> -<span class="hljs-built_in">path</span> <span class="hljs-string">'**/bundle.js'</span> -<span class="hljs-keyword">not</span> -<span class="hljs-built_in">path</span> <span class="hljs-string">'**/registerServiceWorker.js'</span> -print0 | xargs <span class="hljs-number">-0</span> js-beautify -r
</code></pre>
</div></body></html>