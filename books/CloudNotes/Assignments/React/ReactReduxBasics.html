<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ReactReduxBasics</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>ReactReduxBasics</h1><p>Welcome to ReactReduxBasics</p><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#react-redux-basics">React Redux Basics</a></li>
<li><a href="#redux">Redux</a></li>
<li><a href="#tracking-state">Tracking State</a></li>
<li><a href="#dispatch">Dispatch</a></li>
<li><a href="#store-state">Store state</a></li>
<li><a href="#example">Example</a></li>
<li><a href="#actions">Actions</a></li>
<li><a href="#the-reducer">The Reducer</a></li>
<li><a href="#subscribe">Subscribe</a></li>
<li><a href="#simple-redux">Simple Redux</a></li>
<li><a href="#set-up-index">Set up Index</a></li>
<li><a href="#redux-with-props">Redux with props</a></li>
<li><a href="#appnoprops">AppNoProps</a></li>
<li><a href="#mapdispatchtoprops">MapDispatchToProps</a></li>
<li><a href="#break-out-connect">Break out Connect</a></li>
<li><a href="#updated-spokesman">Updated spokesman</a></li>
<li><a href="#final-index">Final Index</a></li>
<li><a href="#css">css</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#local-storage">Local Storage</a></li>
<li><a href="#notes">Notes</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="overview"></a>
<h2>Overview</h2>
<p>The goal of this assignment is to learn about Redux and Props.</p>
<ul>
<li>Redux allows us to maintain state. It is the model part of a Model-View-Controller architecture. React is the view part.</li>
</ul>
<div style="position:relative;height:0;padding-bottom:56.25%"><iframe src="https://www.youtube.com/embed/rAMu5JUjQUs?ecver=2" width="640" height="360" frameborder="0" gesture="media" style="position:absolute;width:100%;height:100%;left:0" allowfullscreen></iframe></div>

<a class="anchor" id="react-redux-basics"></a>
<h2>React Redux Basics</h2>
<p>Start in the root of your main (isit320-lastname-2017) repository. Build a <strong>create-react-app</strong> project called <strong>Week08-ReduxBasics</strong>:</p>
<pre><code><span class="hljs-built_in">create-react-app</span> <span class="hljs-string">week08-redux-</span><span class="hljs-string">basics</span>
</code></pre><p>Navigate into your new project and install redux:</p>
<pre><code>npm <span class="hljs-keyword">install</span> <span class="hljs-comment">--save redux react-redux redux-devtools</span>
</code></pre><a class="anchor" id="redux"></a>
<h2>Redux</h2>
<p>In Redux projects, it is often best to:</p>
<ul>
<li>Put all our state in one place</li>
<li>Make state immutable. You can completely rebuild it, but you can&#39;t modify it.<ul>
<li>If you want to update it, you completely rebuild state</li>
</ul>
</li>
</ul>
<p>There are several pieces in application of this type. One is a module called a <strong>reducer</strong>.</p>
<p>There is only one place where you rebuild state: the <strong>reducer</strong>. Hence there is never any question of where something happened in a big application. It could only have happened in the <strong>reducer</strong>. I explain reducers later in this document.</p>
<a class="anchor" id="tracking-state"></a>
<h2>Tracking State</h2>
<p>Redux tracks your app&#39;s state. It has the following methods:</p>
<ul>
<li>subscribe,</li>
<li>dispatch,</li>
<li>getState</li>
</ul>
<p>They are discussed below in various different sections of the document.</p>
<a class="anchor" id="dispatch"></a>
<h2>Dispatch</h2>
<p>We change state by &quot;dispatching&quot; an action. (You can log, serialize or store actions.)</p>
<p>Here is a typical call to <strong>dispatch</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">dispatch</span>({
  <span class="hljs-attribute">type</span>: <span class="hljs-string">'GIT_USER'</span>,
  gitUser: gitUser
});
</code></pre>
<p>We name the action by giving it a <strong>type</strong>. And in this case, we have optionally included some data that will be used in a <strong>reducer</strong> when it rebuilds state.</p>
<a class="anchor" id="store-state"></a>
<h2>Store state</h2>
<p>Redux maintains your application&#39;s <strong>state</strong> in something called a <strong>store</strong>.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> {createStore} <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;

<span class="hljs-keyword">let</span> store = createStore(spokesman);
</code></pre>
<p>I write this code, which dispatches an action:</p>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">store</span><span class="hljs-selector-class">.dispatch</span>({<span class="hljs-attribute">type</span>:<span class="hljs-string">'ALL'</span>, users });
</code></pre>
<p>In your reducer, action.users is the thing you dispatched: <strong>{type: ALL, users}</strong>.</p>
<p>The usual flow:</p>
<ul>
<li>Something is dispatched, as in the code shown above.</li>
<li>The dispatched code hits the reducer, which converts it into Redux state in the Redux store.</li>
<li>The dispatched message leaves the reducer and goes to all components that are connected to it. In particular, MapStateToProps gets called. Then you map the data from the Redux store to the properties you want to use in your component.</li>
<li>Then each connected components render method is called because (or if) its props were changed.</li>
</ul>
<p>That&#39;s the end of the flow. Summary</p>
<ul>
<li>Event dispatched to reducer</li>
<li>The reducer tracks the new state sent in the dispatched action</li>
<li>The components who are registered (connected) are notified of the updated state, which they transform into the components prop.</li>
<li>The component&#39;s render method is then called and you display the updated props.</li>
</ul>
<a class="anchor" id="example"></a>
<h2>Example</h2>
<p>In the next few sections we will put together an example.</p>
<a class="anchor" id="actions"></a>
<h2>Actions</h2>
<p>Lets begin by designing some simple actions:</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">let</span> verify = { <span class="hljs-built_in">type</span>: <span class="hljs-string">'VERIFY'</span> }
<span class="hljs-built_in">let</span> deny = { <span class="hljs-built_in">type</span>: <span class="hljs-string">'DENY'</span> }
<span class="hljs-built_in">let</span> noComment = { <span class="hljs-built_in">type</span>: <span class="hljs-string">'NO COMMENT'</span> }
</code></pre>
<p>Note that there is no data associated with this actions. This means the actions are simple enough that they can re-build state without any additional information other than the action itself.</p>
<a class="anchor" id="the-reducer"></a>
<h2>The Reducer</h2>
<p>This we will use in serveral places, so save it as <strong>src/spokesman.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> spokesman = <span class="hljs-function">(<span class="hljs-params">state = { statement: <span class="hljs-string">'No comment'</span> }, action</span>) =&gt;</span> {
    <span class="hljs-keyword">switch</span> (action.type) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'VERIFY'</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">statement</span>: <span class="hljs-string">'We stand by it. In fact, we invented it.'</span> };
        <span class="hljs-keyword">case</span> <span class="hljs-string">'DENY'</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">statement</span>: <span class="hljs-string">'We deny everything. We have never heard of it.'</span> };
        <span class="hljs-keyword">case</span> <span class="hljs-string">'NO COMMENT'</span>:
            <span class="hljs-keyword">return</span> {<span class="hljs-attr">statement</span>: <span class="hljs-string">'No comment.'</span>};
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> state;
    }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> spokesman;
</code></pre>
<p>The <strong>spokesman</strong> function takes two parameters:</p>
<ul>
<li>The current state, which is set to a default value</li>
<li>The action, which was explained above.</li>
</ul>
<p>This function has a very simple <strong>state</strong> object:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">state</span> = { statement: 'No comment' }
</code></pre>
<p>That&#39;s it. The statement is the only moving part in the application. There are other variables, but their scope is limited to the object in which they are declared. The <strong>state</strong> object, however, has broader scope. In short, there are no other variables in the application that can change that have any effect outside of the component in which they are declared.</p>
<p>For instance, in a classic for loop, we often declare a variable called <strong>i</strong>:</p>
<pre><code class="lang-javascript">  <span class="hljs-keyword">for</span> (let <span class="hljs-built_in">i</span> = <span class="hljs-number">0</span>; <span class="hljs-built_in">i</span> &lt; <span class="hljs-number">3</span>; <span class="hljs-built_in">i</span>++) {}
</code></pre>
<p>We don&#39;t need to put <strong>i</strong> in our application&#39;s <strong>state</strong> since it is not used by any other components. In fact, it is only used in one place in one method. So yes, the variable <strong>i</strong> is declared, and it can change value, but it is not part of our applications <strong>state</strong>. It&#39;s scope is very limited.</p>
<p>But the <strong>state</strong> object in spokesman is different. It is used by multiple modules, or at least we are pretending it is the type of data will be used in various places throughout the app. (This is, after all, an example, an academic exercise meant to teach principles. It is not meant perform a useful function in the real world in the sense that WebCrafts does.)</p>
<p>Our <strong>reducer</strong> modifies <strong>statement</strong> by completely rebuilding <strong>state</strong>. This is the only place in the application where <strong>statement</strong> can be modified.</p>
<p>In short, <strong>state</strong> is immutable. It can never be changed in any part of the programmer. We can send ask that <strong>state</strong> be rebuilt in the reducer, but we can&#39;t modify <strong>state</strong> on the fly in other parts of the app.</p>
<a class="anchor" id="dispatch"></a>
<h2>Dispatch</h2>
<p>Here is an example call to <strong>dispatch</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">store</span><span class="hljs-selector-class">.dispatch</span>({ <span class="hljs-attribute">type</span>: <span class="hljs-string">'VERIFY'</span> });
</code></pre>
<p>This message is <em>dispatched</em> to our reducer. The reducer responds by modifying the state like this:</p>
<pre><code class="lang-javascript">{ <span class="hljs-attribute">statement</span>: <span class="hljs-string">'We stand by it. In fact, we invented it.'</span> };
</code></pre>
<a class="anchor" id="subscribe"></a>
<h2>Subscribe</h2>
<p>When the state changes, several parts of your app might want to be notified. You track changes <strong>state</strong> by monitoring calls to subscribe():</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> {createStore} <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;

let store = createStore(spokesman);

store.subscribe(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState(<span class="hljs-function"><span class="hljs-params">(prevState)</span> =&gt;</span> {
        const storeState = <span class="hljs-keyword">this</span>.props.store.getState();        
        <span class="hljs-keyword">return</span> {statement: storeState.statement}
    });
});
</code></pre>
<p>Now you can modify the UI based on the changes.</p>
<a class="anchor" id="simple-redux"></a>
<h2>Simple Redux</h2>
<p>At heart, Redux is very simple. Consider this <em>fake</em> Redux implementation. It is not Redux itself, but it is Redux-like. Save it as <strong>src/FakeRedux.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React, { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> spokesman <span class="hljs-keyword">from</span> <span class="hljs-string">'./spokesman'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FakeRedux</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{

    state = spokesman(<span class="hljs-literal">undefined</span>, {});

    dispatch(action) {
        <span class="hljs-keyword">this</span>.setState( <span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> spokesman(prevState, action));
    }

    verifyStatement = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.dispatch({ <span class="hljs-attr">type</span>: <span class="hljs-string">'VERIFY'</span> });
    };

    denyEverything = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.dispatch({ <span class="hljs-attr">type</span>: <span class="hljs-string">'DENY'</span> });
    };

    noComment = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.dispatch({ <span class="hljs-attr">type</span>: <span class="hljs-string">'NO COMMENT'</span> });
    };

    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Political Science Fake Redux<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This component does not use redux. It uses something redux-like.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                {this.state.statement}
                <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.verifyStatement}</span>&gt;</span>Verify<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.denyEverything}</span>&gt;</span>Deny<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.noComment}</span>&gt;</span>No Comment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        )
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> FakeRedux;
</code></pre>
<a class="anchor" id="set-up-index"></a>
<h2>Set up Index</h2>
<p>In <strong>index.js</strong>, we want to do two things:</p>
<ul>
<li>Create our <strong>store</strong></li>
<li>Wrap the entire app in a Provider so that all parts of the app can independently access the <strong>store</strong> and other features of Redux.</li>
</ul>
<p>In this code we are also displaying our <strong>FakeRedux</strong> file, but it has nothing to do with implementing the real Redux. We only display it so that we can see it in action.</p>
<p>Keep the declarations for <strong>React</strong> etc, but past this in as the working part of your <strong>src/index.js</strong> file:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> spokesman <span class="hljs-keyword">from</span> <span class="hljs-string">'./spokesman'</span>;
<span class="hljs-keyword">import</span> {Provider} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
<span class="hljs-keyword">import</span> {createStore} <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;
<span class="hljs-keyword">import</span> FakeRedux <span class="hljs-keyword">from</span> <span class="hljs-string">'./FakeRedux'</span>;

<span class="hljs-keyword">let</span> store = createStore(spokesman);
ReactDOM.render(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">FakeRedux</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    , <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>));
</code></pre>
<p>Note that we are completely replacing the default call <strong>ReactDOM.render</strong>.</p>
<a class="anchor" id="redux-with-props"></a>
<h2>Redux with props</h2>
<p>In its pure form, each component that wants to access Redux can do so on its own, without looking at <strong>props</strong>, and without peering into any other modules. But you can, if you want, pass down the Redux state in props. This is not the &quot;right&quot; way to do Redux. Yet, on the other hand, it is not wrong. Redux provides much more flexibility than a monolithic tool like <strong>Angular.</strong> So if you want to pass down <strong>state</strong> with <strong>props</strong>, go ahead and do it. But there is a &quot;better&quot; way, which will be explained later in this document.</p>
<p>Save this object into &quot;src/App.js&quot;:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">constructor</span>(props) {
      <span class="hljs-keyword">super</span>(props);
      <span class="hljs-keyword">this</span>.state = {
          <span class="hljs-attr">statement</span>: <span class="hljs-string">'No comment'</span>
      };
      <span class="hljs-keyword">this</span>.props.store.subscribe(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
          <span class="hljs-keyword">const</span> storeState = <span class="hljs-keyword">this</span>.props.store.getState();
          <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> {
              <span class="hljs-keyword">return</span> {<span class="hljs-attr">statement</span>: storeState.statement}
          });
      })
  }

  verifyStatement = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">this</span>.props.store.dispatch({ <span class="hljs-attr">type</span>: <span class="hljs-string">'VERIFY'</span> });
  };

  <span class="hljs-comment">// IMPLEMENT denyEverything AND noComment HERE.</span>


  render() {
    <span class="hljs-keyword">return</span> (                
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Political Science Props Redux in App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This component uses redux.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          {this.state.statement}

          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"Box"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.verifyStatement}</span>&gt;</span>Verify<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.denyEverything}</span>&gt;</span>Deny<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.noComment}</span>&gt;</span>No Comment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>Notice that we do everything Redux-related on the <strong>store</strong> object passed as props from <strong>index.js</strong>:</p>
<pre><code class="lang-javascript">const storeState = <span class="hljs-keyword">this</span>.props.store.getState();
<span class="hljs-keyword">this</span>.props.store.dispatch({ type: <span class="hljs-string">'VERIFY'</span> });
</code></pre>
<p>To make the above work, your <strong>index.js</strong> might look like this:</p>
<pre><code class="lang-javascript">ReactDOM.render(
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">App</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}/</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">FakeRedux</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>,
    document.getElementById('root'));
</code></pre>
<a class="anchor" id="appnoprops"></a>
<h2>AppNoProps</h2>
<p>So what is the better way? What do we do if we want to create a component that does not get <strong>props</strong>, but does have access to the Redux data store?</p>
<p>Create a new file called <strong>src/ComponentConnect</strong> that is based on <strong>src/App.js</strong>. Be sure to rename the React component to match the name of the file.</p>
<p>Import <strong>connect</strong> at the top of the component that we want to give access to the Redux <strong>store</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> {<span class="hljs-built_in">connect</span>} from <span class="hljs-string">'react-redux'</span>;
</code></pre>
<p>This time we have no <strong>subscribe</strong> in the <strong>constructor</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">constructor</span><span class="hljs-params">(props)</span> <span class="hljs-comment">{
    super(props);
    this.state = {
        statement: 'No comment'
    }</span>;</span>
}
</code></pre>
<p>In fact, we don&#39;t really need the constructor at all, and you can delete it.</p>
<p>Now we use <strong>connect</strong> to <em>connect</em> our component to the Redux data <strong>store</strong>. We do this by adding the following code at the bottom of the file and outside of the component:</p>
<pre><code class="lang-javascript">const mapStateToProps = (<span class="hljs-keyword">state</span>) =&gt; {
    return {
        statement: <span class="hljs-keyword">state</span>.statement
    }
};

ComponentConnect = connect(mapStateToProps)(ComponentConnect);
</code></pre>
<p>The method called <strong>mapStateToProps</strong> is passed to connect as its first parameter. It is our chance to map the applications state found in <strong>spokesman</strong> to the props found in our component. We get the Redux (spokesman) state in our props, so we are mapping the Redux <strong>state</strong> to our component&#39;s <strong>props</strong>.</p>
<p>More information is <a href="https://github.com/reactjs/react-redux/blob/master/docs/api.md">here</a>.</p>
<p>We no longer get <strong>store</strong> in the <strong>props</strong> passed from <strong>index.js</strong>. Here was the old code:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">verifyStatement</span> = <span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.props.store.dispatch({ type: <span class="hljs-string">'VERIFY'</span> });
};
</code></pre>
<p>And here is the new code that does not rely on a <strong>store</strong>. Instead, dispatch is build in because we use <strong>connect</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">verifyStatement</span> = <span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.props.dispatch({ type: <span class="hljs-string">'VERIFY'</span> });
};
</code></pre>
<p>Finally, in your JSX, use <strong>this.props.statement</strong> rather than <strong>this.state.statement</strong>.</p>
<p><strong>NOTE</strong>: <em>This is one of those occasions when I am not listing explicitly every change you need to make. Hopefully this is enough to help you see what to do, but it more than just a cut and paste operation.</em></p>
<a class="anchor" id="mapdispatchtoprops"></a>
<h2>MapDispatchToProps</h2>
<p>Here is code that uses a method of <strong>connect</strong> called <strong>mapDispatchToProps</strong>. This allows us to define simple <strong>dispatch</strong> methods that are triggered by button clicks:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> logo <span class="hljs-keyword">from</span> <span class="hljs-string">'./logo.svg'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./App.css'</span>;
<span class="hljs-keyword">import</span> {connect} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
<span class="hljs-regexp">//</span> We change state <span class="hljs-keyword">by</span> <span class="hljs-string">"dispatching"</span> an action.
<span class="hljs-regexp">//</span> You can log, serialize <span class="hljs-keyword">or</span> store actions.

let AppConnect = <span class="hljs-function"><span class="hljs-params">({statement, deny, verify, noComment})</span> =&gt;</span> {

    <span class="hljs-keyword">return</span> (
        &lt;div className=<span class="hljs-string">"App"</span>&gt;
            &lt;div className=<span class="hljs-string">"App-header"</span>&gt;
                &lt;img src={logo} className=<span class="hljs-string">"App-logo"</span> alt=<span class="hljs-string">"logo"</span>/&gt;
                &lt;h2&gt;Welcome to React <span class="hljs-keyword">and</span> Redux&lt;/h2&gt;
            &lt;/div&gt;
            &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;
                This AppConnect component uses Redux <span class="hljs-keyword">and</span> connect.
            &lt;/p&gt;
            &lt;h1&gt;Political Science&lt;/h1&gt;
            {statement}

            &lt;div&gt;
              &lt;button onClick={verify}&gt;Verify&lt;/button&gt;
              &lt;button onClick={deny}&gt;Deny&lt;/button&gt;
              &lt;button onClick={noComment}&gt;No Comment&lt;/button&gt;
            &lt;/div&gt;
            &lt;hr /&gt;
        &lt;/div&gt;
    );
    <span class="hljs-regexp">//</span>}
};

const mapStateToProps = <span class="hljs-function"><span class="hljs-params">(state)</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> {
        statement: state.statement
    }
};

const mapDispatchToProps = <span class="hljs-function"><span class="hljs-params">(dispatch)</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> {
        deny: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            dispatch({type: <span class="hljs-string">'DENY'</span>})
        },
        verify: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            dispatch({type: <span class="hljs-string">'VERIFY'</span>})
        },
        noComment: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            dispatch({type: <span class="hljs-string">'NO COMMENT'</span>})
        }
    }
};

AppConnect = connect(
    mapStateToProps,
    mapDispatchToProps
)(AppConnect);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> AppConnect;
</code></pre>
<p>Notice that we are using an arrow method rather than a component, and notice that it takes parameters, filled in by React, that represent the various methods and properties used by Redux.</p>
<p>Here is the arrow function:</p>
<pre><code class="lang-javascript">let AppConnect = <span class="hljs-function"><span class="hljs-params">({statement, deny, verify, noComment})</span> =&gt;</span> { ... }
</code></pre>
<p>And here where we use them in our JSX:</p>
<pre><code class="lang-html"><span class="xml"></span><span class="hljs-template-variable">{statement}</span><span class="xml">
<span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=</span></span><span class="hljs-template-variable">{verify}</span><span class="xml"><span class="hljs-tag">&gt;</span>Verify<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=</span></span><span class="hljs-template-variable">{deny}</span><span class="xml"><span class="hljs-tag">&gt;</span>Deny<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=</span></span><span class="hljs-template-variable">{noComment}</span><span class="xml"><span class="hljs-tag">&gt;</span>No Comment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
</code></pre>
<a class="anchor" id="break-out-connect"></a>
<h2>Break out Connect</h2>
<p>We can now break out our code into two pieces:</p>
<ul>
<li>One file contains <strong>JSX</strong> only</li>
<li>One file contains our <strong>connect</strong> code.</li>
</ul>
<p>Here is the JSX only part. Save it in <strong>TwoPartJsx</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./App.css'</span>;

<span class="hljs-keyword">let</span> TwoPartJsx = <span class="hljs-function">(<span class="hljs-params">{statement, deny, verify, noComment}</span>) =&gt;</span> {

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Two Parts: Code and JSX<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App-intro"</span>&gt;</span>
                This AppConnect component uses Redux and connect.
                The connect bits are in a separate files.
            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

            {statement}
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"Box"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{verify}</span>&gt;</span>Verify<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{deny}</span>&gt;</span>Deny<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{noComment}</span>&gt;</span>No Comment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> TwoPartJsx;
</code></pre>
<p>And here is the <strong>connect</strong> only code. Save it in <strong>TwoPartCode</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> {connect} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
<span class="hljs-keyword">import</span> TwoPartJsx <span class="hljs-keyword">from</span> <span class="hljs-string">'./TwoPartJsx'</span>;

const mapStateToProps = <span class="hljs-function"><span class="hljs-params">(state)</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> {
        statement: state.statement
    }
};

const mapDispatchToProps = <span class="hljs-function"><span class="hljs-params">(dispatch)</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> {
        deny: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            dispatch({type: <span class="hljs-string">'DENY'</span>})
        },
        verify: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            dispatch({type: <span class="hljs-string">'VERIFY'</span>})
        },
        noComment: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            dispatch({type: <span class="hljs-string">'NO COMMENT'</span>})
        }
    }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connect(
    mapStateToProps,
    mapDispatchToProps
)(TwoPartJsx);
</code></pre>
<p>The point is that our interface is now separate from our logic. This has two advantages:</p>
<ul>
<li>We can give the JSX part to the UI team and let them work on it separately from the coding team.</li>
<li>We can swap out the JSX easily, thus changing the look and feel without having to worry about changes to our logic.</li>
</ul>
<a class="anchor" id="updated-spokesman"></a>
<h2>Updated spokesman</h2>
<p>Suppose we wanted to update our code to use slightly more complex state that has two properties rather than one.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> spokesman = <span class="hljs-function">(<span class="hljs-params">state = { statement: <span class="hljs-string">'No comment'</span> }, action</span>) =&gt;</span> {
    <span class="hljs-keyword">switch</span> (action.type) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'VERIFY'</span>:
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">statement</span>: <span class="hljs-string">'We stand by it. In fact, we invented it.'</span>,
                <span class="hljs-attr">kind</span>: <span class="hljs-string">'verify'</span>
            };
        <span class="hljs-keyword">case</span> <span class="hljs-string">'DENY'</span>:
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">statement</span>: <span class="hljs-string">'We deny everything. We have never heard of it.'</span>,
                <span class="hljs-attr">kind</span>: <span class="hljs-string">'deny'</span>
            };
        <span class="hljs-keyword">case</span> <span class="hljs-string">'NO COMMENT'</span>:
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">statement</span>: <span class="hljs-string">'No comment.'</span>,
                <span class="hljs-attr">kind</span>: <span class="hljs-string">'no Comment'</span>
            };
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> state;
    }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> spokesman;
</code></pre>
<p>And then the show the new property in <strong>TwoKindJsx.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./App.css'</span>;

<span class="hljs-keyword">let</span> TwoPartJsx = <span class="hljs-function">(<span class="hljs-params">{statement, kind, deny, verify, noComment}</span>) =&gt;</span> {

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Two Parts: Code and JSX<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App-intro"</span>&gt;</span>
                This AppConnect component uses Redux and connect.
                The connect bits are in a separate files.
            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Kind<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>: {kind}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Statement<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>: {statement}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"Box"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{verify}</span>&gt;</span>Verify<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{deny}</span>&gt;</span>Deny<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{noComment}</span>&gt;</span>No Comment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> TwoPartJsx;
</code></pre>
<p>And modify <strong>TwoKindCode</strong> to initialize the new property:</p>
<pre><code class="lang-javascript">const mapStateToProps = (<span class="hljs-keyword">state</span>) =&gt; {
    return {
        statement: <span class="hljs-keyword">state</span>.statement,
        kind: <span class="hljs-keyword">state</span>.kind
    }
};
</code></pre>
<a class="anchor" id="final-index"></a>
<h2>Final Index</h2>
<p>By popular demand, here is the final <strong>index.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>;
<span class="hljs-keyword">import</span> Header <span class="hljs-keyword">from</span> <span class="hljs-string">'./Header'</span>;
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;
<span class="hljs-keyword">import</span> registerServiceWorker <span class="hljs-keyword">from</span> <span class="hljs-string">'./registerServiceWorker'</span>;
<span class="hljs-keyword">import</span> spokesman <span class="hljs-keyword">from</span> <span class="hljs-string">'./spokesman'</span>;
<span class="hljs-keyword">import</span> {Provider} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
<span class="hljs-keyword">import</span> {createStore} <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;
<span class="hljs-keyword">import</span> FakeRedux <span class="hljs-keyword">from</span> <span class="hljs-string">'./FakeRedux'</span>;
<span class="hljs-keyword">import</span> DispatchConnect <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentConnect'</span>;
<span class="hljs-keyword">import</span> AppConnect <span class="hljs-keyword">from</span> <span class="hljs-string">'./AppConnect'</span>;
<span class="hljs-keyword">import</span> TwoPartCode <span class="hljs-keyword">from</span> <span class="hljs-string">'./TwoPartCode'</span>;

<span class="hljs-keyword">let</span> store = createStore(spokesman);
ReactDOM.render(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Header</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">TwoPartCode</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">AppConnect</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">DispatchConnect</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">App</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}/</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">FakeRedux</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>, document.getElementById('root')
);

registerServiceWorker();</span>
</code></pre>
<a class="anchor" id="css"></a>
<h2>css</h2>
<p>I put this in <strong>App.css</strong>:</p>
<pre><code class="lang-css"><span class="hljs-selector-class">.Box</span> {
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
}
</code></pre>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Add, commit, push. Create branch and or tag. Push. Tell me branch, tag and folder when turning in assignment.</p>
<a class="anchor" id="local-storage"></a>
<h2>Local Storage</h2>
<p>In a later assignment we will see that Redux can write the current state to <strong>localStorage</strong>.</p>
<a class="anchor" id="notes"></a>
<h2>Notes</h2>
<p>I think the main goal of Redux is to help us maintain state across an entire application. Like so many frameworks, it provides a means of codifying best practices. In this case, some of the benefits include:</p>
<ul>
<li><p>It enforces the best parts of the MVC architecture. In particular, it focuses on Separation of Concerns. It maintains state in a centralized location that is very loosely coupled to the view. So M in MVC is the Redux. It maintains our model, our state. The V in MVC in React. It creates our view.</p>
</li>
<li><p>Another best practice that it enforces is immutability. We cannot modify the data maintained by Redux, we can only send it a command, an action, and in response Redux may rebuild our entire state, but it will not modify it.</p>
</li>
</ul>
<p>There are other tricks that Redux can perform, like helping with storing state between sessions. But that is a side benefit. The key benefits are the centralized object with strong separation of concerns, along with the immutable object.</p>
</div></body></html>