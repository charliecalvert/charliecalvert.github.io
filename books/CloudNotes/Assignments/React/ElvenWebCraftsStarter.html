<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ElvenWebCraftsStarter</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>ElvenWebCraftsStarter</h1><p>Welcome to ElvenWebCraftsStarter</p><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#get-started">Get Started</a></li>
<li><a href="#the-main-modules">The Main Modules</a></li>
<li><a href="#create-your-packages">Create Your Packages</a></li>
<li><a href="#the-login">The Login</a></li>
<li><a href="#fork-repos">Fork Repos</a></li>
<li><a href="#get-repos">Get Repos</a></li>
<li><a href="#the-config-file">The Config File</a></li>
<li><a href="#the-packages">The Packages</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="overview"></a>
<h2>Overview</h2>
<p>We are going to work on a project that already exists. It is a tool for building web sites. Our goal is to take a project students built several years ago and update it to use React. We will:</p>
<ul>
<li>Clean up the code</li>
<li>Improve and extend the tests</li>
<li>Refactor the code<ul>
<li>to have a cleaner architecture</li>
<li>to use React and Redux</li>
</ul>
</li>
</ul>
<p>Think of it this way. You have been handed a project that kind of works, but is not quite yet ready to be released. Your job is to bring it to Version 1.0, a release build. This is a very real world task. Many developers are handed partially broken code, or an existing project, and told to clean it up. This is particularly true for new hires.</p>
<p><strong>NOTE</strong>: <em>Use your common sense, but in general, throughout this document, if you see a file name, directory, or repository that has <strong>-lastname</strong> in its title, you should substitute your last name for the word <strong>lastname</strong>. For instance, in my case, <strong>isit-code-lastname</strong> should become <strong>isit-code-calvert</strong>.</em></p>
<a class="anchor" id="get-started"></a>
<h2>Get Started</h2>
<p>For these projects:</p>
<ul>
<li><a href="https://github.com/charliecalvert/isit-web-crafts">https://github.com/charliecalvert/isit-web-crafts</a></li>
<li><a href="https://github.com/charliecalvert/isit-code">https://github.com/charliecalvert/isit-code</a></li>
</ul>
<a class="anchor" id="the-main-modules"></a>
<h2>The Main Modules</h2>
<p>There will be three main parts of this application:</p>
<ul>
<li><strong>IsitWebCrafts</strong>: A GUI front end for building websites from markdown.<ul>
<li>It is based on code written in another of my classes that needs to be updated.</li>
</ul>
</li>
<li><strong>IsitCode</strong>: an NPM package written by students in another of my classes.<ul>
<li>Also needs updating</li>
</ul>
</li>
<li><strong>IsitSiteTools</strong>: Code I wrote that needs to be improved</li>
</ul>
<p>Each student will maintain their own copy of these projects.</p>
<a class="anchor" id="create-your-packages"></a>
<h2>Create Your Packages</h2>
<p>Create two NPM packages based on the code in <strong>isit-code</strong> and <strong>isit-site-tools</strong>. Append your last name to these projects:</p>
<ul>
<li>isit-code-lastname</li>
<li>isit-site-tools-lastname</li>
</ul>
<p>For instance, in my case, the first NPM package would be called:</p>
<ul>
<li>isit-code-calvert</li>
</ul>
<p>If you get the casing, the separator (a hypen), or anything else wrong, you will get the assignment kicked back at you. The names need to be exactly right.</p>
<a class="anchor" id="the-login"></a>
<h2>The Login</h2>
<p>The login works, but at at first, we will simply want to disable login so we don&#39;t have to both with it during development. Here is the code from <strong>routes/index.js</strong> that is called when the user asks for the home page:</p>
<pre>var isAuthenticated = function(request, response, next) {
    'use strict';

    // Passport added the this method to the request object.
    console.log('isAuthenticated called');
    if (request.isAuthenticated()) {
        console.log('successfully authenticated');
        return next();
    }

    console.log('in isAuthenticated, user not authenticate, send to login');
    response.redirect('/login');
};

router.get('/', isAuthenticated, function(request, response, next) {
    'use strict';
    response.render('index', {
        title: 'Elven Site Options',
        author: 'Charlie Calvert'
    });
});
</pre>
<p>The <strong>isAuthenticated()</strong> method is middleware that is called before the user can access the home page. If the user is logged in, then <strong>isAuthenticated</strong> calls <strong>next()</strong>, and the home page loads. Otherwise, the login page is called.</p>
<p>Without removing the <strong>isAuthenticated</strong> method, rewrite this bit of middleware so that the user is automatically taken to the home page whether they are logged in or not. You can make whatever changes you want to <strong>isAuthenticated</strong>, but it must continue to be called from the home page route. I would either comment out or otherwise preserve the code in the current working code from the method so that you can replace it later on, when we want to add login again.</p>
<a class="anchor" id="fork-repos"></a>
<h2>Fork Repos</h2>
<p>Fork the following repositories:</p>
<ul>
<li>charliecalvert/isit-code</li>
<li>charliecalvert/isit-site-tools</li>
<li>charliecalvert/isit-web-crafts</li>
</ul>
<p>Make them private.</p>
<p>On GitHub, use the Settings (gear) icon and rename them to include your last name:</p>
<ul>
<li>isit-code-lastname</li>
<li>isit-site-tools-lastname</li>
<li>isit-web-crafts-lastname</li>
</ul>
<a class="anchor" id="get-repos"></a>
<h2>Get Repos</h2>
<pre>mkdir isit-lastname-2017
cd isit-lastname-2017
git clone <git@github.com:username/isit-code-lastname.git>
git clone <git@github.com:username/isit-site-tools-lastname>
git clone <git@github.com:username/isit-web-crafts-lastname>
</pre>
<p>Open up the <strong>package.json</strong> file for each project and change the name to include your last name.</p>
<p>Now you will need to create an NPM repository based on your versions of the <strong>isit-code</strong> and <strong>isit-site-tools</strong> repositories. Begin by logging into or creating your account on <strong>NPM</strong>. Then read through this guide and apply the lessons found there to this task.</p>
<ul>
<li><a href="http://www.ccalvert.net/books/CloudNotes/Assignments/NpmPublishing.html">NPM Publishing</a></li>
</ul>
<p>In <strong>isit-site-tools-lastname</strong>, run the following command:</p>
<pre>npm install --save isit-code-lastname
</pre>
<p>In <strong>isit-web-crafts-lastname</strong>, run the following commands:</p>
<pre>npm install --save isit-code-lastname isit-site-tools-lastname
</pre>
<p>Change all references to my repos to your repos. You will have to replace the string <strong>lastname</strong> with your last name:</p>
<pre>find . -iname "*.js" -not -path "**/node_modules/**" | xargs sed -i 's/isit\-code\-calvert/isit\-code\-lastname/g' *.js
</pre>
<p><strong>NOTE</strong>: <em>If you turn in your <strong>isit-web-crafts-lastname</strong> project with links to my repos in your source files, you will get it kicked back with a score of 5.</em></p>
<a class="anchor" id="the-config-file"></a>
<h2>The Config File</h2>
<p>Here is the configuration file for the project. It is found in <strong>config/ElvenConfig.json</strong></p>
<pre>{
    "calvert": {
        "base-dir": "/home/charlie/",
        "bootswatch": "cosmo",
        "most-recent-date": "2017-08-14",
        "site-dirs": [
            "Documents/AllSite",
            "Git/CloudNotes/Isit320"
        ],
        "destination-dirs": [
            "/home/charlie/Git/charliecalvert.github.io/books/CloudNotes/Isit320/",
            "/var/www/html/"
        ],
        "destination-dirs-extra": [{
            "base": "/var/www/html/",
            "extra": ""
        }, {
            "base": "/var/www/html/Assignments/",
            "extra": "Assignments"
        }]
    },
    "selectedElvenImages": [
        "california1",
        "california2"
    ],
    "elvenImages": [
        {
            "name": "doc",
            "baseDir": "The base directory where the images to be processed are found",
            "cloudPath": "Base string found in markdown files",
            "createSmallImages": true
        },
        {
            "name": "california",
            "baseDir": "/var/www/html/images",
            "cloudPath": "/images",
            "createSmallImages": true
        },
        {
            "name": "california1",
            "baseDir": "/var/www/html/images",
            "cloudPath": "https://s3.amazonaws.com/s3bucket01.elvenware.com",
            "createSmallImages": true
        },
        {
            "name": "california2",
            "baseDir": "/var/www/html/images",
            "cloudPath": "/images",
            "createSmallImages": true
        }
    ]
}
</pre>
<p>Put a symbolic link to this file in your ~/.config directory:</p>
<pre>cd ~/.config
ln -s <PATH TO ElvenConfig.json> .
</pre>
<p>The file has three primary sections:</p>
<ul>
<li>calvert:<ul>
<li>Configure the code the creates HTML from Markdown</li>
</ul>
</li>
<li>elvenImages:<ul>
<li>Configure the code that creates Markdown from a set of Images</li>
</ul>
</li>
<li>Selected Elven Images<ul>
<li>The sections of elvenImages that the program should process when creating Markdown that displays a set of images.</li>
</ul>
</li>
</ul>
<p>Given a set of Markdown files in a directory, the program can convert them to HTML</p>
<p>Given a set of images in a directory, the program can create a markdown page that is able to display them all. For instance, if <strong>foo.png</strong> is in a directory, the program will generate Markdown similar to this:</p>
<pre>![Foo](foo.png)
</pre>
<a class="anchor" id="the-packages"></a>
<h2>The Packages</h2>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
</div></body></html>