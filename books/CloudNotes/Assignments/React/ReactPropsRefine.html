<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ReactPropsRefine</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>ReactPropsRefine</h1><p>Welcome to ReactPropsRefine</p><ul><!--TOC_Start--><li><a href="#react-props-refine">React Props Refine</a></li>
<li><a href="#key-features">Key Features</a></li>
<li><a href="#rename">Rename</a></li>
<li><a href="#create-css-and-image-directories">Create CSS and Image Directories</a></li>
<li><a href="#check-for-warnings-and-errors">Check for Warnings and Errors</a></li>
<li><a href="#add-display-for-api-user">Add Display for Api User</a></li>
<li><a href="#display-user-data">Display User Data</a></li>
<li><a href="#don-t-forget-enzyme-debug-">Don&#39;t forget Enzyme Debug:</a></li>
<li><a href="#each-test-suite-gets-unique-name">Each Test Suite Gets Unique Name</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#notes">Notes</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="react-props-refine"></a>
<h1>React Props Refine</h1>
<p>I&#39;m still working on this, but it should get you started.</p>
<p>Clean up the Address Program.</p>
<p>The main goal will be to query the GitHub API for a view your account, if possible, and mine if yours is not accessible for one reason or another.</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/create-react-refine-view.png" alt="Create React Refine View"></p>
<p>This version of the app displays a few rows from the data returned from this URL in a component called GetUserInfo:</p>
<ul>
<li><a href="https://api.github.com/users/charliecalvert">https://api.github.com/users/charliecalvert</a></li>
</ul>
<p>Please query your account not mine.</p>
<a class="anchor" id="key-features"></a>
<h2>Key Features</h2>
<ul>
<li>Display at least five rows from the users URL as shown above. Don&#39;t display them all, as we will find a shortcut to help you create big forms with lots of fields. I&#39;m displaying these in <strong>INPUT</strong> elements, which makes no sense. You can use P elements.</li>
<li>Make sure all your tests pass for the <strong>GetUrlPage</strong> component, the <strong>GetFoo</strong> component, the <strong>SmallNumbers</strong> component and the <strong>ElfHeader</strong> component. Each component&#39;s tests should be in its own file and all tests should be in a directory called <strong>src/__tests__</strong>.</li>
<li>For now, continue to display the other information, such as <strong>SmallNumbers</strong> and <strong>GetFoo</strong>. Ultimately, we will learn how to use client side routes to switch component views, but for now, just show all the data on the same page, as shown below.</li>
<li>Strive to eliminate all errors and warnings in your tests, in Chrome Developer Tools, and at the command line for your server and client.</li>
</ul>
<p>Don&#39;t fuss too much at this stage with making things beautiful. Right now, we are just trying to get to the point where we can create components and tests. Appearance and site navigation come later. Soon, but later.</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/create-react-refine-altogther.png" alt="Create React Refine Altogether"></p>
<a class="anchor" id="rename"></a>
<h2>Rename</h2>
<p>Change the name of the folder in which the program is stored to <strong>GitExplorer</strong>. Perhaps something like:</p>
<p>  git mv week02-rest-basics/ GitExplorer</p>
<a class="anchor" id="create-css-and-image-directories"></a>
<h2>Create CSS and Image Directories</h2>
<p>Inside the <strong>src</strong> directory create directories called <strong>css</strong> and <strong>images</strong>. Move your CSS and SVG files into these directories. Check your tests and run your program and make sure you are not getting errors or warnings.</p>
<ul>
<li>Start your program: npm start</li>
<li>In Chrome, open the Developer Tools: F12 or CTRL-SHIFT-I or <strong>Settings | More Tools | Dev Tools</strong></li>
</ul>
<a class="anchor" id="check-for-warnings-and-errors"></a>
<h2>Check for Warnings and Errors</h2>
<p>Check for warnings or errors</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-address-refine-warn.png" alt="Uh-oh! A warning"></p>
<p><strong>IMAGE</strong>: <em>Uh-oh! To fix this, I would follow the hints in the warning to my <strong>src/index.js</strong> file.</em></p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-address-refine-cmdw.png" alt="Same warning from command line"></p>
<p><strong>IMAGE</strong>: <em>The same warning as seen from the command line. Sometimes you might see problems at the command line that you don&#39;t see in the developer tools and vice versa. As you result, you should check both places.</em></p>
<p>When you turn in your code, you should always strive to ensure that your program is completely free of warnings and errors.</p>
<a class="anchor" id="add-display-for-api-user"></a>
<h2>Add Display for Api User</h2>
<p>By this time you should have refactored your code so that there is nothing about headers, <strong>SmallNumbers</strong>, or retrieving information from <strong>/api/foo</strong> in <strong>App.js</strong>. We want to re-purpose <strong>App.js</strong> so that it can be used to handler our request for <strong>/api/users</strong>.</p>
<p>Add request to your server:</p>
<p>  npm install request --save</p>
<p>Require it at the top of <strong>routes/api.js</strong></p>
<pre><code class="lang-javascript"><span class="hljs-attribute">var request</span> = require(<span class="hljs-string">'request'</span>);
</code></pre>
<p>The data I return from the server is shaped, for now, like this:</p>
<pre><code class="lang-javascript">router.get(<span class="hljs-string">'/user'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(req, res, next)</span> {</span>
    var options = {
        url: <span class="hljs-string">'https://api.github.com/users/charliecalvert'</span>,
        headers: {
            <span class="hljs-string">'User-Agent'</span>: <span class="hljs-string">'request'</span>
        }
    };

    request(options, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(error, response, body)</span> {</span>
        <span class="hljs-comment">// Print the error if one occurred</span>
        console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'error:'</span>, <span class="hljs-built_in">error</span>);
        <span class="hljs-comment">// Print the response status code if a response was received</span>
        console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'statusCode:'</span>, response &amp;&amp; response.statusCode);
        <span class="hljs-comment">// Print the HTML for the Google homepage.</span>
        console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'body:'</span>, body);
        res.send({<span class="hljs-built_in">error</span>: <span class="hljs-built_in">error</span>, response: response, body: body});
    });

});
</code></pre>
<p>Note that I&#39;m sending back three properties:</p>
<ul>
<li>error</li>
<li>response</li>
<li>body</li>
</ul>
<p>The last contains the core data that we want to retrieve from GitHub. The first few lines should look something like this, with your data rather than mine:</p>
<pre><code class="lang-javascript">{
    <span class="hljs-string">"login"</span>: <span class="hljs-string">"charliecalvert"</span>,
    <span class="hljs-string">"id"</span>: <span class="hljs-number">1811478</span>,
    <span class="hljs-string">"avatar_url"</span>: <span class="hljs-string">"https://avatars3.githubusercontent.com/u/1811478?v=3"</span>,
    <span class="hljs-string">"gravatar_id"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-string">"url"</span>: <span class="hljs-string">"https://api.github.com/users/charliecalvert"</span>,
    <span class="hljs-string">"html_url"</span>: <span class="hljs-string">"https://github.com/charliecalvert"</span>,
    <span class="hljs-string">"followers_url"</span>: <span class="hljs-string">"https://api.github.com/users/charliecalvert/followers"</span>,

    <span class="hljs-comment">// MANY LINES OMITTED</span>
}
</code></pre>
<a class="anchor" id="display-user-data"></a>
<h2>Display User Data</h2>
<p>The first step would be to rename <strong>components/App.js</strong> to <strong>components/GetUserInfo.js</strong>. That might look something like this on your system, where you may need to change or skip the first line:</p>
<pre><code class="lang-bash"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> GitExplorer/client/src/</span>
<span class="hljs-meta">$</span><span class="bash"> git mv components/App.js components/GetUserInfo.js</span>
</code></pre>
<p>Open up the source for <strong>GetUserInfo.js</strong>, and rename the component class from <strong>App</strong> to <strong>GetUserInfo</strong>. This will take two changes:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// CODE OMITTED HERE</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GetUserInfo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
<span class="hljs-comment">// CODE OMITTED HERE  </span>
}

export <span class="hljs-keyword">default</span> <span class="hljs-type">GetUserInfo</span>;
</code></pre>
<p>Create a <strong>getUser method</strong> that looks a little like this:</p>
<pre><code class="lang-javascript">getUser = () =&gt; {

    <span class="hljs-keyword">const</span> that = this;
    fetch(<span class="hljs-string">'/api/user'</span>)
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(response)</span> </span>{
            <span class="hljs-comment">// YOU WRITE IT</span>
        }).then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(json)</span> </span>{
            <span class="hljs-comment">// DISPLAY WITH LOGGER AS NEEDED</span>
            <span class="hljs-comment">// PARSE THE JSON BODY INTO JS SINCE IT IS PROPABLY A STRING:</span>
            <span class="hljs-keyword">var</span> body = JSON.parse(json.body);
            that.setState({userLogin: body.login});
        }).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(ex)</span> </span>{
            <span class="hljs-comment">// DISPLAY WITH LOGGER</span>
        });
};
</code></pre>
<p>Ultmately, your setState method will need to be more complicated than this, as there is more than just a login field to dispay.</p>
<p>Add a paragraph and button in the render method to display your input.</p>
<p>Make any necessary changes in App.js.</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/react-props-refine-get-user.png" alt="View the login name"></p>
<a class="anchor" id="don-t-forget-enzyme-debug-"></a>
<h2>Don&#39;t forget Enzyme Debug:</h2>
<p>Here are part of my header tests with the debug info:</p>
<pre><code class="lang-javascript">describe('My Header tests', function () {
    var quiet = false<span class="hljs-comment">;            &lt;========== LOOK HERE!</span>

    function getFirst(<span class="hljs-name">wrapper</span>) {  &lt;========== LOOK HERE!
        const eightp = wrapper.find('h2').first().debug()<span class="hljs-comment">;</span>
        if (!quiet) {
            console.log(<span class="hljs-string">"HEADER:"</span>, eightp)<span class="hljs-comment">;</span>
        }
    }

    it('renders and reads H1 text', () =&gt; {
        const wrapper = shallow(<span class="hljs-name">&lt;Header</span> /&gt;)<span class="hljs-comment">;</span>
        const welcome = &lt;h2&gt;Welcome to React&lt;/h2&gt;<span class="hljs-comment">;</span>
        expect(<span class="hljs-name">wrapper</span>.contains(<span class="hljs-name">welcome</span>)).toEqual(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
        getFirst(<span class="hljs-name">wrapper</span>)         &lt;========== LOOK HERE!
    })<span class="hljs-comment">;</span>

    // MORE CODE HERE AND ELSEWHERE
})<span class="hljs-comment">;</span>
</code></pre>
<a class="anchor" id="each-test-suite-gets-unique-name"></a>
<h2>Each Test Suite Gets Unique Name</h2>
<p>Make sure each test suite you create has a unique and easy to understand name:</p>
<pre><code class="lang-javascript">describe('<span class="hljs-type">My</span> <span class="hljs-type">Get</span> <span class="hljs-type">User</span> <span class="hljs-type">Info</span> <span class="hljs-type">Test</span>', function () <span class="hljs-meta">{...}</span>)
</code></pre>
<p>We need to be able to easily know where each failing test is located. Give the suite a good name, and it can help us quickly find the failing test so we can fix it:</p>
<pre><code>My <span class="hljs-builtin-name">Get</span><span class="hljs-built_in"> User </span><span class="hljs-builtin-name">Info</span> Test › renders<span class="hljs-built_in"> default </span>message <span class="hljs-keyword">for</span> state.userLogin

   expect(received).toEqual(expected)

   Expected value <span class="hljs-keyword">to</span> equal:
     <span class="hljs-literal">true</span>
   Received:
     <span class="hljs-literal">false</span>
</code></pre><a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Commit, push. When you turn in the assignment, designate the directory in your repo where you did your work.</p>
<p>It would be good to tag your work just after you push an assignment. An ideal process:</p>
<ul>
<li><strong>add</strong>, <strong>commit</strong>, <strong>push</strong>. When you commit, include a message that mentions the assignment name.</li>
<li><strong>tag</strong>, <strong>push</strong>. When you tag, include a message that mentions the assignment name.</li>
<li>create a branch with the name <strong>ReactPropsRefine</strong>.</li>
</ul>
<p>You don&#39;t have to use the branch, just create it. Then I can look in that branch for the code you submitted for the assignment. The branch would serve as a record of your project at the time your turned it in.</p>
<p>A reminder of how to tag:</p>
<pre><code><span class="hljs-meta">$</span><span class="bash"> git tag -a v3.0.? -m <span class="hljs-string">"Turning in ReactPropsRefine"</span></span>
<span class="hljs-meta">$</span><span class="bash"> git push origin v3.0.?</span>
</code></pre><p>The question mark stands for the next tag in your series of tags. For instance, on your system it might v3.0.4.</p>
<a class="anchor" id="notes"></a>
<h2>Notes</h2>
<p>Don&#39;t spend a lot of time fretting over whether or not this is the right architecture. I have several refactorings I want us to do as we add new features, but that is for next week. Just get this far.</p>
</div></body></html>