<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ReactAddressShow</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>ReactAddressShow</h1><p>Welcome to ReactAddressShow</p><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#divide">Divide</a></li>
<li><a href="#create-addressshow-project">Create AddressShow Project</a></li>
<li><a href="#testing-address-show">Testing Address Show</a></li>
<li><a href="#testing-address">Testing Address</a></li>
<li><a href="#rename-the-react-component">Rename the React Component</a></li>
<li><a href="#properly-refactor-our-components">Properly Refactor Our Components</a></li>
<li><a href="#data">Data</a></li>
<li><a href="#props-address-data">AddressShow Receives the Address Data</a></li>
<li><a href="#quiet-log">Logging</a></li>
<li><a href="#rendering-the-data">Rendering the Data</a></li>
<li><a href="#modify-view">AddressShow Modify View with Button Click</a></li>
<li><a href="#proptypes">PropTypes</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#hint-tagging">Hints about Tagging</a></li>
<li><a href="#breakpoint">Hints about Breakpoints</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="overview"></a>
<h2>Overview</h2>
<p><strong>STATUS</strong>: <em>This assignment needs work, but should be complete enough to allow students to finish the assignment. [Friday May 4, 6:14 PM].</em></p>
<p>This assignment builds on the <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/React/AddressComponent.html">AddressComponent</a> assignment. We have several steps we want to complete. Among them are:</p>
<ul>
<li>Divide the Address Component up into:<ul>
<li>A component that owns the data: <strong>Address</strong></li>
<li>A component that displays the data: <strong>AddressShow</strong></li>
</ul>
</li>
<li>Finishing refactoring the other components if we have not done so already</li>
<li>Update Tests as described in this document. There will be a <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/React/ReactAddressShowMountTests.html">separate assignment</a> where we will dig more deeply into how to test the code found in this assignment.  </li>
</ul>
<p>We should insure that clicks on the Button work but that <strong>Address</strong> does the real work. <strong>AddressShow</strong> is mostly about the interface and does little real work other than use JSX to create the appropriate HTML to display our interface.</p>
<a class="anchor" id="divide"></a>
<h2>Divide</h2>
<p>The first step is to split <strong>Address</strong> and <strong>AddressShow</strong> into two distinct components. In particular, we will create a new component called <strong>AddressShow</strong> and put the <strong>render</strong> method of <strong>Address</strong> in it:</p>
<ul>
<li><strong>AddressShow</strong> contains only the <strong>render</strong> method from the original <strong>Address</strong> component</li>
<li><strong>Address</strong> contains the <strong>constructor</strong>, the <strong>setAddress</strong> method, and a one line <strong>render</strong> method that references <strong><AddressShow/></strong> and passes it props. This render method will be explained later in this assignment.</li>
</ul>
<p>The <strong>Address</strong> component will handle our data, <strong>AddressShow</strong> will display the data and the button.</p>
<p><strong>NOTE</strong>: <em>The button the user clicks on to display the address should be in <strong>AddressShow</strong>.</em></p>
<a class="anchor" id="create-addressshow-project"></a>
<h2>Create AddressShow Project</h2>
<p>To get started, make a copy of Address Components assignment and call it <strong>address-show</strong>. For instance:</p>
<pre><code>cp -r week03-react-<span class="hljs-built_in">address</span>/ week05-<span class="hljs-built_in">address</span>-show
</code></pre><p>Or, if you prefer use Pascal case for the new project:</p>
<pre><code><span class="hljs-symbol">cp</span> -r week03-react-<span class="hljs-keyword">address/ </span>Week05-<span class="hljs-keyword">AddressShow</span>
</code></pre><p>There are many ways to do the same thing, and it doesn&#39;t really matter which one you prefer.</p>
<a class="anchor" id="testing-address-show"></a>
<h2>Testing Address Show</h2>
<p>We should write our tests first, then write code that makes the tests pass. This is called TDD or Test Driven Development.</p>
<p>The first step will be set up our (initially) failing tests for <strong>AddressShow</strong> in <strong>AddressShow.test.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// IT'S UP TO YOU TO INCLUDE THE RIGHT IMPORTS</span>

describe(<span class="hljs-string">'AddressShow Shallow Suite'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">const</span> debug = <span class="hljs-keyword">false</span>;

    <span class="hljs-keyword">const</span> addressTest = {
        firstName: <span class="hljs-string">'Patty'</span>,
        lastName: <span class="hljs-string">'Murray'</span>,
        address: <span class="hljs-string">'154 Russell Senate Office Building'</span>,
        city: <span class="hljs-string">'Washington'</span>,
        state: <span class="hljs-string">'D.C.'</span>,
        zip: <span class="hljs-string">'20510'</span>,
        phone: <span class="hljs-string">'(202) 224-2621'</span>,
        fax: <span class="hljs-string">'(202) 224-0238'</span>,
        tollfree: <span class="hljs-string">'(866) 481-9186'</span>
    };


    <span class="hljs-comment">/*
     * Display debug information about a DOM node of a component by index
     * <span class="hljs-doctag">@param</span> {object} wrapper - The HTML generated by your component
     * <span class="hljs-doctag">@param</span> {number} index - Index of HTML element you want to see.
     * <span class="hljs-doctag">@param</span> {boolean} talkToMe - Speak even if quiet is true
     */</span>
    <span class="hljs-keyword">const</span> getIndex = (wrapper, index, talkToMe) =&gt; {
        <span class="hljs-keyword">if</span> (debug || talkToMe) {
            <span class="hljs-keyword">const</span> ninep = wrapper.find(<span class="hljs-string">'div#addressShow'</span>).childAt(index).debug();
            console.log(<span class="hljs-string">'NINEP:'</span>, ninep);
        }
    };

    <span class="hljs-keyword">const</span> defaultFieldTest = (name, index, talkToMe) =&gt; {
        <span class="hljs-keyword">const</span> wrapper = shallow(&lt;AddressShow address={AddressList[<span class="hljs-number">0</span>]}/&gt;);
        <span class="hljs-keyword">const</span> welcome = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;{name}&lt;/p&gt;;
        getIndex(wrapper, index, talkToMe);
        expect(wrapper.contains(welcome)).toEqual(<span class="hljs-keyword">true</span>);
    };

    <span class="hljs-keyword">const</span> afterClickFieldTest = (name, index, talkToMe) =&gt; {
        <span class="hljs-keyword">const</span> wrapper = shallow(&lt;AddressShow address={AddressList[<span class="hljs-number">1</span>]}/&gt;);
        <span class="hljs-keyword">const</span> welcome = &lt;p className=<span class="hljs-string">"App-intro"</span>&gt;{name}&lt;/p&gt;;
        getIndex(wrapper, index, talkToMe);
        expect(wrapper.contains(welcome)).toEqual(<span class="hljs-keyword">true</span>);
    };

    it(<span class="hljs-string">'renders and displays the first name'</span>, () =&gt; {
        defaultFieldTest(<span class="hljs-string">'First Name: unknown'</span>, <span class="hljs-number">0</span>);
        afterClickFieldTest(<span class="hljs-string">'First Name: '</span> + addressTest.firstName, <span class="hljs-number">0</span>);
    });

    <span class="hljs-comment">// EVENTUALLY YOU WILL NEED TO WRITE MORE TESTS LIKE THE FIRST NAME TEST.</span>
    <span class="hljs-comment">// THE GOAL WILL BE TO TEST ALL THE PROPERTIES OF OUR COMPONENT.</span>
    <span class="hljs-comment">// AT FIRST, HOWEVER, JUST KEEP THESE TWO TESTS. WHEN THEY START</span>
    <span class="hljs-comment">// PASSING, THEN ADD TESTS FOR THE OTHER PROPERTIES SUCH AS LASTNAME...</span>

});
</code></pre>
<p>Our goal now will be to get these tests to pass.</p>
<a class="anchor" id="testing-address"></a>
<h2>Testing Address</h2>
<p>The address component with Enzyme <strong>shallow</strong> does not provide us much in the way of JSX to test. That means we will have to rewrite <strong>Address.test.js</strong> to work with the new structure we have created.</p>
<p>Here is the JSX we will create for our <strong>Address</strong> component:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">AddressShow</span> <span class="hljs-attr">address</span>=<span class="hljs-string">{this.state.address}</span> <span class="hljs-attr">setAddress</span>=<span class="hljs-string">{this.setAddress}</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>We can show the JSX for our <strong>Address</strong> component with this line of enzyme debug code:</p>
<pre><code class="lang-JavaScript"><span class="hljs-keyword">const</span> wrapper = shallow(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Address</span>/&gt;</span></span>);
wrapper.debug()
</code></pre>
<p>Here is the enzyme debug output from that command:</p>
<pre><code class="lang-html">&lt;<span class="hljs-keyword">div</span>&gt;
  &lt;<span class="hljs-type">AddressShow</span> address={<span class="hljs-meta">{...}</span>} setAddress={[<span class="hljs-type">Function</span>]} /&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<p>As mentioned earlier, it appears there is not much here to debug. But we can get at the properties of <strong>this.state.address</strong> with this line of Enzyme debug code:</p>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">wrapper</span><span class="hljs-selector-class">.find</span>(<span class="hljs-string">'AddressShow'</span>)<span class="hljs-selector-class">.prop</span>(<span class="hljs-string">'address'</span>)
</code></pre>
<p>This will return the contents of our <strong>AddressList</strong> in JavaScript code.</p>
<p>Armed with that knowledge, we can start writing tests that look like this:</p>
<pre><code class="lang-javascript">describe('Address tests', , function() {

    it('renders without crashing', () =&gt; {
        const div = document.createElement('div')<span class="hljs-comment">;</span>
        ReactDOM.render(<span class="hljs-name">&lt;Address/&gt;</span>, div)<span class="hljs-comment">;</span>
        ReactDOM.unmountComponentAtNode(<span class="hljs-name">div</span>)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

    it('renders and displays the default first name', () =&gt; {
        const wrapper = shallow(<span class="hljs-name">&lt;Address/&gt;</span>)<span class="hljs-comment">;</span>
        //console.log(<span class="hljs-name">wrapper</span>.find('AddressShow').prop('address'))<span class="hljs-comment">;</span>
        expect(<span class="hljs-name">wrapper</span>.find('AddressShow').prop('address').firstName).toEqual('unknown')<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

    it('renders state of firstName after button click', () =&gt; {
        const wrapper = shallow(<span class="hljs-name">&lt;Address</span> addressList={AddressList}/&gt;)<span class="hljs-comment">;</span>
        wrapper.instance().setAddress()<span class="hljs-comment">;</span>
        setImmediate(() =&gt; {
            wrapper.update()<span class="hljs-comment">;</span>
            expect(<span class="hljs-name">wrapper</span>.find('AddressShow').prop('address').firstName).toEqual('Patty')<span class="hljs-comment">;</span>
        })<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

    // YOU WRITE TESTS FOR THE OTHER PROPERTIES SUCH AS LASTNAME, CITY, ETC...
})<span class="hljs-comment">;</span>
</code></pre>
<p>Our goal will be to get these tests to pass.</p>
<p><strong>NOTE</strong>: <em>I don&#39;t provide much debug information here. You can however, uncomment the <strong>console.log</strong> statement in the <strong>default first name</strong> test shown above if you need some help crafting your tests. More specifically, here is the line to uncomment:</em></p>
<pre><code class="lang-javascript">    console.<span class="hljs-built_in">log</span>(wrapper.<span class="hljs-built_in">find</span>(<span class="hljs-string">'AddressShow'</span>).prop(<span class="hljs-string">'address'</span>));
</code></pre>
<p><em>Like this:</em></p>
<pre><code class="lang-javascript">it('renders and displays the default first name', () =&gt; {
    const wrapper = shallow(<span class="hljs-name">&lt;Address/&gt;</span>)<span class="hljs-comment">;</span>
    console.log(<span class="hljs-name">wrapper</span>.find('AddressShow').prop('address'))<span class="hljs-comment">;</span>
    expect(<span class="hljs-name">wrapper</span>.find('AddressShow').prop('address').firstName).toEqual('unknown')<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<a class="anchor" id="rename-the-react-component"></a>
<h2>Rename the React Component</h2>
<p>The React component you created may be in a file called <strong>App.js</strong> or perhaps you have renamed it to <strong>Addresss.js</strong>. In either case, rename both the file and the class inside it to <strong>AddressShow</strong>.</p>
<p>This is a task the WebStorm can help you complete.</p>
<ul>
<li>Right click on the file in the Project pane and choose to copy it.</li>
<li>Right click on the components directory and choose to paste it.</li>
<li>Rename the new file to <strong>AddressShow.js</strong></li>
</ul>
<p>In <strong>AddressShow</strong>, rename the class from <strong>Address</strong> to <strong>AddressShow</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Address</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{ ... }      &lt;=== <span class="hljs-type">ORIGINAL</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AddressShow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{ ... }  &lt;=== <span class="hljs-type">EDITED</span> <span class="hljs-type">VERSION</span>
</code></pre>
<p>Then, down at the bottom of the file, make the same change:</p>
<pre><code class="lang-javascript"><span class="hljs-builtin-name">export</span><span class="hljs-built_in"> default Address; </span>     &lt;=== ORIGINAL
<span class="hljs-builtin-name">export</span><span class="hljs-built_in"> default </span>AddressShow;  &lt;=== EDITED VERSION
</code></pre>
<a class="anchor" id="properly-refactor-our-components"></a>
<h2>Properly Refactor Our Components</h2>
<p>If you have not done so already, you should now further refactor your components as follows:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Component</th>
<th style="text-align:left">Task</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Header</td>
<td style="text-align:left">Display the Header</td>
</tr>
<tr>
<td style="text-align:left">GetFile</td>
<td style="text-align:left">The simple <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/React/JestCreateReactApp.html#constructor-state">React <strong>Component</strong></a> with a <strong>constructor</strong> that defines <strong>state.file</strong>, a method called <strong>getFile</strong>, and a <strong>render</strong> method. This component was first shown in week one or two.</td>
</tr>
<tr>
<td style="text-align:left">Address</td>
<td style="text-align:left"><strong>constructor</strong>, <strong>setAddress</strong> and simple render method to be explained later.</td>
</tr>
<tr>
<td style="text-align:left">AddressShow</td>
<td style="text-align:left">Only a relatively lengthy render method to display all the props such as <strong>firstName</strong>, <strong>lastName, etc</strong>.</td>
</tr>
<tr>
<td style="text-align:left">App</td>
<td style="text-align:left">Only a relatively short render method to instantiate the <strong>Header</strong>, <strong>GetFile</strong>, <strong>Address</strong>, <strong>AddressShow</strong></td>
</tr>
<tr>
<td style="text-align:left">index.js</td>
<td style="text-align:left">Instantiates <strong>App</strong></td>
</tr>
</tbody>
</table>
<p>Here is the way it looks in WebStorm:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/address-show-project.png" alt="Webstorm project view"></p>
<p>Here is our new <strong>index.js</strong>:</p>
<pre><code class="lang-JavaScript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>;
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/App'</span>;

<span class="hljs-keyword">import</span> registerServiceWorker <span class="hljs-keyword">from</span> <span class="hljs-string">'./registerServiceWorker'</span>;

ReactDOM.render(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">App</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>));
registerServiceWorker();
</code></pre>
<p>Here is our new <strong>components/App.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React, {Component} <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'../App.css'</span>;
<span class="hljs-keyword">import</span> Address <span class="hljs-keyword">from</span> <span class="hljs-string">'./Address'</span>
<span class="hljs-keyword">import</span> Header <span class="hljs-keyword">from</span> <span class="hljs-string">'./Header'</span>;
<span class="hljs-keyword">import</span> GetFile <span class="hljs-keyword">from</span> <span class="hljs-string">'./GetFile'</span>;


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Header</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">GetFile</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Address</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;
</code></pre>
<p>We don&#39;t see <strong>AddressShow</strong> in <strong>App</strong> because it will be created by the <strong>Address</strong> component.</p>
<a class="anchor" id="data"></a>
<h2>Data</h2>
<p>We will no longer load <strong>AddressList</strong> in <strong>index.js</strong>. Instead, <strong>Address</strong> owns the data. Move the import statement from <strong>index.js</strong> to <strong>Address.js</strong> and straighten out the path:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> AddressList <span class="hljs-keyword">from</span> <span class="hljs-string">'../address-list'</span>;
</code></pre>
<p><strong>NOTE</strong>: <em>Recall that our goal is to perform a complete mind-meld with the file system of our OS. Some part of your brain must become the file system, and you should take great joy and comfort from this fact. In particular, it should be intuitively obvious that the relative path part of the import statement must change after we move this line of code from a file in the <strong>src</strong> directory to a file in the <strong>src/components</strong> directory. You should also grok immediately the difference between a relative path that contains one dot and one that contains two dots. You shouldn&#39;t have to think about it any more than you have to think how to tie your shoes. The knowledge should just be there, fully formed, in your brain without thought or effort. I should perhaps remind you that this isn&#39;t a Linux thing, as you would have the same issue on Windows.</em></p>
<p>Lets also stop working with the individual fields in <strong>Address</strong>. Instead, we will work with a single record from the <strong>AddressList</strong> array.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> <span class="hljs-type">AddressList</span> from '../address-list';

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Address</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
    constructor(props) {
        <span class="hljs-keyword">super</span>(props);

        <span class="hljs-keyword">this</span>.addressIndex=<span class="hljs-number">0</span>;        
        <span class="hljs-keyword">this</span>.state = {
            address: <span class="hljs-type">AddressList</span>[<span class="hljs-keyword">this</span>.addressIndex]  &lt;=== <span class="hljs-type">HERE</span>
        };
        <span class="hljs-keyword">this</span>.debug = <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<p>We create an <strong>addressIndex</strong> property and use it to index into our array of AddressList. Our state tracks only a single address since that is all that <strong>AddressShow</strong> needs to know.</p>
<p><strong>NOTE</strong>: <em>I&#39;m having some doubts here as to whether this is the best way to do this. Certainly it works, but there may be a more elegant solution. I&#39;ll think about it.</em></p>
<p>We now radically strip down the <strong>render</strong> method for <strong>Address</strong>. Rather than render the address fields here, we will pass <strong>this.state.address</strong> to <strong>AddressShow</strong> and let that component render it:</p>
<pre><code class="lang-javascript">render() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.debug) { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"ADDRESS RENDER"</span>); }
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">AddressShow</span> <span class="hljs-attr">address</span>=<span class="hljs-string">{this.state.address}</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    );
}</span>
</code></pre>
<a class="anchor" id="props-address-data"></a>
<h2>AddressShow Receives the Address Data</h2>
<p>The only thing that <strong>AddressShow</strong> really needs to do is display our <strong>Address</strong> record. It turns that at this time, <strong>AddressShow</strong> does not need a constructor, since there is no set up work need to get the object going. However, if it did need one, it might look like this:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">constructor</span><span class="hljs-params">(props)</span> <span class="hljs-comment">{
    super(props);
    this.debug = true;
    if (this.debug) {
      console.log('SHOW ADDRESS CONSTRUCTOR', this.props.address);
    }</span>
}</span>
</code></pre>
<p>As you can see, the constructor is passed <strong>props</strong>. As you know, <strong>props</strong> is the state passed to the object by its parent, which in this case is <strong>Address</strong>. This means that <strong>this.props.address</strong> in <strong>AddressShow</strong> is &quot;the same thing&quot; as <strong>this.state.address</strong> in the <strong>Address</strong> component. The data is passed from the <strong>Address</strong> render method to the <strong>AddressShow</strong> constructor.</p>
<p>You can keep the above constructor, but you should strip everything else from <strong>AddressShow</strong> except the <strong>render</strong> method. In the <strong>render</strong> method&#39;s JSX, reference the fields of the <strong>address</strong> object with <strong>props</strong> rather than <strong>state</strong>.</p>
<p><strong>NOTE</strong>: <em>Since the constructor for <strong>AddressShow</strong> doesn&#39;t do anything, the only thing we really need in <strong>AddressShow</strong> is the render method, but we are keeping the constructor for pedagogical purposes. Or not, it is up to you. It might be simpler just to open the Developer tools at runtime and put a breakpoint on the <strong>AddressShow</strong> render method to confirm that your props are being passed as expected.</em></p>
<a class="anchor" id="quiet-log"></a>
<h2>Logging</h2>
<p>Since we don&#39;t really need the <strong>constructor</strong>, and yet we have implemented it anyway to help illustrate a point, we might as well see if we can find a way to complicate the code further.</p>
<p>As you probably know, <strong>console.log</strong> is both curse and blessing. Let&#39;s try to emphasize the blessing and mitigate the curse by creating a single place where we call the offending method:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">constructor</span><span class="hljs-params">(props)</span> <span class="hljs-comment">{
    super(props);
    this.debug = true;
    this.log('ADDRESS SHOW CONSTRUCTOR', this.props.address);
}</span>

<span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-keyword">message</span>, message2 = <span class="hljs-string">''</span>, message3 = <span class="hljs-string">''</span>)</span> <span class="hljs-comment">{
    if (this.debug) {
        console.log(message, message2, message3);
    }</span>
}</span>
</code></pre>
<p>Our logger is a bit deficient at this point as it will often fail to display objects correctly. One solution is to transform objects into strings before we send them:</p>
<pre><code class="lang-JavaScript"><span class="hljs-keyword">const</span> ObjectAsString = <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>.props.address, <span class="hljs-literal">null</span>, <span class="hljs-number">4</span>));
<span class="hljs-keyword">this</span>.log(<span class="hljs-string">'ADDRESS SHOW CONSTRUCTOR'</span>, objectAsString);
</code></pre>
<p>A second solution is to check the second parameter to see if it is an object and to transform it there:</p>
<pre><code class="lang-javascript">log(message, message2 = <span class="hljs-string">''</span>, message3 = <span class="hljs-string">''</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> message2 === <span class="hljs-string">'object'</span>) {
            message2 = <span class="hljs-built_in">JSON</span>.stringify(message2, <span class="hljs-literal">null</span>, <span class="hljs-number">4</span>);
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.debug) {
        <span class="hljs-built_in">console</span>.log(message, message2, message3);
    }
}
</code></pre>
<p>We should probably do this for all three parameters.</p>
<p>Now we can toggle a single variable, <strong>this.debug</strong>, whenever we want to turn down the volume. For instance, we might want to log to the console in our render method. In the new system we would do it like this:</p>
<pre><code class="lang-javascript">render() {
    <span class="hljs-keyword">this</span>.log(<span class="hljs-string">"SHOW ADDRESS RENDER"</span>, <span class="hljs-keyword">this</span>.props);
    <span class="hljs-keyword">return</span> ( ... );
}
</code></pre>
<p>Now we can change the <strong>this.debug</strong> property from <strong>true</strong> to <strong>false</strong> to toggle the use of <strong>console.log</strong> throughout the object. There are other solutions, and better loggers, but this is a bit of a start on understanding the subject.</p>
<p><strong>NOTE</strong>: <em>I state the name of the object in logging message to help me track down where it is coming from. Fancy loggers can give us more information in simpler ways, but we could do this:</em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">constructor</span>(props) {
    <span class="hljs-keyword">super</span>(props);
    <span class="hljs-keyword">this</span>.debug = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.log(<span class="hljs-string">'CONSTRUCTOR'</span>, <span class="hljs-keyword">this</span>.props.address);
}

log(message, message2 = <span class="hljs-string">''</span>, message3 = <span class="hljs-string">''</span>) {

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.debug) {
        const label = <span class="hljs-keyword">this</span>.<span class="hljs-keyword">constructor</span>.name + <span class="hljs-string">': '</span>;   &lt; === HERE
        console.log(label, message, message2, message3);
    }
}

render() {
    <span class="hljs-keyword">this</span>.log(<span class="hljs-string">"RENDER"</span>, <span class="hljs-keyword">this</span>.props);
}
</code></pre>
<p><em>We are using <strong>this.constructor.name</strong> to get the name of our component.</em></p>
<a class="anchor" id="rendering-the-data"></a>
<h2>Rendering the Data</h2>
<p>It should come as no surprise that <strong>AddressShow</strong> can, at least for now, render an address with almost the same code that we used in <strong>Address</strong>. The change will be simply to work with <strong>props</strong> rather than <strong>state</strong>:</p>
<pre><code class="lang-javascript">render() {
    <span class="hljs-keyword">this</span>.log(<span class="hljs-string">"SHOW ADDRESS RENDER"</span>);

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App-intro"</span>&gt;</span>
                firstName: {this.props.address.firstName}
            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

            // CODE OMITTED HERE

        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
}
</code></pre>
<p>Note that we don&#39;t write <strong>this.props.firstName</strong> but <strong>this.props.address.firstName</strong>. This is because we pass in the whole address object, rather than a set of individual properties representing each field. One could argue the merits of each technique, but I like this one because it is relatively simple.</p>
<a class="anchor" id="modify-view"></a>
<h2>AddressShow Modify View with Button Click</h2>
<p>The next step will be to set up a button click for <strong>AddressShow</strong>. Recall that we deleted all the code except the render method a nominal constructor from <strong>AddressShow</strong>. Thus our button click no longer works, even if the button itself is still there.</p>
<p>We said earlier that <strong>AddressShow</strong> would display our data, and that <strong>Address</strong> would manipulate, modify and save our data. So our code for handling the button click belongs in Address. It is essentially the same code we had before, but now it is somewhat simpler since we are working on with the piece of data in our state:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-title">setAddress</span> = <span class="hljs-params">(event)</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.addressIndex = <span class="hljs-number">1</span>;   

    <span class="hljs-keyword">this</span>.setState({
        address: addressList[<span class="hljs-keyword">this</span>.addressIndex]
    })
};
</code></pre>
<p>So now we have the method for changing our state. But that method is in <strong>Address</strong> and in our button is in <strong>AddressShow</strong>. How do we connect them?</p>
<p>The solution is to pass the <strong>setAddress</strong> function object to <strong>AddressShow</strong> in the render method of <strong>Address</strong>:</p>
<pre><code class="lang-javascript">&lt;AddressShow
    address={<span class="hljs-keyword">this</span>.state.address}
    setAddress={<span class="hljs-keyword">this</span>.setAddress}
/&gt;
</code></pre>
<p>As you can see, we are now passing not one, but two <strong>props</strong> to <strong>AddressShow</strong>.</p>
<p>And here is all we need to do in <strong>AddressShow</strong>. At the bottom of the render method, modify the button to look like this:</p>
<pre><code class="lang-javascript">&lt;<span class="hljs-selector-tag">button</span> id=<span class="hljs-string">"showAddressClick"</span> onClick={this<span class="hljs-selector-class">.props</span><span class="hljs-selector-class">.setAddress</span>}&gt;Show Address&lt;/button&gt;
</code></pre>
<p>Note that I am both setting the <strong>onclick</strong> method to the function object passed from the <strong>Address</strong> object, and also being sure to create a unique <strong>id</strong> which is a portmanteau derived from the object&#39;s name and the button&#39;s purpose.</p>
<a class="anchor" id="proptypes"></a>
<h2>PropTypes</h2>
<p>Near the top of AddressShow link in <strong>PropTypes</strong>:</p>
<pre><code class="lang-JavaScript"><span class="hljs-keyword">import</span> PropTypes <span class="hljs-keyword">from</span> <span class="hljs-string">'prop-types'</span>;
</code></pre>
<p>Then define your proptypes. I don&#39;t list them all here, but I include enough to get your started.</p>
<pre><code class="lang-JavaScript">AddressShow.propTypes = {
<span class="hljs-symbol">    address:</span> PropTypes.shape({
<span class="hljs-symbol">        firstName:</span> PropTypes.string,
<span class="hljs-symbol">        lastName:</span> PropTypes.string,
        <span class="hljs-comment">// YOU WRITE THE REST</span>
    }),
<span class="hljs-symbol">    setAddress:</span> PropTypes.func
};
</code></pre>
<p>If you don&#39;t have this right, then <a href="http://www.ccalvert.net/books/CloudNotes/Assignments/React/ReactEsLint.html">ESLint</a> will not work correctly.</p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Add, commit then push. Then Tag. Push you tag. When you turn in the assignment, give me the tag and the directory in which you did your work. I may just look at your most recent code, but being able to go back to where you were when you submitted the assignment can be helpful.</p>
<p>Your tests should look something like this:</p>
<pre><code class="lang-bash"> PASS  src/tests/AddressShow.test.js
 PASS  src/tests/Address.test.js
 PASS  src/tests/Header.test.js

<span class="hljs-keyword">Test </span>Suites: 3 passed, 3 total
Tests:       30 passed, 30 total
Snapshots:   0 total
<span class="hljs-keyword">Time:</span>        0.545s, estimated 1s
Ran all test suites related to changed files.

Watch Usage: Press w to show more.
</code></pre>
<a class="anchor" id="hint-tagging"></a>
<h2>Hints about Tagging</h2>
<ul>
<li><a href="http://www.elvenware.com/charlie/development/cloud/Git.html#git-tag">Git Tag</a></li>
<li><a href="http://www.elvenware.com/charlie/development/cloud/Git.html#understanding-tags">Understanding Tags</a></li>
</ul>
<a class="anchor" id="breakpoint"></a>
<h2>Hints about Breakpoints</h2>
<p>The debugger and breakpoints are essential tools. I personally can do little without them.</p>
<ul>
<li>Start your program.</li>
<li>Go to Chrome or Chormium</li>
<li>F12 to start the developer tools.</li>
<li>Click the Sources page</li>
<li>Click <strong>webpack</strong> in the &quot;project view&quot; on the left</li>
<li>Select a file</li>
<li>Click in the gutter to set a breakpoint.<ul>
<li>In this case I choose App.js and put the breakpoint in the constructor on line 7</li>
<li>You could pick any file and put the break point anywhere there is an active line.</li>
<li>Press F5 to rerun to your breakpoint.</li>
</ul>
</li>
</ul>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/breakpoint01.png" alt="Breakpoints"></p>
<!-- Links for this article -->
</div></body></html>