<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>CouchDbBasics</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><script src="/libs/scripts/Control.js"></script><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/charlie/About.html">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/charlie/development/index.html">Strongly Typed</a></li><li><a href="/charlie/development/web/index.html">Web & Scripts</a></li><li><a href="/charlie/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/charlie/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>CouchDbBasics</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#databases">Databases</a></li>
<li><a href="#couchdb">CouchDb</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#sub-ip">Sub IP</a></li>
<li><a href="#check-work">Check Work</a></li><!--TOC_End--></ul><h2 id="overview">Overview</h2>
<p>Key Demos:</p>
<p>There are mostly in JsObjects\Data. Look especially at:</p>
<ul>
<li>CouchApp06: Look in the _attachments directory</li>
<li>CouchDb03: Using the <strong>request</strong> library</li>
<li>CouchDb04: Using the <strong>nano</strong> library</li>
<li>CouchDb05: This is a <strong>hello world</strong> of sorts for couchdb</li>
<li>CouchDb08: ???</li>
</ul>
<h2 id="databases">Databases</h2>
<p>We are going to be working mostly with NoSQL database. Relational databases
are great, of course, but you have seen them in other courses. An important
part of the cloud ecology is built around NoSQL databases.</p>
<ul>
<li><a href="http://nosql-database.org/">http://nosql-database.org/</a></li>
<li><a href="https://en.wikipedia.org/wiki/NoSQL">https://en.wikipedia.org/wiki/NoSQL</a></li>
</ul>
<p>NoSQL databases are:</p>
<ul>
<li>non-relational.</li>
<li>distributed</li>
<li>able to handle huge amounts of data (big data)</li>
</ul>
<p>An example of Big Data is the Large Hadron Collider, which stores 10 PetaBytes
of data per year in CouchDb. Twitter uses both MySQL and NoSQL. They brought in
a NoSQL solution based on Hadoop because their users generate about 4 PetaBytes
of data year. Their solution uses Pig, Hbase and FlockDb, all of which run on
top of Hadoop.</p>
<p>NoSql databases are designed to let you:</p>
<ul>
<li>Write huge amounts of data to them very quickly</li>
<li>Provide fast key-value pair lookups</li>
<li>Have no single point of failure</li>
<li>Support for distrubted parallel computing</li>
<li>Good support for analytical queries that do something like the SQL commands
to SELECT data, then GROUP BY some term. In the SQL world, this is called Map
Reduce.</li>
<li>Support for rapid development with a flexible structure. If you have highly
structured data, then SQL is probably a better choice. But if you want some
flexibility, then NoSQL can be helpful.</li>
</ul>
<p>There are many good NoSQL databases, including MongoDb, Cassandra, Hadoop/Hbase,
and CouchDb. We will focus mostly on CouchDb, though I would like to do at least
some work with either MongoDb or Hadoop/Hbase.</p>
<p>Some big or important folks who use NoSQL:</p>
<ul>
<li>Twitter and Hadoop)(<a href="http://readwrite.com/2011/01/02/how-twitter-uses-nosql">http://readwrite.com/2011/01/02/how-twitter-uses-nosql</a>)</li>
<li><a href="http://readwrite.com/2011/01/28/how-netflix-adopted-nosql">Netflix and Cassandra</a></li>
<li><a href="http://readwrite.com/2010/08/26/lhc-couchdb">Large Hadron Collider and CouchDb</a></li>
</ul>
<p>Please don&#39;t read this as either:</p>
<ul>
<li>NoSQL is better than relational databases</li>
<li>Relational databases are better than NoSQL</li>
</ul>
<p>Each technology shines in particular settings. Both can scale to huge amounts
of data. Both can be very fast in certain settings. There are times when you
want to use SQL, and times when you might find a NoSQL database more efficient.
It is beyond the scope of this class, and my scope as a teacher, to give you
hard and fast rules on these subjects.</p>
<p>For now, our reason for using NoSQL look something like this:</p>
<ul>
<li>We need to be aware of all the important solutions used in the cloud.</li>
<li>NoSQL has broad adoption in the cloud</li>
<li>In some use cases, NoSQL is a better choice than SQL</li>
</ul>
<h2 id="couchdb">CouchDb</h2>
<p>The CouchDb material has moved here:</p>
<p><a href="http://www.elvenware.com/charlie/development/database/NoSql/CouchDb.html">http://www.elvenware.com/charlie/development/database/NoSql/CouchDb.html</a></p>
<h2 id="turn-it-in">Turn it in</h2>
<p>Copy the <strong>JsObjects/Data/CouchDb04</strong> assignment to your repo as <strong>Week03-CouchDbDemo</strong> and get it to run.</p>
<p>Modify the program so that it inserts multiple lines into a single document:</p>
<pre><code class="lang-javascript">prog.<span class="hljs-keyword">insert</span>({<span class="hljs-string">"doc"</span>: [
    { <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Suzie"</span>, <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Higgins"</span>},
    { <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Harry"</span>, <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Potter"</span>},
    { <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lisa"</span>, <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Smith"</span>}
]}, .. ETC ),
</code></pre>
<p>Make sure:</p>
<ul>
<li>The database name is <strong>bc_data</strong></li>
<li>the document name is <strong>bigNames</strong></li>
<li>The folder has the correct name as quoted at the beginning of this section.</li>
</ul>
<p>Push your work to the cloud.</p>
<p>Take two screen shots and attach them to your assignment when you turn them in.</p>
<ul>
<li>One of the CouchDb04 demo running in your bash shell</li>
<li>One of Futon after you have inserted data with <strong>CouchDb04</strong>. Click in far enough to show all the data.</li>
</ul>
<h2 id="sub-ip">Sub IP</h2>
<p>This script will help you change your IP:</p>
<pre><code class="lang-text">sed -i "s/<span class="hljs-link">http:\/\/</span>[<span class="hljs-string">0-9</span>].<span class="hljs-strong">*[^:5984]*</span>.[^\);]/http:\/\/192.168.2.19:5984'/g" $1
</code></pre>
<p>Save it as <strong>~/bin/new-ip</strong>. Make it executable: <strong>chmod +x new-ip</strong>. Call it like this:</p>
<pre>
new-ip <my-program.js>
</pre>

<p>Change the IP in the script to the value you want.</p>
<h2 id="check-work">Check Work</h2>
<p>Check that the data was created correctly without Futon</p>
<pre>
curl -X GET http://192.168.2.19:5984/bc_data/bigNames | python -m json.tool
</pre>
</div></body></html>