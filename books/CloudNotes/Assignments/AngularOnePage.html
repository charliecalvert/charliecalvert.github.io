<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>AngularOnePage</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>AngularOnePage</h1><p>Welcome to AngularOnePage</p><ul><!--TOC_Start--><li><a href="#description">Description</a></li>
<li><a href="#single-page">Single Page</a></li>
<li><a href="#mongoose">Mongoose</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#hints">Hints</a></li>
<li><a href="#angular-route">Angular Route</a></li>
<li><a href="#define-routes">Define Routes</a></li>
<li><a href="#loading-views">Loading Views</a></li>
<li><a href="#include-files">Include Files</a></li>
<li><a href="#controllers">Controllers</a></li>
<li><a href="#use-one-name-for-topic">Use One Name for Topic</a></li>
<li><a href="#indent-menu-properly">Indent menu properly</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="description"></a>
<h2>Description</h2>
<p>Incorporate the Moongoose editor material into your midterm project. Start by copying your existing midterm into a folder called <strong>Week10-AngularOnePage</strong>.</p>
<p>We will break this assignment into parts. To complete this assignment, complete only Part I. We will do Part II after class on Monday:</p>
<ol>
<li>Add a menu and multiple pages that allow the user to switch between the following views:<ul>
<li>Home</li>
<li>Edit</li>
<li>Subjects</li>
<li>Comments</li>
<li>About</li>
</ul>
</li>
<li>In a later assignment we will incorporate the Mongoose database into our program.</li>
</ol>
<p>For this assignment, I expect you to complete part 1, and to make a start on part 2. In a later assignment we will complete part 2.</p>
<a class="anchor" id="single-page"></a>
<h2>Single Page</h2>
<p>This is the part due first. The key features needed to turn our midterm into a true single page app are:</p>
<ul>
<li>An expanded menu similar to the one found in the <strong>MongooseEditor</strong> assignment.</li>
<li>Multiple pages that can be swapped in while maintaining an unchanged header. Again, this is similar to the functionality found in the <strong>MongooseEditor</strong> project.</li>
</ul>
<p>In most cases, this should be a fairly straightforward operation. There are, however, one or two midterm projects created by students where incorporating these new pages might be a bit tricky. I think, however, that everyone should be able to create the following pages with little trouble:</p>
<ul>
<li>Home</li>
<li>Edit</li>
<li>Comments</li>
<li>About</li>
</ul>
<p>It&#39;s the subjects page that is likely to cause problems in a few cases. For now, I&#39;ll ask only that you do the best you can.</p>
<p>These pages don&#39;t really have to do much at this point. I just want you to be able to load them. It is okay if they say nothing more than the following, where each word stored in a jade file using the H1 tag:</p>
<ul>
<li>Main</li>
<li>Edit</li>
<li>Subjects</li>
<li>Comments</li>
<li>About</li>
</ul>
<p>In other words, I want you to create the following files and to be able to display or use them when I click on the menu items:</p>
<table>
<thead>
<tr>
<th style="text-align:right">Menu</th>
<th style="text-align:right">Jade</th>
<th style="text-align:right">JavaScript</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">Home</td>
<td style="text-align:right">main.jade</td>
<td style="text-align:right">control.js</td>
</tr>
<tr>
<td style="text-align:right">Edit</td>
<td style="text-align:right">edit.jade</td>
<td style="text-align:right">edit.js</td>
</tr>
<tr>
<td style="text-align:right">Subjects</td>
<td style="text-align:right">subjects.jade</td>
<td style="text-align:right">subjects.js</td>
</tr>
<tr>
<td style="text-align:right">Comments</td>
<td style="text-align:right">comments.jade</td>
<td style="text-align:right">comments.js</td>
</tr>
<tr>
<td style="text-align:right">About</td>
<td style="text-align:right">about.jade</td>
<td style="text-align:right">about.js</td>
</tr>
</tbody>
</table>
<p>You should also include an <strong>app.js</strong> file similar to the one in the <strong>MongooseEditor</strong> project.</p>
<a class="anchor" id="mongoose"></a>
<h2>Mongoose</h2>
<p>This part of the assignment is not due yet. It is just a peak at where we are headed.</p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Submit you work in a folder called <strong>Week10-AngularOnePage</strong>.</p>
<a class="anchor" id="hints"></a>
<h2>Hints</h2>
<p>Here are various comments that I have made on student&#39;s programs. These are some of the most common mistakes I found when grading this assignment.</p>
<a class="anchor" id="angular-route"></a>
<h3>Angular Route</h3>
<p>Be sure to include the <strong>angular-route</strong> package in your <strong>bower.json</strong> file. You may have installed <strong>angular-route</strong> on your machine, but that does little good unless this package is included in <strong>bower.json</strong>.  The fix:</p>
<pre><code><span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span>angular-route --save
</code></pre><p>The <strong>--save</strong> switch saves the request to load this package into <strong>bower.json</strong>.</p>
<p>Some students needed to remember to save <strong>bootswatch</strong> to <strong>bower.json</strong> if they choose to use it:</p>
<pre><code><span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span><span class="hljs-keyword">bootswatch </span>--save
</code></pre><p>Then edit bower.json to remember the +1 if it is present. If you see:</p>
<pre><code> <span class="hljs-string">"bootswatch"</span>: <span class="hljs-string">"~3.3.4+1"</span> 
</code></pre><p>Then change it to this:</p>
<pre><code><span class="hljs-string">"bootswatch"</span>: <span class="hljs-string">"~3.3.4"</span>
</code></pre><a class="anchor" id="define-routes"></a>
<h3>Define Routes</h3>
<p>This is the glue code that matches up the templates to the controllers. </p>
<pre><code><span class="hljs-selector-tag">angular</span>
    <span class="hljs-selector-class">.module</span>(<span class="hljs-string">"progApp"</span>, [ <span class="hljs-string">'ngRoute'</span>, <span class="hljs-string">'School'</span>])
    <span class="hljs-selector-class">.config</span>(function($routeProvider, $locationProvider) {
        $<span class="hljs-selector-tag">routeProvider</span><span class="hljs-selector-class">.when</span>(<span class="hljs-string">"/"</span>, {
            <span class="hljs-attribute">templateUrl </span>: <span class="hljs-string">"main"</span>,
            <span class="hljs-attribute">controller </span>: <span class="hljs-string">"MyController"</span>,
            <span class="hljs-attribute">controllerAs</span>: <span class="hljs-string">"myController"</span>
        })<span class="hljs-selector-class">.when</span>(<span class="hljs-string">'/edit'</span>, {
            <span class="hljs-attribute">templateUrl </span>: <span class="hljs-string">"edit"</span>,
            <span class="hljs-attribute">controller </span>: <span class="hljs-string">"EditController"</span>,
            <span class="hljs-attribute">controllerAs</span>: <span class="hljs-string">'editController'</span>
        })<span class="hljs-selector-class">.when</span>(<span class="hljs-string">'/districts'</span>, {
            <span class="hljs-attribute">templateUrl </span>: <span class="hljs-string">"districts"</span>,
            <span class="hljs-attribute">controller </span>: <span class="hljs-string">"DistrictsController"</span>,
            <span class="hljs-attribute">controllerAs</span>: <span class="hljs-string">'districtsController'</span>
        })<span class="hljs-selector-class">.when</span>(<span class="hljs-string">'/comments'</span>, {
            <span class="hljs-attribute">templateUrl </span>: <span class="hljs-string">"comments"</span>,
            <span class="hljs-attribute">controller </span>: <span class="hljs-string">"CommentsController"</span>,
            <span class="hljs-attribute">controllerAs</span>: <span class="hljs-string">'commentsController'</span>
        })<span class="hljs-selector-class">.when</span>(<span class="hljs-string">'/about'</span>, {
            <span class="hljs-attribute">templateUrl </span>: <span class="hljs-string">"about"</span>,
            <span class="hljs-attribute">controller </span>: <span class="hljs-string">"AboutController"</span>,
            <span class="hljs-attribute">controllerAs</span>: <span class="hljs-string">'aboutController'</span>
        })<span class="hljs-selector-class">.otherwise</span>({
            <span class="hljs-attribute">redirectTo </span>: <span class="hljs-string">'/'</span>
        });
});
</code></pre><p>With the exception of <strong>main</strong>, each route should have matching pairs of client side controllers and server side jade files. Consider this client side route:</p>
<pre><code><span class="hljs-keyword">when</span>(<span class="hljs-string">'/comments'</span>, {
    <span class="hljs-attribute">templateUrl </span>: <span class="hljs-string">"comments"</span>,
    <span class="hljs-attribute">controller </span>: <span class="hljs-string">"CommentsController"</span>,
    <span class="hljs-attribute">controllerAs</span>: <span class="hljs-string">'commentsController'</span>
})
</code></pre><p>When you see something like that, you can more or less assume that the following files exist:</p>
<ul>
<li>public/javascripts/comments.js</li>
<li>views/comments.jade</li>
</ul>
<p>The first file defines the <strong>controller</strong> and the <strong>controllerAs</strong>. The second file, the jade file, defines the template designated by the <strong>templateUrl</strong>.</p>
<a class="anchor" id="loading-views"></a>
<h2>Loading Views</h2>
<p>Make sure you have code to load the jade pages when they are requested by the client side routes. The code for loading these views usually goes in <strong>routes/index.js:</strong>:</p>
<pre><code class="lang-javascript">router.<span class="hljs-keyword">get</span>('/:<span class="hljs-built_in">id</span>', function(req, res, next) {
  console.<span class="hljs-built_in">log</span>(req.params.<span class="hljs-built_in">id</span>);
  res.render( req.params.<span class="hljs-built_in">id</span>, { title: req.params.<span class="hljs-built_in">id</span> });
});
</code></pre>
<a class="anchor" id="include-files"></a>
<h3>Include Files</h3>
<p>I noticed that not everyone was linking in <em>subjects</em> in <strong>layout.jade</strong>.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/subjects.js"</span>)</span></span>
<span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/comments.js"</span>)</span></span>
</code></pre><p>That will cause an undefined error:</p>
<p>Argument &#39;SubjectsController&#39; is not a function, got undefined</p>
<p>As mentioned above, each of the two client side JavaScript files has matching jade files:</p>
<ul>
<li><strong>views/subjects.jade</strong></li>
<li><strong>views/comments.jade</strong></li>
</ul>
<a class="anchor" id="controllers"></a>
<h3>Controllers</h3>
<p>To make this program work, you need to declare at least minimal controllers in your client side JavaScript. For instance, if you had a page called public/javascript/login.js, and it was declared in <strong>app.js</strong> to have a controller, then you need to write, at absolute minimum, something like this:</p>
<pre><code>angular.module(<span class="hljs-string">'elvenApp'</span>).controller(<span class="hljs-string">'LoginController'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> loginController = <span class="hljs-keyword">this</span>;
});
</code></pre><a class="anchor" id="use-one-name-for-topic"></a>
<h3>Use One Name for Topic</h3>
<p>Suppose your topic was <strong>scientists</strong>. In that case, then the property on your controllers that holds the current instance of your topic should be called scientists both in the controller and in <strong>mongo-factory.js</strong>.</p>
<p>For instance, this would cause an error:</p>
<ul>
<li>subjectsController.data.subjects  // In subjects.js</li>
<li>controller.scientist.subjects         // In mongo-factory</li>
</ul>
<a class="anchor" id="indent-menu-properly"></a>
<h3>Indent menu properly</h3>
<p>Here is an example of a working menu for this project:</p>
<pre><code>extends layout
block content
    .container
        .header
            nav.navbar-default.navbar-fixed-top
                ul.nav.nav-pills
                    li(<span class="hljs-attribute">ng-class</span>=<span class="hljs-string">"{ active: isActive('/')}"</span>)
                        a(<span class="hljs-attribute">ng-href</span>=<span class="hljs-string">'#/'</span>) Home

                    li(<span class="hljs-attribute">ng-class</span>=<span class="hljs-string">"{ active: isActive('/')}"</span>)
                        a(<span class="hljs-attribute">ng-href</span>=<span class="hljs-string">'#/edit'</span>) <span class="hljs-builtin-name">Edit</span>

                    li(<span class="hljs-attribute">ng-class</span>=<span class="hljs-string">"{ active: isActive('/')}"</span>)
                        a(<span class="hljs-attribute">ng-href</span>=<span class="hljs-string">'#/comments'</span>) Comments

                    li(<span class="hljs-attribute">ng-class</span>=<span class="hljs-string">"{ active: isActive('/')}"</span>)
                        a(<span class="hljs-attribute">ng-href</span>=<span class="hljs-string">'#/Subjects'</span>) Subjects

                    li(<span class="hljs-attribute">ng-class</span>=<span class="hljs-string">"{ active: isActive('/about')}"</span>)
                        a(<span class="hljs-attribute">ng-href</span>=<span class="hljs-string">'#/about'</span>) About
        div.jumbotron
            h1= title
            p Welcome <span class="hljs-keyword">to</span> #{title}
        #monogoData(<span class="hljs-attribute">data-ng-view</span>=<span class="hljs-string">""</span>)
</code></pre></div></body></html>