<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>NodeExpressMongo01</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>NodeExpressMongo01</h1><p>Welcome to NodeExpressMongo01</p><ul><!--TOC_Start--><li><a href="#node-express-and-mongodb">Node, Express and MongoDb</a></li>
<li><a href="#screenshots">Screenshots</a></li>
<li><a href="#code-to-delete-records">Code to Delete Records</a></li>
<li><a href="#example-code">Example Code</a></li>
<li><a href="#creating-the-data">Creating the Data</a></li>
<li><a href="#turn-it-in">Turn it In</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="node-express-and-mongodb"></a>
<h1>Node, Express and MongoDb</h1>
<p>We are going to continue work on our Information Manager. This 
assignment will be mostly a skill building exercise. I hope to tie
this assignment and the previous assignment together next week.</p>
<p>There will be three primary steps in this assignment:</p>
<ul>
<li>Create a server side method that will automatically insert 250 
auto-generated records into MongoDb </li>
<li>Create a server side method that will retrieve the records, place
them in an array  from the
database and send them to the client.</li>
<li>Create an HTML interface that will display any one record from the
array of records to the user. This is not a Cordova assignment. You can 
do your work with HTML, CSS and JavaScript.</li>
</ul>
<p>Passing a parameter from the client (the web broswer) to the server
is a bit tricky. As a result, in this assignment, I just want you to
return an array of all 250 records. Later, we can learn how to ask 
for one of the records.</p>
<p>You should, however, provide an interface that lets the user ask for
any one record from the array of 250 that were returned. In particular,
you should display the first record from the array when it is returned,
then allow the user to enter a number between 1 and 250, and retrieve
one of the associated records. You need not do any range checking at
this point. I won&#39;t care if the app creates an error if the user enters
a number like -15 or 266.</p>
<p>I expect your interface to include:</p>
<ul>
<li>a place to show the selected record retrieved from the server. This
would probably be a series of paragraph tags, but other options will
be accepted.</li>
<li>An input element where the user can enter the number of the item they
want to retreive.</li>
<li>A button to press to activate the retrieval of the next item.</li>
</ul>
<p>You will need to retrieve the array only once. This should occur 
immediately after your application loads. Once the array is on the 
client side, the user will be able to select any one item from the 
array.</p>
<p>On the server side, you will have a default method that will return
HTML containing the interface for your application. It will be much
like the method we created in class, except this time, you will not
hardcode the HTML into Server.js. Instead, you will retrieve it from
a file kept on the server side:</p>
<pre><code>var fs = require(<span class="hljs-string">'fs'</span>)<span class="hljs-comment">;</span>

var html = fs.readFileSync(__dirname + <span class="hljs-string">'/Public/index.html'</span>)<span class="hljs-comment">;</span>
res.writeHeader(<span class="hljs-number">200</span>, {<span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/html"</span>})<span class="hljs-comment">;   </span>
res.write(html)<span class="hljs-comment">;</span>
res<span class="hljs-meta">.end</span>()<span class="hljs-comment">;</span>
</code></pre><p>The complete example is in JsObjects:</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/NodeCode/HelloExpress">Hello Express</a></li>
</ul>
<p>I also provide an example called MongoTalk02 which gives you at least
a few hints as to how to get started with this application. Here is a
screenshot from the application:</p>
<p><img src="../Images/NodeExpressMongo01.png" alt="MongoTalk02"></p>
<p>If you have not already done so, you need to run <strong>MongoTalk</strong> 
before you run <strong>MongoTalk02</strong> so that at least some data will be in 
MongoDb. In the screenshot shown above, you can see that MongoTalk02 
retrieves the data that I created with <strong>MongoTalk</strong> during our class on 
Tuesday, Feb 04. The data you created will likely be different.  For 
this assignment, you will want to create a new collection and new 
data, as explained below.</p>
<a class="anchor" id="screenshots"></a>
<h2>Screenshots</h2>
<p>The screenshot shown below is probably not exactly the interface for
the program you want to turn in. However, it might be helpful to look
at it for a second.</p>
<p><img src="../Images/NodeExpressMongo02.png" alt="MongoTalk02"></p>
<p>Notice the following from the above screen shot:</p>
<ul>
<li>The display of one record, including: firstName, lastName, address, etc.</li>
<li>The input box (type=&quot;number&quot;) for entering the number of the record you want to view.</li>
<li>The button to click to show the record.</li>
</ul>
<p>Here is what the screen looks like after the user as requested to see the
second record:</p>
<p><img src="../Images/NodeExpressMongo03.png" alt="MongoTalk02"></p>
<p>Finally, notice the array of five records displayed at the bottom of 
the screen. This is not part of the assignment. In this case, I just 
deleted all existing records from the <strong>collection</strong> and added only 
five new ones. I had my program display these five records using a 
technique illustrated in <strong>MongoTalk02</strong>. My goal was to provide a 
screen shot for you that illustrats key elements of the interface I 
want to see in your assignment. It also provides a few tips as to 
what is happening behind the scenes. In particular, it shows the 
loaded data looks like as it sits in memory.</p>
<a class="anchor" id="code-to-delete-records"></a>
<h2>Code to Delete Records</h2>
<p>The heart of your delete function might look something like this, though
your implementation may differ in various small details:</p>
<pre><code><span class="hljs-keyword">var</span> collection = database.collection(<span class="hljs-string">'test_insert'</span>);
collection.remove(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> </span>{
    <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-keyword">throw</span> err;
    }
    database.close();
});
</code></pre><a class="anchor" id="example-code"></a>
<h2>Example Code</h2>
<p>And here is the MongoTalk02 example that is shown in a previous screenshot:</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/Data/MongoTalk02">MongoTalk02 in JsObjects</a></li>
</ul>
<p>You might also find this example helpful:</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/blob/master/JavaScript/NodeCode/SimpleReadWriteJson/server.js">SimpleReadWriteJson</a></li>
</ul>
<p><strong>SimpleReadWriteJson</strong> shows how to read and write a Json file. You will be
reading from a database, not a file. Also, you will not need to write
anything to the database at this stage. Still, the example is interesting,
particularly as it shows how to send back HTML, CSS and JavaScript to
the client.</p>
<a class="anchor" id="creating-the-data"></a>
<h2>Creating the Data</h2>
<p>It might make sense to create two scripts:</p>
<ul>
<li>One for populating and maintaing the database</li>
<li>One that serves up data to the client</li>
</ul>
<p>Or you could check to see if the database is populated, and if not,
to populate it. Or we could add a button to our client to populate 
the database. For now, though, the two script idea is probably 
simplest.</p>
<p>The method you write to insert data into the database should have 
at least these two features:</p>
<ul>
<li>Write to a collection called <strong>test_data</strong>. Do not write to the <strong>test_insert</strong>
collection used in MongoTalk and MongoTalk02.</li>
<li>Your data should look like sample address book data, with firstName,
lastName, address, city, state and zip fields.</li>
</ul>
<p>Here is what the first record should look like:</p>
<pre><code><span class="hljs-symbol">Rita10001</span> Hill10001
<span class="hljs-number">10001</span> Ruby <span class="hljs-keyword">Street
</span><span class="hljs-keyword">Bellevue, </span>WA <span class="hljs-number">98002</span>
</code></pre><p>Here is what the second record should look like:</p>
<pre><code><span class="hljs-symbol">Rita10002</span> Hill10002
<span class="hljs-number">10002</span> Ruby <span class="hljs-keyword">Street
</span><span class="hljs-keyword">Bellevue, </span>WA <span class="hljs-number">98002</span>
</code></pre><p>And so on up to Rita10250. Remember, you should auto-generate these
records in some kind of loop.</p>
<p>This should be enough to get you started. More information coming
soon.</p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it In</h2>
<p>You should submit your work by checking it into Git in a directory
called Week05-NodeExpressMongo.</p>
</div></body></html>