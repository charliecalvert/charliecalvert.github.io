<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>SocketTalk</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>SocketTalk</h1><p>Welcome to SocketTalk</p><ul><!--TOC_Start--><li><a href="#socket-talk">Socket Talk</a></li>
<li><a href="#create-app-js">Create App.js</a></li>
<li><a href="#control-js">Control.js</a></li>
<li><a href="#the-html">The HTML</a></li>
<li><a href="#the-css">The CSS</a></li>
<li><a href="#turn-it-in">Turn it In</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="socket-talk"></a>
<h1>Socket Talk</h1>
<p>Let&#39;s create a simple chat application.</p>
<a class="anchor" id="create-app-js"></a>
<h2>Create App.js</h2>
<p>This is the most stripped down Express server I could create and still support the tools we need to create a socket application with a reasonable architecture:</p>
<pre>var express = require('express');
var app = express();
var http = require('http').Server(app);
var path = require('path');
var io = require('socket.io')(http);

app.use(express.static(path.join(__dirname, 'public')));

app.get('/', function(req, res){
  res.sendFile(__dirname + '/index.html');
});

io.on('connection', function(socket){
    console.log('connection called');    
    socket.on('chatMessage', function(msg){
        console.log('Chat socket message: ', msg);        
        if (msg === "") {
            msg="Empty message sent.";
        }
        io.sockets.emit('chatMessage', msg);
    });
});

http.listen(30025, function(){
  console.log('listening on *:30025');
});
</pre>
<p>Notice this line:</p>
<pre>app.use(express.static(path.join(__dirname, 'public')));
</pre>
<p>It gives us the ability to serve pages out of a directory called <strong>public</strong>. This folder is a subdirectory of the project root. If the project is in <strong>/src</strong> then public is in <strong>/src/public</strong>.</p>
<a class="anchor" id="control-js"></a>
<h2>Control.js</h2>
<p>We need code to accept </p>
<pre>socket = io('localhost');
socket.on('chatMessage', function(msg){
     $('#info').prepend($('<li>').text(msg));
});
</pre>
<p>And here is how we send messages:</p>
<pre>socket.emit('chatMessage', $('#myInput').val());
</pre>
<a class="anchor" id="the-html"></a>
<h2>The HTML</h2>
<p>I&#39;m placing both the HTML and app.js in the root. Here is the HTML:</p>
<pre><!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <link href="css/Style.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="Control.js"></script>
  </head>
  <body>

    <div class="data">
        <input id="myInput" autocomplete="off" />
        <button id="chatButton">Chat</button>
    </div>

    <div id='messageDiv'>
        <ul id="info">
            <li>Start</li>
        </ul>
    </div>   

  </body>
</html>
</pre>
<a class="anchor" id="the-css"></a>
<h2>The CSS</h2>
<p>I put the CSS in a file called Styles.css and placed it in the <strong>public/css</strong> folder. It looks like this:</p>
<pre>
* { 
    margin: 0; 
    padding: 0; 
    box-sizing: border-box; 
}

body { 
    font: 21px sans; 
}

.data { 
    background: #ABA; 
    padding: 3px; 
    width: 100%; 
    border-radius: 12px;
}

.data input { 
    border: 0;    
    padding: 10px; 
    padding-top: 12px; 
    width: 90%; 
    margin-right: .5%; 
    margin-left: .5%; 
}

#chatButton { 
    width: 8.1%; 
    background: #787; 
    border: none; 
    padding: 5px; 
    color: white;
    font: 21px sans; 
}

#messageDiv {
    background-color: #bdb;
    border-radius: 12px;
}

#info { 
    list-style-type: none; 
    margin: 0; 
    padding: 1;
}

#info li { 
    border-radius: 12px;
    padding: 5px 10px; 
}

#info li:nth-child(odd) { 
    background: #bcb; 
}
</pre>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it In</h2>
<p>Create a Control.js file that works.</p>
<p>It should look something like this:</p>
<p><img src="https://drive.google.com/uc?export=view&amp;id=0B25UTAlOfPRGMDM3T3lCUkg0Z00" alt="look"> </p>
<p>We will also integrate chat into the final. At this stage, enter text can be only done in the GameListener.</p>
</div></body></html>