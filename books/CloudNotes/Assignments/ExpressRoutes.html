<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>ExpressRoutes</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><!-- script(src="/libs/scripts/Control.js")--><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>ExpressRoutes</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#create">Create</a></li>
<li><a href="#bower">Bower</a></li>
<li><a href="#server">Server</a></li>
<li><a href="#client">Client</a></li>
<li><a href="#add-method">Add method</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul><h2 id="overview">Overview</h2>
<p>Slide Deck: <a href="http://bit.ly/noderoutes">http://bit.ly/noderoutes</a></p>
<ul>
<li>The IP address gets you to the right machine (localhost)</li>
<li>The port gets you to the right program/service on that machine. Which in this case our express webserver running on port 30025</li>
<li>The route gets you to the right method in the service</li>
</ul>
<p>Suppose you write this URL:</p>
<p>  <a href="http://localhost:30025/read">http://localhost:30025/read</a></p>
<ul>
<li>The machine is localhost</li>
<li>The port is 30025</li>
<li>And the route is read (in index.js)</li>
</ul>
<h2 id="create">Create</h2>
<pre>
express Week04-ExpressRoutes
cd Week04-ExpressRoutes
npm install
</pre>

<p>The the usual list of items:</p>
<ul>
<li>Change the port in bin/www to 30025</li>
<li>Use nodemon in package.json</li>
<li>Change the title in routes/index.js to include your last name</li>
</ul>
<p>Put our DEBUG statement in the OS environment and start the app:</p>
<p></pre>
export DEBUG=Week04-ExpressRoutes:server
npm start
</pre></p>
<h2 id="bower">Bower</h2>
<pre>
bower init
cp $ELF_TEMPLATES/.bowerrc
bower install jquery --save
</pre>

<p>Then add jquery to <strong>layout.jade</strong>:</p>
<pre>
script(src='components/jquery/dist/jquery.js')
script(src="javascripts/control.js")
</pre>

<p>Add some buttons and a paragraph to <strong>index.jade</strong>:</p>
<pre>
button#read Read
button#readJson ReadJson

pre#display
</pre>

<h2 id="server">Server</h2>
<p>In <strong>routes/index.js:</strong></p>
<pre><code class="lang-javascript">router.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/read'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(request, response)</span> </span>{
  response.send([
    {name: <span class="hljs-string">'SarahLee'</span>},
    {name: <span class="hljs-string">'Bob'</span>}
  ]);
});
</code></pre>
<p>In <strong>public/names.json</strong>:</p>
<pre><code class="lang-json">[{
  "<span class="hljs-attr">name</span>": <span class="hljs-string">"FileLee"</span>
}, {
  "<span class="hljs-attr">name</span>": <span class="hljs-string">"FileBob"</span>
}]
</code></pre>
<h2 id="client">Client</h2>
<p>Make a call to the server in <strong>callRead</strong>:</p>
<pre><code class="lang-javascript">$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
   <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Document loaded in prog272'</span>);

   $(<span class="hljs-string">'#read'</span>).click(read);

   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">read</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'callRead called'</span>);
   }
});
</code></pre>
<p>Then add a <strong>callReadJson</strong> method:</p>
<pre><code class="lang-javascript">$(document).ready(function() {
   console.log('<span class="hljs-type">Document</span> loaded <span class="hljs-keyword">in</span> prog272');

   $('<span class="hljs-comment">#read').click(read);</span>
   $('<span class="hljs-comment">#readJson').click(readJson);</span>

   function read() {
      console.log('callRead called');
      foo();
      $.getJSON('/read', function(<span class="hljs-literal">result</span>) {
         console.log(<span class="hljs-literal">result</span>);
         $('<span class="hljs-comment">#display').html(JSON.stringify(result));</span>
      })
   }

   function callReadJson() {
      console.log('readJson called');
      $.getJSON('names.json', function(<span class="hljs-literal">result</span>) {
         console.log(<span class="hljs-literal">result</span>);
         $('<span class="hljs-comment">#display').html(JSON.stringify(result));</span>
      })
   }
});
</code></pre>
<h2 id="add-method">Add method</h2>
<p>Let&#39;s add an add method to our project. First on the server:</p>
<pre><code class="lang-javascript">router.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/add'</span> etc....)
</code></pre>
<p>And a button with an id of <strong>add</strong> to your jade. And set up a button response method in <strong>control.js</strong>.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> operatorA = $(<span class="hljs-string">'#operatorA'</span>).val();
      <span class="hljs-keyword">var</span> operatorB = $(<span class="hljs-string">'#operatorB'</span>).val();
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'operators:'</span>, operatorA, operatorB);
      <span class="hljs-keyword">var</span> requestQuery = { operatorA: operatorA, operatorB: operatorB };
</code></pre>
<p>Add two numeric <strong>INPUT</strong> controls and an <strong>add</strong> BUTTON to your page. When the user enters two numbers, then selects the button, a request should be sent to the server to add the two numbers. To do this, pass <strong>requestQuery</strong> as the second parameter to <strong>getJSON</strong>.</p>
<p>In the server side, use <strong>request.query</strong> to retrieve the parameters. Using <strong>parseInt</strong> as an aid, add the two numbers and then use the <strong>response</strong> object to send back the result. Display the output to the user. For instance, if the user enters 2 and 3, the server should add these numbers together and send back an object containing the value 5.</p>
<h2 id="turn-it-in">Turn it in</h2>
<p>Make sure your runs smoothly, push your work. If you did not use the folder specified above, please let me know.</p>
<p><strong>NOTE</strong>: <em>No nested project folders!</em></p>
</div></body></html>