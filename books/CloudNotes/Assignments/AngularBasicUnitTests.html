<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>AngularBasicUnitTests</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>AngularBasicUnitTests</h1><p>Welcome to AngularBasicUnitTests</p><ul><!--TOC_Start--><li><a href="#description">Description</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#intro">Intro</a></li>
<li><a href="#step-two">Step Two</a></li>
<li><a href="#step-three">Step Three</a></li>
<li><a href="#step-four">Step Four</a></li>
<li><a href="#step-five">Step Five</a></li>
<li><a href="#step-six">Step Six</a></li>
<li><a href="#turn-it-in-">Turn it in.</a></li>
<li><a href="#hint">Hint</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="description"></a>
<h2>Description</h2>
<p>This documents describes the Basic Unit Testing assignment.</p>
<a class="anchor" id="overview"></a>
<h2>Overview</h2>
<ul>
<li>Create an express project</li>
<li>Add in Angular</li>
<li>Use ControllerAs</li>
<li>Write Tests</li>
</ul>
<a class="anchor" id="intro"></a>
<h2>Intro</h2>
<p>First, be sure you have the <strong>elven-assignments</strong> repository. We have used it in previous assignments, so you probably have it on your system already. However, if you don&#39;t have it, you can get it like this:</p>
<pre>
cd ~/Git
git clone http://github.com/charliecalvert/elven-assignments.git
</pre>

<p>Assuming you have <strong>elven-assignments</strong>, you should make sure it is up to date. Then copy it to your repository:</p>
<pre>
cd  ~/Git/elven-assignments
git pull
</pre>

<p>Now copy the file to your repository:</p>
<pre>
# Do this once on Pristine Lubuntu or similar:
cp -r AngularJasmine/ ~/Git/progXXX-lastname-201X/Week03-AngularBasicUnitTest
# Do this once on Cloud9:
cp -r AngularJasmine/ ~/workspace/Week03-AngularBasicUnitTest
</pre>

<p>Now navigate to the copy of <strong>AngularJasmine</strong> in your repository. Don&#39;t use the one in my repository!</p>
<p>At the root of the project, type the following install our npm and bower packages. Note that we have bower packages in our test folder:</p>
<pre>
npm install && bower install && cd test && bower install
</pre>

<a class="anchor" id="step-two"></a>
<h2>Step Two</h2>
<p>To run the tests in the Cloud 9 editor, open <strong>test/index.html</strong> and select <strong>Run</strong></p>
<p>If you are using WebStorm, right click on <strong>test/index.html</strong>. Select <strong>Run</strong>.</p>
<p>To run the application, at the bash shell type <strong>npm start</strong>. In Cloud9 choose &quot;Preview running application.&quot;</p>
<a class="anchor" id="step-three"></a>
<h2>Step Three</h2>
<p>In this project we use Jasmine to compose a test suite called &quot;Angular Basic Tests.&quot; We put code like the following in <strong>test/spec/test.js</strong>:</p>
<pre><code class="lang-javascript">describe(<span class="hljs-string">'Angular Basic Tests'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
});
</code></pre>
<p>This code sets up a Jasmine Test Suite called &#39;Angular Basic Tests&#39;. We will place two things inside these suite:</p>
<ul>
<li>Our tests.<ul>
<li>These begin with a call to the function <strong>it()</strong></li>
</ul>
</li>
<li>Code to set up and tear down the environment in which we want our suites to run<ul>
<li>These include calls to <strong>beforeEach()</strong> and <strong>afterEach()</strong>. Those methods are called before and after each test.</li>
</ul>
</li>
</ul>
<p>Here we add code to load our Angular module before each test:</p>
<pre><code class="lang-javascript">describe(<span class="hljs-string">'Angular Basic Tests'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">    'use strict'</span>;

    beforeEach(<span class="hljs-built_in">module</span>(<span class="hljs-string">'elvenApp'</span>));

});
</code></pre>
<p>Then we add code to load our Angular Controller:</p>
<pre><code class="lang-javascript">describe(<span class="hljs-string">'Angular Basic Tests'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">    'use strict'</span>;

    <span class="hljs-keyword">var</span> elvenController, scope;

    beforeEach(<span class="hljs-built_in">module</span>(<span class="hljs-string">'elvenApp'</span>));

    <span class="hljs-comment">// Initialize the controller and a mock scope</span>
    beforeEach(inject(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$controller, $rootScope</span>) </span>{
        scope = $rootScope.$<span class="hljs-keyword">new</span>();
        elvenController = $controller(<span class="hljs-string">'ElvenController'</span>, {
            <span class="hljs-attr">$scope</span>: scope
        });
    }));
});
</code></pre>
<p>Finally, we use standard Jasmine syntax to declare three simple tests that prove we can load our Controller and access variables declared on our scope:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">/*global describe, it */</span>
describe(<span class="hljs-string">'Angular Basic Tests'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">    'use strict'</span>;

    <span class="hljs-keyword">var</span> elvenController, scope;

    beforeEach(<span class="hljs-built_in">module</span>(<span class="hljs-string">'elvenApp'</span>));

    <span class="hljs-comment">// Initialize the controller and a mock scope</span>
    beforeEach(inject(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$controller, $rootScope</span>) </span>{
        scope = $rootScope.$<span class="hljs-keyword">new</span>();
        elvenController = $controller(<span class="hljs-string">'ElvenController'</span>, {
            <span class="hljs-attr">$scope</span>: scope
        });
    }));

        it(<span class="hljs-string">'should prove we loaded jasmine'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        expect(<span class="hljs-literal">true</span>).toBe(<span class="hljs-literal">true</span>);
    });

    it(<span class="hljs-string">'should get a hint of eight characters'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        expect(elvenController.hint.length).toBe(<span class="hljs-number">8</span>);
    });

    it(<span class="hljs-string">'should set elvenController.hint to "My hint."'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        expect(elvenController.hint).toBe(<span class="hljs-string">'My hint.'</span>);
    });
});
</code></pre>
<p>These tests are designed to prove that our tests are working and that we can access our Controller. In and of themselves, they are not particularly useful.</p>
<a class="anchor" id="step-four"></a>
<h2>Step Four</h2>
<p>Note that in <strong>bower.json</strong> we use Jasmine 2.4.1.</p>
<p>In <strong>test/bower.json</strong>:</p>
<pre><code class="lang-javascript">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"angulartest"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.0.2"</span>,
  <span class="hljs-attr">"dependencies"</span>: {
    <span class="hljs-attr">"jasmine-core"</span>: <span class="hljs-string">"^2.4.1"</span>
  },
  <span class="hljs-attr">"devDependencies"</span>: {}
}
</code></pre>
<p>Note that in <strong>spec/index.html</strong> we load Jasmine, Angular and our tests:</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Jasmine Spec Runner<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"bower_components/jasmine-core/lib/jasmine-core/jasmine.css"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"bower_components/jasmine-core/lib/jasmine-core/jasmine.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"bower_components/jasmine-core/lib/jasmine-core/jasmine-html.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"bower_components/jasmine-core/lib/jasmine-core/boot.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>        

        <span class="hljs-comment">&lt;!-- include source files here... --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../public/components/angular/angular.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../public/components/angular-mocks/angular-mocks.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../public/javascripts/control.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- include spec files here... --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"spec/test.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>


    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>Refresh your browser to confirm its works. The image shown here is a bit out of date, but it gives the general idea of what you should see:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/angular-basic-unit-tests-01.png" alt="jasmine"></p>
<a class="anchor" id="step-five"></a>
<h2>Step Five</h2>
<p>Let&#39;s review the code in <strong>control.js</strong>. To create this file, I took the following steps:</p>
<ul>
<li>Created a file called <strong>public/javascripts/Control.js</strong></li>
<li>Create a simple angular controller using <strong>ControllerAs</strong></li>
<li>Add the <strong>ng-app</strong> and <strong>Control.js</strong> to <strong>views/layout.jade</strong></li>
<li>Add the controller to <strong>views/index.jade</strong></li>
</ul>
<p>In Control.js:</p>
<pre><code>(<span class="hljs-name">function</span>() {
    var app = angular.module(<span class="hljs-name">'elvenApp'</span>, [])<span class="hljs-comment">;</span>

    app.controller(<span class="hljs-name">'ElvenController'</span>, function() {
        var elvenController = this;

        elvenController.hint = <span class="hljs-string">"My hint."</span><span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

})()<span class="hljs-comment">;</span>
</code></pre><p>In <strong>layout.jade</strong> you will find something like this:</p>
<pre><code>    doctype html
html
  head
    title= title
    // Latest compiled and minified CSS
    link(<span class="hljs-name">rel=</span>'stylesheet', href='components/bootstrap/dist/css/bootstrap.min.css')
    link(<span class="hljs-name">rel=</span>'stylesheet', href='/stylesheets/style.css')
    // Optional theme
    link(<span class="hljs-name">rel=</span>'stylesheet', href='components/bootstrap/dist/css/bootstrap-theme.min.css')
    // JavaScript
    script(<span class="hljs-name">src=</span>'components/jquery/dist/jquery.js')
    script(<span class="hljs-name">src=</span>'components/bootstrap/dist/js/bootstrap.min.js')
    script(<span class="hljs-name">src=</span>'components/angular/angular.js')
    script(<span class="hljs-name">src=</span><span class="hljs-string">"javascripts/Control.js"</span>)

  body(<span class="hljs-name">data-ng-app=</span><span class="hljs-string">"elvenApp"</span>)
    block content
</code></pre><p>Make sure you have the following code in <strong>index.jade</strong>:</p>
<pre><code>extends layout

block content
  h1= title
  p Welcome to #{title}

  <span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">elvenController</span><span class="hljs-params">(<span class="hljs-variable">ng</span>-<span class="hljs-variable">controller</span>=<span class="hljs-string">"ElvenController as elvenController"</span>)</span></span>
    p {{elvenController.hint}}

</code></pre><a class="anchor" id="step-six"></a>
<h2>Step Six</h2>
<p>Create methods in your controller called <strong>square</strong> and <strong>add</strong>. They first should square a single parameter passed into it, the second should add the two parameters passed into it.</p>
<p>Write two tests to prove the methods work. The tests should have descriptions and matching code a bit like this:</p>
<ul>
<li>it(&quot;should square 5 and get 25&quot; etc....</li>
<li>it(&quot;should add 3 and 2 and get 5&quot; etc....</li>
</ul>
<p>Or to say the same thing a different way:</p>
<ul>
<li>Create a function called square that takes one parameter. Pass in the number 5.</li>
<li>Create a function called add, pass in two parameters: 3 and 2.</li>
</ul>
<p>The first should return 25, the second 5. For example here is a function called getNine that returns 9:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// In Control.js</span>
elvenController.getNine = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-number">9</span>;
}

<span class="hljs-comment">// In test.js</span>
it(<span class="hljs-string">'should get nine'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  expect(elvenController.getNine()).toBe(<span class="hljs-number">9</span>);
});
</code></pre>
<a class="anchor" id="turn-it-in-"></a>
<h2>Turn it in.</h2>
<p>Make sure you have saved your work in the proper folder of your repository. Submit your work and include a note stating the folder where you saved your work, particularly if it differs from the default value specified in this paragraph.</p>
<a class="anchor" id="hint"></a>
<h2>Hint</h2>
<p>Note that we set the power to port 30025 and we use <strong>nodemon</strong> rather than node:</p>
<ul>
<li>In <strong>bin/www</strong> we set the <strong>port</strong> to 30025.</li>
<li>In <strong>package.json</strong> we use <strong>nodemon</strong> in the <strong>start</strong> property of the <strong>scripts</strong> object.</li>
</ul>
<p>Note that we use angular and bootstrap:</p>
<p>First create <strong>.bowerrc</strong> and <strong>bower.json</strong>. To do so, make sure you have the most recent copy of JsObjects by running <strong>git pull</strong> at the root of the JsObjects folder.</p>
<p>Then do this:</p>
<pre><code>copy %ELF_TEMPLATES%\.<span class="hljs-keyword">bowerrc </span>.
copy %ELF_TEMPLATES%\<span class="hljs-keyword">bower.json </span>.
<span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span>angular --save
<span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span>angular-mocks --save
<span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span><span class="hljs-keyword">jquery </span>--save
<span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span><span class="hljs-keyword">bootstrap </span>--save
</code></pre></div></body></html>