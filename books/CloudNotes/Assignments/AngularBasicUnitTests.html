<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>AngularBasicUnitTests</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><!-- script(src="/libs/scripts/Control.js")--><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>AngularBasicUnitTests</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#description">Description</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#intro">Intro</a></li>
<li><a href="#step-two">Step Two</a></li>
<li><a href="#step-three">Step Three</a></li>
<li><a href="#step-four">Step Four</a></li>
<li><a href="#step-five">Step Five</a></li>
<li><a href="#step-six">Step Six</a></li>
<li><a href="#turn-it-in-">Turn it in.</a></li>
<li><a href="#hint">Hint</a></li><!--TOC_End--></ul><h2 id="description">Description</h2>
<p>This documents describes the Basic Unit Testing assignment. It belongs in a folder called <strong>Week05-AngularTests.</strong></p>
<h2 id="overview">Overview</h2>
<ul>
<li>Create an express project</li>
<li>Add in Angular</li>
<li>Use ControllerAs</li>
<li>Write Tests</li>
</ul>
<h2 id="intro">Intro</h2>
<p>First, be sure you have the <strong>elven-assignments</strong> repository. We have used it in previous assignments, so you probably have it on your system already. However, if you don&#39;t have it, you can get it like this:</p>
<pre>
cd ~/Git
git clone http://github.com/charliecalvert/elven-assignments.git
</pre>

<p>Assuming you have <strong>elven-assignments</strong>, you should make sure it is up to date. Then copy it to your repository:</p>
<pre>
cd  ~/Git/elven-assignments
git pull
</pre>

<p>Now copy the file to your repository:</p>
<pre>
# Do this once on Pristine Lubuntu or similar:
cp -r AngularJasmine/ ~/Git/progXXX-lastname-201X/Week03-AngularJasmine
# Do this once on Cloud9:
cp -r AngularJasmine/ ~/workspace/Week03-AngularJasmine
</pre>

<p>Now navigate to the copy of <strong>AngularJasmine</strong> in your repository. Don&#39;t use the one in my repository!</p>
<p>At the root of the project, type the following install our npm and bower packages. Note that we have bower packages in our test folder:</p>
<pre>
npm install && bower install && cd test && bower install
</pre>

<h2 id="step-two">Step Two</h2>
<p>Open the project in WebStorm or the Cloud 9 editor. Right click on <strong>test/index.html</strong>. Select <strong>Run</strong>.</p>
<p>Run the project itself from the project root:</p>
<pre><code><span class="hljs-built_in">npm</span> start
</code></pre><h2 id="step-three">Step Three</h2>
<p>In this project we use Jasmine to compose a test suite called &quot;Angular Basic Tests:&quot;</p>
<pre><code class="lang-javascript">describe(<span class="hljs-string">'Angular Basic Tests'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">        'use strict'</span>;
});
</code></pre>
<p>We add code to load our Angular module:</p>
<pre><code class="lang-javascript">describe(<span class="hljs-string">'Angular Basic Tests'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">        'use strict'</span>;

        beforeEach(<span class="hljs-built_in">module</span>(<span class="hljs-string">'elvenApp'</span>));

});
</code></pre>
<p>Then we add code to load our Angular Controller:</p>
<pre><code class="lang-javascript">describe(<span class="hljs-string">'Angular Basic Tests'</span>, <span class="hljs-keyword">function</span>() {
        <span class="hljs-string">'use strict'</span>;

        var elvenController, scope;

    beforeEach(module(<span class="hljs-string">'elvenApp'</span>));

    // Initialize the controller and a mock scope
    beforeEach(inject(function($controller, $rootScope) {
        scope = $rootScope.$new();
        elvenController = $controller(<span class="hljs-string">'ElvenController'</span>, {
            $scope: scope
        });
    }));
});
</code></pre>
<p>Finally, we use standard Jasmine syntax to declare three simple tests that prove we can load our Controller and access variables declared on our scope:</p>
<pre><code>/*global describe, it */
describe(<span class="hljs-string">'Angular Basic Tests'</span>, <span class="hljs-keyword">function</span>() {
        <span class="hljs-string">'use strict'</span>;

        var elvenController, scope;

    beforeEach(module(<span class="hljs-string">'elvenApp'</span>));

    // Initialize the controller and a mock scope
    beforeEach(inject(function($controller, $rootScope) {
        scope = $rootScope.$new();
        elvenController = $controller(<span class="hljs-string">'ElvenController'</span>, {
            $scope: scope
        });
    }));

        it(<span class="hljs-string">'should prove we loaded jasmine'</span>, function() {
        expect(true).toBe(true);
    });

    it(<span class="hljs-string">'should get a hint of eight characters'</span>, function() {
        expect(elvenController.hint.length).toBe(<span class="hljs-number">8</span>);
    });

    it(<span class="hljs-string">'should set elvenController.hint to "My hint."'</span>, function() {
        expect(elvenController.hint).toBe(<span class="hljs-string">'My hint.'</span>);
    });
});
</code></pre><p>These tests are designed to prove that our tests are working and that we can access our Controller. In and of themselves, they are not particularly useful.</p>
<h2 id="step-four">Step Four</h2>
<p>Note that in <strong>bower.json</strong> we use Jasmine 2.4.1.</p>
<p>In <strong>test/bower.json</strong>:</p>
<pre><code>{
  "<span class="hljs-attr">name</span>": <span class="hljs-string">"angulartest"</span>,
  "<span class="hljs-attr">version</span>": <span class="hljs-string">"0.0.2"</span>,
  "<span class="hljs-attr">dependencies</span>": {
    "<span class="hljs-attr">jasmine-core</span>": <span class="hljs-string">"^2.4.1"</span>
  },
  "<span class="hljs-attr">devDependencies</span>": {}
}
</code></pre><p>Note that in <strong>spec/index.html</strong> we load Jasmine, Angular and our tests:</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Jasmine Spec Runner<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"bower_components/jasmine-core/lib/jasmine-core/jasmine.css"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"bower_components/jasmine-core/lib/jasmine-core/jasmine.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"bower_components/jasmine-core/lib/jasmine-core/jasmine-html.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"bower_components/jasmine-core/lib/jasmine-core/boot.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>        

        <span class="hljs-comment">&lt;!-- include source files here... --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../public/components/angular/angular.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../public/components/angular-mocks/angular-mocks.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../public/javascripts/control.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- include spec files here... --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"spec/test.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>


    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>Refresh your browser to confirm its works. The image shown here is a bit out of date, but it gives the general idea of what you should see:</p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/angular-basic-unit-tests-01.png" alt="jasmine"></p>
<h2 id="step-five">Step Five</h2>
<p>If it has not been done already, create a file to test. Otherwise, just review the existing copy of <strong>control.js</strong>.</p>
<ul>
<li>Create a file called <strong>public/javascripts/Control.js</strong></li>
<li>Create a simple angular controller using <strong>ControllerAs</strong></li>
<li>Add the <strong>ng-app</strong> and <strong>Control.js</strong> to <strong>views/layout.jade</strong></li>
<li>Add the controller to <strong>views/index.jade</strong></li>
</ul>
<p>In Control.js:</p>
<pre><code>(<span class="hljs-name">function</span>() {
    var app = angular.module(<span class="hljs-name">'elvenApp'</span>, [])<span class="hljs-comment">;</span>

    app.controller(<span class="hljs-name">'ElvenController'</span>, function() {
        var elvenController = this;

        elvenController.hint = <span class="hljs-string">"My hint."</span><span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

})()<span class="hljs-comment">;</span>
</code></pre><p>Or:</p>
<pre><code>    copy %ELF_TEMPLATES%\AngularControl.js public\javascripts\<span class="hljs-keyword">control</span>.js
</code></pre><p>In <strong>layout.jade</strong>:</p>
<pre><code>    doctype html
html
  head
    title= title
    // Latest compiled and minified CSS
    link(<span class="hljs-name">rel=</span>'stylesheet', href='components/bootstrap/dist/css/bootstrap.min.css')
    link(<span class="hljs-name">rel=</span>'stylesheet', href='/stylesheets/style.css')
    // Optional theme
    link(<span class="hljs-name">rel=</span>'stylesheet', href='components/bootstrap/dist/css/bootstrap-theme.min.css')
    // JavaScript
    script(<span class="hljs-name">src=</span>'components/jquery/dist/jquery.js')
    script(<span class="hljs-name">src=</span>'components/bootstrap/dist/js/bootstrap.min.js')
    script(<span class="hljs-name">src=</span>'components/angular/angular.js')
    script(<span class="hljs-name">src=</span><span class="hljs-string">"javascripts/Control.js"</span>)

  body(<span class="hljs-name">ng-app=</span><span class="hljs-string">"elvenApp"</span>)
    block content
</code></pre><p>Or:</p>
<pre><code>copy %ELF_TEMPLATES%\AngularLayout.jade views\<span class="hljs-keyword">layout</span>.jade
</code></pre><p>Make sure you have the following code in <strong>index.jade</strong>:</p>
<pre><code>extends layout

block content
  h1= title
  p Welcome to <span class="hljs-comment">#{title}</span>

  <span class="hljs-comment">#elvenController(ng-controller="ElvenController as elvenController")</span>
    p <span class="hljs-template-variable">{{elvenController.hint}}</span>
</code></pre><p>Or:</p>
<pre><code><span class="hljs-selector-tag">copy</span> %<span class="hljs-selector-tag">ELF_TEMPLATES</span>%\<span class="hljs-selector-tag">AngularIndex</span><span class="hljs-selector-class">.jade</span> <span class="hljs-selector-tag">views</span>\<span class="hljs-selector-tag">index</span><span class="hljs-selector-class">.jade</span>
</code></pre><h2 id="step-six">Step Six</h2>
<p>Create methods in your controller called <strong>square</strong> and <strong>add</strong>. They first should square a single parameter passed into it, the second should add the two parameters passed into it.</p>
<p>Write two tests to prove the methods work. The tests should have descriptions and matching code a bit like this:</p>
<ul>
<li>it(&quot;should square 5 and get 25&quot; etc....</li>
<li>it(&quot;should add 3 and 2 and get 5&quot; etc....</li>
</ul>
<h2 id="turn-it-in-">Turn it in.</h2>
<p>Save your work in a folder of your repository called <strong>Week03-AngularTests</strong>. Submit your work and include a note stating the folder where you saved your work, particularly if it differs from the default value specified in this paragraph.</p>
<h2 id="hint">Hint</h2>
<p>Note that we set the power to port 30025 and we use <strong>nodemon</strong> rather than node:</p>
<ul>
<li>In <strong>bin/www</strong> we set the <strong>port</strong> to 30025.</li>
<li>In <strong>package.json</strong> we use <strong>nodemon</strong> in the <strong>start</strong> property of the <strong>scripts</strong> object.</li>
</ul>
<p>Note that we use angular and bootstrap:</p>
<p>First create <strong>.bowerrc</strong> and <strong>bower.json</strong>. To do so, make sure you have the most recent copy of JsObjects by running <strong>git pull</strong> at the root of the JsObjects folder.</p>
<p>Then do this:</p>
<pre><code>copy %ELF_TEMPLATES%\.<span class="hljs-keyword">bowerrc </span>.
copy %ELF_TEMPLATES%\<span class="hljs-keyword">bower.json </span>.
<span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span>angular --save
<span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span>angular-mocks --save
<span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span><span class="hljs-keyword">jquery </span>--save
<span class="hljs-keyword">bower </span><span class="hljs-keyword">install </span><span class="hljs-keyword">bootstrap </span>--save
</code></pre></div></body></html>