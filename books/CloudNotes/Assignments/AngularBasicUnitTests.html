<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>AngularBasicUnitTests</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>AngularBasicUnitTests</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#description">Description</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#intro">Intro</a></li>
<li><a href="#step-one-option-a">Step One Option A</a></li>
<li><a href="#step-one-optionb">Step One OptionB</a></li>
<li><a href="#step-two">Step Two</a></li>
<li><a href="#step-three">Step Three</a></li>
<li><a href="#step-four">Step Four</a></li>
<li><a href="#step-five">Step Five</a></li>
<li><a href="#turn-it-in-">Turn it in.</a></li><!--TOC_End--></ul><h2 id="description">Description</h2>
<p>This documents describes the Basic Unit Testing assignment. It belongs in a folder called <strong>Week05-AngularTests.</strong></p>
<h2 id="overview">Overview</h2>
<ul>
<li>Create an express project</li>
<li>Add in Angular</li>
<li>Use ControllerAs</li>
<li>Write Tests</li>
</ul>
<h2 id="intro">Intro</h2>
<p>Find <strong>GetAngularTests.bat</strong> from this folder:</p>
<pre><code>C:<span class="hljs-command">\Users</span><span class="hljs-command">\charles</span>.calvert<span class="hljs-command">\Git</span><span class="hljs-command">\JsObjects</span><span class="hljs-command">\Utilities</span><span class="hljs-command">\SetupWindows</span>
</code></pre><p>Copy it to your %USERPROFILE%/Bin folder.</p>
<p>Then naviage to the root of your repository and type:</p>
<pre><code>GetAngularTests
</code></pre><p>Let&#39;s begin by examing two ways to create an express program that includes
angular.</p>
<h2 id="step-one-option-a">Step One Option A</h2>
<p>Find GetAngularTests.bat from this folder:</p>
<pre><code>C:<span class="hljs-command">\Users</span><span class="hljs-command">\charles</span>.calvert<span class="hljs-command">\Git</span><span class="hljs-command">\JsObjects</span><span class="hljs-command">\Utilities</span><span class="hljs-command">\SetupWindows</span>
</code></pre><p>Copy it to your %USERPROFILE%/Bin folder.</p>
<p>Then naviagate to the root of your repository and type:</p>
<pre><code>GetAngularTests
</code></pre><h2 id="step-one-optionb">Step One OptionB</h2>
<p>Here is an alternative way to achieve the same result as in the previous step:</p>
<pre><code>git <span class="hljs-built_in">clone</span> http://github.com/charliecalvert/AngularJasmine.git
<span class="hljs-built_in">cd</span> AngularJasmine    
<span class="hljs-built_in">cd</span> <span class="hljs-built_in">test</span>
bower install
<span class="hljs-built_in">cd</span> ..
npm install &amp; bower install &amp; npm start
</code></pre><p>And then delete the .git folder:</p>
<pre><code>rmdir /s /<span class="hljs-tag">q</span> .git
</code></pre><p>And then delete the .git folder:</p>
<pre><code>rmdir /s /<span class="hljs-tag">q</span> .git
</code></pre><h2 id="step-two">Step Two</h2>
<p>Open the project in WebStorm. Right click on <strong>test/index.html</strong>. Select <strong>Run</strong>.</p>
<p>If not done already, set up the project:</p>
<ul>
<li>In <strong>bin/www</strong> set the <strong>port</strong> to 30025. </li>
<li>In <strong>package.json</strong> use <strong>nodemon</strong> in the <strong>start</strong> property of the <strong>scripts</strong> object.</li>
</ul>
<p>If not done already, install angular:</p>
<p>First create <strong>.bowerrc</strong> and <strong>bower.json</strong>. To do so, make sure you have the most recent copy of JsObjects by running <strong>git pull</strong> at the root of the JsObjects folder.</p>
<p>Then do this:</p>
<pre><code>copy %ELF_TEMPLATES%\.bowerrc .
copy %ELF_TEMPLATES%\bower.json .
bower <span class="hljs-operator"><span class="hljs-keyword">install</span> angular <span class="hljs-comment">--save</span>
bower <span class="hljs-keyword">install</span> angular-mocks <span class="hljs-comment">--save</span>
bower <span class="hljs-keyword">install</span> jquery <span class="hljs-comment">--save</span>
bower <span class="hljs-keyword">install</span> bootstrap <span class="hljs-comment">--save</span></span>
</code></pre><p>Run the project itself from the project root:</p>
<pre><code>npm <span class="hljs-operator"><span class="hljs-keyword">install</span> &amp; bower <span class="hljs-keyword">install</span> &amp; npm <span class="hljs-keyword">start</span></span>
</code></pre><h2 id="step-three">Step Three</h2>
<p>If it has not be done for you automatically, upgrade to Jasmine 2.3.</p>
<p>In <strong>test/bower.json</strong>:</p>
<pre><code><span class="hljs-string">"dependencies"</span>: {
      <span class="hljs-string">"jasmine"</span>: <span class="hljs-string">"~2.3.0"</span>
  },
</code></pre><p>At command line, in <strong>test</strong>, run <strong>bower install</strong>:</p>
<pre><code>&gt;bower install
bower cached        git:<span class="hljs-comment">//github.com/pivotal/jasmine.git#2.3.0</span>
bower validate      <span class="hljs-number">2.3</span><span class="hljs-number">.0</span> against git:<span class="hljs-comment">//github.com/pivotal/jasmine.git#~2.3.0</span>
bower <span class="hljs-keyword">new</span>           version <span class="hljs-keyword">for</span> git:<span class="hljs-comment">//github.com/pivotal/jasmine.git#~2.3.0</span>
bower resolve       git:<span class="hljs-comment">//github.com/pivotal/jasmine.git#~2.3.0</span>
bower download      https:<span class="hljs-comment">//github.com/pivotal/jasmine/archive/v2.3.1.tar.gz</span>
bower extract       jasmine<span class="hljs-preprocessor">#~<span class="hljs-number">2.3</span><span class="hljs-number">.0</span> archive.tar.gz</span>
bower resolved      git:<span class="hljs-comment">//github.com/pivotal/jasmine.git#2.3.1</span>
bower install       jasmine<span class="hljs-preprocessor">#<span class="hljs-number">2.3</span><span class="hljs-number">.1</span></span>

jasmine<span class="hljs-preprocessor">#<span class="hljs-number">2.3</span><span class="hljs-number">.1</span> bower_components\jasmine</span>
</code></pre><p>In <strong>test/index.html</strong> remove the module pattern designed to initialize Jasmine 3.0. Delete this:</p>
<pre><code>  <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
            (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> jasmineEnv = jasmine.getEnv();
                jasmineEnv.updateInterval = <span class="hljs-number">1000</span>;
                <span class="hljs-keyword">var</span> htmlReporter = <span class="hljs-keyword">new</span> jasmine.HtmlReporter();
                jasmineEnv.addReporter(htmlReporter);
                jasmineEnv.specFilter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">spec</span>) </span>{
                    <span class="hljs-keyword">return</span> htmlReporter.specFilter(spec);
                };
                <span class="hljs-keyword">var</span> currentWindowOnload = <span class="hljs-built_in">window</span>.onload;
                <span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">if</span> (currentWindowOnload) {
                        currentWindowOnload();
                    }
                    execJasmine();
                };
                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execJasmine</span>(<span class="hljs-params"></span>) </span>{
                    jasmineEnv.execute();
                }
            })();
        </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre><p>Replace the above code by loading <strong>boot.js</strong>:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"bower_components/jasmine/lib/jasmine-core/jasmine.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"bower_components/jasmine/lib/jasmine-core/jasmine-html.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"bower_components/jasmine/lib/jasmine-core/boot.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre><p>In <strong>index.html</strong>:</p>
<pre><code>        <span class="hljs-comment">&lt;!-- include source files here... --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../public/components/angular/angular.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../public/components/angular-mocks/angular-mocks.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../public/javascripts/control.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre><p>Refresh your browser to confirm its works:</p>
<p><img src="https://drive.google.com/uc?id=1_a10tc7BcVR1uNfH6I6-uJq8W9nNRGvcXg" alt="jasmine"></p>
<p>Create our test:</p>
<pre><code><span class="hljs-comment">/*global describe, it */</span>
<span class="hljs-pi">'use strict'</span>;

(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">
    'use strict'</span>;

    <span class="hljs-keyword">var</span> elvenController, scope;

    describe(<span class="hljs-string">'Integration Tests'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

        beforeEach(<span class="hljs-built_in">module</span>(<span class="hljs-string">'elvenApp'</span>));

        <span class="hljs-comment">// Initialize the controller and a mock scope</span>
        beforeEach(inject(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$controller, $rootScope</span>) </span>{
            scope = $rootScope.$<span class="hljs-keyword">new</span>();
            elvenController = $controller(<span class="hljs-string">'ElvenController'</span>, {
                $scope: scope
            });
        }));

        it(<span class="hljs-string">'should prove we loaded chai'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            expect(<span class="hljs-literal">true</span>).toBe(<span class="hljs-literal">true</span>);
        });

        it(<span class="hljs-string">'should get a hint'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            expect(elvenController.hint.length).toBe(<span class="hljs-number">8</span>);
        });
    });
})();
</code></pre><pre><code><span class="hljs-built_in">copy</span> <span class="bash">%ELF_TEMPLATES%\AngularTestSpec.js <span class="hljs-built_in">test</span>\spec\test.js</span>
</code></pre><h2 id="step-four">Step Four</h2>
<p>If it has not been done already, create a file to test. Otherwise, just review the existing copy of <strong>control.js</strong>.</p>
<ul>
<li>Create a file called <strong>public/javascripts/Control.js</strong></li>
<li>Create a simple angular controller using <strong>ControllerAs</strong></li>
<li>Add the <strong>ng-app</strong> and <strong>Control.js</strong> to <strong>views/layout.jade</strong></li>
<li>Add the controller to <strong>views/index.jade</strong> </li>
</ul>
<p>In Control.js:</p>
<pre><code><span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">()</span> <span class="hljs-collection">{
    var app = angular.module<span class="hljs-list">(<span class="hljs-keyword">'elvenApp'</span>, <span class="hljs-collection">[]</span>)</span><span class="hljs-comment">;</span>

    app.controller<span class="hljs-list">(<span class="hljs-keyword">'ElvenController'</span>, function<span class="hljs-list">()</span> <span class="hljs-collection">{
        var elvenController = this;

        elvenController.hint = <span class="hljs-string">"My hint."</span><span class="hljs-comment">;</span>
    }</span>)</span><span class="hljs-comment">;</span>

}</span>)</span><span class="hljs-list">()</span><span class="hljs-comment">;</span>
</code></pre><p>Or:</p>
<pre><code>    copy <span class="hljs-variable">%ELF_TEMPLATES</span><span class="hljs-variable">%\</span>AngularControl.js public\javascripts\<span class="hljs-keyword">control</span>.js
</code></pre><p>In <strong>layout.jade</strong>:</p>
<pre><code>    doctype <span class="hljs-tag">html</span>
<span class="hljs-tag">html</span>
  head
    title= title
    <span class="hljs-comment">// Latest compiled and minified CSS</span>
    <span class="hljs-function"><span class="hljs-title">link</span><span class="hljs-params">(rel=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'components/bootstrap/dist/css/bootstrap.min.css'</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">link</span><span class="hljs-params">(rel=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'/stylesheets/style.css'</span>)</span></span>
    <span class="hljs-comment">// Optional theme</span>
    <span class="hljs-function"><span class="hljs-title">link</span><span class="hljs-params">(rel=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'components/bootstrap/dist/css/bootstrap-theme.min.css'</span>)</span></span>
    <span class="hljs-comment">// JavaScript</span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">'components/jquery/dist/jquery.js'</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">'components/bootstrap/dist/js/bootstrap.min.js'</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">'components/angular/angular.js'</span>)</span></span>
    <span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(src=<span class="hljs-string">"javascripts/Control.js"</span>)</span></span>

  <span class="hljs-function"><span class="hljs-title">body</span><span class="hljs-params">(ng-app=<span class="hljs-string">"elvenApp"</span>)</span></span>
    block <span class="hljs-attribute">content</span>
</code></pre><p>Or:</p>
<pre><code>copy <span class="hljs-variable">%ELF_TEMPLATES</span><span class="hljs-variable">%\</span>AngularLayout.jade views\<span class="hljs-keyword">layout</span>.jade
</code></pre><p>Make sure you have the following code in <strong>index.jade</strong>:</p>
<pre><code>extends layout

block content
  h1= title
  p <span class="hljs-constant">Welcome</span> to <span class="hljs-comment">#{title}</span>

  <span class="hljs-comment">#elvenController(ng-controller="ElvenController as elvenController")</span>
    p <span class="hljs-expansion">{{elvenController.hint}}</span>
</code></pre><p>Or: </p>
<pre><code><span class="hljs-tag">copy</span> %<span class="hljs-tag">ELF_TEMPLATES</span>%\<span class="hljs-tag">AngularIndex</span><span class="hljs-class">.jade</span> <span class="hljs-tag">views</span>\<span class="hljs-tag">index</span><span class="hljs-class">.jade</span>
</code></pre><h2 id="step-five">Step Five</h2>
<p>Create methods in your controller called <strong>square</strong> and <strong>add</strong>. They first should square a single parameter passed into it, the second should add the two parameters passed into it.</p>
<p>Write two tests to prove the methods work. The tests should have descriptions and matching code a bit like this:</p>
<ul>
<li>it(&quot;should square 5 and get 25&quot; etc....</li>
<li>it(&quot;should add 3 and 2 and get 5&quot; etc....</li>
</ul>
<h2 id="turn-it-in-">Turn it in.</h2>
<p>Save your work in a folder of your repository called <strong>Week05-AngularTests</strong>. Submit your work and include a note stating the folder where you saved your work, particularly if it differs from the default value specified in this paragraph. </p>
</div></body></html>