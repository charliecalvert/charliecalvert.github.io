<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>Prog272Midterm2016</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><!-- script(src="/libs/scripts/Control.js")--><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>Prog272Midterm2016</h1><p>Welcomes to Prog272Midterm2016</p><ul><!--TOC_Start--><li><a href="#renewables-refactor">Renewables Refactor</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#energy-json">Energy Json</a></li>
<li><a href="#energy-view">Energy View</a></li>
<li><a href="#hints">Hints</a></li>
<li><a href="#page-steps">Create New Page Steps</a></li>
<li><a href="#testing">Testing</a></li><!--TOC_End--></ul><h2 id="renewables-refactor">Renewables Refactor</h2>
<p>Time to refactor</p>
<h2 id="overview">Overview</h2>
<p>We are now turning a major corner in the course. Rather than learning new technologies, we are going to spend most of our time refactoring code and adding new features.</p>
<p>A well designed architecture supports the <a href="https://en.wikipedia.org/wiki/Open/closed_principle">Open Closed Principle</a>:</p>
<ul>
<li><em><strong>Modules, Classes and Functions should be open to extension by closed to modification.</strong></em></li>
</ul>
<p>Along with <a href="https://en.wikipedia.org/wiki/Loose_coupling">loose coupling</a> the <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">single-responsibility princeple</a> and <a href="https://en.wikipedia.org/wiki/Test-driven_development">TDD</a> the open closed principle is one of the foundations of good software design. My classes are not really about Linux, git, Angular, jQuery, or express. They are about how to build applications using our core ideas:</p>
<ul>
<li><a href="http://agiledata.org/essays/tdd.html">Test Driven Development (TDD)</a></li>
<li><a href="http://edn.embarcadero.com/article/30372">Loose Coupling</a></li>
<li><a href="http://www.oodesign.com/single-responsibility-principle.html">The Single Responsibility Principle</a></li>
<li><a href="http://www.oodesign.com/open-close-principle.html">The Open Closed Principle</a></li>
</ul>
<p>Another important design principle not emphasized in this class is the <a href="http://www.oodesign.com/dependency-inversion-principle.html">Dependency Inversion Principle</a>.</p>
<p>Slide decks that might be useful:</p>
<ul>
<li>Agile Overview: <a href="http://bit.ly/1qf6V4t">http://bit.ly/1qf6V4t</a></li>
<li>Refactoring: <a href="http://bit.ly/elfrefactor">http://bit.ly/elfrefactor</a></li>
</ul>
<p>As a general rule, these are the rules, ideas and guiding principles that make possible agile development:</p>
<ul>
<li><a href="http://www.agilemanifesto.org/">http://www.agilemanifesto.org/</a></li>
<li><a href="http://www.agilemanifesto.org/principles.html">http://www.agilemanifesto.org/principles.html</a></li>
</ul>
<h2 id="energy-json">Energy Json</h2>
<p>We now want to start working with the file called <strong>data/RenewableTypes.json</strong>. I for see a problem here that we ought to address right off. We are already working with a file called <strong>Renewables</strong>. It will be too confusing if we are always trying to distinguish between <strong>RenewablesTypesByYear</strong> and <strong>RenewablesByYear</strong>. To avoid this, let&#39;s use <strong>git mv</strong> to rename  <strong>data/RenewableTypes.json</strong> to <strong>data/HighTechEnergy.json</strong>.</p>
<h2 id="energy-view">Energy View</h2>
<p>It is now time to start viewing and working with <strong>HighTechEnergy.json</strong>.</p>
<p>Clearly partition the <em>energy</em> files from the rest by creating a folders called <strong>high-tech-energy</strong> in <strong>public/javascripts</strong> and <strong>views</strong>.</p>
<p>Put the following files in <strong>public/javascript/high-tech-energy</strong>:</p>
<ul>
<li>energy-overview.js  </li>
<li>energy-types.js  </li>
<li>msn-types.js</li>
</ul>
<p>In <strong>views/high-tech-energy</strong>, place these files</p>
<ul>
<li>energy-overview-page.jade</li>
<li>energy-types-page.jade</li>
</ul>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/prog272-midterm-2016-02.png" alt="Part Way"></p>
<p><strong>Figure 01</strong>: <em>Just getting far enough to see you can load the data.</em></p>
<p><img src="https://s3.amazonaws.com/bucket01.elvenware.com/images/prog272-midterm-2016-01.png" alt="Part Way"></p>
<p><strong>Figure 02</strong>: <em>Just getting far enough to see you can load the types.</em></p>
<h2 id="hints">Hints</h2>
<p>Be sure you renamed work.js to home.js. Rename all associated buttons, menus and files.</p>
<h3 id="page-steps">Create New Page Steps</h3>
<p>Executive Summary</p>
<p>In <strong>public/javascripts</strong></p>
<ul>
<li>Modify <strong>control.js</strong></li>
<li>Create your file for your page: <strong>renewables-index</strong></li>
<li>In <strong>main.js</strong>: load <strong>renewables-index</strong></li>
</ul>
<p>In Views:</p>
<ul>
<li>Create corresponding jade file: <strong>renewables-by-index.jade</strong></li>
<li>Add launch button or menu item to <strong>index.jade</strong></li>
</ul>
<p>See this project: <a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/UnitTests/JasmineRequireJs">Jasmine Require Js</a></p>
<h2 id="testing">Testing</h2>
<p>Again, see this project: <a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/UnitTests/JasmineRequireJs">Jasmine Require Js</a></p>
<pre>
npm install karma-requirejs --save-dev
npm install requirejs --save-dev
npm install jasmine-jquery --save-dev
</pre>

<p>We need to create a requirejs file explicitly for our tests. Call the file <strong>spec/main-test.js</strong>.</p>
<pre><code class="lang-javascript"><span class="hljs-comment">/**
 * @author Charlie Calvert
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadTestsIntoArray</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> tests = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> file <span class="hljs-keyword">in</span> <span class="hljs-built_in">window</span>.__karma__.files) {
        <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/test-/</span>.test(file)) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Loaded test:'</span>, file);
            tests.push(file);
        }
    }
    <span class="hljs-keyword">return</span> tests;
}

<span class="hljs-built_in">require</span>.config({
    baseUrl: <span class="hljs-string">'/base'</span>,

    paths: {
        control: <span class="hljs-string">'public/javascripts/control'</span>,
        home: <span class="hljs-string">'public/javascripts/home'</span>,
        renewables: <span class="hljs-string">'public/javascripts/renewables/renewables'</span>,
        <span class="hljs-comment">// THE REST LEFT AS AN EXERCISE</span>
    },
    deps: loadTestsIntoArray(),
    callback: <span class="hljs-built_in">window</span>.__karma__.start
});
</code></pre>
<p>It is one of the oddities of karma that <strong>/base</strong> points to the root of your project.</p>
<p>Your <strong>karma.conf.js</strong> file should explicitly load <strong>main-test.js</strong> and explicitly ignore <strong>public/javascripts/main.js</strong>.</p>
<pre><code class="lang-javascript"><span class="hljs-string">frameworks:</span> [<span class="hljs-string">'jasmine'</span>, <span class="hljs-string">'requirejs'</span>],
<span class="hljs-symbol">
files:</span> [
    <span class="hljs-string">'public/components/jquery/dist/jquery.min.js'</span>,
    <span class="hljs-comment">//'public/components/requirejs/require.js',</span>
    <span class="hljs-string">'node_modules/jasmine-jquery/lib/*.js'</span>,
    {
        <span class="hljs-string">pattern :</span> <span class="hljs-string">'spec/test-*.js'</span>,
        <span class="hljs-string">included :</span> <span class="hljs-literal">false</span>
    }, {
        <span class="hljs-string">pattern :</span> <span class="hljs-string">'public/javascripts/**/*.js'</span>,
        <span class="hljs-string">included :</span> <span class="hljs-literal">false</span>
    },
    <span class="hljs-string">'spec/main-test.js'</span>,
    <span class="hljs-string">'*.html'</span>
],

<span class="hljs-comment">// list of files to exclude</span>
<span class="hljs-string">exclude:</span> [<span class="hljs-string">'public/javascripts/main.js'</span>],
</code></pre>
<p>Remove the <strong>plugins</strong> section from the end of <strong>karma.conf.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-attribute">singleRun</span>: false,

<span class="sml">/*
  <span class="hljs-type">YOU</span> <span class="hljs-type">CAN</span> <span class="hljs-type">JUST</span> <span class="hljs-type">DELETE</span> <span class="hljs-type">IT</span>, <span class="hljs-type">BUT</span> <span class="hljs-type">I</span> <span class="hljs-type">WANT</span> <span class="hljs-type">TO</span> <span class="hljs-type">SHOW</span> <span class="hljs-type">YOU</span> <span class="hljs-type">WHAT</span> <span class="hljs-type">TO</span> <span class="hljs-type">DELETE</span>
plugins: [<span class="hljs-symbol">'karma</span>-jasmine',
    <span class="hljs-symbol">'karma</span>-spec-reporter',
    <span class="hljs-symbol">'karma</span>-phantomjs-launcher',
    <span class="hljs-symbol">'karma</span>-chrome-launcher'
] */</span>
</code></pre>
<p>A simple test of the home page would look like this:</p>
<pre><code class="lang-javascript">define([<span class="hljs-string">'home'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">home</span>) </span>{


    describe(<span class="hljs-string">'Home Page Suite'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">
        'use strict'</span>;

        it(<span class="hljs-string">'expects true to be true'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            expect(<span class="hljs-literal">true</span>).toBe(<span class="hljs-literal">true</span>);
        });

        it(<span class="hljs-string">'expects home.color to be red'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            expect(home.color).toBe(<span class="hljs-string">'red'</span>);
        });

        it(<span class="hljs-string">'expects home.size to be big'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            expect(home.size).toBe(<span class="hljs-string">'big'</span>);
        });

    });

});
</code></pre>
<p>In general, you will find the tests here:</p>
<ul>
<li>JsObjects/Utilities/Templates/UnitTest/SolarVoyager</li>
</ul>
<p>Check regularly for updates. All the tests should pass.</p>
</div></body></html>