<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>BashExpressScript</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><script src="/libs/scripts/Control.js"></script><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/charlie/About.html">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/charlie/development/index.html">Strongly Typed</a></li><li><a href="/charlie/development/web/index.html">Web & Scripts</a></li><li><a href="/charlie/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/charlie/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>BashExpressScript</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#navigate">Step One: Learn to Navigate</a></li>
<li><a href="#linux-less">The Linux less Command</a></li>
<li><a href="#available">Step Two: What&#39;s Available</a></li>
<li><a href="#create-express-project">Step Three: Create Express Project</a></li>
<li><a href="#system-check">Step Four: System Check</a></li>
<li><a href="#aliases">Step Five: Aliases</a></li>
<li><a href="#turn-it-in">Turn it in</a></li><!--TOC_End--></ul><h2 id="overview">Overview</h2>
<p>Bash scripts help you automate tasks. Knowing how to create even relatively simple bash scripts can make you significantly more productive. The goal of this assignment is to help you learn how to run and create simple bash scripts.</p>
<p>This assignment assumes that you have installed my collection of sample programs called <a href="https://github.com/charliecalvert/JsObjects/blob/master/README.md">JsObjects</a> on your system.</p>
<p>In particular, read the section on Navigating JsObjects.</p>
<h2 id="navigate">Step One: Learn to Navigate</h2>
<p>Let&#39;s take a few moments to be sure you know a little bit about how to navigate through your clone of the JsObjects repository. As you learned in the JsObjects README file, navigation through JsObjects relies upon code found in your <strong>.bash_aliases</strong> file.</p>
<p><strong>NOTE</strong>: _Recall that you can find my <a href="https://github.com/charliecalvert/JsObjects/blob/master/Utilities/SetupLinuxBox/.bash_aliases">.bash_aliases</a> file on GitHub._</p>
<p>If your <strong>.bash_aliases</strong> file is set up right, a number of commands should all run without error. Let&#39;s start by running a lengthy command that does not rely on any of the aliases or environment variables found in my <strong>.bash_aliases</strong> file:</p>
<pre><code class="lang-bash">ls ~<span class="hljs-regexp">/Git/</span>JsObjects<span class="hljs-regexp">/Utilities/</span>SetupLinuxBox<span class="hljs-regexp">/.bash_aliases</span>
</code></pre>
<p>Here is another, and slightly shorter, way to run the same command:</p>
<pre><code class="lang-bash">ls $JSOBJECTS/Utilities/SetupLinuxBox/.bash_aliases
</code></pre>
<p>Run both of these commands and create a screenshot that shows the output. Call the screenshot: <strong>BashAliasListing.png</strong></p>
<p><strong>NOTE</strong>: _If $JSOBJECTS is not defined, this is a problem with your .bashrc or .bash<em>aliases file. See these document for details:</em></p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/blob/master/Utilities/SetupLinuxBox/.bash_aliases">.bash_aliases</a></li>
<li><a href="http://www.elvenware.com/charlie/os/linux/ConfigureLinux.html#set-up-environment">Configure Linux</a></li>
</ul>
<h2 id="linux-less">The Linux less Command</h2>
<p>Now run this command, which uses a built in Linux utility called <strong>less</strong>:</p>
<pre><code class="lang-bash">less $JSOBJECTS/Utilities/SetupLinuxBox/.bash_aliases
</code></pre>
<p>Use the <strong>j</strong> and <strong>k</strong> keys or the arrow keys to navigate through the document. Press the <strong>q</strong> key to exit. Take a screenshot and call it: <strong>BashAliasJsObjects.png</strong>.</p>
<h2 id="available">Step Two: What&#39;s Available</h2>
<p>I have a number of useful scripts in JsObjects. To get a sense of what is available, run the following commands:</p>
<pre><code class="lang-bash">ls <span class="hljs-regexp">~/Git/</span>JsObjects<span class="hljs-regexp">/Utilities/</span>SetupLinuxBox/
ls <span class="hljs-regexp">~/Git/</span>JsObjects<span class="hljs-regexp">/Utilities/</span>NodeInstall/
</code></pre>
<p>Take a screenshot of the output and save it as <strong>UtilityListings.png</strong>.</p>
<h2 id="create-express-project">Step Three: Create Express Project</h2>
<p>Now its time to create one of our own scripts. Consider the following commands:</p>
<pre><code class="lang-bash">express Week03-BootstrapDelicious
cd Week03-BootstrapDelicious
npm install
cp <span class="hljs-variable">$ELF_TEMPLATES</span>/bower<span class="hljs-selector-class">.json</span> .
cp <span class="hljs-variable">$ELF_TEMPLATES</span>/<span class="hljs-selector-class">.bowerrc</span> .
bower install bootstrap --save
sed -<span class="hljs-selector-tag">i</span> -- <span class="hljs-string">'s/3000/30025/g'</span> bin/www
sed -<span class="hljs-selector-tag">i</span> -- <span class="hljs-string">'s/node\s/nodemon /g'</span> package<span class="hljs-selector-class">.json</span>
cp ~/Git/JsObjects/Data/MongoLab03/favicon<span class="hljs-selector-class">.png</span> public/.
sed -<span class="hljs-selector-tag">i</span> -- <span class="hljs-string">'s/Express/BootstrapDelicious/g'</span> routes/index<span class="hljs-selector-class">.js</span>
echo -e <span class="hljs-string">"# $1\nby Charlie Calvert"</span> &gt;&gt; README.md
</code></pre>
<p>If given one at a time, these commands will:</p>
<ul>
<li>Create an express project</li>
<li>Run npm install</li>
<li>Create and configure bower</li>
<li>Set the port and switch our run command from node to nodemon</li>
<li>Change the title of our project.</li>
</ul>
<p>We can save code like that shown above into a <strong>bash</strong> script, and then run it as needed:</p>
<ul>
<li>First create the file with an editor such as <strong>geany</strong> or <strong>nano</strong></li>
<li>At the top of the script, tell bash that this is a bash script: <strong>#! /bin/bash</strong></li>
<li>Paste in the code shown above</li>
<li>Save the file as <strong>CreateBootstrapDelicous</strong></li>
<li>Make it executable: <strong>chmod +x CreateBootstrapDelicious</strong></li>
<li>Run it like this: <strong>./CreateBootstrapDelicious</strong></li>
</ul>
<pre><code class="lang-bash">#! /bin/bash

express Week03-BootstrapDelicious
cd Week03-BootstrapDelicious
npm install
cp <span class="hljs-variable">$ELF_TEMPLATES</span>/bower<span class="hljs-selector-class">.json</span> .
cp <span class="hljs-variable">$ELF_TEMPLATES</span>/<span class="hljs-selector-class">.bowerrc</span> .
bower install bootstrap --save
sed -<span class="hljs-selector-tag">i</span> -- <span class="hljs-string">'s/3000/30025/g'</span> bin/www
sed -<span class="hljs-selector-tag">i</span> -- <span class="hljs-string">'s/node\s/nodemon /g'</span> package<span class="hljs-selector-class">.json</span>
cp ~/Git/JsObjects/Data/MongoLab03/favicon<span class="hljs-selector-class">.png</span> public/.
sed -<span class="hljs-selector-tag">i</span> -- <span class="hljs-string">'s/Express/BootstrapDelicious/g'</span> routes/index<span class="hljs-selector-class">.js</span>
echo -e <span class="hljs-string">"# $1\nby Charlie Calvert"</span> &gt;&gt; README.md
</code></pre>
<p>The only problem with this script is that it hard codes in the project name. If we want to make the script more generally useful, then we need to pass in a parameter that specifies the project name. We aren&#39;t ready to run the command yet, but the command we want to use might look like this:</p>
<pre><code class="lang-bash"><span class="hljs-attribute">CreateExpressProject</span> Week03-MyProject
</code></pre>
<p>This would create and configure an express project called <strong>Week03-MyProject</strong>.</p>
<p>How do we create such a script? The first step will be to capture, or &quot;pick off&quot; the parameters passed to the bash script.</p>
<p>We can pick off parameters in a bash script with $1, $2, etc. For instance, in the following script I have replaced all reference to the project name with $1. Now I can pass in a project name as a parameter to the script. Each instance of $1 will be replaced at run time with the parameter passed in by the user:</p>
<pre><code class="lang-bash"><span class="hljs-meta">#! /bin/bash
</span>
express <span class="hljs-variable">$1</span>
<span class="hljs-built_in">cd</span> <span class="hljs-variable">$1</span>
npm install
cp <span class="hljs-variable">$ELF_TEMPLATES</span>/bower.json .
cp <span class="hljs-variable">$ELF_TEMPLATES</span>/.bowerrc .
bower install bootstrap --save
sed -i -- <span class="hljs-string">'s/3000/30025/g'</span> bin/www
sed -i -- <span class="hljs-string">'s/node\s/nodemon /g'</span> package.json
cp ~/Git/JsObjects/Data/MongoLab03/favicon.png public/.
sed -i -- <span class="hljs-string">'s/Express/'</span><span class="hljs-variable">$1</span><span class="hljs-string">'/g'</span> routes/index.js
<span class="hljs-built_in">echo</span> <span class="hljs-_">-e</span> <span class="hljs-string">"# <span class="hljs-variable">$1</span>\nby Charlie Calvert"</span> &gt;&gt; README.md
</code></pre>
<p>Use this script to create a project with a random name. For instance, you could:</p>
<ul>
<li>If a <strong>~/bin</strong> directory does not exist, you should create it: <strong>mkdir ~/bin</strong></li>
<li>Save the new script as <strong>CreateExpressProject</strong> and put it in your <strong>~/bin</strong> directory</li>
<li>Make it executable: <strong>chmod +x ~/bin/CreateExpressProject</strong></li>
<li>Invoke it from any place else in your home folder like this: <strong>CreateExpressProject Week03-Test-LastName</strong></li>
<li>Now navigate (cd) into <strong>Week03-Test-LastName</strong> and start the project: <strong>npm start</strong></li>
</ul>
<p>This works because the <strong>~/bin</strong> folder is placed on your path by the default <strong>.bashrc</strong> script that ships with Ubuntu. We don&#39;t have to add the <strong>bin</strong> folder to the path, the <strong>.bashrc</strong> file does that for us automatically.</p>
<p><strong>NOTE</strong>: <em>A nice thing about Linux is that it will perform command completion for you for programs on your path. Thus you should be able to type something like <strong>Cre</strong> and then press to tab to have the system complete the command: <em>*CreateExpressProject</em></em>.</p>
<h2 id="system-check">Step Four: System Check</h2>
<p>I&#39;ve made some progress with creating a <strong>SystemCheck</strong> script for Linux. The script is maintained here:</p>
<pre><code>$JSOBJECTS/Utilities/SetupLinux
</code></pre><p>Hence you can run it like this:</p>
<pre><code>$JSOBJECTS/Utilities/SetupLinuxBox/SystemCheck
</code></pre><p>The script itself looks something like this when it runs:</p>
<pre><code>=======================
Menu
=======================

b) Basic System Check
n) Node
p) PhoneGap
x) Exit

Please make a selection:
</code></pre><p>Select options b and n (Basic System Check and Node). Take screen shots of the output from both options and call them:</p>
<ul>
<li>SystemCheck.png</li>
<li>Node.png</li>
</ul>
<h2 id="aliases">Step Five: Aliases</h2>
<p>Sometimes our prompt in bash shell gets really long. As a result, I like to show the system name and path on one line, and the $ prompt on a second line. To make this change on your system, edit the <a href="http://linuxconfig.org/bash-prompt-basics">PS1</a> environment variable that is set around line 62 of your <strong>~/.bashrc</strong> file. Make it looks like this:</p>
<pre><code class="lang-bash">PS1='<span class="hljs-variable">${debian_chroot</span>:+(<span class="hljs-variable">$debian_chroot</span>)}\<span class="hljs-keyword">u</span>@\<span class="hljs-keyword">h</span>\w\<span class="hljs-keyword">n</span>\$ '
</code></pre>
<p>If you want to experiment with the above line, you can simply paste in the above to the bash prmopt and you can see the effect right away. Otherwise type this to process your changes to the <strong>~/bashrc</strong> file: <strong>source ~/.bashrc</strong></p>
<p>Once you have your prompt set up correctly, make sure you are familiar with some of the aliases in the <strong>.bash_alias</strong> file. For instance, here is a simple bash alias:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">alias</span> jo=<span class="hljs-string">"cd <span class="hljs-variable">$JSOBJECTS</span>"</span>
</code></pre>
<p>After this alias is processed, you can just type <strong>jo</strong> to navigate to the <strong>/home/bcuser/Git/JsObjects</strong> directory. On our sytems, that alias is always available to you. This is true because:</p>
<ul>
<li>That alias is in the <strong>~/.bash_aliases</strong> file</li>
<li>The <strong>~/.bash_aliases</strong> file is loaded by the <strong>~/.bashrc</strong> file</li>
<li>The <strong>~/.bashrc</strong> file is processed everytime you open a bash prompt</li>
</ul>
<p>Create an alias called <strong>i3</strong> that takes you to your git home, which in our case is your <strong>~/Git/isit320-lastname-2015</strong> folder. The alias should look something like this:</p>
<pre><code><span class="hljs-built_in">alias</span> i3=<span class="hljs-string">"cd <span class="hljs-variable">$GIT_HOME</span>/isit320-lastname-2015</span>
</code></pre><p>Now run the following commands/aliases:</p>
<pre><code>clear
<span class="hljs-keyword">jo
</span><span class="hljs-keyword">jou
</span><span class="hljs-keyword">joj
</span>gd
i3
</code></pre><p>Take a screen shot of the result and call it <strong>aliases.png</strong>.</p>
<p><strong>NOTE</strong>: <em>Becoming comfortable using and creating aliases can be a big boon for developers. There are a lot of things you can do with them. If you understand aliases and scripting, you can make Linux an enormously powerful development environment.</em></p>
<p>It might be best to complete the above before doing this, but you can create color prompts if you want. Paste the following into the bash shell to see a prompt that goes way over the top:</p>
<pre><code class="lang-bash">export PS1="<span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-formula">$(tput bold)<span class="hljs-tag">\<span class="hljs-name">]</span></span><span class="hljs-tag">\<span class="hljs-name">[</span></span>$</span>(tput setaf 1)<span class="hljs-tag">\<span class="hljs-name">]</span><span class="hljs-string">[\[$(tput setaf 3)\]</span></span><span class="hljs-tag">\<span class="hljs-name">u</span></span><span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-formula">$(tput setaf 2)<span class="hljs-tag">\<span class="hljs-name">]</span></span>@<span class="hljs-tag">\<span class="hljs-name">[</span></span>$</span>(tput setaf 4)<span class="hljs-tag">\<span class="hljs-name">]</span></span><span class="hljs-tag">\<span class="hljs-name">h</span></span> <span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-formula">$(tput setaf 5)<span class="hljs-tag">\<span class="hljs-name">]</span></span><span class="hljs-tag">\<span class="hljs-name">w</span></span><span class="hljs-tag">\<span class="hljs-name">[</span></span>$</span>(tput setaf 1)<span class="hljs-tag">\<span class="hljs-name">]</span></span>]<span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-formula">$(tput setaf 7)<span class="hljs-tag">\<span class="hljs-name">]</span></span><span class="hljs-tag">\<span class="hljs-name">n</span></span><span class="hljs-tag">\<span class="hljs-name">\</span></span>$</span> <span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-formula">$(tput sgr0)<span class="hljs-tag">\<span class="hljs-name">]</span></span>"</span>
</code></pre>
<p>If you want to make this prompt permanent, you can uncomment <strong>force_color_prompt=yes</strong> found around line 46 of your <strong>~/.bashrc</strong>. Comments in a bash shell script are made with the hash symbol: <strong>#</strong>.</p>
<p>Then change the color prompt, found around line 59 of your <strong>~/bashrc</strong>, to the following:</p>
<pre><code>if [ "<span class="hljs-formula">$color_prompt" = yes ]; then
    PS1="<span class="hljs-tag">\<span class="hljs-name">[</span></span>$</span>(tput bold)<span class="hljs-tag">\<span class="hljs-name">]</span></span><span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-formula">$(tput setaf 1)<span class="hljs-tag">\<span class="hljs-name">]</span><span class="hljs-string">[\[$(tput setaf 3)\]</span></span><span class="hljs-tag">\<span class="hljs-name">u</span></span><span class="hljs-tag">\<span class="hljs-name">[</span></span>$</span>(tput setaf 2)<span class="hljs-tag">\<span class="hljs-name">]</span></span>@<span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-formula">$(tput setaf 4)<span class="hljs-tag">\<span class="hljs-name">]</span></span><span class="hljs-tag">\<span class="hljs-name">h</span></span> <span class="hljs-tag">\<span class="hljs-name">[</span></span>$</span>(tput setaf 5)<span class="hljs-tag">\<span class="hljs-name">]</span></span><span class="hljs-tag">\<span class="hljs-name">w</span></span><span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-formula">$(tput setaf 1)<span class="hljs-tag">\<span class="hljs-name">]</span></span>]<span class="hljs-tag">\<span class="hljs-name">[</span></span>$</span>(tput setaf 7)<span class="hljs-tag">\<span class="hljs-name">]</span></span><span class="hljs-tag">\<span class="hljs-name">n</span></span><span class="hljs-tag">\<span class="hljs-name">\</span></span><span class="hljs-formula">$ <span class="hljs-tag">\<span class="hljs-name">[</span></span>$</span>(tput sgr0)<span class="hljs-tag">\<span class="hljs-name">]</span></span>"
else
    PS1='<span class="hljs-formula">${debian_chroot:+($</span>debian_chroot)}<span class="hljs-tag">\<span class="hljs-name">u</span></span>@<span class="hljs-tag">\<span class="hljs-name">h</span></span><span class="hljs-tag">\<span class="hljs-name">w</span></span><span class="hljs-tag">\<span class="hljs-name">n</span></span><span class="hljs-tag">\<span class="hljs-name">$</span></span> '
fi
</code></pre><p>The color prompt is all one line. It should not wrap.</p>
<p>If the color prompt is too much, then you can revert to a black and white prompt by commenting out the <strong>force_color_prompt=yes</strong> line with the # symbol.</p>
<p>If you want to see the branch of your repository when you are in a repository, try this:</p>
<pre><code class="lang-bash">if [ "<span class="hljs-formula">$color_prompt" = yes ]; then
    PS1='$</span>{debian_chroot:+(<span class="hljs-formula">$debian_chroot)}<span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-tag">\</span>033[01;32m<span class="hljs-tag">\<span class="hljs-name">]</span></span><span class="hljs-tag">\<span class="hljs-name">u</span></span>@<span class="hljs-tag">\<span class="hljs-name">h</span></span><span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-tag">\</span>033[00m<span class="hljs-tag">\<span class="hljs-name">]</span></span>:<span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-tag">\</span>033[01;34m<span class="hljs-tag">\<span class="hljs-name">]</span></span><span class="hljs-tag">\<span class="hljs-name">w</span></span><span class="hljs-tag">\<span class="hljs-name">[</span></span><span class="hljs-tag">\</span>033[00m<span class="hljs-tag">\<span class="hljs-name">]</span></span>$</span>(__git_ps1)<span class="hljs-tag">\<span class="hljs-name">n</span></span><span class="hljs-tag">\<span class="hljs-name">$</span></span> '
else
    PS1='<span class="hljs-formula">${debian_chroot:+($</span>debian_chroot)}<span class="hljs-tag">\<span class="hljs-name">u</span></span>@<span class="hljs-tag">\<span class="hljs-name">h</span></span>:<span class="hljs-tag">\<span class="hljs-name">w</span></span><span class="hljs-tag">\<span class="hljs-name">n</span></span><span class="hljs-formula">$ '
fi</span>
</code></pre>
<p>The key change is to add <strong>$(__git_ps1)</strong>.</p>
<h2 id="turn-it-in">Turn it in</h2>
<p>Echo out the contents of your <strong>CreateExpressProject</strong> script:</p>
<pre><code class="lang-bash"><span class="hljs-variable">$ </span>cat ~<span class="hljs-regexp">/bin/</span>CreateExpressProject
</code></pre>
<p>Take a screenshot of the result it save it as <strong>CreateExpressProject.png</strong>.</p>
<p>Navigate to a temp folder and run your script, but this time save the output generate by your script into a file called <strong>Create-LastName.txt</strong>, where LastName is your last name.</p>
<p>Attach the following to your project when you submit it:</p>
<ul>
<li><strong>BashAliasListing.png</strong></li>
<li><strong>BashAliasJsObjects.png</strong></li>
<li><strong>UtilityListings.png</strong></li>
<li><strong>SystemCheck.png</strong></li>
<li><strong>Node.png</strong></li>
<li><strong>aliases.png</strong></li>
<li><strong>CreateExpressProject.png</strong></li>
<li><strong>Create-LastName.txt</strong></li>
</ul>
<p>Check in your copy of <strong>CreateExpressProject</strong> script into a folder of your repository called <strong>MyScripts</strong>. Push your work.</p>
</div></body></html>