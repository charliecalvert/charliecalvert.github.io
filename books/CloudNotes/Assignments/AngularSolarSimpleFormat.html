<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>AngularSolarSimpleFormat</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><!-- script(src="/libs/scripts/Control.js")--><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>AngularSolarSimpleFormat</h1><h3>Table of Contents</h3><ul><!--TOC_Start--><li><a href="#simple-format-directive">Simple Format Directive</a></li>
<li><a href="#testing-simple-format">Testing Simple Format</a></li>
<li><a href="#test-simple-format">Test Simple Format</a></li>
<li><a href="#test-simple-format-backend">Test Simple Format Backend</a></li>
<li><a href="#suite-titles">Suite Titles</a></li>
<li><a href="#hints">Hints</a></li><!--TOC_End--></ul><h2 id="simple-format-directive">Simple Format Directive</h2>
<p>Now lets create a new directive called <strong>elfSimpleFormat</strong>. Declare it just below the point in <strong>main.js</strong> where you declare the <strong>elfRenewable</strong> directive.</p>
<p>The HTML version of our new directive looks like this:</p>
<pre><code class="lang-javascript">elfApp.directive(<span class="hljs-string">'elfSimpleFormat'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">  'use strict'</span>;
  <span class="hljs-keyword">return</span> {
      controller: <span class="hljs-string">'MainController'</span>,
      template: <span class="hljs-string">'Solar: {{simpleFormat[index].solar}}'</span> +
          <span class="hljs-string">'&lt;br&gt;Geo: {{simpleFormat[index].geo}}'</span> +
          <span class="hljs-string">'&lt;br&gt;Wind: {{simpleFormat[index].wind}}'</span>

  };
});
</code></pre>
<p>As you can see, this declaration uses <strong>template</strong> rather than <strong>templateUrl</strong>. You should:</p>
<ul>
<li>Convert this HTML to jade</li>
<li>Save it to a file called <strong>simple-format.jade</strong></li>
<li>Convert the directive to use <strong>templateUrl</strong> rather than <strong>template</strong>.</li>
</ul>
<p>It should, of course, look like this:</p>
<pre><code class="lang-javascript">elfApp.directive(<span class="hljs-string">'elfSimpleFormat'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    <span class="hljs-keyword">return</span> {
        controller: <span class="hljs-string">'MainController'</span>,
        templateUrl: <span class="hljs-string">'simple-format'</span>
    };
});
</code></pre>
<h2 id="testing-simple-format">Testing Simple Format</h2>
<p>You created a <strong>simple-format.jade</strong> file. Now convert it to HTML so it can be used as a fixture in our tests:</p>
<p>  jade views/simple-format.jade --out=&#39;spec/fixtures/&#39;</p>
<p>Call the <strong>renewableUtils.simpleFormat</strong> from within <strong>$scope.getRenewable</strong>. It makes no sense to call it until you have loaded <strong>renewables.json</strong>. In particular, since it relies on <strong>renewables.json</strong> being present, it won&#39;t work properly until you have loaded that file.</p>
<p>In <strong>.jscsrc</strong> exclude the <strong>data</strong> folder. In <strong>Gruntfile.js</strong> don&#39;t try to beautify the <strong>data</strong> folder.</p>
<p>Don&#39;t forget to run <strong>grunt check</strong> and clean up all errors such as missing use strict, invalid quote marks, etc.</p>
<p><strong>NOTE</strong>: <em>With JSCS, you can use single quotes for a string, and double quotes for embedded quotes inside a string: &#39;My &quot;embedded&quot; string&#39;.</em></p>
<p>With angular, you can usually delete an <strong>$(document).ready()</strong> statements as it takes care of this for you.</p>
<h2 id="test-simple-format">Test Simple Format</h2>
<p>We need to create <strong>spec/test-simple-format.js</strong>.</p>
<pre><code class="lang-javascript">/**
 * Created <span class="hljs-keyword">by</span> charlie on <span class="hljs-number">5</span>/<span class="hljs-number">10</span>/<span class="hljs-number">16</span>.
 */

describe(<span class="hljs-string">'Simple Format Suite'</span>, <span class="hljs-keyword">function</span>() {

    <span class="hljs-string">'use strict'</span>;

    var scope;
    var element;
    var mainController;
    var $templateCache;
    var $compile;

    beforeEach(module(<span class="hljs-string">'elfApp'</span>));

    /*
     * instantiate the controller without the directive
     * Get the Angular compiler and templateCache for processing Angular templates
     */
    beforeEach(inject(function(<span class="hljs-number">_</span>$compile<span class="hljs-number">_</span>, <span class="hljs-number">_</span>$rootScope<span class="hljs-number">_</span>, <span class="hljs-number">_</span>$templateCache<span class="hljs-number">_</span>, <span class="hljs-number">_</span>$controller<span class="hljs-number">_</span>) {
        scope = <span class="hljs-number">_</span>$rootScope<span class="hljs-number">_</span>.$new();
        $compile = <span class="hljs-number">_</span>$compile<span class="hljs-number">_</span>;
        $templateCache = <span class="hljs-number">_</span>$templateCache<span class="hljs-number">_</span>;

        mainController = <span class="hljs-number">_</span>$controller<span class="hljs-number">_</span>(<span class="hljs-string">'MainController'</span>, {
            $scope: scope
        });
    }));

    beforeEach(function() {
        jasmine.getFixtures().fixturesPath = <span class="hljs-string">'base/spec/fixtures/'</span>;
        loadFixtures(<span class="hljs-string">'simple-format.html'</span>);
    });

    it(<span class="hljs-string">'expects true to be true'</span>, function() {
        expect(true).toBe(true);
    });

    it(<span class="hljs-string">'should find the index'</span>, function() {
        expect(scope.index).toBe(<span class="hljs-number">0</span>);
    });

    it(<span class="hljs-string">'should be possible to access the fixture'</span>, function() {
        var spanElement = document.getElementById(<span class="hljs-string">'simpleFormat'</span>);
        expect(spanElement.innerHTML).toContain(<span class="hljs-string">'simple'</span>);
    });

});
</code></pre>
<h2 id="test-simple-format-backend">Test Simple Format Backend</h2>
<p>We need to create <strong>spec/test-simple-format-backend.js</strong>, which is our holy grail.</p>
<h2 id="suite-titles">Suite Titles</h2>
<p>Get the suite titles right for each test.</p>
<h2 id="hints">Hints</h2>
<p>In <strong>karma.conf.js</strong> be sure you are loading <strong>angular</strong>, <strong>angular-mocks</strong> and <strong>angular-route</strong>:</p>
<pre><code class="lang-javascript">files: [
    <span class="hljs-symbol">'public</span>/components/jquery/dist/jquery.min.js',
    <span class="hljs-symbol">'public</span>/components/angular/angular.js',
    <span class="hljs-symbol">'public</span>/components/angular-mocks/angular-mocks.js',
    <span class="hljs-symbol">'public</span>/components/angular-route/angular-route.js',
    <span class="hljs-symbol">'node_modules</span>/jasmine-jquery/lib/*.js',  
    <span class="hljs-symbol">'public</span>/javascripts/app.js',
    <span class="hljs-symbol">'public</span>/javascripts/*.js',
    <span class="hljs-symbol">'spec</span>/**/*.html',
    <span class="hljs-symbol">'spec</span>/data/*.js',
    <span class="hljs-symbol">'spec</span>/test-*.js'
],
</code></pre>
</div></body></html>