<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>AndroidX86Cordova</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>AndroidX86Cordova</h1><p>Welcome to AndroidX86Cordova</p><ul><!--TOC_Start--><li><a href="#overview">Overview</a></li>
<li><a href="#keyboard-shortcuts">Keyboard Shortcuts</a></li>
<li><a href="#setup">Setup</a></li>
<li><a href="#android-sdk">Android SDK</a></li>
<li><a href="#create-a-project">Create a project</a></li>
<li><a href="#build-failed">Build Failed</a></li>
<li><a href="#connect-adb">Connect ADB</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#edit">Edit</a></li>
<li><a href="#push-to-your-repository">Push to Your Repository</a></li>
<li><a href="#turn-it-in">Turn it in</a></li>
<li><a href="#hint">Hint</a></li>
<li><a href="#install-script">Install Script</a></li>
<li><a href="#use-phone">Use Phone</a></li>
<li><a href="#older-notes">Older Notes</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="overview"></a>
<h2>Overview</h2>
<p>The goal of this assignment is to get a simple, default, Android Cordova application running on your phone or on an AndroidX86 build.
Preliminaries. Be sure the following installed:</p>
<pre><code class="lang-bash">sudo apt-<span class="hljs-builtin-name">get</span> install lib32stdc++6
sudo apt-<span class="hljs-builtin-name">get</span> install lib32z1
</code></pre>
<p>In general, when doing development, it can also be useful to install the C++ compiler, though it is probably not essential to this process. In particular, if you get an error saying that <strong>make</strong> is missing, then install <strong>build-essential</strong>:</p>
<pre><code>sudo apt-<span class="hljs-builtin-name">get</span> install build-essential
</code></pre><a class="anchor" id="keyboard-shortcuts"></a>
<h2>Keyboard Shortcuts</h2>
<ul>
<li>Screen goes black. Use the <strong>Context Menu Key</strong>. The key to the left of the <strong>Right-Control</strong> key on most machines.</li>
<li>Capture the mouse: The little widget in the VirtualBox menu. It works the opposite of the way you would suspect.</li>
<li>Release the mouse: <strong>Right-Control</strong> once.</li>
<li>Quit: <strong>Right Control - Q</strong></li>
</ul>
<p>More info is <a href="http://www.coolcomputing.com/article.php?sid=4636">here</a></p>
<a class="anchor" id="setup"></a>
<h2>Setup</h2>
<p>This should already have been done for you. But if you ever need to do it:</p>
<ul>
<li><p>In the old days, we could download the Android SDK. Not Android Studio, just the SDK. These aren&#39;t the old days. So download Android Studio instead.</p>
<ul>
<li><a href="https://developer.android.com/studio/index.html#downloads">https://developer.android.com/studio/index.html#downloads</a></li>
</ul>
</li>
<li><p>Download the zip file</p>
</li>
<li>Unzip so that android-studio is in your home directory.</li>
<li>cd android-studio/bin/</li>
<li>Then start it: <strong>./studio.sh &amp;</strong></li>
</ul>
<p>When install the Android SDK, install the smallest amount possible. They are in league with various hard drive manufacturers and are trying to find ways to force you to buy a third 5 TB of storage.</p>
<p>This might work:</p>
<pre><code>wget http<span class="hljs-variable">s:</span>//<span class="hljs-keyword">dl</span>.google.<span class="hljs-keyword">com</span>/android/repository/sdk-tools-linux-<span class="hljs-number">3859397</span>.zip
</code></pre><p>Now you can start the Android Manager:</p>
<pre><code><span class="hljs-attribute">android</span>
</code></pre><a class="anchor" id="android-sdk"></a>
<h2>Android SDK</h2>
<p>The following is done inside the Android Manager, launched in the previous section. The goal is install the Android API verison 23.</p>
<p><strong>Note</strong>: <em>The version of the Android API that you need can change over time, but if you need to get version 24 or 22 instead of 23, it should not be too difficult to adapt these instructions to help you achieve that goal. Also note that the big danger here is installing way more than you need. Gigabyte upon gigabyte more than you need. Install as little as possible.</em></p>
<p>Install Android API 23 by doing the following:</p>
<ul>
<li>First un-check all Android 6.0 (API 23)</li>
</ul>
<p>Then be sure the following is already installed:</p>
<ul>
<li>Android SDK Tools (Already installed)</li>
</ul>
<p>Now prepare to add the following items by placing a check in front of them:</p>
<ul>
<li>Android SDK Platform-Tools</li>
<li>Android SDK Build Tools</li>
<li>Check Android 6.0 (API 23)<ul>
<li>SDK Platform</li>
</ul>
</li>
<li>Extras: Android Support Library</li>
</ul>
<p>Now select the <strong>Install Five Packages</strong> button. You may get an error about failing to stop the ADB server. Since ADB is probably not yet installed, this error is expected, and you can ignore.</p>
<a class="anchor" id="create-a-project"></a>
<h2>Create a project</h2>
<p>Go to your repository and do the following</p>
<pre><code class="lang-bash"><span class="hljs-symbol">cordova</span> create Week01-CordovaStarter
<span class="hljs-symbol">cd</span> Week01-CordovaStarter
<span class="hljs-symbol">cordova</span> platform <span class="hljs-keyword">add </span><span class="hljs-keyword">android
</span><span class="hljs-symbol">cordova</span> <span class="hljs-keyword">build </span><span class="hljs-keyword">android</span>
</code></pre>
<p>If Cordova is unknown, then do this:</p>
<pre><code>npm <span class="hljs-keyword">install</span> -g cordova
</code></pre><a class="anchor" id="build-failed"></a>
<h2>Build Failed</h2>
<p>If your build fails like this:</p>
<pre><code class="lang-bash"><span class="hljs-meta">:CordovaLib:processDebugResources</span> FAILED

FAILURE: Build failed with an exception.

<span class="hljs-bullet">* </span>What went wrong:
Execution failed for task <span class="hljs-emphasis">':CordovaLib:processDebugResources'</span>.
&gt; java.io.IOException: Cannot run program "/home/bcuser/Android/Sdk/build-tools/22.0.1/aapt": error=2, No such file or directory
</code></pre>
<p>You might be able to fix it with these commands, which were mentioned earlier:</p>
<pre><code class="lang-bash">sudo apt-<span class="hljs-builtin-name">get</span> install lib32stdc++6
sudo apt-<span class="hljs-builtin-name">get</span> install lib32z1
</code></pre>
<a class="anchor" id="connect-adb"></a>
<h2>Connect ADB</h2>
<p>To connect to your Android X86, do the following:</p>
<ul>
<li><strong>adb connect [YOUR IP from netcfg]</strong></li>
</ul>
<p><strong>NOTE</strong>: <em>We use the <strong>netcfg</strong> command on AndroidX86 in order to see the IP address of the device. In particular, go to the application page and run the <strong>Terminal Emulator</strong>. All this is described in more depth in the <a href="https://www.ccalvert.net/books/CloudNotes/Assignments/AndroidX86Install.html#log-in">AndroidX86Install</a> assignment.</em></p>
<p>Suppose the IP address you found in the terminal on AndroidX86 was 192.168.1.2. Then you would type this on your Linux box to establish the connection:</p>
<pre><code><span class="hljs-selector-tag">adb</span> <span class="hljs-selector-tag">connect</span> 192<span class="hljs-selector-class">.168</span><span class="hljs-selector-class">.1</span><span class="hljs-selector-class">.2</span>
</code></pre><p>To confirm that it worked, you can can ask <strong>adb</strong> to display your connections:</p>
<pre>
adb devices
</pre>

<p>For instance, here is a sample run of both <strong>adb connect</strong> and <strong>adb devices</strong>:</p>
<pre><code>charlie<span class="hljs-variable">@forestpath</span><span class="hljs-symbol">:~/temp/Week01-Foo</span>
<span class="hljs-variable">$ </span>adb connect <span class="hljs-number">192.168</span>.<span class="hljs-number">2.33</span>
connected to <span class="hljs-number">192.168</span>.<span class="hljs-number">2.33</span><span class="hljs-symbol">:</span><span class="hljs-number">5555</span>
charlie<span class="hljs-variable">@forestpath</span><span class="hljs-symbol">:~/temp/Week01-Foo</span>
<span class="hljs-variable">$ </span>adb devices
List of devices attached
<span class="hljs-number">192.168</span>.<span class="hljs-number">2.33</span><span class="hljs-symbol">:</span><span class="hljs-number">5555</span>    device
</code></pre><a class="anchor" id="install"></a>
<h2>Install</h2>
<p>To install:</p>
<pre><code>adb <span class="hljs-keyword">install</span> [YOUR APK <span class="hljs-keyword">file</span>]
</code></pre><p>A bit like this, perhaps:</p>
<pre><code>$ adb <span class="hljs-keyword">install</span> platforms/android/<span class="hljs-keyword">build</span>/outputs/apk/android-debug.apk
<span class="hljs-number">10208</span> KB/s (<span class="hljs-number">1822587</span> <span class="hljs-keyword">bytes</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0.174</span>s)
    pkg: /<span class="hljs-keyword">data</span>/<span class="hljs-keyword">local</span>/tmp/android-debug.apk
<span class="hljs-keyword">Success</span>
</code></pre><p><strong>NOTE</strong>: <em>An APK file contains your project. You can think of an APK file as an executable, as a program. It is really just a compressed file with your project inside it. If you install &quot;Google Drive&quot; on your phone, or if you install a computer game on your phone, then you are installing an APK file. The game comes in an APK file and your app comes in an APK file.</em></p>
<p>To uninstall your project:</p>
<ul>
<li><strong>adb uninstall [URL of your APP from config.xml in project root]</strong></li>
</ul>
<p>Perhaps something like this:</p>
<pre><code>$ adb uninstall io<span class="hljs-selector-class">.cordova</span><span class="hljs-selector-class">.hellocordova</span>
Success
</code></pre><p>You must uninstall an existing APK before you try to update it. In other words, you can&#39;t copy your APK file over an existing APK file on a phone or on AndroidX86. Instead, you first uninstall it, then install your updated copy.</p>
<a class="anchor" id="edit"></a>
<h2>Edit</h2>
<p>Edit the H1 element in <strong>www/index.html</strong> to include your last name. Rebuild the application and reinstall it.</p>
<a class="anchor" id="push-to-your-repository"></a>
<h2>Push to Your Repository</h2>
<p>This part of the assignment is optional for now. If you have not done so already, create a private repository on BitBucket or Github.</p>
<p>Use this naming scheme:</p>
<ul>
<li>isit322-lastname-2016</li>
</ul>
<p>Push your work to the repository.</p>
<p>Information on SSH is here:</p>
<ul>
<li><a href="http://www.elvenware.com/charlie/development/cloud/SshFtpsPutty.html#sshKeys">http://www.elvenware.com/charlie/development/cloud/SshFtpsPutty.html#sshKeys</a></li>
</ul>
<p>Be sure to share the repository with me. I&#39;m ccalvert on BitBucket and charliecalvert on GitHub.</p>
<a class="anchor" id="turn-it-in"></a>
<h2>Turn it in</h2>
<p>Submit a screen shot of your Cordova project running in Androidx86 inside VirtualBox.</p>
<p>Be sure that:</p>
<ul>
<li>Your name is visible in the application in the H1 tag of your <strong>www/index.html</strong> file.</li>
<li>The <strong>DEVICE IS READY</strong> bar is green.</li>
<li>The VirtualBox chrome is visible. For instance, the words <strong>Oracle VM VirtualBox</strong> should appear at the top, and the icons near the words <strong>Right Ctrl</strong> (or the MAC/Linux equivalent host key) are visible on the bottom.</li>
</ul>
<p>Here is the body of index.html, with the place where I want to see your name called out in square brackets:</p>
<pre><code class="lang-html">    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>[YOUR NAME GOES HERE]<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"deviceready"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blink"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"event listening"</span>&gt;</span>Connecting to Device<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"event received"</span>&gt;</span>Device is Ready<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"cordova.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/index.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<p><img src="https://drive.google.com/uc?export=view&amp;id=0B25UTAlOfPRGb3BKVmdtMG5XZVU" alt="AndroidX86Cordrova"></p>
<p>You need not write APACHE YOURNAME. It can be YOURNAME CORDOVA or whatever (within reason) strikes your fancy, so long as it is in the H1 tag and it contains your name.</p>
<a class="anchor" id="hint"></a>
<h2>Hint</h2>
<p>Commands to remember:</p>
<ul>
<li>cordova create Week01-Test com.lastname.test_lastname IsitTestCalvert</li>
<li>cordova platform add android</li>
<li>cordova build android</li>
<li>adb uninstall io.cordova.hellocordova</li>
<li>adb install platforms/android/build/outputs/apk/android-debug.apk</li>
</ul>
<p>For instance:</p>
<ul>
<li>cordova create Week01Test com.elvenware.test_calvert IsitTestCalvert</li>
<li>cordova create [Directory] [URL] [Name]</li>
</ul>
<a class="anchor" id="install-script"></a>
<h2>Install Script</h2>
<p>If you save the following in the root of your project folder as <strong>install</strong>, then you should be able to automate this process:</p>
<pre>#! /bin/bash

cordova build android
adb uninstall io.cordova.hellocordova
adb install platforms/android/build/outputs/apk/android-debug.apk
</pre>

<p>Then make it executable:</p>
<pre>chmod +x install</pre>

<p>To run it, type this:</p>
<pre>./install</pre>

<p>We&#39;ll discuss in class on Monday.</p>
<a class="anchor" id="use-phone"></a>
<h2>Use Phone</h2>
<p>To try using your phone instead of AndroidX86, see this</p>
<ul>
<li><a href="http://www.elvenware.com/charlie/development/android/UsbDebugging.html">http://www.elvenware.com/charlie/development/android/UsbDebugging.html</a></li>
</ul>
<a class="anchor" id="older-notes"></a>
<h2>Older Notes</h2>
<p>This is outdated. Ignore it:</p>
<ul>
<li>Decompress the archive with a command similar to this:<ul>
<li><strong>tar xvfz android-sdk_r24.4.1-linux.tgz</strong></li>
</ul>
</li>
<li>Move the archive to the ~/Android directory<ul>
<li><strong>mkdir ~/Android</strong></li>
<li><strong>mv android-sdk-linux/ ~/Android/Sdk</strong></li>
</ul>
</li>
</ul>
</div></body></html>