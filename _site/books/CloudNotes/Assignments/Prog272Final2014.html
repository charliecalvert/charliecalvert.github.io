<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>Prog272Final2014</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>Prog272Final2014</h1><p>Welcome to Prog272Final2014</p><ul><!--TOC_Start--><li><a href="#prog-272-final-2014">Prog 272 Final 2014</a></li>
<li><a href="#config-files">Config Files</a></li>
<li><a href="#stackedit">StackEdit</a></li>
<li><a href="#awsbasic">AwsBasic</a></li>
<li><a href="#import-into-mongodb">Import into MongoDb</a></li>
<li><a href="#convert-to-markdown-from-html">Convert to Markdown from HTML</a></li>
<li><a href="#transform-and-copy-not-working">Transform and Copy not Working</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="prog-272-final-2014"></a>
<h1>Prog 272 Final 2014</h1>
<p>This document defines the final for Prog 272. It is a work in progress. Please check back frequently.</p>
<a class="anchor" id="config-files"></a>
<h2>Config Files</h2>
<p>This part should be completed already.</p>
<ul>
<li>Store the config files the database</li>
<li>Provide a means to edit them in AwsBasicS3.</li>
</ul>
<p>If you have extra time, think about strategies for performing the following task:</p>
<a class="anchor" id="stackedit"></a>
<h2>StackEdit</h2>
<p>Create thirty-five markdown documents, one for each of the first thirty-five of Shakespeare&#39;s poems. </p>
<ul>
<li>Call the documents <strong>Sonnet01.md</strong>, <strong>Sonnet02.md</strong>, etc.</li>
<li>Link the documents to both <strong>Google Drive</strong> and <strong>Dropbox</strong>.</li>
</ul>
<p>Deliverables for this part of the assignment:</p>
<ul>
<li>A zip file containing all 35 markdown documents. </li>
<li>A screen shot of at least seven of the files in the Chrome Browser housed on the Dropbox web site.</li>
</ul>
<p>Place both of the above in your <strong>Google Drive</strong> folder called <strong>Finals</strong>.</p>
<a class="anchor" id="awsbasic"></a>
<h2>AwsBasic</h2>
<p>Publish your 35 markdown documents to S3. In your bucket you should create the following folder structure:</p>
<ul>
<li>my.bucket.com<ul>
<li>Prog280Final<ul>
<li>Sonnets01</li>
<li>Sonnets02</li>
<li>Sonnets03</li>
<li>Sonnets04</li>
<li>Sonnets05</li>
<li>Styles</li>
<li>Scripts</li>
<li>Images</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The folder called <strong>Sonnets01</strong> should contains <strong>Sonnet01.html</strong>, <strong>Sonnet02.html</strong> and so on up to <strong>Sonnet07.html</strong>. The next folder, <strong>Sonnets02</strong>, should contains <strong>Sonnet08.html</strong>, <strong>Sonnet09.html</strong> and so on up to <strong>Sonnet14.html</strong>. The next folder should repeat pattern.</p>
<p>The folders called <strong>Styles</strong>, <strong>Scripts</strong>, and <strong>Images</strong> may contain the same files as in previous assignments, or similar files of your choice. The big difference here is that we need to use slightly different headers in our HTML files in order to find the <strong>Styles</strong>, <strong>Scripts</strong> and <strong>Images</strong> folders in their new location. These files are available in the <strong>JsObjects/Utilities/Templates</strong> directory. To access them, you need only change line 22 in <strong>MarkdownTransform.py</strong>. That line currently reads: </p>
<pre><code>markdown.runner(files, [<span class="hljs-symbol">'StartLinux</span>.html', <span class="hljs-symbol">'NavLinux</span>.html', <span class="hljs-symbol">'footer</span>.html', <span class="hljs-symbol">'end</span>.html']);
</code></pre><p>Change it to read:</p>
<pre><code>markdown.runner(files, [<span class="hljs-symbol">'StartBackOne</span>.html', <span class="hljs-symbol">'NavBackOne</span>.html', <span class="hljs-symbol">'footer</span>.html', <span class="hljs-symbol">'end</span>.html']);
</code></pre><p>Notice that <strong>StartLinux.html</strong> has been changed to <strong>StartBackOne.html</strong>. The string <strong>NavLinux.html</strong> has been changed to <strong>NavBackOne.html</strong>.</p>
<p>This new arrangements of files is not hard to achieve. This is the way your <strong>/var/www/bc</strong> folder probably looks right now:</p>
<ul>
<li>/var/www/bc<ul>
<li>index.html</li>
<li>Sonnet01.html</li>
<li>Sonnet02.html</li>
<li>Sonnet03.html</li>
<li>Sonnet04.html</li>
<li>Sonnet05.html</li>
<li>Styles</li>
<li>Scripts</li>
<li>Images</li>
</ul>
</li>
</ul>
<p>Just use the Linux file manager other tool change the structure so that it looks like this:</p>
<ul>
<li>/var/www/bc<ul>
<li>Sonnets01<ul>
<li>index.html</li>
<li>Sonnet01.html</li>
<li>Sonnet02.html</li>
<li>Sonnet03.html</li>
<li>Sonnet04.html</li>
<li>Sonnet05.html</li>
</ul>
</li>
<li>Sonnects02<ul>
<li>Sonnet01.html</li>
<li>Sonnet02.html</li>
<li>etc...</li>
</ul>
</li>
<li>Styles</li>
<li>Scripts</li>
<li>Images</li>
</ul>
</li>
</ul>
<p>Deliverables:</p>
<ul>
<li>A screen shot showing your <strong>/var/www/bc</strong> folder, or whichever staging folder is most informative.</li>
<li>Your <strong>Options.json</strong> and <strong>MarkdownTransformConfig.json</strong></li>
<li>A link to your folder or folders on S3</li>
<li>A screen shot of AwsBasicS3 running in your browser.</li>
<li>A screen shot of what it looks like at the command line when you copy to S3. In the browser, issue the command to copy to S3, then give me a screen shot of what the command line where you ran <strong>node app.js</strong> looks like. It should have a list of the files being copied up, or something similar.</li>
</ul>
<a class="anchor" id="import-into-mongodb"></a>
<h2>Import into MongoDb</h2>
<p>Write code that will import each of the files from your 7 folders into MongoDb</p>
<p>Copy all the files your create in StackEdit and save to DropBox or Google Drive to the database.
The last step is still assuming scenario 1. Suppose your saving Poems. In StackEdit you have create created two folders: Shakespeare, Shelley. Your program copy any files found either of those folders to your database. Use one of our existing programs such as MongoTalk to display the files.</p>
<p>Each file in the database should have at least four fields besides the built in MongoDb ID:</p>
<ul>
<li>ItemName</li>
<li>FolderName</li>
<li>FileName</li>
<li>Keywords (This is an array)</li>
<li>Content (The poem itself)</li>
</ul>
<a class="anchor" id="convert-to-markdown-from-html"></a>
<h2>Convert to Markdown from HTML</h2>
<pre><code><span class="hljs-selector-tag">pandoc</span> <span class="hljs-selector-tag">-t</span> <span class="hljs-selector-tag">markdown</span> <span class="hljs-selector-tag">-o</span> <span class="hljs-selector-tag">FILENAME</span><span class="hljs-selector-class">.md</span> <span class="hljs-selector-tag">FileName</span><span class="hljs-selector-class">.html</span>
</code></pre><a class="anchor" id="transform-and-copy-not-working"></a>
<h2>Transform and Copy not Working</h2>
<p>There is a challenge in this code that is a bit harder to solve than I wanted it to be. In AwsBasicS3,
in <strong>app.js</strong>, there is a <strong>buildAll</strong> route:</p>
<pre><code>app.get(<span class="hljs-string">'/buildAll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response</span>) </span>{ <span class="hljs-string">'use strict'</span>;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"buildAll called"</span>);    
    <span class="hljs-keyword">var</span> options = <span class="hljs-built_in">JSON</span>.parse(request.query.options);
    buildAll(response, options, request.query.index);
});
</code></pre><p>This works fine with my current code. The call to buildAll launches my Python code:</p>
<pre><code><span class="hljs-keyword">var</span> command = config[index].pathToPython + <span class="hljs-string">" MarkdownTransform.py -i "</span> + index;    
<span class="hljs-keyword">try</span> {
    exec(command, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callback</span><span class="hljs-params">(error, stdout, stderr)</span> </span>{
</code></pre><p>This is all very nice, but unfortunately <strong>MarkdownTransform.py</strong> directly reads in <strong>MarkdownTransformConfig.json</strong>. The job of your final, and of <strong>CopyToS3Part02</strong>, was to stop working with <strong>MarkdownTransformConfig.json</strong>, and to start working with code that reads and writes from the database. All that is good well, but if you are updating the database, as I asked, then you are probably not also updating <strong>MarkdownTransformConfig.json</strong>. This means that the <strong>Transform and Copy</strong> button on your updated copy of <strong>AwsBasicS3</strong> will no longer work out of the box.</p>
<p>I <em>could</em> argue that you need to see what is wrong, and fix the problem yourself. But that&#39;s going a bit too far. So I&#39;ll show you some code that should fix the problem:</p>
<pre><code>app.get(<span class="hljs-string">'/buildAll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response</span>) </span>{ <span class="hljs-string">'use strict'</span>;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"buildAll called"</span>);    
    <span class="hljs-keyword">var</span> options = request.query.options;
    fs.writeFile(<span class="hljs-string">"MarkdownTransformConfig.json"</span>, options, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>) </span>{
        <span class="hljs-keyword">var</span> options = <span class="hljs-built_in">JSON</span>.parse(request.query.options);
        buildAll(response, options, request.query.index);
    });
});
</code></pre><p>Here you can see that the <strong>buildAll</strong> route handler now creates a new <strong>MarkdownTransformConfig.json</strong> based on code sent to it from the client. Some of you will be able to take the code shown here and use it directly. Others, will find they have to think about what code they actually end up writing to <strong>MarkdownTransformConfig.json</strong>. That is, what code is in <strong>request.query.options</strong>. Do the best you can. I will focus more on whether your code updates the config files in the database, and copies the sonnets to folders. But getting this bit right would be very nice, and with the above code it should not be hard. Do not worry too much if your new copy of <strong>MarkdownTransformConfig.json</strong> looks exactly right. Just see if it works.</p>
<blockquote>
<p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p>
</blockquote>
</div></body></html>