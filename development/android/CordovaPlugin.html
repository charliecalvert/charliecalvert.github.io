<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>CordovaPlugin</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css"><link href="/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet" type="text/css"><script src="/libs/scripts/jquery.min.js"></script><script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script><script src="/libs/scripts/elvenware.js" type="text/javascript"></script><script src="/libs/scripts/Control.js"></script></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/index.html" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/contents.html">About</a></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h2 id="overview">Overview</h2>
<p>Many of the scripts discussed in this document are found here:</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/Utilities/CordovaTools">https://github.com/charliecalvert/JsObjects/tree/master/Utilities/CordovaTools</a></li>
</ul>
<h2 id="names">Names</h2>
<p>There are many applications installed on my phone. If I install your application,
I want to be able to find it easily. Therefore, please name your application 
<strong>prog272-lastname</strong>. For instance:</p>
<pre><code>cordova create prog272-calvert
</code></pre><p>If, by chance, you need to rename your project, do it like this:</p>
<ul>
<li>Open config.xml. </li>
<li>Change the url and name for your project. </li>
</ul>
<p>Suppose your <strong>config.xml</strong> begins like this:</p>
<pre><code>&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;
&lt;widget id=&quot;com.elvenware.elven-foo&quot; 
    version=&quot;0.0.1&quot; 
    xmlns=&quot;http://www.w3.org/ns/widgets&quot; 
    xmlns:cdv=&quot;http://cordova.apache.org/ns/1.0&quot;&gt;
    &lt;name&gt;Foo&lt;/name&gt;
</code></pre><p>Change it to bar:</p>
<pre><code>&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;
&lt;widget id=&quot;com.elvenware.elven-bar&quot; 
    version=&quot;0.0.1&quot; 
    xmlns=&quot;http://www.w3.org/ns/widgets&quot; 
    xmlns:cdv=&quot;http://cordova.apache.org/ns/1.0&quot;&gt;
    &lt;name&gt;Bar&lt;/name&gt;
</code></pre><p>Notice that changes were made both on the second and last lines.</p>
<p>Then run the script shown below:</p>
<pre><code>    #! /bin/bash

    # If we have renamed our project in config.xml, then this script
    # makes sure the change is propogated throughout the project.

    LINK_DIR=platforms/android

    if [ -d &quot;$LINK_DIR&quot; ]; then 
      if [ -L &quot;$LINK_DIR&quot; ]; then
        # Symbolic link specific commands
        rm &quot;$LINK_DIR&quot;
      else
        # Directory commands    
        cordova platform remove android
      fi
    fi

    cordova platform add android
</code></pre><p>The above is probably overkill, in that it is unlikely our android directory
will be a symbolic link. But I include the check just in case....</p>
<h2 id="geo">Geo</h2>
<p><img class="small" src="https://drive.google.com/uc?id=0B25UTAlOfPRGWkJVMXJvQWhjSDA" alt="ElvenGeo"></p>
<p>Here is the repository:</p>
<p><a href="https://github.com/apache/cordova-plugin-geolocation">https://github.com/apache/cordova-plugin-geolocation</a></p>
<p>Here is the command to install from the repository:</p>
<p>cordova plugin add <a href="http://github.com/apache/cordova-plugin-geolocation.git">http://github.com/apache/cordova-plugin-geolocation.git</a></p>
<p>Note that the following lines are added to <strong>platforms/AndroidManifest.xml</strong>:</p>
<pre><code>    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;
</code></pre><p>These lines are not optional. If the permissions are not present in the manifest, then
the app won&#39;t run properly.</p>
<p>When you install something on a phone from the
Play Store, you are told what permissions an app has, and given the choice of
whether or not you want to install it. These lines define the permmissions
for our app. We are never, however, asked to grant the permissions because
we are installing with <strong>adb</strong>, not with the Play Store. If, however, we 
put our app on the Play Store, then users would automatically be asked about
these permissions. </p>
<h2 id="is-my-phone-attached">Is My Phone Attached</h2>
<p>Use the command <strong>adb devices</strong> to see if your phone is attached:</p>
<pre><code>$ adb devices
List of devices attached 
e8e5bc06       device
</code></pre><h2 id="install-script">Install Script</h2>
<p>It should look something like this:</p>
<pre><code>    #! /bin/bash

    cordova build android
    adb uninstall com.elvenware.foo
    adb install platforms/android/ant-build/CordovaApp-debug.apk
</code></pre><p>Remember to check in config.xml, found in the root of your project folder,
for the exact URL to pass in when calling <strong>adb uninstall</strong>. Here is the
relevant part of config.xml:</p>
<pre><code>&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;
&lt;widget id=&quot;com.elvenware.foo&quot; 
    version=&quot;0.0.1&quot; 
    xmlns=&quot;http://www.w3.org/ns/widgets&quot; 
    xmlns:cdv=&quot;http://cordova.apache.org/ns/1.0&quot;&gt;
    &lt;name&gt;Foo&lt;/name&gt;
    etc....
</code></pre><p>When run from the root directory of your project, the following 
python script should build <strong>install</strong> automatically. It will use
regular expressions to parse the contents of of <strong>config.xml</strong>, 
find the proper URL, and use it in the script you generate:</p>
<pre><code>#! /usr/bin/python3
# author: Charlie Calvert

import re

hand = open(&#39;config.xml&#39;)
for line in hand:
    line = line.rstrip()
    x = re.findall(&#39;&lt;widget id=&quot;([^&quot;]*)&#39;, line)
    if len(x) &gt; 0:
        print(&#39;#! /bin/bash\n&#39;)        
        print(&#39;cordova build android&#39;)
        print(&#39;adb uninstall &#39; + x[0])
        print(&#39;adb install platforms/android/ant-build/CordovaApp-debug.apk\n&#39;)
</code></pre><p>You might save this file as <strong>~/bin/GetCordovaUrl</strong>. Then make it executable:</p>
<pre><code>chmod +x ~/bin/GetCordovaUrl
</code></pre><p>Then navigate to the root folder for your project and use it like this:</p>
<pre><code>GetCordovaUrl &gt; install    
</code></pre><p>Now you can run <strong>install</strong></p>
<pre><code>chmod +x install
./install
</code></pre><h2 id="bower">Bower</h2>
<p>There is no set rule for how to configure bower. Remember, however,
that you probably want to either place your bower.json file in the
<strong>www</strong> folder, or else place it in your root, and set up a <strong>.bowerrc</strong>
file that looks like this:</p>
<pre><code>{
  &quot;directory&quot;: &quot;www/bower_components&quot;
}
</code></pre><p>The point is that you want your bower components in <strong>www</strong>, not in your
project root. This is because the HTML files in your project are run from
<strong>www</strong> and not from your project root.</p>
<h2 id="set-up-custom-icons">Set up Custom Icons</h2>
<p>You can set up custom icons for your application by copying the necessary
files from <strong>JsObjects/Cordova/CordovaResourceIcons</strong>:</p>
<pre><code>cp -r ~/Git/JsObjects/Cordova/CordovaResourceIcons/config .
cp -r ~/Git/JsObjects/Cordova/CordovaResourceIcons/hooks/after_platform_add/ hooks/.
cp -r ~/Git/JsObjects/Cordova/CordovaResourceIcons/hooks/after_platform_ls/ hooks/.
</code></pre><p>Here is a shell script that issues the above commands:</p>
<pre><code>#! /bin/bash

# Copy Charlie&#39;s default Cordova icons into the current project.
# Run this script from the root of your project.
# After running the script, replace my icons with your own.
# NOTE: JSOBJECTS is set in .bash_aliases and should 
# resolve to ~/Git/JsObjects

RES_ICONS=$JSOBJECTS/Cordova/CordovaResourceIcons

cp -r $RES_ICONS/config .
cp -r $RES_ICONS/hooks/after_platform_add/ hooks/.
cp -r $RES_ICONS/hooks/after_platform_ls/ hooks/.
</code></pre><p>After copying the icons into place, you can install them by typing</p>
<pre><code>cordova platform ls
</code></pre><p>If you install them before you running <strong>cordova platform add android</strong> then
they will be installed automatically at that point. You could also modify
the scripts in the hooks directory to copy the icons from another location.</p>
<h1 id="express-to-cordova">Express to Cordova</h1>
<p>It is relatively simple copy an Express application into a
Cordova project. The key points to grasp are:</p>
<ul>
<li>the files from the <strong>public</strong> directory of an Express project belong in the <strong>www</strong> directory of a Cordova project. </li>
<li>You need to bring along your bower components or similar files that are needed to make the project run.</li>
</ul>
</div></body></html<li><a href="#overview">Overview</a></li>
<li><a href="#names">Names</a></li>
<li><a href="#geo">Geo</a></li>
<li><a href="#is-my-phone-attached">Is My Phone Attached</a></li>
<li><a href="#install-script">Install Script</a></li>
<li><a href="#bower">Bower</a></li>
<li><a href="#set-up-custom-icons">Set up Custom Icons</a></li>
<li><a href="#express-to-cordova">Express to Cordova</a></li>>