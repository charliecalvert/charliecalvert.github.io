<!DOCTYPE html>
<html dir="ltr">

<!-- #BeginTemplate "../../Elvenware.dwt" -->

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<!-- #BeginEditable "doctitle" -->
<title>Logging with Logd</title>
<meta name="description" content="Logging with LogCat and Log.d in Android applications run from Eclipse" />
<meta name="keywords" content="log log.d error exception Android Eclipse" />
<!-- #EndEditable -->
<meta content="width=device-width,minimum-scale=1.0,maximum-scale=1.0" name="viewport" />
<link href="/charlie/libs/css/style2.css" rel="stylesheet" title="style2" type="text/css" />
<link href="/charlie/libs/jquery-ui/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="/charlie/libs/scripts/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js" type="text/javascript"></script>
<script src="/charlie/libs/scripts/elvenware.js" type="text/javascript"></script>
<!-- #BeginEditable "docScripts" -->
<!-- #EndEditable -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2806409-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>

<div id="container">
	<header>
		<div class="navButton" onclick="elvenware.toggleMenu()">
			Toggle Menu</div>
		<h1>Charlie Calvert on Elvenware</h1>
		<h2>Writing Code and Prose on Computers</h2>
	</header>
	<nav>
		<h2>Menu</h2>
		<div id="accordion00">
		<h2 class="navSection01">Core Code</h2>
			<ul>
				<li><a href="../index.html">Strongly Typed</a></li>
				<li><a href="../web/index.html">Web &amp; Scripts</a></li>
				<li><a href="../cloud/index.shtml">Cloud</a></li>
			</ul>
		
			<h2 class="navSection02">OS and Tools</h2>
			<ul>
				<li><a href="../../os/index.html">OS</a></li>
				<li><a href="../database/index.html">Database</a></li>
				<li><a href="../../books/index.html">My Writing</a></li>
			</ul>
			
		
			<h2 class="navSection03">Art</h2>
			<ul>
				<li><a href="../../Art/index.html">Poems &amp; Photos</a></li>
				<li><a href="../../books/reading/index.html">Book Reviews</a></li>
				<li><a href="../../spirit/index.html">Spiritual</a></li>
			</ul>
			<h2 class="navSection04">Links</h2>
			<ul>
				<li><a href="../../links.html">My Links</a></li>
				<li><a href="http://www.falafel.com/">Falafel</a></li>
				<li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li>
			</ul>
		</div>
	</nav>
	<article>
		<figure>
			<img alt="Elvenware" src="../../images/elvenwarelogo.png" /></figure>
		<!-- #BeginEditable "body" -->
		<h1>Logging</h1>

		<p>Andriod comes with a
		<a href="http://developer.android.com/reference/android/util/Log.html">
		class designed to help with logging</a>. It is found in this package:</p>
		<pre class="code">import android.util.Log;</pre>

		<p>It is typically used like this, where the most important lines are 
		the last <strong>import</strong> statement, the declaration for the
		<strong>String</strong> <strong>tag</strong>, and the call to <strong>
		Log.d</strong>:&nbsp;</p>
		<pre class="code">package com.elvenware.testlogging;

import android.app.Activity;
import android.os.Bundle;
<strong>import android.util.Log;
</strong>
public class TestLoggingActivity extends Activity 
{
  <strong>String tag = "TestLogging";</strong>

  @Override
  public void onCreate(Bundle savedInstanceState) 
  {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     <strong>Log.d(tag, "OnCreate called");</strong>
  }
}</pre>
		<p>Begin by declaring a "tag" which is passed as the first parameter to 
		each call to <strong>Log.d</strong>. This tag will be used to help you 
		filter logging messages. The second parameter is any arbitrary debug message that 
		you want to log.</p>
		<h2>Viewing the Log</h2>
		<p>You can use a tool built into Eclipse called <strong>LogCat</strong> 
		to view the messages you log. When 
		debugging your applications, you should always be sure <strong>LogCat</strong> is running. If its not visible right away, choose 
		the following from the Eclipse menu:</p>
<pre><strong>Window | Show View | LogCat</strong></pre>
<p>If that doesn't work, or if you want more information, try:</p>
<pre><strong>Window | Show View | Other | Android | LogCat</strong></pre>

		<p>To 
		begin, press the green button in the <strong>Saved Filters</strong> view on the left of 
		the <strong>LogCat</strong> window. Use the dialog that appears to create a filter. You 
		can filter by several different fields. Let's begin by filtering on the 
		Tag we created, as shown in Figure 1.</p>
		<p>
		<img alt="Logging Setup" height="331" src="images/Logging01.png" style="width: 535px"></p>
		<p><strong>Figure 01: Filtering by tag.</strong></p>
		<p>When you run your program your log will be recorded in the LogCat 
		window. In Figure 2, notice that I have selected in the <strong>Saved Filters</strong> view the 
		filter that I set up in Figure 01:</p>
		<p>
		<a href="images/Logging02.png">
		<img alt="View a log in LogCat" src="images/Logging02Small.png" width="424" height="112" style="width: 434px"></a></p>

		<p>
		<strong>Figure 02: Viewing the custom filter we created when we used 
		Log.d. (Click to view full sized image.)</strong></p>

		<p>
		<strong>NOTE</strong>: LogCat has a <strong>
		pause</strong> button on the far right near the top. This 
		button must be in the correct state or you won't see, or be able to 
		properly study, your debug output. It is simpler to let you experiment 
		with the button than to try to say the obvious things about how it 
		works. Pause means -- well, just try it and you will see it does what 
		you would expect.</p>

		<p>
		There are six fields visible in the LogCat window:</p>
		<ul>
			<li><strong>Level</strong>: Which in this case is set to D for debug.</li>
			<li><strong>Time</strong>: The time when the message was recorded</li>
			<li><strong>PID</strong>: The Process ID of the application that sent the message.</li>
			<li><strong>Application</strong>: The name of your application. This 
			is usually the <strong>namespace</strong> of your main <strong>
			Activity</strong>.</li>
			<li><strong>Tag</strong>: The tag we specified at the top of the class we created and 
			passed in the first parameter of our call.</li>
			<li><strong>Text</strong>: The text we sent in the second parameter</li>
		</ul>
		<p>You can click the disk icon on the right of LogCat to save selected 
		output from the LogCat window to a text file. This can be useful if you 
		want to search through the file in an editor, or send the file to 
		someone else such as another developer or your teacher. Here is the 
		entry shown in Figure 2 as it appears in a text file:</p>
		<pre class="code">02-02 15:17:38.896: D/TestLogging(1653): OnCreate called</pre>
		<p>It is sometimes useful to select the <strong>All Messages</strong> 
		filter in the <strong>Save Filters</strong> view. At first, there will 
		be so many messages that it is difficult to make sense of them. You can 
		save all these messages to a text file and search through them, or better, double click the 
		<strong>All 
		Messages</strong> text in the <strong>Save Filters</strong> view and create a filter, much as you 
		did in Figure 1. For instance, if I filter only on those messages sent 
		by a particular application, I might get output that looks like this:</p>
		<pre class="code">02-02 15:17:02.376: D/HelloWorld(1593): onCreate.
02-02 15:17:02.376: D/HelloWorld(1593): onStart. UI may be partially visible.
02-02 15:17:02.376: D/HelloWorld(1593): onResume. UI fully visible.
02-02 15:17:02.396: D/MyApplication(1593): configuration changed
02-02 15:17:17.016: D/HelloWorld(1593): onSaveInstanceState. You should load up the bundle
02-02 15:17:17.016: D/HelloWorld(1593): Saved state
02-02 15:17:17.016: D/HelloWorld(1593): onpause. I may be partially or fully invisible
02-02 15:17:17.216: D/HelloWorld(1593): onstop. I am fully invisible
02-02 15:17:38.586: D/HelloWorld(1593): onRestart. UI controls are there.
02-02 15:17:38.586: D/HelloWorld(1593): onStart. UI may be partially visible.
02-02 15:17:38.586: D/HelloWorld(1593): onResume. UI fully visible.
02-02 15:17:38.856: D/HelloWorld(1593): onSaveInstanceState. You should load up the bundle
02-02 15:17:38.856: D/HelloWorld(1593): Saved state
02-02 15:17:38.856: D/HelloWorld(1593): onpause. I may be partially or fully invisible
02-02 15:17:39.066: D/HelloWorld(1593): onstop. I am fully invisible
</pre>

		<p>Here I can see that this application sent out two types of debug 
		information: one has the tag <strong>HelloWorld</strong>, and the other
		<strong>MyApplication</strong>.</p>
		<h2>Exceptions</h2>
		<p>LogCat can help you track down errors in your program. Suppose we 
		modified the code shown above to look like this:</p>
		<pre class="code">public void onCreate(Bundle savedInstanceState) 
{
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);
        
   Log.d(tag, "OnCreate called");
        
   TextView view = (TextView)this.findViewById(1);
   <strong>view.setText("Error");</strong>
}</pre>
<p>
	This program will raise an exception on the call to <strong>setText</strong> 
	because there is no such <strong>TextView</strong> resource in this program 
	and hence <strong>view</strong> will be set to <strong>null.</strong> If you 
	run this program, you will get an exception. After you see the error, be sure to toggle to <strong>off</strong> the
	<strong>pause</strong> button on the far right of the <strong>LogCat</strong> 
	view. Select <strong>All Messages</strong> on the left of LogCat,&nbsp; Scroll up from the bottom of the LogCat 
	view, and look for a "sea of red." Hover your mouse over the second line in 
	the redness. You should see an explanation of what is wrong.&nbsp;</p>

		<p>
		Alternatively, or in addtion, you can create a filter on <strong>All Messages</strong> 
		with the Tag <strong>AndroidRuntime</strong>, or set the <strong>LogLevel</strong> in your Filter to <strong>
		error</strong>. If you do that, it should be fairly easy for you to 
		isolate the error messages:</p>
		<pre class="code">02-02 16:20:17.986: E/AndroidRuntime(1688): FATAL EXCEPTION: main
02-02 16:20:17.986: E/AndroidRuntime(1688): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.elvenware.testlogging/com.elvenware.testlogging.TestLoggingActivity}: java.lang.NullPointerExceptionion
02-02 16:20:17.986: E/AndroidRuntime(1688): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-02 16:20:17.986: E/AndroidRuntime(1688): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-02 16:20:17.986: E/AndroidRuntime(1688): at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-02 16:20:17.986: E/AndroidRuntime(1688): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-02 16:20:17.986: E/AndroidRuntime(1688): at android.os.Handler.dispatchMessage(Handler.java:99)
02-02 16:20:17.986: E/AndroidRuntime(1688): at android.os.Looper.loop(Looper.java:130)
02-02 16:20:17.986: E/AndroidRuntime(1688): at android.app.ActivityThread.main(ActivityThread.java:3683)
02-02 16:20:17.986: E/AndroidRuntime(1688): at java.lang.reflect.Method.invokeNative(Native Method)
02-02 16:20:17.986: E/AndroidRuntime(1688): at java.lang.reflect.Method.invoke(Method.java:507)
02-02 16:20:17.986: E/AndroidRuntime(1688): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-02 16:20:17.986: E/AndroidRuntime(1688): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-02 16:20:17.986: E/AndroidRuntime(1688): at dalvik.system.NativeStart.main(Native Method)
02-02 16:20:17.986: E/AndroidRuntime(1688): Caused by: java.lang.NullPointerException
02-02 16:20:17.986: E/AndroidRuntime(1688): at com.elvenware.testlogging.TestLoggingActivity.onCreate(TestLoggingActivity.java:20)
02-02 16:20:17.986: E/AndroidRuntime(1688): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-02 16:20:17.986: E/AndroidRuntime(1688): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-02 16:20:17.986: E/AndroidRuntime(1688): ... 11 more
</pre>

		<p>The most important lines are the second and the sixteenth, where the 
		sixteenth is also identifiable as the fourth from the bottom. The second 
		line tells us that we have a <strong>null</strong> pointer exception, 
		and the sixteenth tells us that the error occurred on Line 20 of <strong>
		TestLoggingActivity</strong>.<strong>java</strong>. Here is that line:</p>
		<pre class="code">view.setText("Error");</pre>
		<p>As you can see, <strong>LogCat</strong> has correctly located our 
		error.</p>
		<h2>Summary</h2>
		<p>LogCat can help you understand your program, record important events 
		in your program, and debug errors. I use LogCat multiple times every 
		day. I believe it is a well designed tool that does its job well.</p>
		<p>There is more to LogCat than I have explained here, but this 
		information should be sufficient to get you up and running. For 
		additional information, search online or read the relevant text in books 
		such as <strong>Pro Android 3</strong>, pages 54 through 56, found in 
		Chapter 2, in the section called "Debugging your App."</p>
		<h2>Links</h2>
		<ul>
			<li><a href="http://code.google.com/p/microlog4android/">Microlog4android</a>: A popular alternative to the Android built in 
			logging tools</li>
			<li>Back to <a href="index.html">Android Top</a></li>
		</ul>
		<!-- #EndEditable -->
	</article>
	<footer>

		<p>Copyright &copy; <a href="../../index.html">Charlie Calvert</a> |
		<a href="../../index.html">Elvenware Home</a> |
		<a href="../index.html">Writing Code</a> |
		<a href="../delphi/index.html">Delphi</a> |
		<a href="../csharp/index.html">CSharp</a> |
		<a href="../../books/index.html">My Books</a> </p>
	</footer>
</div>

</body>

<!-- #EndTemplate -->

</html>
