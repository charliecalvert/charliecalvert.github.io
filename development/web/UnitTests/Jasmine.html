<!DOCTYPE html>
<html dir="ltr">

<head>
	<meta charset="utf-8" />
	<title>Jasmine</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="/charlie/images/favicon.png">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css">
	<link href="/charlie/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css" />
	<!-- Latest compiled and minified JavaScript - Move to bottom of body element -->
	<script src="//code.jquery.com/jquery.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script src="/charlie/libs/scripts/elvenware.js" type="text/javascript"></script>
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-2806409-2']);
		_gaq.push(['_trackPageview']);
		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
</head>

<body>



	<!-- removed  navbar-fixed-top -->
	<div class="navbar navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="icon-bar"> </span>
					<span class="icon-bar"> </span>
					<span class="icon-bar"> </span>
				</button>
				<a class="navbar-brand" href="/charlie/index.html">Elvenware</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="/charlie/index.html">Home</a></li>
					<li><a href="/charlie/contents.html">About</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li class="dropdown-header">Core Code</li>
							<li><a href="/charlie/development/index.html">Strongly Typed</a></li>
							<li><a href="/charlie/development/web/index.html">Web &amp; Scripts</a></li>
							<li><a href="/charlie/development/cloud/index.shtml">Cloud</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">OS and Tools</li>
							<li><a href="/charlie/os/index.html">OS</a></li>
							<li><a href="/charlie/development/database/index.html">Database</a></li>
							<li><a href="/charlie/books/index.html">My Writing</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Art</li>
							<li><a href="/charlie/Art/index.html">Poems &amp; Photos</a></li>
							<li><a href="/charlie/books/reading/index.html">Book Reviews</a></li>
							<li><a href="/charlie/spirit/index.html">Spiritual</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Links</li>
							<li><a href="/charlie/links.html">My Links</a></li>
							<li><a href="http://www.github.com/charliecalvert">GitHub</a></li>
							<li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li>
						</ul>
					</li>
				</ul>
			</div><!--/.nav-collapse -->
		</div>
	</div>

	<div class="container">

		<div class="starter-template">
			<figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png" /></figure>
<h2>Table of Contents</h2>
<ul>
	<li><a href='#jasmine'>Jasmine</a></li>
	<li><a href='#jasmine-spy'>Jasmine Spy</a></li>
	<li><a href='#async'>Async</a></li>
	<li><a href='#spyon'>SpyOn</a></li>
	<li><a href='#install-jasmine-node'>Install Jasmine-node</a></li>
	<li><a href='#create-route'>Create Route</a></li>
	<li><a href='#basic-jasmine-node'>Basic Jasmine-Node</a></li>
	<li><a href='#run-the-test'>Run the test:</a></li>
	<li><a href='#permanently-delete-from-git-repository'>Permanently Delete from Git Repository</a></li>
</ul>
<h1 id="jasmine">Jasmine</h1>
<p>Jasmine is a unit testing tool for JavaScript. There are many examples of how to use it in JsObjects.</p>
<ul>
<li><a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/UnitTests">Jasmine on JsObjects</a></li>
</ul>
<h2 id="jasmine-spy">Jasmine Spy</h2>
<p>The <a href="https://github.com/charliecalvert/JsObjects/tree/master/JavaScript/UnitTests/JasmineSpyOn">JasmineSpy</a> program demonstrates how to:</p>
<ul>
<li>Use Jasmine to test async calls</li>
<li>SpyOn to create mock objects</li>
</ul>
<h2 id="async">Async</h2>
<p>The Async calls use done:</p>
<pre><code>it(&quot;Integration test makes a real AJAX request&quot;, function(done) {
    textLoader.loadFile(&quot;Sources.html&quot;, function(responseText) {
        var bar = $(responseText).filter(&#39;#paragraph04&#39;).html();
        expect(bar).toBe(&#39;Fine time.&#39;);
        done();
    });
});</code></pre>
<p>Looking at the function above, do you see that the test is past <strong>done</strong> as a parmater? Notice also that it calls <strong>done()</strong> when it is finished. The call to done notifies Jasmine that your callback is complete.</p>
<h2 id="spyon">SpyOn</h2>
<p>Create a mock object and instrument the object so that you can learn key facts such as:</p>
<ul>
<li>Was the mock object called?</li>
<li><p>What parameters were passed to the mock object</p>
<p>it(&quot;Tests that loadFile is called with Sources.html&quot;, function() { // get is stubbed and never really called spyOn(<span class="math">$, &quot;get&quot;);     textLoader.loadFile(&quot;Sources.html&quot;, function(data) {         console.log(data);     });     expect($</span>.get).toHaveBeenCalledWith(&quot;Sources.html&quot;, jasmine.any(Function)); });</p></li>
</ul>
<p>Here we use SpyOn to mock <strong>jQuery.get()</strong>:</p>
<pre><code>spyOn($, &quot;get&quot;);</code></pre>
<p>Once we have mocked it, we cn ask questions, such what parameters was it called with:</p>
<pre><code>expect($.get).toHaveBeenCalledWith(&quot;Sources.html&quot;,  jasmine.any(Function));</code></pre>
<p>Our question here is simple: *Was <strong>get</strong> called with two parameters. The first a string, the second a function. We expect the first parameter, the string, to be &quot;Sources.html&quot;.</p>
<p>When we mock an object, it is never called. Instead it is stubbed. A fake object is put in its place.</p>
<h1 id="install-jasmine-node">Install Jasmine-node</h1>
<pre><code>sudo npm install -g jasmine-node</code></pre>
<p>You will also want to install request locally:</p>
<pre><code>npm install request</code></pre>
<p>Or</p>
<pre><code>npm install request --save-dev</code></pre>
<h1 id="create-route">Create Route</h1>
<p>Create a simple route you want to test:</p>
<pre><code>app.get(&#39;/hello&#39;, function(request, response) { &#39;use strict&#39;;
    response.send(&#39;Hi there.&#39;);
});</code></pre>
<h1 id="basic-jasmine-node">Basic Jasmine-Node</h1>
<p>Save the following as <strong>Tests/SimpleSpec.js</strong>:</p>
<pre><code>var request = require(&#39;request&#39;);

describe(&quot;A suite&quot;, function() {
    it(&quot;should respond with hello world&quot;, function(done) {
        request(&quot;http://localhost:30025/hello&quot;, function(error, response, body) {
            expect(body).toEqual(&quot;Hi there.&quot;);
            done();
        });
    });
}); </code></pre>
<p>Your tests must be saved in a file that has spec as the last four letters in the name. For instance: FooSpec.js is good. SpecFoo.js is not good.</p>
<h1 id="run-the-test">Run the test:</h1>
<p>Now run start your server running in one shell:</p>
<pre><code>node Server.js</code></pre>
<p>Then open a second shell and run your tests:</p>
<pre><code>jasmine-node Tests/</code></pre>
<h1 id="permanently-delete-from-git-repository">Permanently Delete from Git Repository</h1>
<p>A tool called BFG can make permanently deleting files from a repository fairly easy.</p>
<ul>
<li><a href="http://www.elvenware.com/charlie/development/cloud/Git.html#permanent-delete">Elvenware Git</a></li>
</ul>
<!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>        
		<p>Copyright &copy; <a href="/charlie/index.html">Charlie Calvert</a> |
		<a href="/charlie/contents.html">Site Overview</a> |
		<a href="/charlie/development/index.html">Writing Code</a> |
		<a href="/charlie/development/web/index.html">Web</a> |
		<a href="/charlie/development/web/JavaScript/index.html">JavaScript</a> |
		<a href="/charlie/books/index.html">My Books</a> </p>

      </footer>

    </div><!-- /.container -->
</body>
</html>



