<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>Functional</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div id="navbar" class="navbar-collapse collapse">       <ul class="nav navbar-nav"><li ng-class="{ active: isActive('/')}" class="trigger-collapse"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img alt="Elvenware" src="/images/elvenwarelogo.png" class="elf-normal"/></figure><h1>Functional</h1><p>Welcome to Functional</p><ul><!--TOC_Start--><li><a href="#functional-javascript">Functional JavaScript</a></li>
<li><a href="#maps">Maps</a></li>
<li><a href="#another-example">Another Example</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="functional-javascript"></a>
<h1>Functional JavaScript</h1>
<p>Learn about writing function code.</p>
<p>Functional code is:</p>
<ul>
<li>immutable</li>
<li>stateless</li>
<li>guaranteed, given specific inputs, to always create identical results</li>
</ul>
<a class="anchor" id="maps"></a>
<h2>Maps</h2>
<p>We create a simple map like this:</p>
<pre><code class="lang-javascript">    getMap: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{ <span class="hljs-string">'use strict'</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.deliciousLinks.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(link)</span> </span>{
            <span class="hljs-keyword">return</span> { <span class="hljs-string">'url'</span>: link.u };
        });
    }
</code></pre>
<p>This function takes the data in our deliciousLinks array of objects and converts it into a much simpler array of objects. In particular, the first two objects in our delicious data look like this:</p>
<pre><code class="lang-javascript">var deliciousLinks = [
    {
        <span class="hljs-string">"a"</span>: <span class="hljs-string">"charliecalvert"</span>,
        <span class="hljs-string">"d"</span>: <span class="hljs-string">"Elvenware JavaScript Home Page"</span>,
        <span class="hljs-string">"n"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-string">"u"</span>: <span class="hljs-string">"http://www.elvenware.com/charlie/development/web/JavaScript/"</span>,
        <span class="hljs-string">"t"</span>: [
            <span class="hljs-string">"javascript"</span>,
            <span class="hljs-string">"elvenware"</span>
        ],
        <span class="hljs-string">"dt"</span>: <span class="hljs-string">"2015-10-08T19:33:33Z"</span>
    },
    {
        <span class="hljs-string">"a"</span>: <span class="hljs-string">"charliecalvert"</span>,
        <span class="hljs-string">"d"</span>: <span class="hljs-string">"Speaking JavaScript"</span>,
        <span class="hljs-string">"n"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-string">"u"</span>: <span class="hljs-string">"http://speakingjs.com/es5/index.html"</span>,
        <span class="hljs-string">"t"</span>: [
            <span class="hljs-string">"javascript"</span>,
            <span class="hljs-string">"books"</span>,
            <span class="hljs-string">"ebook"</span>,
            <span class="hljs-string">"learning"</span>
        ],
        <span class="hljs-string">"dt"</span>: <span class="hljs-string">"2015-10-04T04:16:39Z"</span>
    }, etc...
</code></pre>
<p>After our map function runs, we have create a simplified array of objects that look like this:</p>
<pre><code class="lang-javascript">[
    {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://www.elvenware.com/charlie/development/web/JavaScript/"</span>
    },
    {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://speakingjs.com/es5/index.html"</span>
    }, etc...
</code></pre>
<p>We have converted an array of complex objects with six properties into an array of simple objects with only one property called <strong>url</strong>.</p>
<p>Once you understand the <strong>map</strong> function, it is easy to ceate more maps. For instance, here would be a method that maps both the <strong>u</strong> and the <strong>a</strong> properties of our original object in an object with two properties called <strong>url</strong> and <strong>owner-name</strong>:</p>
<pre><code class="lang-javascript">getOwnerNameMap: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{ <span class="hljs-string">'use strict'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.deliciousLinks.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(link)</span> </span>{
        <span class="hljs-keyword">return</span> { <span class="hljs-string">'url'</span>: link.u, <span class="hljs-string">'owner-name'</span>: link.a };
    });
}
</code></pre>
<p><strong>NOTE</strong>: <em>You can include the above method in <strong>control.js</strong> if you want, but it is not a necessary part of the assignment.</em></p>
<p>The first two records in the array returned by the <strong>getOwnerNameMap</strong> function might look something like this:</p>
<pre><code class="lang-javascript">[
    {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://www.elvenware.com/charlie/development/web/JavaScript/"</span>,
        <span class="hljs-attr">"owner-name"</span>: <span class="hljs-string">"charliecalvert"</span>
    },
    {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://speakingjs.com/es5/index.html"</span>,
        <span class="hljs-attr">"owner-name"</span>: <span class="hljs-string">"charliecalvert"</span>
    }, etc...
</code></pre>
<a class="anchor" id="another-example"></a>
<h2>Another Example</h2>
<p>Suppose we had only two members in our array:</p>
<pre><code class="lang-javascript">[
    {
        <span class="hljs-attr">"Year"</span>: <span class="hljs-string">"2017"</span>,
        <span class="hljs-attr">"Solar (quadrillion Btu)"</span>: <span class="hljs-string">"0.8045307"</span>,
        <span class="hljs-attr">"Geothermal (quadrillion Btu)"</span>: <span class="hljs-string">"0.2349284"</span>,
        <span class="hljs-attr">"Other biomass (quadrillion Btu)"</span>: <span class="hljs-string">"0.50916"</span>,
        <span class="hljs-attr">"Wind power (quadrillion Btu)"</span>: <span class="hljs-string">"2.202328"</span>,
        <span class="hljs-attr">"Liquid biofuels (quadrillion Btu)"</span>: <span class="hljs-string">"1.2329197"</span>,
        <span class="hljs-attr">"Wood biomass (quadrillion Btu)"</span>: <span class="hljs-string">"1.9860924"</span>,
        <span class="hljs-attr">"Hydropower (quadrillion Btu)"</span>: <span class="hljs-string">"2.5859957"</span>
    },
    {
        <span class="hljs-attr">"Year"</span>: <span class="hljs-string">"2016"</span>,
        <span class="hljs-attr">"Solar (quadrillion Btu)"</span>: <span class="hljs-string">"0.6298938"</span>,
        <span class="hljs-attr">"Geothermal (quadrillion Btu)"</span>: <span class="hljs-string">"0.232438"</span>,
        <span class="hljs-attr">"Other biomass (quadrillion Btu)"</span>: <span class="hljs-string">"0.5113525"</span>,
        <span class="hljs-attr">"Wind power (quadrillion Btu)"</span>: <span class="hljs-string">"2.0395132492"</span>,
        <span class="hljs-attr">"Liquid biofuels (quadrillion Btu)"</span>: <span class="hljs-string">"1.2406718727"</span>,
        <span class="hljs-attr">"Wood biomass (quadrillion Btu)"</span>: <span class="hljs-string">"1.9724914"</span>,
        <span class="hljs-attr">"Hydropower (quadrillion Btu)"</span>: <span class="hljs-string">"2.5965158"</span>
    }
]
</code></pre>
<p>Here is the method of <strong>RenewablesUtls</strong> that calls the built in JavaScript <strong>map</strong> function:</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">this</span>.getYears = <span class="hljs-function"><span class="hljs-keyword">function</span></span>() {
    <span class="hljs-keyword">return</span> renew<span class="hljs-type">ables</span>.map(<span class="hljs-function"><span class="hljs-keyword">function</span></span>(renew<span class="hljs-type">able</span>) {
        <span class="hljs-keyword">return</span> renew<span class="hljs-type">able</span>.Year;
    });
};
</code></pre>
<p>This method pulls our a single field from each member of our array of renewable objects array. In particular, it finds the Year field of each object in our array. The map method then creates an array consisting only of those fields. For instance, s
Our method would return this:</p>
<pre><code class="lang-javascript">[<span class="hljs-number">2017</span>, <span class="hljs-number">2016</span>]
</code></pre>
<p>You can also return more complex arrays. For instance, you could return an array that looked like this:</p>
<pre><code class="lang-javascript">[
    { wood: <span class="hljs-string">"1.9860924"</span> },
    { wood: <span class="hljs-string">"1.92724914"</span> }
]
</code></pre>
<p>This might involve writing code like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">this</span>.getWood = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> renewables.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(renewable)</span> </span>{
        <span class="hljs-keyword">return</span> { wood: renewable[<span class="hljs-string">'Hydropower (quadrillion Btu)'</span>] };
    });
}
</code></pre>
<p>You could test it something like this:</p>
<pre><code class="lang-javascript">it('proves we can get our wood map', function() {
    var woods = scope.renewableUtils.getWood()<span class="hljs-comment">;</span>
    console.log(<span class="hljs-name">woods</span>)<span class="hljs-comment">;</span>
    expect(<span class="hljs-name">woods</span>.length).toBe(<span class="hljs-number">12</span>)<span class="hljs-comment">;</span>
    expect(<span class="hljs-name">woods</span>[<span class="hljs-number">11</span>]).toEqual({ wood: '<span class="hljs-number">2.869035197</span>' })<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
</div></body></html>