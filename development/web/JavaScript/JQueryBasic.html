<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>JQueryBasic</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><!-- script(src="/libs/scripts/Control.js")--><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>JQueryBasic</h1><p>Welcomes to JQueryBasic</p><ul><!--TOC_Start--><li><a href="#understanding-jquery">Understanding JQuery</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#install">Installing JQuery and Using CDN</a></li>
<li><a href="#jquery-forms">jQuery Forms</a></li>
<li><a href="#setupwebserver">Set up an HTTP Web Server for Testing</a></li>
<li><a href="#jquery-button-and-paragraph-demo">jQuery Button and Paragraph Demo</a></li>
<li><a href="#selectors">Selectors and jQuery</a></li>
<li><a href="#jQuerySelectors">Experimenting with jQuery Selectors</a></li>
<li><a href="#attrSelectors">jQuery Attribute Selectors</a></li>
<li><a href="#api">The jQuery API</a></li>
<li><a href="#documentReady">Document Ready Function</a></li>
<li><a href="#jquery-and-input-controls">jQuery and Input Controls</a></li>
<li><a href="#jqueryClick">jQuery Click</a></li>
<li><a href="#clickParam">Pass Parameters with Click</a></li>
<li><a href="#the-hijack-callback">The HiJack Callback</a></li>
<li><a href="#jqueryLoad">JQuery Load</a></li>
<li><a href="#getJSON">jQuery getJSON</a></li>
<li><a href="#jquery-ajax-with-json">jQuery Ajax with JSON</a></li>
<li><a href="#addition-example">Addition Example</a></li>
<li><a href="#the-ajax-success-function">The Ajax success Function</a></li>
<li><a href="#the-ajax-error-handler">The Ajax Error Handler</a></li>
<li><a href="#pass-multiple-pieces-of-data-in-an-ajax-call">Pass Multiple Pieces of Data in an Ajax Call</a></li>
<li><a href="#morph">Dynamically Changing a Page with jQuery Part I</a></li>
<li><a href="#morph02">Dynamically Changing a Page with jQuery Part II</a></li>
<li><a href="#formtest">Form Test</a></li>
<li><a href="#adding">Adding Machine</a></li>
<li><a href="#post">Posting Data</a></li>
<li><a href="#radioButtons">RadioButtons</a></li>
<li><a href="#addingStructuredData">Dynamically Add Data to a Table</a></li>
<li><a href="#jqHandlebars">jQuery and Handlebars</a></li>
<li><a href="#links">Links</a></li><!--TOC_End--></ul><h1 id="understanding-jquery">Understanding JQuery</h1>
<p>jQuery is designed to help you easily transform static HTML pages
into dynamic pages that can be changed at runtime. This page is
designed to help introduce you to several core principles of jQuery
development.</p>
<h2 id="introduction">Introduction</h2>
<p>jQuery is a JavaScript library designed to be used in conjunction with
HTML and CSS. There are several major design goals associated with this
library:</p>
<ul>
<li>Make it easy to parse and traverse an HTML document. In other words,
it gives you easy access to the DOM.</li>
<li>It makes it easy for you to animate the elements in an HTML page. In
other words, it makes Ajax easy.</li>
<li>It provides an unobtrusive, simple means of handling events. This
ensures that your HTML, CSS and JavaScript remain completely
separated from one another. Though this is a bit of a
simplification, I usually strive to put HTML in one file, CSS in
another file, and my JavaScript code in a third file.</li>
<li>It hides the differences between various browsers, and when
possible, implements advanced features in older browsers.</li>
</ul>
<h2 id="install">Installing JQuery and Using CDN</h2>
<p>Traditionally we <a href="http://docs.jquery.com/Downloading_jQuery">download
JQuery</a> and use script and
link tags to reference the library and our accompanying CSS.</p>
<p>Here is how we might typically link in jQuery using standard HTML
syntax:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"jquery-1.6.2.min.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>Here is how to link it in using the <a href="../CdnExplained.html">Content Developer Network
(CDN),</a> which is a great solution, so long as you
machine is always on the Internet:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://code.jquery.com/jquery-1.7.2.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>Or you can use this one of these:</p>
<ul>
<li><a href="http://code.jquery.com/jquery-latest.js">http://code.jquery.com/jquery-latest.js</a></li>
<li><a href="http://code.jquery.com/jquery.min.js">http://code.jquery.com/jquery.min.js</a></li>
<li><a href="http://code.jquery.com/jquery.js">http://code.jquery.com/jquery.js</a></li>
</ul>
<p>A complete head element that includes both jQuery:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"text/html; charset=utf-8"</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"Content-Type"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,minimum-scale=1.0, maximum-scale=1.0"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>JQuery MultiPage<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://code.jquery.com/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
</code></pre>
<p>If you are working with local, downloaded copies of the jQuery scripts,
then the last line of the head element shown above might look like one
of these, depending on whether or not you want a URL that contains a
version number:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../scripts/jquery-1.6.4.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../scripts/jquery.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>Whether you put a jQuery version number in your code or not is up to
you. Sometimes I download the most recent jQuery, then save it to a well
known location on my site without the version number. That way I can
simply update the jQuery JavaScript file without having to update my
HTML code. Of course, if some script that I have depends on my using a
particular version of jQuery, than I would include the version number in
the code. Frankly, I have yet to encounter a case where I need to use a
particular version of jQuery. The latest version has always worked for
me.</p>
<p>I suppose version might matter if you have a particular verison of some
library, say jQuery UI, that is paired with a particular version of
jQuery. But again, even in that case, one should be able to upgrade to
the most recent version of the library, and find that it uses the most
recent version of jQuery. At least that is what should happen, and in
all the cases I&#39;ve encountered, that is what happens. But perhaps with
more obscure libraries, this might become an issue.</p>
<p>Some additional references for this material are available here:</p>
<ul>
<li>JQuery: <a href="http://jquery.com/">http://jquery.com/</a></li>
<li>JQuery Download Page:
<a href="http://docs.jquery.com/Downloading_jQuery">http://docs.jquery.com/Downloading_jQuery</a></li>
<li>CDN Page:
<a href="http://www.elvenware.com/charlie/development/web/CdnExplained.html">http://www.elvenware.com/charlie/development/web/CdnExplained.html</a></li>
</ul>
<h2 id="jquery-forms">jQuery Forms</h2>
<p>There are three steps we need to take to properly handle forms:</p>
<ul>
<li>Declare the form in jade/html</li>
<li>Create submit button</li>
<li>Create a response handler for the submit button</li>
</ul>
<p>To get started, we declare our HTML such that all the input controls are inside a form:</p>
<pre><code class="lang-xml">&lt;form <span class="hljs-built_in">id</span>=<span class="hljs-string">"target"</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">"panel panel-default"</span>&gt;
        &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">"panel-heading"</span>&gt;My Form Controls&lt;/<span class="hljs-keyword">div</span>&gt;
        &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">"panel-body"</span>&gt;
            &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">"row"</span>&gt;
                &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">"col-sm-6"</span>&gt;
                    &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">"panel panel-default"</span>&gt;
                        &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">"panel-heading"</span>&gt;Description&lt;/<span class="hljs-keyword">div</span>&gt;
                        &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">"panel-body"</span>&gt;&lt;p&gt;Learn how <span class="hljs-keyword">to</span>...
                            Fill <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> input <span class="hljs-keyword">and</span> push <span class="hljs-keyword">the</span>
                            etc...
</code></pre>
<p>We declare a submit button:</p>
<pre><code class="lang-xml">&lt;button <span class="hljs-class"><span class="hljs-keyword">type</span></span>=<span class="hljs-string">"submit"</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"btn btn-primary"</span>&gt;<span class="hljs-type">Submit</span>&lt;/button&gt;
</code></pre>
<p>In <strong>control.js</strong>, in the document ready method, we put a jQuery <strong>submit</strong> handler:</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">"#target"</span>).submit(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
    event.preventDefault();
    <span class="hljs-keyword">var</span> userFormData = $(<span class="hljs-keyword">this</span>).serialize();
    $(<span class="hljs-string">'#formResults'</span>).html(userFormData);
});
</code></pre>
<h2 id="setupwebserver">Set up an HTTP Web Server for Testing</h2>
<p>Remember that jQuery is JavaScript, and that means that some features of JQuery might not work right unless you have scripting turned on. It is also a best practice to test you pages on an <a href="../Server/index.html">HTTP webserver</a>. There are many web servers available for developers, but I usually set up IIS in Windows, or Apache in Linux, and use those servers to test my code. I discuss setting up servers in the Web Server section:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/www.elvenware.com/charlie</span><span class="hljs-regexp">/development/web</span><span class="hljs-regexp">/Server/index</span>.html
</code></pre>
<p>When everything is set up correctly, your URL should not look like the
first of the following examples, and should look like the second:</p>
<ul>
<li><a href="../../../foo.html">file:///J:/Web/Elvenware/charlie/foo.html</a> --
not always jQuery friendly</li>
<li><a href="http://localhost:8000/charlie/foo.html">http://localhost:8000/charlie/foo.html</a></li>
</ul>
<p>Many HTML editors allow you to configure how they launch pages when you
click a preview button. When set up correctly they do not launch a page
with a file URL, but with an HTTP URL. The URLs that begin with HTTP
usually ensure that jQuery will work properly. To set up Expression Web
to preview your pages with right kind of URLs, do the following:</p>
<ul>
<li>From the menu, select <strong>Site | Site Settings | Preview</strong></li>
<li>Select: <strong>Preview using a custom URL for your local web site.</strong>For
example, enter<strong>: <a href="http://localhost:8000">http://localhost:8000</a></strong></li>
</ul>
<p>The actual URL you enter will differ depending on how you have set up
your local web server for testing. And of course the option you choose
will be different if you are using a different editor.</p>
<h2 id="jquery-button-and-paragraph-demo">jQuery Button and Paragraph Demo</h2>
<p>The following is a &quot;Hello World&quot; style demo of jQuery basics. Let&#39;s
start with a very simple HTML file that links in jQuery and a custom
JavaScript file. The file called jquery.js is copy of the jQuery library
downloaded from the jQuery site. In its place you could also place
a CDN reference, as described above.</p>
<pre><code>    <span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>index<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"jquery.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"index.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"paragraph1"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"button1"</span>&gt;</span>Click Me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><p>Here is the cusom index.js file.</p>
<pre><code>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setParagraph</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">'#paragraph1'</span>).html(<span class="hljs-string">'You clicked the button'</span>);
    };

    $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">'#button1'</span>).click(setParagraph);
    });
</code></pre><p>The document ready event handler is called when the HTML file has
finished loading. It contains a jQuery call that says: &quot;When the button
with the id <strong>button1</strong> is clicked call the <strong>setParagraph</strong> function.&quot;
The set paragraph function sets the text of the paragraph element with
id <strong>paragraph1</strong> to the text &quot;You clicked the button.&quot;</p>
<p>It can take awhile to fully understand how and why this code works.
Explaining it in depth is the burden of other text found in this
document. However, as it stands, the code should represent something
of an introduction to how you can use jQuery to dynamically change
the contents of an HTML file.</p>
<h2 id="selectors">Selectors and jQuery</h2>
<p>CSS selectors are a topic that you must understand before you can work
with jQuery. Here is page that covers the basics regarding selectors:</p>
<p><a href="/charlie/development/web/CssGuide/BasicSyntax.html">/charlie/development/web/CssGuide/BasicSyntax.html</a></p>
<p>You should also visit this page on jQuery selectors:</p>
<p><a href="http://api.jquery.com/category/selectors/">http://api.jquery.com/category/selectors/</a></p>
<h2 id="jQuerySelectors">Experimenting with jQuery Selectors</h2>
<p>The many examples found on this page demonstrate a number of ways to use
<a href="http://api.jquery.com/category/selectors/">selectors</a> in jQuery to
match one or more elements in an HTML document, and then perform an
operation on those elements. The jQuery selectors are based on CSS
selectors that you would use in a CSS file.</p>
<p>There are many different ways to use selectors in jQuery, but perhaps
the most common are <a href="http://api.jquery.com/class-selector/">class</a>,
<a href="http://api.jquery.com/id-selector/">ID</a> and
<a href="http://api.jquery.com/element-selector/">element</a> selectors:</p>
<hr>
<p>  Selector Type   jQuery Example              HTML Example
  class           \$(.myClass).someMethod()   \<p class="myClass"\>
  id              \$(&quot;#myId&quot;).someMethod()   \<p id="myId"\>
  element         \$(&quot;p&quot;).someMethod()        \<p\></p>
<hr>
<p>The class selector shown here would find all the elements in the
document that have a class set equal to <strong>myClass.</strong>The <strong>id</strong> selector
would find the single element with the specified id, and the element
selector would find all the <strong>\<p\></strong> elements in the document.</p>
<p>It is important to understand that these are only the three most common
of the many types of selectors used by jQuery. To see a somewhat more
complicated example, study the <strong><a href="#radioButtons">RadioButton</a></strong> section
found in this document.</p>
<h2 id="attrSelectors">jQuery Attribute Selectors</h2>
<p>Look at this selector:</p>
<pre><code class="lang-%7B.code%7D">"<span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[name=mainGroup]</span><span class="hljs-selector-pseudo">:radio"</span>
</code></pre>
<p>For instance, it might be used like this to select all the radiobuttons
with a name of <strong>mainGroup</strong>:</p>
<pre><code class="lang-%7B.code%7D">$(<span class="hljs-string">"input[name=mainGroup]:radio"</span>).<span class="hljs-built_in">click</span>(app.displayRadioButtonSelection);
</code></pre>
<p>Here is a radio button that would be selected with the given selector:</p>
<pre><code class="lang-%7B.code%7D">&lt;input type=<span class="hljs-string">"radio"</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">"mainGroup"</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">"rbPage01"</span>&gt;
</code></pre>
<p>The <strong>[name=mainGroup]</strong> part follows the jQuery <a href="http://api.jquery.com/attribute-equals-selector/">attribute =
&quot;value&quot;</a> selector
pattern. You first give then name of an attribute, and then write the
value for the attribute. For instance, the tag shown above has an
attribute called <strong>name</strong>, and its value is <strong>&quot;mainGroup&quot;</strong>.</p>
<p>The :<strong>radio</strong> part of the selector follows the jQuery radio selector
pattern. For instance, the follow selects all the radio buttons in a
document:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-variable">$(</span><span class="hljs-string">':radio'</span>)
</code></pre>
<p>It is a shorthand way of writing \$(type=&#39;radio&#39;). It is recommended
that you limit the scope of the selection by specifying the tag you want
to use:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-variable">$(</span><span class="hljs-string">"input:radio"</span>)
</code></pre>
<p>If you combine the attribute = value and the radio selector pattern, you
can create very precise selectors like the one we are using in our
primary example for this section:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-variable">$(</span><span class="hljs-string">"input[name=mainGroup]:radio"</span>)
</code></pre>
<p>Here we ask for all the <strong>input</strong> controls of type <strong>radio</strong> with an
attribute called <strong>name</strong> set to the value <strong>mainGroup</strong>.</p>
<h2 id="api">The jQuery API</h2>
<p>Once you have used a selector to select one or more elements from an
HTML document, what kind of operations can you perform on the element
you have selected?</p>
<p>The best single list I have found is from the jQuery documentation:</p>
<p><a href="http://api.jquery.com/">http://api.jquery.com/</a></p>
<p>There is a raw API dump for those with an adventuresome turn of mind:</p>
<p><a href="http://api.jquery.com/api/">http://api.jquery.com/api/</a></p>
<p>The code shown in the remainder of this document demonstrate at least a
few of the key methods most commonly used by beginners to jQuery.</p>
<h2 id="documentReady">Document Ready Function</h2>
<p>The following code will be called when the page is loaded and ready to
be manipulated by jQuery or other JavaScript. It is similar to the
standard JavaScript<strong>onLoad</strong> event, only you can you have multiple
copies of this method associated with a single page and jQuery will
ensure they are each called at the appropriate time.</p>
<pre><code class="lang-%7B.code%7D">$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    $(<span class="hljs-string">"#paragraph01"</span>).html(<span class="hljs-string">"This sentence added by jQuery"</span>);
});
</code></pre>
<p>Though most explanations I&#39;ve seen are not very specific about the
advantages that document ready has over handling an <strong>onLoad</strong> event,
all sources do seem to agree that it is superior. Perhaps document.ready
executes after the document has loaded but before the images are loaded?
I&#39;m not clear, but everyone gets very emphatic that jQuery document is
superior to <strong>onLoad.</strong> (I&#39;m not being cynical about jQuery itself, but
rather about the people who write on this subject, myself included, I&#39;m
sure!</p>
<h2 id="jquery-and-input-controls">jQuery and Input Controls</h2>
<p>Declare an input control:</p>
<pre><code>&lt;input id=<span class="hljs-symbol">'inputData'</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"Default data"</span>&gt;
</code></pre><p>Get text from an input control:</p>
<pre><code><span class="hljs-keyword">var</span> inputData = $(<span class="hljs-string">'#inputData'</span>).val();
</code></pre><p>Put text in an input control:</p>
<pre><code>var stringToShowUser = <span class="hljs-string">'You entered: '</span> + inputData<span class="hljs-comment">;</span>
$(<span class="hljs-string">'#inputData'</span>).val(stringToShowUser)<span class="hljs-comment">;</span>
</code></pre><h2 id="jqueryClick">jQuery Click</h2>
<p>Assign on <a href="http://api.jquery.com/click/">OnClick</a> event handler to a tag:</p>
<pre><code>-<span class="ruby">   \$(<span class="hljs-string">"p"</span>).click(f(){});
</span>-<span class="ruby">   Here f() will be executed whenever p<span class="hljs-string">'s are clicked.
</span></span>-<span class="ruby"><span class="hljs-string">   It'</span>s like writing &amp;lt;p click(f(){});&amp;gt;</span>
</code></pre><p>Customize OnClick events so code of our own is called. Instead of the traditional OnClick event executing our code executes instead. This method can be used in Ajax so that Anchor clicks don&#39;t load a page, but load certain tags from a page and insert them into the current document. See <a href="http://www.elvenware.com/charlie/development/web/JavaScript/OnClickHandler.html">this page</a> for an example.</p>
<h2 id="clickParam">Pass Parameters with Click</h2>
<p>One tip I should share with everyone: You can pass in parameters to click functions.</p>
<p>Suppose you respond to a button click:</p>
<pre><code>$(<span class="hljs-string">"#button01"</span>).<span class="hljs-built_in">click</span>(foo);
</code></pre><p>And you implement foo:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> };
</code></pre><p>But sometimes you want to pass in a parameter to foo:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span><span class="hljs-params">(x)</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * x; }
</code></pre><p>You can pass in the parameter inside a JavaScript object like this:</p>
<pre><code>$(<span class="hljs-string">"#button01"</span>).<span class="hljs-built_in">click</span>({ x: <span class="hljs-number">2</span> }, foo);
</code></pre><p>Then implement foo like this:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span><span class="hljs-params">(event)</span> </span>{
  <span class="hljs-keyword">var</span> x = event.data.x;
  <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * x;
}
</code></pre><p>The point is that event handlers are always passed an event
object, even if we don&#39;t usually use it. In this case, we
see that we can add data to the event object that is being
passed in.</p>
<p>What we are doing actually is documented here:</p>
<ul>
<li><a href="http://api.jquery.com/click/">http://api.jquery.com/click/</a></li>
</ul>
<p>It&#39;s the second example they show:</p>
<pre><code><span class="hljs-selector-class">.click</span>( <span class="hljs-selector-attr">[eventData ]</span>, <span class="hljs-selector-tag">handler</span>(<span class="hljs-selector-tag">eventObject</span>) )
</code></pre><p>See also:</p>
<ul>
<li><a href="http://api.jquery.com/event.data/">http://api.jquery.com/event.data/</a></li>
<li><a href="http://api.jquery.com/category/events/event-object/">http://api.jquery.com/category/events/event-object/</a></li>
<li><a href="http://stackoverflow.com/a/9467172/253576">http://stackoverflow.com/a/9467172/253576</a></li>
</ul>
<h3 id="the-hijack-callback">The HiJack Callback</h3>
<ul>
<li>When someone clicks the part of index.html now in IPhoneGo, this
method is called</li>
<li>It prevents the default anchor href handler</li>
<li>Then it calls loadPage() with a URL</li>
<li>loadPage takes the #content from the URL (Page0X.html) and puts it
in the container of IPhoneGo.html.</li>
</ul>
<h2 id="jqueryLoad">JQuery Load</h2>
<p>Use the <a href="http://api.jquery.com/load/">jQuery.load()</a> method to enable
Ajax. The goal is to load not a whole page, but part of a page. From
the user&#39;s perspective, the page is changing, morphing, as they look at
it. This saves a great deal of time as it means that a trip back to the
server to retrieve and reload an entire page is not necessary. The
benefits are faster response, and less blinking, less refreshing of the
entire screen.</p>
<p><strong>jQuery.load()</strong> takes two parameters:</p>
<ul>
<li>The URL to load (Must be in same domain)</li>
<li>A callback function</li>
</ul>
<p>Here is an example call:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-variable">$(</span><span class="hljs-string">'#container'</span>).load(URL + <span class="hljs-string">'#content'</span>, hijackLinks);
</code></pre>
<p>This code changes the part of the document with the id <strong>container</strong>. It
replaces that element with the content from a document referenced by a
URL.</p>
<ul>
<li>Load into the #container of current document</li>
<li>The #content from the document referenced by URL</li>
<li><strong>hijackLinks</strong> is the callback.</li>
<li>The callback is called after the URL is loaded</li>
</ul>
<p>Here is another example, which shows how to print out an error message.</p>
<pre><code>     $(<span class="hljs-string">"#data01"</span>).load(<span class="hljs-string">"../data.html #div01"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response, status, xhr</span>) </span>{
         <span class="hljs-keyword">if</span> (status == <span class="hljs-string">"error"</span>) {
             <span class="hljs-keyword">var</span> msg = <span class="hljs-string">"Error loading data.html: &lt;br /&gt; "</span>;
             $(<span class="hljs-string">"#error"</span>).html(msg + xhr.status + <span class="hljs-string">" "</span> + xhr.statusText);
         }
    });
</code></pre><p>Notice that you need a html element, such as a paragraph tag, to display
your error message. For instance, you might insert a tag in your HTML
file that looks like this:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"error"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre><p>Reporting errors is not just a nicety, it is a necessity. It is helpful
to the user, and invaluable for the developers who put the code
together. If you want to help yourself, then begin by reporting errors
correctly.</p>
<p>##jQuery and REST</p>
<p>There are details about the REST specification that I don&#39;t understand yet. But in general terms, REST is what we do when we send commands from a client to a server using a URL. In particular, it is about sending a request to a server and get data such as an XML or JSON document in return, but I don&#39;t think it is limited to that. If we compose a URL and get an HTML document in return, then I still think of that is making a REST call.</p>
<p>In this discusison I&#39;m talking about the kind of URL that appears in the address bar of a browser:</p>
<pre><code><span class="hljs-symbol">http:</span><span class="hljs-comment">//localhost:30025/read</span>
<span class="hljs-symbol">http:</span><span class="hljs-comment">//localhost:30025</span>
<span class="hljs-symbol">http:</span><span class="hljs-comment">//localhost</span>
<span class="hljs-symbol">http:</span><span class="hljs-comment">//www.google.com</span>
</code></pre><p>All of the above are simple HTTP commands that humans can give when using the web. They are also REST calls. The idea of REST is that there is no need for a big, complex framework in order to use the web. We can just compose URI/URLs like the ones above. The core idea here is that simple HTTP, as it was meant to be used by humans, is powerful enough to also allow programmers to get their work done. In fact, it is probably the best, most flexible, and most powerful way for them to get their work done.</p>
<p><strong>NOTE</strong>: <em>URL and URI are equivalent terms. Everyone calls them URLs, but some web committees like to call them URIs just to cause confusion.</em></p>
<p>Remember that we can create these URLs by calling jQuery methods like <strong>\$.getJSON</strong>, <strong>\$.load</strong>, <strong>\$.get</strong> and <strong>\$.ajax</strong>. Suppose we write this:</p>
<pre><code><span class="hljs-symbol">http:</span><span class="hljs-comment">//localhost:30025/read?operanda=1&amp;operandb=2</span>
</code></pre><p>or this:</p>
<pre><code>$.getJSON(/read, {operanda: <span class="hljs-number">1</span>, operandb: <span class="hljs-number">2</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(resultFromServer)</span> </span>{

}
</code></pre><p>Both the URL and the \$.getJSON calls invoke the <strong>/read</strong> route on the server. They both pass the server two parameters called <strong>operanda</strong> and <strong>operandb</strong>. Both calls above are equivalent in that <em>they send the same HTTP packet</em> from the client to the server. They are both REST calls. The server can&#39;t tell whether the call was made by typing in a URL in the address bar, or by calling <strong>\$.getJSON</strong> or <strong>\$.ajax</strong>. It looks exactly the same on the server end. In particular, <strong>request.query</strong> ends up with the same data, and so do all the other fields in the huge <strong>request</strong> object. They both use REST to allow the client to invoke methods on the server.</p>
<p>I should point out, that in general, when developers say REST, they are talking about composing URLs and requesting data, rather than HTML pages, in return. If you ask for and receive an XML or JSON document, then you are using the <strong>programmable web</strong> rather than the <strong>human readable web</strong>. To me, both are forms of REST calls, but I think most people mean the <strong>programmable web</strong> when they are talking about REST.</p>
<p>You need to look at REST as a contrast to other, more complex technologies, such as:</p>
<ul>
<li>SOAP</li>
<li>WSDL</li>
<li>WS-Notification</li>
<li>WS-Security</li>
<li>Corba</li>
</ul>
<p>All of these summon reams of complex code and huge object oriented frameworks to make calls like the ones we show above. For years, everyone thought these big web solutions were the way to program the web. This happened in part, I believe, because companies could sell these complex frameworks for huge sums of money. But it turned out that REST worked just as well, and in many cases much better, than these big web frameworks.</p>
<p>You can read an entire book on REST here for free:</p>
<ul>
<li><a href="http://restfulwebapis.org/RESTful_Web_Services/">http://restfulwebapis.org/RESTful_Web_Services/</a></li>
</ul>
<p>The book is also available for download.</p>
<h2 id="getJSON">jQuery getJSON</h2>
<p>The jQuery <strong>getJSON</strong> method is a wrapper around the <strong>ajax</strong> method. It looks like
this:</p>
<pre><code class="lang-%7B.code%7D">$.getJSON(<span class="hljs-string">'index.json'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
      <span class="hljs-keyword">var</span> name = data[<span class="hljs-number">0</span>].firstName;
      $(<span class="hljs-string">"#firstName"</span>).html(name);
      $(<span class="hljs-string">"#lastName"</span>).html(data[<span class="hljs-number">0</span>].lastName);
  }).success(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"success"</span>); })
    .error(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">jqXHR, textStatus, errorThrown</span>) </span>{ alert(<span class="hljs-string">"error calling JSON. Try JSONLint or JSLint: "</span> + textStatus); })
    .complete(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"complete"</span>); });
</code></pre>
<p>The code shown above will parse JSON that looks like this:</p>
<pre><code class="lang-%7B.code%7D">[
    {
        "<span class="hljs-attr">firstName</span>": <span class="hljs-string">"George"</span>,
        "<span class="hljs-attr">lastName</span>": <span class="hljs-string">"Washington"</span>
    }, {
        "<span class="hljs-attr">firstName</span>": <span class="hljs-string">"John"</span>,
        "<span class="hljs-attr">lastName</span>": <span class="hljs-string">"Adams"</span>
    }, {
        "<span class="hljs-attr">firstName</span>": <span class="hljs-string">"Thomas"</span>,      
        "<span class="hljs-attr">lastName</span>": <span class="hljs-string">"Jefferson"</span>
    }
]
</code></pre>
<pre><code class="lang-%7B.code%7D">$.getJSON(<span class="hljs-string">"index.json"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
   $.each(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, president</span>) </span>{
       $(<span class="hljs-string">'#data01'</span>).append(<span class="hljs-string">"&lt;p&gt;"</span> + president.firstName + <span class="hljs-string">' '</span> + president.lastName + <span class="hljs-string">"&lt;/&lt;p&gt;"</span>);
   });
});
</code></pre>
<h2 id="jquery-ajax-with-json">jQuery Ajax with JSON</h2>
<p>The <a href="http://api.jquery.com/jQuery.ajax/">$.ajax()</a> method is one of the most
important in the entire jQuery library. It allows us to make asynchronous
calls to the server. Both $.getJSON and $.load use $.ajax to do their actual
work. They are just wrappers around calls to ajax. They are simpler to use
than ajax, but nevertheless they too end up being calls to $.ajax.</p>
<p>You can invoke at least some of the standard HTTP verbs
when making the call. For instance, you can perform an HTTP GET or HTTP
POST. Other verbs may be supported, depending on the browser you are using.</p>
<p>Here is a sample ajax call from the
<a href="https://github.com/charliecalvert/JsObjects/">SimpleReadWrite</a> program in
JsObjects:</p>
<pre><code>    <span class="hljs-keyword">var</span> writeJson = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> userInput = {
            firstName: $(<span class="hljs-string">'#firstName'</span>).val(),
            lastName: $(<span class="hljs-string">'#lastName'</span>).val(),
            age: $(<span class="hljs-string">'#age'</span>).val()
        };

        $.ajax({
            type: <span class="hljs-string">'GET'</span>,
            url: <span class="hljs-string">'/write'</span>,
            dataType: <span class="hljs-string">'json'</span>,
            data: userInput,
            success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
                showDebug(data.result);
            },
            error: showError      
        });
    };
</code></pre><p>NOTE: There are two other programs in JsObjects/JavaScript/NodeCode that
also demonstrate code shown in this section and the immediately succeeding
sections of this HTML file. In particular, see SimpleReadWriteJson02 and
SimpleReadWriteJson03.</p>
<p>The primary purpose of this method is to invoke code on a server. It also
passes data to the server, and processes the data sent back from the server.</p>
<p>First, let&#39;s look at the data we are passing to the server:</p>
<pre><code class="lang-javascript">    <span class="hljs-keyword">var</span> userInput = {
        firstName: $(<span class="hljs-string">'#firstName'</span>).val(),
        lastName: $(<span class="hljs-string">'#lastName'</span>).val(),
        age: $(<span class="hljs-string">'#age'</span>).val()
    };
</code></pre>
<p>This is a simple JavaScript object that can be passed as JSON. It pulls values
from three input controls defined in an HTML file:</p>
<pre><code class="lang-html">&lt;input <span class="hljs-class"><span class="hljs-keyword">type</span></span>=<span class="hljs-string">"text"</span> id=<span class="hljs-string">"firstName"</span> value=<span class="hljs-string">"firstName"</span>&gt;
&lt;input <span class="hljs-class"><span class="hljs-keyword">type</span></span>=<span class="hljs-string">"text"</span> id=<span class="hljs-string">"lastName"</span> value=<span class="hljs-string">"lastName"</span>&gt;
&lt;input <span class="hljs-class"><span class="hljs-keyword">type</span></span>=<span class="hljs-string">"text"</span> id=<span class="hljs-string">"age"</span> value=<span class="hljs-string">"age"</span>&gt;
</code></pre>
<p>Here is what it looks like on screen:</p>
<p><img src="images/Ajax01.png" alt="The SimpleReadWriteJson Program"></p>
<p>When the user&#39;s input is retrieved from the input controls, the data object might
look like this:</p>
<pre><code class="lang-javascript">    var userInput = {
<span class="hljs-symbol">        firstName:</span> Mary,
<span class="hljs-symbol">        lastName:</span> Lu,
<span class="hljs-symbol">        age:</span> <span class="hljs-number">52</span>
    };
</code></pre>
<p>This information is passed in the <strong>data</strong> setting for the ajax call:</p>
<pre><code class="lang-javascript">    $.ajax(
        {
          <span class="hljs-keyword">type</span>: <span class="hljs-string">'GET'</span>,
          url: <span class="hljs-string">'/write'</span>,
          dataType: <span class="hljs-string">'json'</span>,
          <span class="hljs-built_in">data</span>: userInput, etc<span class="hljs-attr">...</span>
    })
</code></pre>
<p>Notice that we also use the settings specify that we want to perform an HTTP
GET, to send and receive data using JSON, and that we want to use a route to the
server (a url) called <strong>write</strong>. In our case, this latter bit of information
signifies that we want to call the following Node Express method on our server:</p>
<pre><code class="lang-javascript">    app.get(<span class="hljs-string">'/write'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(request, response)</span> {</span>
        console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'Write called: '</span> + request.query);
        <span class="hljs-comment">// Code omitted here....</span>
        response.send(<span class="hljs-string">'{"</span>result<span class="hljs-string">":"</span>success<span class="hljs-string">"}'</span>);
    });
</code></pre>
<p>For now, let&#39;s not concern ourselves with main body of the method. Just notice
two things about it:</p>
<ul>
<li>The route: app.get(&#39;/write&#39;</li>
<li>The response: response.send(&#39;{&quot;result&quot;:&quot;success&quot;}&#39;);</li>
</ul>
<p>As you can see, the route in the server matches the url in the client:</p>
<ul>
<li>url: &#39;/write&#39;,</li>
<li>app.get(&#39;/write&#39;</li>
</ul>
<p>It is this correspondance that makes it possible for the client to call a
particular method on the server.</p>
<p>At this stage we have covered all the major parts of this Ajax call except for
two key pieces:</p>
<ul>
<li>The success function</li>
<li>the error function</li>
</ul>
<p>Because each of these pieces of the call are so important, I will show give
them each their section in the text.</p>
<h2 id="addition-example">Addition Example</h2>
<p>Let&#39;s append an <strong>add</strong> method to our project. It will involve a call from the client to the server. Here are the steps:</p>
<ul>
<li>The user enters data on the client.</li>
<li>The data is sent to the server.</li>
<li>The server performs an addition operation on that data and sends back a result.</li>
</ul>
<p>The implementation is relatively straight forward. We complete these steps:</p>
<ul>
<li>Get input from the user.</li>
<li>Make a request from the client to the server.</li>
<li>Send back a response.</li>
</ul>
<p>Set up the interface in index.jade:</p>
<pre>
  button#add Add

  input#operatorA(type='number', value='2')
  input#operatorB(type='number', value='3')
</pre>

<p>For the add method, on the client side, in <strong>public/javascripts/control.js</strong>, you need code like this:</p>
<pre><code class="lang-javascript">$(<span class="hljs-string">'#add'</span>).click(add);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> operatorA = $(<span class="hljs-string">'#operatorA'</span>).val();
    <span class="hljs-keyword">var</span> operatorB = $(<span class="hljs-string">'#operatorB'</span>).val();
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'operators:'</span>, operatorA, operatorB);
    <span class="hljs-keyword">var</span> requestQuery = { operatorA: operatorA, operatorB: operatorB };

    $.getJSON(<span class="hljs-string">'/add'</span>, requestQuery, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sum</span>) </span>{
         <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Sum:"</span>, sum);
         $(<span class="hljs-string">'#display'</span>).html(<span class="hljs-string">'The sum is: '</span> + sum.sum);
    });
}
</code></pre>
<p>Let&#39;s break out the code found above. First we get the input from the user:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> operatorA = $(<span class="hljs-string">'#operatorA'</span>).val();
<span class="hljs-keyword">var</span> operatorB = $(<span class="hljs-string">'#operatorB'</span>).val();
</code></pre>
<p>Then we put it in an object literal:</p>
<pre><code class="lang-javascript">var requestQuery = {
<span class="hljs-symbol">    operatorA:</span> operatorA,
<span class="hljs-symbol">    operatorB:</span> operatorB
};
</code></pre>
<p>Then we send a request to the server and wait for a response.</p>
<pre><code class="lang-javascript">$.getJSON(<span class="hljs-string">'/add'</span>, requestQuery, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sum</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Sum:"</span>, sum);
    $(<span class="hljs-string">'#addresult'</span>).html(<span class="hljs-string">'The sum is: '</span> + sum.sum);
});
</code></pre>
<p>When we get the response, we display the results to the user.</p>
<p>On the server side, in <strong>routes/index.js</strong> you need code like this for the add route:</p>
<pre><code class="lang-javascript">router.get(<span class="hljs-string">'/add'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'add method called'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'The parameters are:'</span>, request.query);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'OperatorA is:'</span>, request.query.operatorA);
  <span class="hljs-keyword">var</span> operatorA = <span class="hljs-built_in">parseInt</span>(request.query.operatorA);
  <span class="hljs-keyword">var</span> operatorB = <span class="hljs-built_in">parseInt</span>(request.query.operatorB);
  response.send({ sum: operatorA + operatorB });
});
</code></pre>
<p>Let&#39;s break that code out into its constituent parts. First re get the data sent from the client:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> operatorA = <span class="hljs-built_in">parseInt</span>(request.query.operatorA);
<span class="hljs-keyword">var</span> operatorB = <span class="hljs-built_in">parseInt</span>(request.query.operatorB);
</code></pre>
<p>Then we perform a calculation and send the result back to user:</p>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.send</span>({ <span class="hljs-attribute">sum</span>: operatorA + operatorB });
</code></pre>
<h2 id="the-ajax-success-function">The Ajax success Function</h2>
<p>The Ajax method shown in the previous section responds like this when it
gets a callback from the server stating that the call has been successful:</p>
<pre><code class="lang-javascript">    success: function(data) {
        showDebug(data.<span class="hljs-literal">result</span>);
    },
</code></pre>
<p>Just to help you understand, here is the call in context:</p>
<pre><code>    $.ajax({
        <span class="hljs-keyword">type</span>: '<span class="hljs-type">GET</span>',
        url: '/write',
        dataType: 'json',
        data: userInput,
        success: function(data) {
            showDebug(data.<span class="hljs-literal">result</span>);
        },
        error: showError      
    });
</code></pre><p>The success function is a standard callback. It is invoked when the client
receives a response from the server indicating that all went as planned. If
something goes wrong, then the <strong>error</strong> function is called instead of
<strong>success</strong>.</p>
<p>As you know, this is the bit of JSON sent back from the server:</p>
<pre><code>{"<span class="hljs-attr">result</span>":<span class="hljs-string">"success"</span>}
</code></pre><p>The showDebug method simply displays the value part of this key/value pair to
the user:</p>
<pre><code><span class="hljs-keyword">var</span> showDebug = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">textToDisplay</span>)
</span>{
    $(<span class="hljs-string">"#debug"</span>).append(<span class="hljs-string">'&lt;li&gt;'</span> + textToDisplay + <span class="hljs-string">'&lt;/li&gt;'</span>);
};
</code></pre><p>Assuming you control both the server and the client, you are free to decide:</p>
<ul>
<li>What data to pass back to the success function</li>
<li>What to do with the data when you can get it</li>
</ul>
<p>Sometimes you might simply assign the data passed back from the server to a
variable in your program. At other times, you might display the result to the
user. Quite often, you will do both:</p>
<ul>
<li>First you assign the returned object to a variable</li>
<li>Then you invoke a method that parses the data and display it to the user.</li>
</ul>
<p>Note that you can, if you wish, pass in a success function to the method
that invokes the ajax call:</p>
<pre><code>    <span class="hljs-keyword">var</span> writeJsonPrivate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">successFunc</span>) </span>{
        <span class="hljs-keyword">var</span> userInput = {
            firstName : $(<span class="hljs-string">'#firstName'</span>).val(),
            lastName : $(<span class="hljs-string">'#lastName'</span>).val(),
            age : $(<span class="hljs-string">'#age'</span>).val()
        };

        $.ajax({
            type : <span class="hljs-string">'GET'</span>,
            url : <span class="hljs-string">'/write'</span>,
            dataType : <span class="hljs-string">'json'</span>,
            data : userInput,
            success : successFunc,
            error : showError
        });
    };

    <span class="hljs-keyword">var</span> writeJson = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        writeJsonPrivate(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
            showDebug(data.result);
        });
    };
</code></pre><p>Notice that in this example writeJsonPrivate takes an argument called
<strong>successFunc</strong>:</p>
<pre><code>var writeJsonPrivate = function(<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>successFunc<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>)
</code></pre><p>It is passed in as an anonymous function when the method is
invoked:</p>
<pre><code>    <span class="hljs-keyword">var</span> writeJson = function() {
        writeJsonPrivate(function(data) {
            showDebug(data.<span class="hljs-literal">result</span>);
        });
    };
</code></pre><h2 id="the-ajax-error-handler">The Ajax Error Handler</h2>
<p>At the end of the previous section we passed in an anonymous function to handle
the success setting of the $.ajax call. Over time, I have settled on handling
the error function for $.ajax calls with the following code:</p>
<pre><code>    <span class="hljs-keyword">var</span> showError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, ajaxOptions, thrownError</span>) </span>{
        showDebug(<span class="hljs-string">"Error occurred: = "</span> + ajaxOptions + <span class="hljs-string">" "</span> + thrownError);
        showDebug(request.status);
        showDebug(request.statusText);
        showDebug(request.getAllResponseHeaders());
        showDebug(request.responseText);
    };

    <span class="hljs-keyword">var</span> showDebug = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">textToDisplay</span>) </span>{
        $(<span class="hljs-string">"#debug"</span>).append(<span class="hljs-string">'&lt;li&gt;'</span> + textToDisplay + <span class="hljs-string">'&lt;/li&gt;'</span>);
    };
</code></pre><p>The #debug selector refers to this code in an HTML file:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">'debug'</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre><p>If an error occurs, the unordered list defined in the above HTML ends
up filled with many lines of html, as shown in the screenshot below. You
don&#39;t have to think about all the data sent by jQuery to the error handler,
but I try to display quite a bit of information as it can be useful when you
are trying to understand what went wrong. There is, in fact, even more
information passed back than I include. But when an error occurs, I find the above
information sufficient in most cases.</p>
<p><img src="images/Ajax02.png" alt="Relatively sparse feedback from the error method"></p>
<p>I forced the error shown in the screen shot above by giving a bad URL. In
particular, I passed in the URL <strong>writes</strong> instead of <strong>write</strong>:</p>
<pre><code>    $.ajax({
        <span class="hljs-string">type :</span> <span class="hljs-string">'GET'</span>,
        <span class="hljs-string">url :</span> <span class="hljs-string">'/writes'</span>,     <span class="hljs-comment">// Should be write not writes</span>
        <span class="hljs-string">dataType :</span> <span class="hljs-string">'json'</span>,
</code></pre><p>Since there is no method on the server to handle this route, an error is thrown.
You can see the error in the screenshot shown above. In particular, look at
the last lines.</p>
<p>It is probably obvious that you could pass this error function to the original
method just as we passed in the <strong>success</strong> function:</p>
<pre><code>    <span class="hljs-keyword">var</span> writeJsonPrivate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">successFunc, showError</span>) </span>{
        <span class="hljs-keyword">var</span> userInput = {
            firstName : $(<span class="hljs-string">'#firstName'</span>).val(),
            lastName : $(<span class="hljs-string">'#lastName'</span>).val(),
            age : $(<span class="hljs-string">'#age'</span>).val()
        };

        $.ajax({
            type : <span class="hljs-string">'GET'</span>,
            url : <span class="hljs-string">'/writes'</span>,
            dataType : <span class="hljs-string">'json'</span>,
            data : userInput,
            success : successFunc,
            error : showError
        });
    };

    <span class="hljs-keyword">var</span> writeJson = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        writeJsonPrivate(
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
                showDebug(data.result);
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, ajaxOptions, thrownError</span>) </span>{
                showDebug(<span class="hljs-string">"Error occurred: = "</span> + ajaxOptions + <span class="hljs-string">" "</span> + thrownError);
                showDebug(request.status);
                showDebug(request.statusText);
                showDebug(request.getAllResponseHeaders());
                showDebug(request.responseText);
            }
        );
    };
</code></pre><p>The beauty of this latter system is that you can pass in different
<strong>success</strong> or <strong>error</strong> handlers depending on the circumstances in your
program. For instance, you can pass in this comprehensive error handler
during development, and some simpler handler for use in a shipping product.
This technique of passing in callbacks can also be very useful when writing
Unit testing code.</p>
<p>It is probably obvious to most readers, but I&#39;ll add one last final comment
about error handlers. You can, if you wish, include an anonymous
function attached to the original ajax call:</p>
<pre><code>    $.ajax({
        <span class="hljs-built_in">type</span> : <span class="hljs-string">'GET'</span>,
        url : <span class="hljs-string">'/write'</span>,
        dataType : <span class="hljs-string">'json'</span>,
        data : userInput,
        success :<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span></span> {
            showDebug(data.result);
        },
        <span class="hljs-built_in">error</span> : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(request, ajaxOptions, thrownError)</span></span> {
            showDebug(<span class="hljs-string">"Error occurred: = "</span> + ajaxOptions + <span class="hljs-string">" "</span> + thrownError);
            showDebug(request.status);
            showDebug(request.statusText);
            showDebug(request.getAllResponseHeaders());
            showDebug(request.responseText);
        }
    });
</code></pre><p>In the code shown above, the <strong>success</strong> and <strong>error</strong> functions are
implemented directly in the <strong>ajax</strong> call. I did this a lot at first, but
since I keep passing in the same error handler regardless of what kind Ajax
call I make, I am finding it simpler to pass in the method, or store it
someplace else. These variations are demonstrated in the JsObjects sample
programs called SimpleReadWriteJson02 and SimpleReadWriteJson03.</p>
<p>I have not tried it yet, but it might be possible to use the $.ajaxSetup()
method to define a default error handler:</p>
<ul>
<li><a href="http://api.jquery.com/jQuery.ajaxSetup/">http://api.jquery.com/jQuery.ajaxSetup/</a></li>
</ul>
<h2 id="pass-multiple-pieces-of-data-in-an-ajax-call">Pass Multiple Pieces of Data in an Ajax Call</h2>
<p>Sometimes you want to pass more than one piece of information when you
make an Ajax call. For instance, you might want to pass an object to
save to file, and the name of file name to use when you save the object.
Here is a method that does both those things:</p>
<pre><code>    var writeJsonPrivate = function(successFunc, showError) {

        <span class="hljs-comment">// Here is the data I want to send:</span>
        var fullName = {
            <span class="hljs-string">firstName :</span> <span class="hljs-string">'George'</span>,
            <span class="hljs-string">lastName :</span> <span class="hljs-string">'Washington'</span>
        };

        <span class="hljs-comment">// Here is the file name:</span>
        var fileName = {
            <span class="hljs-string">fileName :</span> <span class="hljs-string">'Data/MyFile.txt'</span>
        };

        <span class="hljs-comment">//     Now put them both in one object:</span>
        var dataToSend = {
            <span class="hljs-string">path :</span> fileName,
            <span class="hljs-string">person :</span> fullName
        };

        $.ajax({
            <span class="hljs-string">type :</span> <span class="hljs-string">'GET'</span>,
            <span class="hljs-string">url :</span> <span class="hljs-string">'/write'</span>,
            <span class="hljs-string">dataType :</span> <span class="hljs-string">'json'</span>,
            <span class="hljs-string">data :</span> dataToSend,
            <span class="hljs-string">success :</span> successFunc,
            <span class="hljs-string">error :</span> showError
        });
    };
</code></pre><p>Here is what it looks like on the Server side:</p>
<pre><code>app.get(<span class="hljs-string">'/write'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response</span>) </span>{

    <span class="hljs-comment">// We begin with some debug calls</span>

    <span class="hljs-comment">// View all the data that was sent</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Write called: '</span> + <span class="hljs-built_in">JSON</span>.stringify(request.query, <span class="hljs-literal">null</span>, <span class="hljs-number">4</span>));

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Here are the properties passed in the request: '</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> propertyName <span class="hljs-keyword">in</span> request.query) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">" -&gt; "</span> + propertyName);
    }

    <span class="hljs-comment">// Find both pieces of data:</span>
    <span class="hljs-keyword">var</span> person = request.query.person;
    <span class="hljs-keyword">var</span> path = request.query.path;

    <span class="hljs-comment">// Display both pieces of data separately</span>
    <span class="hljs-keyword">var</span> personString = <span class="hljs-built_in">JSON</span>.stringify(person, <span class="hljs-literal">null</span>, <span class="hljs-number">4</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Path: '</span> + <span class="hljs-built_in">JSON</span>.stringify(path));
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Person: '</span> + personString);

    <span class="hljs-comment">// Now do our actual work of writing the file.</span>
    <span class="hljs-comment">// This assumes the path exists. See the mkdirp</span>
    <span class="hljs-comment">// NPM library if you need to create directories</span>
    fs.writeFile(path.fileName, personString, <span class="hljs-string">'utf8'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>)</span>{
        <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'It\'s saved!'</span>);
    });

    <span class="hljs-comment">// Send back a response</span>
    response.send(<span class="hljs-string">'{"result":"success"}'</span>);
});
</code></pre><p>If you want to see what properties exist on the object that was passed to you
from the client, you can write code like this:</p>
<pre><code>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> propertyName <span class="hljs-keyword">in</span> request.<span class="hljs-keyword">query</span>) {
        console.<span class="hljs-built_in">log</span>(<span class="hljs-string">" -&gt; "</span> + propertyName);
    }
</code></pre><p>The above is for a GET verb. Here is the same code for a POST:</p>
<pre><code>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> propertyName <span class="hljs-keyword">in</span> request.body) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">" -&gt; "</span> + propertyName);
    }
</code></pre><p>This example is found here:</p>
<pre><code>JsObjects<span class="hljs-regexp">/JavaScript/</span>NodeCode<span class="hljs-regexp">/SimpleReadWrite04</span>
</code></pre><h2 id="morph">Dynamically Changing a Page with jQuery Part I</h2>
<p>You can use jQuery to change many of the elements of a page on the fly.
In this section, I provide examples of various ways to do this.</p>
<p>To get started, consider a very simple HTML page with three buttons on
it labeled Red, Green and Blue. When you click one of the buttons, the
following jQuery based JavaScript code is called:</p>
<pre><code class="lang-%7B.code%7D">function setBackground(value)
{
    <span class="hljs-keyword">if</span> (value === <span class="hljs-number">1</span>) {
        $(<span class="hljs-string">"body"</span>).css({ <span class="hljs-string">backgroundColor:</span> <span class="hljs-string">"red"</span>, <span class="hljs-string">color:</span> <span class="hljs-string">"yellow"</span> });
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value === <span class="hljs-number">2</span>) {
        $(<span class="hljs-string">"body"</span>).css({ <span class="hljs-string">backgroundColor:</span> <span class="hljs-string">"green"</span>, <span class="hljs-string">color:</span> <span class="hljs-string">"black"</span> });
    } <span class="hljs-keyword">else</span> {
        $(<span class="hljs-string">"body"</span>).css({ <span class="hljs-string">backgroundColor:</span> <span class="hljs-string">"blue"</span>, <span class="hljs-string">color:</span> <span class="hljs-string">"yellow"</span> });
    }
}
</code></pre>
<p>This code changes use jQuery to select the <strong>body</strong> tag for the current
page and set its background and text color using css. Here is a link to
a sample page demonstrating how this works:</p>
<ul>
<li><a href="JQueryBackgroundMorph.html">JQueryBackgroundMorph.html</a></li>
</ul>
<h2 id="morph02">Dynamically Changing a Page with jQuery Part II</h2>
<p>Below you will find a link to a more complex example of a set of similar
jQuery tools. Try clicking on some of the buttons and examing the code to
get a sense of how it works. Some of the buttons will change all the text
found on the linked page, just as the buttons in the previous example
changed the background color for an entire page. Don&#39;t forget that you can
view the source for the linked page, and for the JavaScript file, by right
clicking and choosing &quot;View Source&quot; or some similar option.</p>
<ul>
<li><a href="../Scripts/JQuerySelectors.html">jQuerySelectors Example</a></li>
</ul>
<p>Here are the methods called when the buttons above are clicked:</p>
<ul>
<li>html()</li>
<li>css()</li>
<li>each()</li>
<li>remove()</li>
<li>after()</li>
<li>replaceWith()</li>
<li>addClass()</li>
<li>removeClass()</li>
<li>val()</li>
</ul>
<pre><code class="lang-%7B.code%7D"><span class="hljs-keyword">this</span>.ModifyHeader = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
  $(<span class="hljs-string">"#testHeader"</span>).css({ backgroundColor: <span class="hljs-string">"blue"</span>,
    color: <span class="hljs-string">"yellow"</span>,
    border: <span class="hljs-string">"double black thick"</span> });
}

<span class="hljs-keyword">this</span>.SetH1 = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
  $(<span class="hljs-string">"#testHeader"</span>).html(<span class="hljs-string">"New Dynamic Header Text"</span>);
}

<span class="hljs-keyword">this</span>.AddPar = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
  $(<span class="hljs-string">"#testHeader"</span>).after(<span class="hljs-string">"&lt;p class='attention'&gt;New P tag inserted with this text&lt;/p&gt;"</span>);
}

<span class="hljs-keyword">this</span>.ReplaceParsWithH2 = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
  $(<span class="hljs-string">"p"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    p = $(<span class="hljs-keyword">this</span>);
    p.replaceWith(<span class="hljs-string">"&lt;h2 class='switchMeBack'&gt;"</span> + p.html() + <span class="hljs-string">"&lt;/h2&gt;"</span>);
  });
}

<span class="hljs-keyword">this</span>.ReplaceSwitchMeBackWithPars = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
  $(<span class="hljs-string">".switchMeBack"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    p = $(<span class="hljs-keyword">this</span>);
    p.replaceWith(<span class="hljs-string">"&lt;p class='attention'&gt;"</span> + p.html() + <span class="hljs-string">"&lt;/p&gt;"</span>);
  });
}

<span class="hljs-keyword">this</span>.MovePars = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
  <span class="hljs-keyword">var</span> data = $(<span class="hljs-string">"#a"</span>).html();
  $(<span class="hljs-string">"#a"</span>).remove();
  $(<span class="hljs-string">"#b"</span>).addClass(<span class="hljs-string">'attention'</span>);
  $(<span class="hljs-string">"#b"</span>).after(<span class="hljs-string">"&lt;p id='a' class='attention'&gt;"</span> + data + <span class="hljs-string">"&lt;/p&gt;"</span>);
}

<span class="hljs-keyword">this</span>.MovePars02 = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
  <span class="hljs-keyword">var</span> data = $(<span class="hljs-string">"#b"</span>).html();
  $(<span class="hljs-string">"#b"</span>).remove();
  $(<span class="hljs-string">"#a"</span>).after(<span class="hljs-string">"&lt;p id='b' class='attention'&gt;"</span> + data + <span class="hljs-string">"&lt;/p&gt;"</span>);
}

<span class="hljs-keyword">this</span>.ApplyClassToPars = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
  $(<span class="hljs-string">"p"</span>).addClass(<span class="hljs-string">"able"</span>);
}

<span class="hljs-keyword">this</span>.RemoveAbleClass = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
  $(<span class="hljs-string">".able"</span>).removeClass(<span class="hljs-string">"able"</span>);
}

<span class="hljs-keyword">this</span>.HiLite = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
  $(<span class="hljs-string">"#a"</span>).addClass(<span class="hljs-string">"attention"</span>);
}

<span class="hljs-keyword">this</span>.RemoveHiLite = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
  $(<span class="hljs-string">".attention"</span>).removeClass(<span class="hljs-string">"attention"</span>);
}
</code></pre>
<h2 id="formtest">Form Test</h2>
<p>This exercise shows how to use Forms:</p>
<ul>
<li><a href="../Scripts/FormTest.html">Forms Test</a></li>
</ul>
<h2 id="adding">Adding Machine</h2>
<p>The Adding Machine example has moved here:</p>
<ul>
<li><a href="AddingMachine.html">AddingMachine.html</a></li>
</ul>
<h2 id="post">Posting Data</h2>
<p>There are two different ways to POST data back to the server when we
want to call a script. We can have a form, and call a script by writing
something like this:</p>
<pre><code class="lang-%7B.code%7D">&lt;form action=<span class="hljs-string">"/cgi-bin/JQueryTest01.py"</span> <span class="hljs-keyword">method</span>=<span class="hljs-string">"post"</span>&gt;
</code></pre>
<p>This code calls jQueryTest01.py when you hit the submit button of the
form. The values and names of any input fields in the form will be
passed as parameters to that script, for instance, this code causes a
parameter called operanda to passed to the script:</p>
<pre><code class="lang-%7B.code%7D">&lt;input <span class="hljs-built_in">id</span>=<span class="hljs-string">"operanda"</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">"operanda"</span> type=<span class="hljs-string">"text"</span>&gt;
</code></pre>
<p>Things get more complicated in PhoneGap or any application that wants to
use Ajax. When you post a message using a FORM like that shown above,
then you get html or xml in return. It is displayed in a new page in the
browser or in your PhoneGap window. Sometimes that is what you want. But
if you want to modify the page you are looking at, to make a portion of
it morph without having to load an entire new page, then you have to
write the jQuery.ajax statements that we have been working on in our
PhoneGap applications. Those statements can post data exactly as we do
when we hit the SUBMIT button in a form, but obviously the syntax is
quite different. The call to \$.ajax is the equivalent of hitting the
submit button. Here is the equivalent of the input fields with their
name and value pairs:</p>
<pre><code class="lang-%7B.code%7D">dataRequest = <span class="hljs-string">"operanda="</span> + operanda + <span class="hljs-string">"&amp;operandb="</span> + operandb +
    <span class="hljs-string">"&amp;answer="</span> + answer<span class="hljs-comment">;</span>
</code></pre>
<p>And here is all the key parts in one place:</p>
<pre><code class="lang-%7B.code%7D">request = $.ajax(
{
  type: <span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span>,
  data: dataRequest,
  url: <span class="hljs-string">"http://192.168.0.100:8000/cgi-bin/AddingDataXml.py"</span>,
</code></pre>
<p>The above call is like hitting the submit button, it calls a script and
passes parameters to the script. But the big difference is that we get
the result back not as new page, but as the parameters passed in the
success block:</p>
<pre><code class="lang-%7B.code%7D">dataType: <span class="hljs-string">"xml"</span>,
success: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(xml)</span> </span>{
  $(xml).find(<span class="hljs-string">'addition'</span>).<span class="hljs-keyword">each</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{ etc...
</code></pre>
<p>We then write code in that block to modify the existing page, without
forcing a load a new page.</p>
<p>Here is the whole method that performs the post:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ReadFromAddingXml</span>(<span class="hljs-params">operanda, operandb, answer</span>)
</span>{
  <span class="hljs-comment">// dataRequest = "operanda=2&amp;operandb=3&amp;answer=5";</span>
  dataRequest = <span class="hljs-string">"operanda="</span> + operanda + <span class="hljs-string">"&amp;operandb="</span> + operandb + <span class="hljs-string">"&amp;answer="</span> + answer;
  request = $.ajax(
  {
    type: <span class="hljs-string">"POST"</span>,
    data: dataRequest,
    url: <span class="hljs-string">"http://192.168.0.100:8000/cgi-bin/AddingDataXml.py"</span>,
    dataType: <span class="hljs-string">"xml"</span>,
    success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">xml</span>)
    </span>{
      $(xml).find(<span class="hljs-string">'addition'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)
      </span>{
        <span class="hljs-keyword">var</span> first = $(<span class="hljs-keyword">this</span>).find(<span class="hljs-string">'operanda'</span>).text();
        <span class="hljs-keyword">var</span> last = $(<span class="hljs-keyword">this</span>).find(<span class="hljs-string">'operandb'</span>).text();
        <span class="hljs-keyword">var</span> answer = $(<span class="hljs-keyword">this</span>).find(<span class="hljs-string">'answer'</span>).text();
        <span class="hljs-keyword">var</span> additions = first + <span class="hljs-string">"+"</span> + last + <span class="hljs-string">"="</span> + answer;
        $(<span class="hljs-string">"#items"</span>).append(<span class="hljs-string">"&lt;li class='tulsa'&gt;"</span> + additions + <span class="hljs-string">"&lt;/li&gt;"</span>);
      });
    }
  });

  request.fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">jqXHR, textStatus, bar</span>)
  </span>{
    alert( <span class="hljs-string">"Request failed: "</span> + textStatus + bar );
  });
}
</code></pre>
<p>Think for a moment about the callback hook called <strong>success.</strong>It is
called if the program successfully posts data to the server by calling
the <strong>AddingDataXml.py</strong> script. That script puts some information in a
database, and then formulates some XML that describes what it did. The
XML is returned to the client in the parameter of the <strong>success</strong>
callback hook:</p>
<pre><code class="lang-%7B.code%7D">success: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(xml)</span></span>
</code></pre>
<p>By the time we get to the <strong>success</strong> callback, the call to the server
is over. It has completed and the result has been returned.Ãƒâ€šÃ‚Â  So the
first few lines of the <strong>ReadFromAddingXml</strong> method call the server, and
the last bit found in the <strong>success</strong> callback deals with the result
returned from the server.</p>
<p>What does the <strong>success</strong> callback function do? Well, it takes the XML
that was passed back to us and parses it, and then displays the results
back on the main page of the application. Here is the XML that might be
returned.</p>
<pre><code>    <span class="hljs-tag">&lt;<span class="hljs-name">additions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">addition</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">operanda</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">operanda</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">operandb</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">operandb</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">answer</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">answer</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">addition</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">additions</span>&gt;</span>
</code></pre><p>The called to <strong>\$(xml).find</strong> returns the addition section of the XML:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">addition</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">operanda</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">operanda</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">operandb</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">operandb</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">answer</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">answer</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">addition</span>&gt;</span>
</code></pre><p>The call to <strong>\$(this.find(&#39;operanda&#39;).text();</strong> yields the number 1.
The next line retrieves 2, and the third line yields 3. We put them all
together in a string that looks like this: 1 + 2 = 3. Then we appeand
that string to the items list back in the main HTML document.</p>
<h2 id="radioButtons">RadioButtons</h2>
<p>jQuery makes it easy to work with <strong>RadioButtons</strong>. Consider the
following declaration, which gathers together three RadioButtons in a
single group called mainGroup. This ensures that selecting any one
button will deselected the other two in the group.</p>
<pre><code class="lang-%7B.code%7D">&lt;section id=<span class="hljs-string">"mainGroups"</span>&gt;
   &lt;ul&gt;
      &lt;<span class="hljs-keyword">li</span>&gt;&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">"radio"</span> name=<span class="hljs-string">"mainGroup"</span> id=<span class="hljs-string">"walk"</span>&gt;&lt;<span class="hljs-keyword">label</span> <span class="hljs-keyword">for</span>=<span class="hljs-string">"walk"</span>&gt;Walk&lt;/<span class="hljs-keyword">label</span>&gt;&lt;/<span class="hljs-keyword">li</span>&gt;
      &lt;<span class="hljs-keyword">li</span>&gt;&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">"radio"</span> name=<span class="hljs-string">"mainGroup"</span> id=<span class="hljs-string">"drive"</span>&gt;&lt;<span class="hljs-keyword">label</span> <span class="hljs-keyword">for</span>=<span class="hljs-string">"drive"</span>&gt;Drive&lt;/<span class="hljs-keyword">label</span>&gt;&lt;/<span class="hljs-keyword">li</span>&gt;
      &lt;<span class="hljs-keyword">li</span>&gt;&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">"radio"</span> name=<span class="hljs-string">"mainGroup"</span> id=<span class="hljs-string">"fly"</span>&gt;&lt;<span class="hljs-keyword">label</span> <span class="hljs-keyword">for</span>=<span class="hljs-string">"fly"</span>&gt;Fly&lt;/<span class="hljs-keyword">label</span>&gt;&lt;/<span class="hljs-keyword">li</span>&gt;
   &lt;/ul&gt;
&lt;/section&gt;
</code></pre>
<p>The following code ensures that a JavaScript method called
<strong>displayRadioButtonSelection</strong> is called whenever a the user selects
one of the <strong>RadioButtons</strong> in the <strong>mainGroup:</strong></p>
<pre><code class="lang-%7B.code%7D">$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  $(<span class="hljs-string">"input[name=mainGroup]:radio"</span>).click(displayRadioButtonSelection)
});
</code></pre>
<p>This code specifies that it will select only input type RadioButtons
with the <strong>name</strong> set equal to <strong>mainGroup.</strong> This is not a simple
selector, but it is very precise, and very powerful. The <strong>name</strong> is
specified in square brackets, and the <strong>type</strong>, which in this case is
<strong>radio</strong>, appears after a colon. This jQuery selector then goes on to
state that it will call the <strong>displayReadioButtonSelection</strong> method
whenever one of the <strong>RadioButtons</strong>is selected:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayRadioButtonSelection</span>(<span class="hljs-params"></span>)
</span>{
  <span class="hljs-keyword">var</span> id = $(<span class="hljs-string">"input[name=mainGroup]:checked"</span>).attr(<span class="hljs-string">'id'</span>);
  alert(id)
}
</code></pre>
<p>Again, take a moment to study the syntax to select the <strong>checked</strong> item
from the <strong>mainGroup</strong>. It is not particularly easy to read, but it is
concise and very precise.</p>
<p>I have written an HTML/CSS RadioButton sample and put it in the
<a href="http://www.elvenware.com/charlie/development/cloud/Mercurial.html">Elvenware Mercurial
repository</a>.
It is in the HtmlCssJavaScript folder. I also moved the JQuerySelectors
examples into that folder.</p>
<h2 id="addingStructuredData">Dynamically Add Data to a Table</h2>
<p>Click here to see an example where you can click a button to add structured
data to a table.</p>
<p><a href="../Scripts/JQuerySelectors.html#dynamically-add-data-to-a-table">Dynamically Add Data to a Table</a></p>
<p>To make this work, first embed an empty table element into a document. I
have, for instance, embedded one like this in this document:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"structuredTable"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
</code></pre>
<p>Then create a button like the one above so the user has something to
click when items are to be added to the table. Here is what the code for
the button shown above looks like:</p>
<pre><code class="lang-%7B.code%7D">&lt;input <span class="hljs-class"><span class="hljs-keyword">type</span></span>=<span class="hljs-string">"button"</span> value=<span class="hljs-string">"Add Data"</span> onclick=<span class="hljs-string">"jQueryTests.addStructuredData()"</span> /&gt;
</code></pre>
<p>The method that gets called when the button is pressed can be placed in
a separate JavaScript file that might look, in part, something like
this:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-keyword">var</span> jQueryTests = <span class="hljs-keyword">new</span> JQueryTests();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">JQueryTests</span>(<span class="hljs-params"></span>)
</span>{
    <span class="hljs-keyword">this</span>.addStructuredData = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
    </span>{
        <span class="hljs-keyword">var</span> a = <span class="hljs-string">"foo"</span>;
        <span class="hljs-keyword">var</span> b = <span class="hljs-string">"bar"</span>;

        data = <span class="hljs-string">"&lt;tr&gt;&lt;td&gt;"</span> + a + <span class="hljs-string">"&lt;/td&gt;"</span> + <span class="hljs-string">"&lt;td&gt;"</span> + b + <span class="hljs-string">"&lt;/td&gt;&lt;/tr&gt;"</span>;
        $(<span class="hljs-string">"#structuredTable"</span>).append(data);
    }
}
</code></pre>
<p>Each time the button is pressed a new element with this structure
<strong>\<tr\>\<td\>some string\</td\>\<td\>some string\</td\>\</tr\></strong> is
added to the <strong>#structuredTable</strong>.Ãƒâ€šÃ‚Â </p>
<h2 id="jqHandlebars">jQuery and Handlebars</h2>
<p>You will find that you often want to insert the same HTML text or code
into multiple HTML files. Another common need is to compose HTML files
out of multiple chunks of HTML.</p>
<p>Templating the term used to describe this kind of operation. In general
one starts with a single HTML file that has markers in it. A templating
library is used to replace the markers in the main HTML file with
various bits of text or code.</p>
<p>You have probably done something like this in another programming
language. For instance, C# programmers often write code that looks
something like this:</p>
<p>string data = string.Format(&quot;{0} + {1} = {2}&quot;, 1, 2, 3);</p>
<p>The code above sets the variable data to the string &quot;1 + 2 = 3&quot;. The
code has two parts, the placeholders ({0}) and the parameters (1, 2, 3).</p>
<p>An HTML templating libraries work on the same principle. You put
markers or placeholders in your HTML, and then run code that
replaces the markers with designated bits of HTML or text. For instance
you might put some HTML that looks like this in your main HTML file:</p>
<pre><code>&lt;li&gt;&lt;a href=<span class="hljs-string">"{{url}}"</span>&gt;<span class="hljs-template-variable">{{text}}</span>&lt;<span class="hljs-regexp">/a&gt;&lt;/li</span>&gt;
</code></pre><p>In the code shown above, both {{url}} and {{text}} are placeholders.
You would then write code that would substitute text of HTML for the
placeholders in the above code. I will give you examples of that code
later in this document.</p>
<p>Consider the following code:</p>
<pre><code>    <span class="hljs-keyword">var</span> addTable = function(fileName, tableName) {
        <span class="hljs-keyword">var</span> mainFile = readHtml(fileName);
        <span class="hljs-keyword">var</span> table = readHtml(tableName);

        <span class="hljs-keyword">var</span> <span class="hljs-keyword">template</span> = handlebars.compile(mainFile);

        <span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = <span class="hljs-keyword">template</span>({
            <span class="hljs-type">MyTable</span> : table
        });

        <span class="hljs-keyword">return</span> <span class="hljs-literal">result</span>;
    };
</code></pre><p>The code shown above does the following:</p>
<ul>
<li>It reads an html file with placeholders in it</li>
<li>It reads some html fragments that can be plugged into the placeholders</li>
<li>It compiles the original HTML file read in Step 1</li>
<li>It inserts the fragments from step 2 into the placeholders found in the HTML document from Step 1</li>
<li>It returns the completed HTML document, which is now made up of the origainl HTML document, plus the inserted fragments.</li>
</ul>
<p>Suppose this were the original documents:</p>
<pre><code>    &lt;p&gt;This is a <span class="hljs-symbol">placeholder:</span> <span class="hljs-template-variable">{{{placeholder}}</span>}&lt;<span class="hljs-regexp">/p&gt;</span>
</code></pre><p>Suppose this were the fragment:</p>
<pre><code>    <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>foo<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
</code></pre><p>The completed (templated) document would look like this:</p>
<pre><code>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This is a placeholder: <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>foo<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre><p>The original document with its placeholder has been combined with the
fragment to create a complete document.</p>
<p>Templating is a very common technique in the world of HTML development.
There are dozens of templating libraries available. At least five or
six of them are widely used.</p>
<p>We will be using a library called Handlebars. You can include
Handlebars.js in your web applications, or you can use NPM to download
it as a library for inclusion in node applications.</p>
<p>Here is the HTML</p>
<pre><code class="lang-%7B.code%7D">    <span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>jQuery and HandleBars example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>   
            <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>   
            <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'http://code.jquery.com/jquery.js'</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"handlebars.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"index.js"</span>&gt;</span><span class="undefined"> </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>      
        <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/x-handlebars-template"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"list-item"</span>&gt;</span><span class="handlebars"><span class="xml">
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"</span></span></span><span class="hljs-template-variable">{{url}}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span></span><span class="hljs-template-variable">{{text}}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            </span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myList"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>   
        <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>Here is the JavaScript:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-comment">/**
 * @author Charlie Calvert
 */</span>
<span class="hljs-comment">/*jshint jquery:true, browser: true */</span>
<span class="hljs-comment">/*global Handlebars: false */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addItem</span>(<span class="hljs-params">url, text</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    <span class="hljs-keyword">var</span> script = $(<span class="hljs-string">"#list-item"</span>).html(),    
    template=Handlebars.compile(script);    
    <span class="hljs-keyword">var</span> result = template({
        text: text,
        url: url
    });    
    $(<span class="hljs-string">"#myList"</span>).append(result);
}
$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">  "use strict"</span>;
  addItem(<span class="hljs-string">"http://www.elvenware.com"</span>, <span class="hljs-string">"Elvenware"</span>);
});
</code></pre>
<h2 id="links">Links</h2>
<ul>
<li><a href="http://jquery.com/">http://jquery.com</a></li>
<li><a href="http://jquerymobile.com/">http://jquerymobile.com</a></li>
<li>ThemeRoller:Ãƒâ€šÃ‚Â <a href="http://jquerymobile.com/themeroller/">http://jquerymobile.com/themeroller/</a></li>
<li><a href="http://jqueryui.com/">http://jqueryui.com</a></li>
<li><a href="../CdnExplained.html">Embed JQuery with URLs Using CDN</a></li>
</ul>
</div></body></html>