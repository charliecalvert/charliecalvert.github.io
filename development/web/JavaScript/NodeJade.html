<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>NodeJade</title><link rel="shortcut icon" href="/charlie/images/favicon.png"><!-- Latest compiled and minified CSS--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css"><!-- Optional theme--><link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.min.css"><!-- link(href='/libs/css/BootstrapIndex.css', rel='stylesheet', type='text/css')--><link href="/css/style.css" rel="stylesheet" type="text/css"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><script src="/components/jquery/dist/jquery.js"></script><script src="/components/angular/angular.js"></script><script src="/components/angular-route/angular-route.js"></script><script src="/components/bootstrap/dist/js/bootstrap.min.js"></script><!-- script(src='/libs/scripts/elvenware.js', type='text/javascript')--><!-- script(src="/libs/scripts/Control.js")--><!-- script(src='http://localhost:35729/livereload.js')--></head><body><div class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="/index.html">Home</a></li><li><a href="/about">About</a></li><li class="dropdown"><a href="#/" data-toggle="dropdown" class="dropdown-toggle">Dropdown<b class="caret"></b></a><ul class="dropdown-menu"><li class="dropdown-header">Core Code</li><li><a href="/development/index.html">Strongly Typed</a></li><li><a href="/development/web/index.html">Web & Scripts</a></li><li><a href="/development/cloud/index.shtml">Cloud</a></li><li class="divider"></li><li class="dropdown-header">OS and Tools</li><li><a href="/os/index.html">OS</a></li><li><a href="/development/database/index.html">Database</a></li><li><a href="/books/index.html">My Writing</a></li><li class="divider"></li><li class="dropdown-header">Art</li><li><a href="/charlie/Art/index.html">Poems & Photos</a></li><li><a href="/books/reading/index.html">Book Reviews</a></li><li><a href="/spirit/index.html">Spiritual</a></li><li class="divider"></li><li class="dropdown-header">Links</li><li><a href="/charlie/links.html">My Links</a></li><li><a href="http://www.github.com/charliecalvert">GitHub</a></li><li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li></ul></li></ul></div><!-- /.nav-collapse--></div></div><div class="container"><figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png"/></figure><h1>NodeJade</h1><p>Welcomes to NodeJade</p><ul><!--TOC_Start--><li><a href="#jade">Jade</a></li>
<li><a href="#input-controls">Input Controls</a></li>
<li><a href="#editors">Editors</a></li>
<li><a href="#loading-jade">Loading Jade</a></li>
<li><a href="#jade-indent">Jade Indent</a></li><!--TOC_End--></ul><h2 id="jade">Jade</h2>
<p>Jade is a template library like Handlebars. It also is a bit like
Markdown, in that it provides a shorthand syntax for composing
HTML pages.</p>
<p>Here is an example of how to layout a Jade template:</p>
<pre><code>doctype <span class="hljs-number">5</span>
html
    head
        title= title
        link(<span class="hljs-built_in">rel</span>=<span class="hljs-string">'stylesheet'</span>, href=<span class="hljs-string">'/stylesheets/style.css'</span>)
    body
        nav
            ul
                li
                    <span class="hljs-keyword">a</span>(href=<span class="hljs-string">"/"</span>) page01
                li
                    <span class="hljs-keyword">a</span>(href=<span class="hljs-string">"/page02"</span>) page02
                li
                    <span class="hljs-keyword">a</span>(href=<span class="hljs-string">"/page03"</span>) page03
        h1 <span class="hljs-comment">#{title}</span>
        block content
</code></pre><p>When working with jade, indentation is crucial. You should indent with either tabs or spaces, but not both. You frequently need to open your file in an editor that allows you to visualize your white space. Then you should count your space, and make sure it follows an exact pattern. Suppose, for instance, that you are uses tabs for your indentation. In the pseudo code shown below, each hyphen (dash -) represents one tab.</p>
<p>Example 1 is like what&#39;s shown above:</p>
<pre><code>doctype
html
-<span class="ruby"> head
</span>-<span class="ruby"> - title
</span>-<span class="ruby"> - link
</span>-<span class="ruby"> body
</span>-<span class="ruby"> - nav
</span>-<span class="ruby"> - - ul
</span>-<span class="ruby"> - - - li
</span>-<span class="ruby"> - - - li
</span>-<span class="ruby"> - - - li
</span>-<span class="ruby"> - h1
</span>-<span class="ruby"> - block content</span>
</code></pre><p>Example 2 is a common pattern in bootstrap files:</p>
<pre><code>block content
-<span class="ruby"> container
</span>-<span class="ruby"> - header
</span>-<span class="ruby"> - navbar
</span>-<span class="ruby"> - - nav
</span>-<span class="ruby"> - - - ul
</span>-<span class="ruby"> - - - - li
</span>-<span class="ruby"> - - - - li
</span>-<span class="ruby"> - - - - h3
</span>-<span class="ruby"> - - h1
</span>-<span class="ruby"> - - p
</span>-<span class="ruby"> - - h1
</span>-<span class="ruby"> - - div
</span>-<span class="ruby"> - - footer
</span>-<span class="ruby"> - - - p</span>
</code></pre><p>When looking at the pseudo code above, the point is that you can explicitly count how many tabs appear before each HTML element. You want to achieve that level of specificity when working with Jade.</p>
<h2 id="input-controls">Input Controls</h2>
<p>Declare a text Input:</p>
<pre><code>input#dirToWalk(<span class="hljs-keyword">type</span>=<span class="hljs-string">'text'</span>, name=<span class="hljs-string">'dirToWalk'</span>)
</code></pre><p>Put text in it with jQuery:</p>
<pre><code class="lang-javascript"><span class="hljs-variable">$(</span><span class="hljs-string">'#dirToWalk'</span>).val(<span class="hljs-string">'/home/charlie/Documents/AllTest'</span>);
</code></pre>
<h2 id="editors">Editors</h2>
<p><strong>HINT</strong>: <em>Here are some ways to turn on visual whitespace in various editors:</em></p>
<ul>
<li>NotePad++: <strong>View | Show Symbol | Show White Space and Tab</strong></li>
<li>Geany: <strong>View | Editor | Show White Space</strong></li>
</ul>
<p>Most programming editors have options like these.</p>
<h2 id="loading-jade">Loading Jade</h2>
<p>In the next few paragraphs I describe how Jade templates get loaded in to our web applications. Much of the code I describe is autogenerated for you when you first create the express application. However, some of the code you have to write yourself. Of course, whether the code is autogenerated, or created automatically, you should be sure that you understand all the pieces and what they do.</p>
<p>In our <strong>app.js</strong> file we link in the views directory and tell express to use Jade. Note that their other ways for express to generate or <strong>render</strong> HTML files. But we are asking it to render HTML from Jade templates. We do so with code like this:</p>
<pre><code>app.<span class="hljs-keyword">set</span>(<span class="hljs-string">'views'</span>, path.<span class="hljs-keyword">join</span>(__dirname, <span class="hljs-string">'views'</span>));
app.<span class="hljs-keyword">set</span>(<span class="hljs-string">'view engine'</span>, <span class="hljs-string">'jade'</span>);
</code></pre><p>Once again, this code is found in <strong>app.js</strong>. It is frequently, perhaps even usually, auto-generated by the <strong>express-generator</strong>. But you should understand what it does.</p>
<p>After processing the above code, express knows to look for Jade files in the <strong>views</strong> directory. It also knows to <strong>render</strong> views using the Jade engine.</p>
<p>Our next chore is to tell express where to send requests sent from the browser. The user typically uses HTTP to compose URLs which are sent back to our express server. Depending on the shape of the URL, the express app can handle the request in any number of ways. The following code in <strong>app.js</strong> tells express where to send requests with a particular type of URL. This is known as routing:</p>
<pre><code><span class="hljs-comment">// Link in the index.js file from the routes directory</span>
<span class="hljs-keyword">var</span> routes = <span class="hljs-keyword">require</span>(<span class="hljs-string">'./routes/index'</span>);

<span class="hljs-comment">// Tell the program to send routes of a certain type to **routes/index.js**.</span>
app.use(<span class="hljs-string">'/'</span>, routes.<span class="hljs-keyword">index</span>);
</code></pre><p>The above code tells express the following:</p>
<ul>
<li>If the user types in <strong>http:www.example.com/</strong><ul>
<li>route the request to <strong>routes/index.js</strong>.</li>
</ul>
</li>
<li>If he types in <strong><a href="http://www.example.com/foo">http://www.example.com/foo</a></strong> the code is also routed to <strong>routes/index.js</strong>.</li>
</ul>
<p>In fact, with the code shown above, most requests from the server will end up going to <strong>routes/index.js</strong>. However, we shall see that it is possible to tell the server to route requests of a certain type to another file. For instance, requests to <strong><a href="http://www.example.com/foo">http://www.example.com/foo</a></strong> could be sent to <strong>routes/foo.js</strong>.</p>
<p>When the browser sends a request for an HTML page, express can send the request to <strong>routes/index.js</strong>). Routes found in that file detail how our Jade templates should be rendered.</p>
<p>Here is an example <strong>routes/index.js</strong>. Study it with care:</p>
<pre><code><span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">var</span> router = express.Router();

<span class="hljs-comment">/* ONE: GET home page. */</span>
router.get(<span class="hljs-string">'/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response, next</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    response.render(<span class="hljs-string">'index'</span>, {
        author: <span class="hljs-string">'Charlie Calvert'</span>,
        title: <span class="hljs-string">'Solar Explorer'</span>
    });
});

<span class="hljs-comment">/* TWO: Energy Types Jade files routed here. The jade is in the energy-types directory. */</span>
router.get(<span class="hljs-string">'/energy-types/:id'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    response.render(<span class="hljs-string">'energy-types/'</span> + request.params.id, {
        title: <span class="hljs-string">'Energy Types'</span>
    });
});

<span class="hljs-comment">/* THREE: Renewable Jade files routed here. The jade is in the renewables directory */</span>
router.get(<span class="hljs-string">'/renewables/:id'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response, next</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    response.render(<span class="hljs-string">'renewables/'</span> + request.params.id, {
        title: <span class="hljs-string">'Renewable Types'</span>
    });
});

<span class="hljs-comment">/* FOUR: Other jade files routed here. The jade is in the views directory. */</span>
router.get(<span class="hljs-string">'/:id'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response, next</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    response.render(request.params.id, {
        title: <span class="hljs-string">'Random types'</span>
    });
});

<span class="hljs-built_in">module</span>.exports = router;
</code></pre><p>Once again, I ask the you study this example carefully. All the routes in this file translate jade into HTML and send the result to the server using HTTP. I have labeled each method as ONE, TWO, THREE and FOUR.</p>
<ul>
<li>ONE: This is where requests for the home page go. <strong><a href="http://www.example.com">http://www.example.com</a></strong></li>
<li>TWO: This is where requests for energy-types pages go: <strong><a href="http://www.example.com/energy-types/solar-page">http://www.example.com/energy-types/solar-page</a></strong></li>
<li>THREE: This is where requests for renewable pages go: <strong><a href="http://www.example.com/renewables/hydro-page">http://www.example.com/renewables/hydro-page</a></strong></li>
<li>FOUR: This where requests for uncategorized files go: <strong><a href="http://www.example.com/about-page">http://www.example.com/about-page</a></strong></li>
</ul>
<p><strong>NOTE</strong>: <em>We don&#39;t explicitly ask for HTML even though it is HTML that will be sent back to the brower. In other words, instead of writing this: <strong><a href="http://example.com/about.html">http://example.com/about.html</a></strong>, we write this: <strong><a href="http://example.com/about">http://example.com/about</a></strong>. It is a simple matter to teach express to respond properly to either request, but I find it simpler to dismiss with the HTML extension. But this is a matter of taste, and you should feel free to do what seems best to you.</em></p>
<p>Now let&#39;s consider the case where we want requests for anything have to do with renewables to be sent not to <strong>routes/index.js</strong> but to <strong>routes/renewables.js</strong>. We do this in large programs where we don&#39;t want to overload <strong>index.js</strong> with too many methods.</p>
<p>Suppose you create a file called <strong>routes/renewables.js</strong>. To set it up, do this in <strong>app.js</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> renewables = <span class="hljs-keyword">require</span>(<span class="hljs-string">'./routes/renewables'</span>);
<span class="hljs-keyword">var</span> routes = <span class="hljs-keyword">require</span>(<span class="hljs-string">'./routes/index'</span>);

<span class="hljs-comment">// It's usually safest to insert the renewables middleware</span>
<span class="hljs-comment">// before the middleware found in **routes/index.js**</span>
app.<span class="hljs-keyword">use</span>(<span class="hljs-string">'/renewables/'</span>, renewables);
app.<span class="hljs-keyword">use</span>(<span class="hljs-string">'/'</span>, routes);
</code></pre>
<p>In <strong>routes/renewables.js</strong>, add, for now, just one route:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">var</span> router = express.Router();

router.get(<span class="hljs-string">'/:id'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    response.render(<span class="hljs-string">'renewables/'</span> + request.params.id, {
        title: <span class="hljs-string">'ElfComponent'</span>
    });
});

<span class="hljs-built_in">module</span>.exports = router;
</code></pre>
<p>Now consider where our different URLs lead:</p>
<ul>
<li><strong><a href="http://www.example.com">http://www.example.com</a></strong> =&gt; <strong>routes/index.js</strong></li>
<li><strong><a href="http://www.example.com/energy-types/my-jade-file">http://www.example.com/energy-types/my-jade-file</a></strong> =&gt; <strong>routes/index.js</strong></li>
<li><strong><a href="http://www.example.com/renewables/my-jade-file">http://www.example.com/renewables/my-jade-file</a></strong> =&gt; <strong>routes/renewables.js</strong></li>
<li><strong><a href="http://www.example.com/about">http://www.example.com/about</a></strong> =&gt; <strong>routes/index.js</strong></li>
</ul>
<p>Notice that the third request routes URLs with <strong><a href="http://example.com/renewables/">http://example.com/renewables/</a></strong> in them to the routes found in our <strong>routes/renewables.js</strong> file.</p>
<p>The next logical step would be to create <strong>routes/energy-types.js</strong>. To do so, just follow the template established by the example shown above for <strong>renewables</strong>.</p>
<p>Finally, we can, of course, define other routes in these files that have nothing to do with Jade. For instance, we might define a route in <strong>renewables.js</strong> that loads a JSON file:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">var</span> router = express.Router();

<span class="hljs-comment">/* ONE */</span>
router.get(<span class="hljs-string">'/getRenewables'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    fs.readFile(<span class="hljs-string">'data/renewables.json'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>) </span>{
        <span class="hljs-keyword">if</span> (err) {
            response.status(<span class="hljs-number">404</span>).send(err);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">var</span> jsonAsObject = <span class="hljs-built_in">JSON</span>.parse(data);
            response.send({ renewables: jsonAsObject });
        }
    });
});

<span class="hljs-comment">/* TWO */</span>
router.get(<span class="hljs-string">'/:id'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request, response</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    response.render(<span class="hljs-string">'renewables/'</span> + request.params.id, {
        title: <span class="hljs-string">'ElfComponent'</span>
    });
});

<span class="hljs-built_in">module</span>.exports = router;
</code></pre>
<p>Looking at the above code, it should be obvious that route ONE has nothing to do with Jade. It is about loading JSON. Route TWO, on the other hand, has to be about Jade, since it calls render. As explained above, we have configured our express program to render Jade as HTML and send it back to the browser via HTTP.</p>
<p>Some resources:</p>
<ul>
<li><a href="http://jade-lang.com/">Home page</a></li>
<li><a href="http://html2jade.aaron-powell.com/">HTML to Jade</a></li>
</ul>
<h2 id="jade-indent">Jade Indent</h2>
<p>When thinking about Jade, indentation is crucial. Suppose I write this:</p>
<pre><code><span class="hljs-selector-tag">div</span>
p
</code></pre><p>That creates two separate, unrelated elements, a div and paragraph.</p>
<pre><code><span class="hljs-section">&lt;div&gt;</span><span class="hljs-section">&lt;/div&gt;</span>
<span class="hljs-section">&lt;p&gt;</span><span class="hljs-section">&lt;/p&gt;</span>
</code></pre><p>Suppose I write this:</p>
<pre><code><span class="hljs-selector-tag">div</span>
   p
</code></pre><p>Now the paragraph is part of the div because it is indented to the right beneath it.</p>
<pre><code><span class="hljs-section">&lt;div&gt;</span>
   <span class="hljs-section">&lt;p&gt;</span><span class="hljs-section">&lt;/p&gt;</span>
<span class="hljs-section">&lt;/div&gt;</span>
</code></pre><p>Suppose you create a div and make it your controller:</p>
<pre><code>div(ngController=<span class="hljs-string">"MyController"</span>)
p <span class="hljs-template-variable">{{firstName}}</span>
</code></pre><p>The above code probably won&#39;t work because the paragraph is not part of the controller and hence <strong>{{firstName}}</strong> is out of scope. To fix it, do this:</p>
<pre><code>div(ngController=<span class="hljs-string">"MyController"</span>)
   p <span class="hljs-template-variable">{{firstName}}</span>
</code></pre><p>Now the paragraph is part of the controller.</p>
<p>When trying to see exactly what is going on with the spacing in a Jade file, considering opening it in geany and turning on <strong>View | Editor | Show White Space</strong>. Or open it in NotePad++ and choose <strong>View | Show Symbol | Show White Space and Tab</strong>.</p>
<p>In WebStorm, you can also turn on visible white space, I believe it is: <strong>File | Settings | Editor | General | Appearance | White Space</strong>.</p>
</div></body></html>