<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>Mercurial</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Elvenware</a></div><div class="navbar-collapse collapse" id="navbar"><ul class="nav navbar-nav"><li class="trigger-collapse" ng-class="{ active: isActive('/')}"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img class="elf-normal" alt="Elvenware" src="/images/elvenwarelogo.png"/></figure><h1>Mercurial</h1><p>Welcome to Mercurial</p><ul><!--TOC_Start--><li><a href="#charlie-calvert-on-elvenware">Charlie Calvert on Elvenware</a></li>
<li><a href="#writing-code-and-prose-on-computers">Writing Code and Prose on Computers</a></li>
<li><a href="#menu">Menu</a></li>
<li><a href="#core-code">Core Code</a></li>
<li><a href="#os-and-tools">OS and Tools</a></li>
<li><a href="#art">Art</a></li>
<li><a href="#links">Links</a></li>
<li><a href="#elvenware-mercurial-repository">Elvenware Mercurial Repository</a></li>
<li><a href="#index">Index</a></li>
<li><a href="#tortoise">TortoiseHg</a></li>
<li><a href="#mercurialEclipse">Mercurial in Eclipse</a></li>
<li><a href="#hgLinuxInstall">Install Mercurial on Linux</a></li>
<li><a href="#commandLine">Running Mercurial from the Command Line</a></li>
<li><a href="#setupHg">Setting up a Mercurial Repository in Linux and Pulling it from Linux</a></li>
<li><a href="#svn">SVN</a></li><!--TOC_End--></ul></div><div class="container"><p>Toggle Menu</p>
<a class="anchor" id="charlie-calvert-on-elvenware"></a>
<h1>Charlie Calvert on Elvenware</h1>
<a class="anchor" id="writing-code-and-prose-on-computers"></a>
<h2>Writing Code and Prose on Computers</h2>
<a class="anchor" id="menu"></a>
<h2>Menu</h2>
<a class="anchor" id="core-code"></a>
<h2>Core Code</h2>
<ul>
<li><a href="../index.html">Strongly Typed</a></li>
<li><a href="../web/index.html">Web &amp; Scripts</a></li>
<li><a href="index.shtml">Cloud</a></li>
</ul>
<a class="anchor" id="os-and-tools"></a>
<h2>OS and Tools</h2>
<ul>
<li><a href="../../os/index.html">OS</a></li>
<li><a href="../database/index.html">Database</a></li>
<li><a href="../../books/index.html">My Writing</a></li>
</ul>
<a class="anchor" id="art"></a>
<h2>Art</h2>
<ul>
<li><a href="../../Art/index.html">Poems &amp; Photos</a></li>
<li><a href="../../books/reading/index.html">Book Reviews</a></li>
<li><a href="../../spirit/index.html">Spiritual</a></li>
</ul>
<a class="anchor" id="links"></a>
<h2>Links</h2>
<ul>
<li><a href="../../links.html">My Links</a></li>
<li><a href="http://www.falafel.com/">Falafel</a></li>
<li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li>
</ul>
<p><img src="../../images/elvenwarelogo.png" alt="Elvenware"></p>
<a class="anchor" id="elvenware-mercurial-repository"></a>
<h1>Elvenware Mercurial Repository</h1>
<p><a href="http://mercurial.selenic.com/">Mercurial</a> is one of many different
tools used for version control. Like <a href="http://git-scm.com/">GIT</a>, it
supports a distributed architecture that allows you to have multiple
versions of your repository. I use Mercurial rather than GIT because I
think it is somewhat easier to use, however, if you are looking for a
version control system, you should consider both Mercurial and the very
popular GIT.</p>
<p>Mercurial is also referred to as HG, where HG is the symbol for Mercury.
Mercurial is a command line utility and
<a href="http://tortoisehg.bitbucket.org/">TortoiseHg</a> is the most popular GUI
client for this tool. The forehead install for TortoiseHg also
automatically install Mercurial.</p>
<a class="anchor" id="index"></a>
<h3>Index</h3>
<ul>
<li><a href="#tortoise">TortoiseHg Install and use on Windows</a></li>
<li><a href="#mercurialEclipse">Mercurial in Eclipse</a></li>
<li><a href="#hgLinuxInstall">Mercurial Linux Install</a></li>
<li><a href="#commandLine">Run Mercurial from the Command Line</a></li>
<li><a href="#setupHg">On Linux, Set up a Mercurial Repository and Pull from it</a></li>
<li><a href="#svn">SVN</a></li>
<li><a href="#links">Links</a></li>
</ul>
<p>Here is the address to pass to Mercurial if you want to pull down some
of the source found on this site. Please see the sections below for more
details:</p>
<pre><code class="lang-%7B.code%7D">hg <span class="hljs-keyword">clone</span> <span class="hljs-title">http</span>://elvenware.hg.sourceforge.net:<span class="hljs-number">8000</span>/hgroot/elvenware/andelf
</code></pre>
<p>The working part of the command is shown here:</p>
<pre><code class="lang-%7B.code%7D">http:<span class="hljs-regexp">//</span>elvenware.hg.sourceforge.net:<span class="hljs-number">8000</span><span class="hljs-regexp">/hgroot/</span>elvenware<span class="hljs-regexp">/andelf</span>
</code></pre>
<p>Note that if you browse directly to this URL on the web, you can get an
overview of the repository and see some of the most recent events that
have occurred, such as updates. You can also use this URL to pull
content from the repository, either by using the command line driven
program called hg, or by using a Mercurial GUI based front end such as
<a href="http://tortoisehg.bitbucket.org/">Tortoisehg</a>. The rest of this
document is primarily an explanation of how to use both of these tools.</p>
<a class="anchor" id="tortoise"></a>
<h2>TortoiseHg</h2>
<p>Mercurial is a command line utility. You access it by typing <strong>hg.</strong>
Most developers, however, use some kind of mouse driven, GUI based,
front end that sits on top of Mercurial. The most commonly used front
end is called TortoiseHg, which is available on Linux and Windows. This
section of the text describes how to install TortoiseHg and configure it
to pull down the Elvenware repository.</p>
<ul>
<li>First <a href="http://tortoisehg.bitbucket.org/">download and install</a>
TortoiseHg.</li>
<li>Bring up the TortoiseHg
<a href="http://tortoisehg.bitbucket.org/manual/2.1/workbench.html">workbench</a>.</li>
<li>Choose <strong>File | Clone Repository</strong> from the workbench menu.</li>
<li>In the <strong>Source</strong> field place the andelf URL shown in the previous
section of this document.</li>
<li>In the <strong>Destination</strong> field, place the path to the location on the
hard drive where you want to store your readonly copy of the
repository.</li>
<li>Select the <strong>Clone</strong> button.</li>
</ul>
<p><a href="images/Mercurial01.png"><img src="images/Mercurial01Small.png" alt="Cloning a Repository in Mercurial
TortoiseHg"></a></p>
<p><strong>Figure 01: Cloning a Repository in Mercurial TortoiseHg. Click to
englarge</strong></p>
<p>Sometimes, after you have pulled down code from the repository, you may
get message saying that you don&#39;t have the head. In those cases, you
will often see two paths in the main window. You should then right click
on the diverged node, and choose update. Finally, choose <strong>Commit</strong> from
the toolbar. (Commit is the check mark seen in the toolbar in Figure 2,
the fourth icon from the right,</p>
<p><a href="images/Mercurial02.png"><img src="images/Mercurial02Small.png" alt="Not a head, and the small fork in the
path"></a></p>
<p><strong>Figure 02: Not a head revision, and the small fork in the graph
column. Click to zoom.</strong></p>
<p><img src="images/Mercurial03Small.png" alt="After the update and commit, there is no fork in the graph column, and
the red &quot;not a head revision&quot; is gone."></p>
<p><strong>Figure 03: After the update and commit, there is no fork in the graph
column, and the red &quot;not a head revision&quot; is gone.</strong></p>
<p><strong>Note</strong>: <em>If you pull down code from a Mercurial repository, and you
want to use that code as the basis for one of your own projects, you
would normally want to copy that code to another folder before using it.
Otherwise, your work might be overwritten the next time you pull from
the repository.</em></p>
<a class="anchor" id="mercurialEclipse"></a>
<h2>Mercurial in Eclipse</h2>
<ul>
<li>Open up Eclpse/Aptana. </li>
<li>Choose Help | Install New Software</li>
<li>Click the Add Button and enter the following:</li>
<li><strong>Name</strong>: MercurialEclipse</li>
<li><strong>Location</strong>: <a href="http://mercurialeclipse.eclipselabs.org.codespot.com/hg.wiki/update_site/stable">http://mercurialeclipse.eclipselabs.org.codespot.com/hg.wiki/update_site/stable</a></li>
<li>Click Okay and choose MercuialEclipse stable releases. </li>
<li>Click next twice, accept the license, click finish</li>
<li>Click through the unsigned content warning</li>
<li>Restart Eclipse/Aptana</li>
</ul>
<p>To configure Mercurial, choose <strong>Window | Preferences | Team |
Mercurial</strong></p>
<a class="anchor" id="links"></a>
<h2>Links</h2>
<ul>
<li><a href="http://www.elvenware.com/charlie/development/cloud/Mercurial.html#setupHg">http://www.elvenware.com/charlie/development/cloud/Mercurial.html#setupHg</a></li>
<li><a href="https://bitbucket.org/mercurialeclipse/main/wiki/Installation_and_Configuration.wiki#!installation-and-configuration">https://bitbucket.org/mercurialeclipse/main/wiki/Installation_and_Configuration.wiki#!installation-and-configuration</a></li>
<li></li>
</ul>
<a class="anchor" id="hgLinuxInstall"></a>
<h2>Install Mercurial on Linux</h2>
<pre><code class="lang-%7B.code%7D">sudo apt-<span class="hljs-builtin-name">get</span> install mercurial tortoisehg
</code></pre>
<p>Apparently meld is some kind of Linux GUI based front end for mercurial.
I haven&#39;t tried it yet. And perhaps I never will, as I see that
tortoisehg is available.</p>
<a class="anchor" id="commandLine"></a>
<h2>Running Mercurial from the Command Line</h2>
<p>TortoiseHg is a GUI front end to Mercurial. The actual Mercurial program
is called <strong>hg,</strong>and it is driven from the command line. Mercuial works
exactly the same in Windows, Linux and the Mac. Many users of Mercurial
prefer the command line tools because they can put them in scripts that
can be automated. For instance, in Windows, you could use the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614(v=vs.85">Task
Scheduler</a>.aspx)
to <a href="http://mercurial.selenic.com/wiki/Pull">pull</a> the latest updates
from the repository each morning.</p>
<p>If you want to use <strong>hg</strong>rather than TortoiseHg, be prepared to do all
your work from the command line. It is not hard, but you need to accept
the task before you.</p>
<p>Here is how to get the Elvenware Repository for the first time with the
<a href="http://mercurial.selenic.com/wiki/Clone">clone</a> command:</p>
<pre><code class="lang-%7B.code%7D">hg <span class="hljs-keyword">clone</span> <span class="hljs-title">http</span>://elvenware.hg.sourceforge.net:<span class="hljs-number">8000</span>/hgroot/elvenware/andelf
</code></pre>
<p>Once you have cloned the repository, you can update it with the latest
content at any time. All you need to do is switch to the directory where
your repository is stored, and then type the following commands:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-attribute">hg pull
hg update</span>
</code></pre>
<p>If you are writing a script, you probably won&#39;t want to run the script
from inside the repository. As a result, you need to write something
like this, where <strong>g:\shanti\andelf</strong>is the path to your repository:</p>
<pre><code class="lang-%7B.code%7D">hg --repository <span class="hljs-string">g:</span>\shanti\andelf\ pull --verbose <span class="hljs-string">http:</span><span class="hljs-comment">//elvenware.hg.sourceforge.net:8000/hgroot/elvenware/andelf</span>
</code></pre>
<p>If you have trouble figuring out what to do with Mercurial at the
command line in Linux, you can learn what to do by using workbench in
Windows; just make sure that the output log (Ctrl-L) is open at the
bottom of the workbench. As you issue commands using the WorkBench
interface, you can see the underlying <strong>hg</strong> command line equivalents in
the output log at the bottom of the workbench. Now just copy those
commands over to your Linux terminal.</p>
<p>Here is a review of how to run Mercurial on a Unix based operating
system like Linux or the Mac. Call hg clone first. Many people will want
to clone the repository in their \
home or documents folder. In the examples that follow, I created the
clone in my tmp directory just so I could easily delete it later, since
I already have a copy in my home \
folder, but want to show you the whole process from beginning to end.</p>
<p>The whole run should look like this, assuming that you start in a
directory called /tmp:</p>
<pre><code class="lang-%7B.code%7D">charlie@MintBox /tmp $ hg clone http://elvenware.hg.sourceforge.ne<span class="hljs-variable">t:8000</span>/hgroot/elvenware/andelf
destination directory: andelf
requesting <span class="hljs-keyword">all</span> <span class="hljs-keyword">changes</span>
adding changesets
adding manifests
adding <span class="hljs-keyword">file</span> <span class="hljs-keyword">changes</span>
added <span class="hljs-number">117</span> changesets with <span class="hljs-number">504</span> <span class="hljs-keyword">changes</span> <span class="hljs-keyword">to</span> <span class="hljs-number">440</span> <span class="hljs-keyword">files</span>
updating <span class="hljs-keyword">to</span> branch default
<span class="hljs-number">412</span> <span class="hljs-keyword">files</span> updated, <span class="hljs-number">0</span> <span class="hljs-keyword">files</span> merged, <span class="hljs-number">0</span> <span class="hljs-keyword">files</span> removed, <span class="hljs-number">0</span> <span class="hljs-keyword">files</span> unresolved
charlie@MintBox /tmp $ 
</code></pre>
<p>Now the repository is in<strong>/tmp/andelf</strong>\
 Here is what to do if you want to update your version of the
repostiroy:</p>
<pre><code class="lang-%7B.code%7D">charlie<span class="hljs-meta">@MintBox</span> <span class="hljs-regexp">/tmp $ cd /</span>tmp<span class="hljs-regexp">/andelf/</span>
charlie<span class="hljs-meta">@MintBox</span> <span class="hljs-regexp">/tmp/</span>andelf $ hg pull
</code></pre>
<p>If there were an updates, you will be prompted to run hg update. You
should, of course, then run hg update:</p>
<pre><code class="lang-%7B.code%7D">charlie@MintBox /tmp/andelf $ hg pull
pulling from http://elvenware.hg.sourceforge.ne<span class="hljs-variable">t:8000</span>/hgroot/elvenware/andelf
searching <span class="hljs-keyword">for</span> <span class="hljs-keyword">changes</span>
adding changesets
adding manifests
adding <span class="hljs-keyword">file</span> <span class="hljs-keyword">changes</span>
added <span class="hljs-number">1</span> changesets with <span class="hljs-number">1</span> <span class="hljs-keyword">changes</span> <span class="hljs-keyword">to</span> <span class="hljs-number">1</span> <span class="hljs-keyword">files</span>
(run <span class="hljs-string">'hg update'</span> <span class="hljs-keyword">to</span> <span class="hljs-built_in">get</span> <span class="hljs-keyword">a</span> working <span class="hljs-keyword">copy</span>)
charlie@MintBox /tmp/andelf $ hg <span class="hljs-keyword">update</span>
<span class="hljs-number">1</span> <span class="hljs-keyword">files</span> updated, <span class="hljs-number">0</span> <span class="hljs-keyword">files</span> merged, <span class="hljs-number">0</span> <span class="hljs-keyword">files</span> removed, <span class="hljs-number">0</span> <span class="hljs-keyword">files</span> unresolved
charlie@MintBox /tmp/andelf $
</code></pre>
<a class="anchor" id="setupHg"></a>
<h2>Setting up a Mercurial Repository in Linux and Pulling it from Linux</h2>
<p>To create the repository:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-attribute">hg init MyRepo</span>
</code></pre>
<p>Now navigate to your MyRepo directory:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-keyword">cd</span> <span class="hljs-string">/home/charlie/MyRepo</span>
</code></pre>
<p>Use an editor or the echo command to put a file in it:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-built_in">echo</span> Test Content &gt; MyFile.txt
</code></pre>
<p>The echo command, when used this way, creates a small text file with the
words &quot;Test Content&quot; in it. Now add the file to the repository:</p>
<pre><code class="lang-%7B.code%7D">hg -<span class="hljs-keyword">add</span><span class="bash"> MyFile.txt</span>
</code></pre>
<p>Now commit the file:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-attribute">hg -commit</span>
</code></pre>
<p>At this stage, if you are adding a file for the first time, you might
get an error about user names. To get user name installed</p>
<p>Create hgrc in .hg and put this in it, where the user name is some email
address that you want to use:</p>
<pre><code><span class="hljs-section">[ui]</span>
<span class="hljs-attr">username</span> = MyName@MyServer      
</code></pre><p>To pull it from the server you should copy the public key from your
client machine to the authorized key file on the server that hosts the
repository. Now you need to make sure your private key is loaded into
memory. (This is the same thing as loading the key into Pageant.):</p>
<pre><code class="lang-%7B.code%7D">ssh-<span class="hljs-keyword">add</span><span class="bash"> YourPrivateKey</span>
</code></pre>
<p>For instance, you might write: <strong>ssh-add .ssh/id_rsa</strong>. Or possibly
<strong>ssh-add .ssh/id_charlie_rsa.pem</strong>. Your milage will vary depending
on the name and location of the private key that you want to use.</p>
<p>Now you should be able to pull the repo from the client by issuing this
command:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-selector-tag">hg</span> <span class="hljs-selector-tag">clone</span> <span class="hljs-selector-tag">--verbose</span> <span class="hljs-selector-tag">charlie</span>@<span class="hljs-keyword">MyServer</span>//<span class="hljs-keyword">home</span>/<span class="hljs-keyword">charlie</span>/<span class="hljs-keyword">MyRepo</span> /home/charlie/MyRepo
</code></pre>
<p>We give this command on the client, and it sends messages to the server
asking to retrieve the repository.</p>
<p>Let&#39;s break the command down. First we say that we want to clone a
repostory: <strong>hg clone</strong>. Then we say we want verbose output, so we get
as much feedback as possible: <strong>hg clone --verbose</strong>.</p>
<p>We are saying that we will clone the repository that is stored on
<strong>MyServer</strong>. The user on <strong>MyServer</strong> is <strong>charlie</strong>. Hence we write
&lt;charlie@MyServer&gt;.</p>
<p> The repository is stored in <strong>/home/charlie/MyRepo</strong>. Note that in the
command there are the two slashes before the word <strong>home</strong>!!</p>
<p>Then we state where we want to put the repository on the client machine:
<strong>/home/charlie/MyRepo</strong>. We are copying from the
<strong>/home/charlie/MyRepo</strong> directory on the server to the
<strong>/home/charlie/MyRepo</strong> directory on the client.  </p>
<p>Now you can edit one of the files on the client. While still in the
directory where you did your work, you can update the server. To update
the server, you perform a <strong>commit</strong> and <strong>push</strong>. First the <strong>commit</strong>:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-attribute">hg commit</span>
</code></pre>
<p>When giving the commit command for the first time, you may be prompted
to specify an editor. On Linux, choose <strong>nano</strong>, unless you know you
prefer vim or some other tool such as gedit. On Windows, choose
NotePad++ or Notepad.</p>
<p>Now the push. Again, when you give this command, you should be in the
directory where you are doing your work. For instance, you should be in
<strong>/home/charlie/MyRepo</strong>. Here is the command:</p>
<pre><code class="lang-%7B.code%7D">hg <span class="hljs-keyword">push</span>
</code></pre>
<p>Then on the server, you can see the results by typing the following:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-attribute">hg update</span>
</code></pre>
<p>Of course, that command merely updates your file. To see the contents of
the file, type something like this:</p>
<pre><code class="lang-%7B.code%7D"><span class="hljs-selector-tag">cat</span> <span class="hljs-selector-tag">MyFile</span><span class="hljs-selector-class">.txt</span>
</code></pre>
<a class="anchor" id="svn"></a>
<h2>SVN</h2>
<p>You can install and download SVN without cost./span></p>
<p>SVN Downloads:
<a href="http://tortoisesvn.tigris.org/">http://tortoisesvn.tigris.org/</a></p>
<p>Create a directory on your hard drive, then right click and choose SVN
Checkout.</p>
<p><img src="images/Svn02.png" alt="SVN Checkout"></p>
<p><img src="images/Svn01Small.png" alt="SVN Import New Code"></p>
<p><strong>Figure 0X: SVN Checkout</strong></p>
<a class="anchor" id="links"></a>
<h2>Links</h2>
<ul>
<li><a href="http://hgbook.red-bean.com">http://hgbook.red-bean.com/</a></li>
<li><a href="http://stackoverflow.com/questions/2329023/mercurial-error-abort-no-username-supplied">http://stackoverflow.com/questions/2329023/mercurial-error-abort-no-username-supplied</a></li>
<li><a href="http://www.selenic.com/mercurial/hg.1.html">http://www.selenic.com/mercurial/hg.1.html</a></li>
<li><a href="http://tortoisehg.bitbucket.org/">Tortoisehg</a></li>
</ul>
<p>Copyright © <a href="../../index.html">Charlie Calvert</a> | <a href="../../index.html">Elvenware
Home</a> | <a href="../index.html">Writing Code</a> |
<a href="../delphi/index.html">Delphi</a> | <a href="../csharp/index.html">CSharp</a> | <a href="../../books/index.html">My
Books</a></p>
</div></body></html>