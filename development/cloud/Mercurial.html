<!DOCTYPE html>
<html dir="ltr">

<!-- #BeginTemplate "../../Elvenware.dwt" -->

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<!-- #BeginEditable "doctitle" -->
<title>Using Mercurial</title>
<meta name="description" content="Elvenware on Mercurial" />
<meta name="keywords" content="Mercurial" />
<!-- #EndEditable -->
<meta content="width=device-width,minimum-scale=1.0,maximum-scale=1.0" name="viewport" />
<link href="/charlie/libs/css/style2.css" rel="stylesheet" title="style2" type="text/css" />
<link href="/charlie/libs/jquery-ui/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="/charlie/libs/scripts/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js" type="text/javascript"></script>
<script src="/charlie/libs/scripts/elvenware.js" type="text/javascript"></script>
<!-- #BeginEditable "docScripts" -->
<style type="text/css">







.auto-style1
{
	border-width: 0px;
}

</style>
<!-- #EndEditable -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2806409-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>

<div id="container">
	<header>
		<div class="navButton" onclick="elvenware.toggleMenu()">
			Toggle Menu</div>
		<h1>Charlie Calvert on Elvenware</h1>
		<h2>Writing Code and Prose on Computers</h2>
	</header>
	<nav>
		<h2>Menu</h2>
		<div id="accordion00">
		<h2 class="navSection01">Core Code</h2>
			<ul>
				<li><a href="../index.html">Strongly Typed</a></li>
				<li><a href="../web/index.html">Web &amp; Scripts</a></li>
				<li><a href="index.shtml">Cloud</a></li>
			</ul>
		
			<h2 class="navSection02">OS and Tools</h2>
			<ul>
				<li><a href="../../os/index.html">OS</a></li>
				<li><a href="../database/index.html">Database</a></li>
				<li><a href="../../books/index.html">My Writing</a></li>
			</ul>
			
		
			<h2 class="navSection03">Art</h2>
			<ul>
				<li><a href="../../Art/index.html">Poems &amp; Photos</a></li>
				<li><a href="../../books/reading/index.html">Book Reviews</a></li>
				<li><a href="../../spirit/index.html">Spiritual</a></li>
			</ul>
			<h2 class="navSection04">Links</h2>
			<ul>
				<li><a href="../../links.html">My Links</a></li>
				<li><a href="http://www.falafel.com/">Falafel</a></li>
				<li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li>
			</ul>
		</div>
	</nav>
	<article>
		<figure>
			<img alt="Elvenware" src="../../images/elvenwarelogo.png" /></figure>
		<!-- #BeginEditable "body" -->
		<h1>Elvenware Mercurial Repository</h1>
		<p><a href="http://mercurial.selenic.com/">Mercurial</a> is one of many 
		different tools used for version control. Like
		<a href="http://git-scm.com/">GIT</a>, it supports a distributed 
		architecture that allows you to have multiple versions of your 
		repository. I use Mercurial rather than GIT because I think it is 
		somewhat easier to use, however, if you are looking for a version 
		control system, you should consider both Mercurial and the very popular 
		GIT.</p>
		<p>Mercurial is also referred to as HG, where HG is the symbol for 
		Mercury. Mercurial is a command line utility and
		<a href="http://tortoisehg.bitbucket.org/">TortoiseHg</a> is the most 
		popular GUI client for this tool. The forehead install for TortoiseHg 
		also automatically install Mercurial.</p>
		<h3>Index</h3>
		<ul>
			<li><a href="#tortoise">TortoiseHg Install and use on Windows</a></li>
			<li><a href="#mercurialEclipse">Mercurial in Eclipse</a></li>
			<li><a href="#hgLinuxInstall">Mercurial Linux Install</a></li>
			<li><a href="#commandLine">Run Mercurial from the Command Line</a></li>
			<li><a href="#setupHg">On Linux, Set up a Mercurial Repository and 
			Pull from it</a></li>
			<li><a href="#svn">SVN</a></li>
			<li><a href="#links">Links</a></li>
		</ul>

		<p>Here is the address to pass to Mercurial if you want to pull down some of the source found on this site. 
		Please see the sections below for more details:</p>
<pre class="code">hg clone http://elvenware.hg.sourceforge.net:8000/hgroot/elvenware/andelf</pre>

		<p>The working part of the command is shown here:</p>
		<pre class="code"><a href="http://elvenware.hg.sourceforge.net:8000/hgroot/elvenware/andelf" target="_blank">http://elvenware.hg.sourceforge.net:8000/hgroot/elvenware/andelf</a></pre>
		<p>Note that if you browse directly to this URL on the web, you can get 
		an overview of the repository and see some of the most recent events 
		that have occurred, such as updates. You can also use this URL to pull 
		content from the repository, either by using the command line driven 
		program called hg, or by using a Mercurial 
		GUI based front end such as
		<a href="http://tortoisehg.bitbucket.org/" target="_blank">Tortoisehg</a>. 
		The rest of this document is primarily an explanation of how to use both 
		of these tools.</p>


		<h2 id="tortoise">TortoiseHg</h2>
		<p>Mercurial is a command line utility. You access it by typing <strong>
		hg.</strong> Most developers, however, use some kind of mouse driven, 
		GUI based, front end that sits on top of Mercurial. The most commonly 
		used front end is called TortoiseHg, which is available on Linux and 
		Windows. This section of the text describes 
		how to install TortoiseHg and configure it to pull down the Elvenware 
		repository.</p>
		<ul>
			<li>First <a href="http://tortoisehg.bitbucket.org/" target="_blank">
			download and install</a> TortoiseHg. </li>
			<li>Bring up the TortoiseHg
			<a href="http://tortoisehg.bitbucket.org/manual/2.1/workbench.html" target="_blank">
			workbench</a>.</li>
			<li>Choose <strong>File | Clone Repository</strong> from the 
			workbench menu.</li>
			<li>In the <strong>Source</strong> field place the andelf URL shown in 
			the previous section of this document.</li>
			<li>In the <strong>Destination</strong> field, place the path to the 
			location on the hard drive where you want to store your readonly 
			copy of the repository.</li>
			<li>Select the <strong>Clone</strong> button.</li>
		</ul>
		<p><a href="images/Mercurial01.png">
		<img alt="Cloning a Repository in Mercurial TortoiseHg" class="auto-style1" height="143" src="images/Mercurial01Small.png" style="width: 500px"></a></p>
		<p><strong>Figure 01: Cloning a Repository in Mercurial TortoiseHg. 
		Click to englarge</strong></p>
		<p>Sometimes, after you have pulled down code from the repository, you 
		may get message saying that you don't have the head. In those cases, you 
		will often see two paths in the main window. You should then right click 
		on the diverged node, 
		and choose update. Finally, choose <strong>Commit</strong> from the toolbar. 
		(Commit is the check mark seen in the toolbar in Figure 2, the fourth 
		icon from the right, </p>
		<p><a href="images/Mercurial02.png">
		<img alt="Not a head, and the small fork in the path" class="auto-style1" height="335" src="images/Mercurial02Small.png" style="width: 500px"></a></p>
		<p><strong>Figure 02: Not a head revision, and the small fork in the 
		graph column. Click to zoom.</strong></p>
		<p>
		<img alt="After the update and commit, there is no fork in the graph column, and the red &quot;not a head revision&quot; is gone." height="335" src="images/Mercurial03Small.png" style="width: 500px"></p>
		<p><strong>Figure 03: After the update and commit, there is no fork in 
		the graph column, and the red "not a head revision" is gone.</strong></p>

		<p><strong>Note</strong>: <em>If you pull down code from a Mercurial 
		repository, and you want to use that code as the basis for one of your 
		own projects, you would normally want to copy that code to another 
		folder before using it. Otherwise, your work might be overwritten the 
		next time you pull from the repository.</em></p>
		<h2 id="mercurialEclipse">Mercurial in Eclipse</h2>
		<ul>
<li>Open up Eclpse/Aptana.&nbsp;</li>
<li>Choose Help | Install New Software</li>
<li>Click the Add Button and enter the following:</li>
<li><strong>Name</strong>: MercurialEclipse</li>
<li><strong>Location</strong>:&nbsp;<a href="http://mercurialeclipse.eclipselabs.org.codespot.com/hg.wiki/update_site/stable">http://mercurialeclipse.eclipselabs.org.codespot.com/hg.wiki/update_site/stable</a></li>
<li>Click Okay and choose MercuialEclipse stable releases.&nbsp;</li>
<li>Click next twice, accept the license, click finish</li>
<li>Click through the unsigned content warning</li>
<li>Restart Eclipse/Aptana</li>
</ul>
<p>To configure Mercurial, choose <strong>Window | Preferences | Team | 
Mercurial</strong></p>
<h2><span>Links</span></h2>
<ul>
<li><a href="http://www.elvenware.com/charlie/development/cloud/Mercurial.html#setupHg">http://www.elvenware.com/charlie/development/cloud/Mercurial.html#setupHg</a></li>
<li><a href="https://bitbucket.org/mercurialeclipse/main/wiki/Installation_and_Configuration.wiki#!installation-and-configuration">https://bitbucket.org/mercurialeclipse/main/wiki/Installation_and_Configuration.wiki#!installation-and-configuration</a></li>
<li></li>
</ul>
<p>&nbsp;</p>
		<p>&nbsp;</p>
		<h2 id="hgLinuxInstall">Install Mercurial on Linux</h2>
<pre class="code">sudo apt-get install mercurial tortoisehg</pre>

<p>Apparently meld is some kind of Linux GUI based front end for mercurial. I 
haven't tried it yet. And perhaps I never will, as I see that tortoisehg is 
available.</p>

		<h2 id="commandLine">Running Mercurial from the Command Line </h2>

		<p>TortoiseHg is a GUI front end to Mercurial. The actual Mercurial 
		program is called <strong>hg, </strong>and it is driven from the command 
		line. Mercuial works exactly the same in Windows, Linux and the Mac. 
		Many users of Mercurial prefer the command line tools because they can 
		put them in scripts that can be automated. For instance, in Windows, you 
		could use the
		<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614(v=vs.85).aspx" target="_blank">
		Task Scheduler</a> to
		<a href="http://mercurial.selenic.com/wiki/Pull" target="_blank">pull</a> 
		the latest updates from the repository each morning.</p>

		<p>If you want to use <strong>hg </strong>rather than TortoiseHg, be 
		prepared to do all your work from the command line. It is not hard, but 
		you need to accept the task before you. </p>

		<p>Here is how to get the Elvenware Repository for the first time with the
		<a href="http://mercurial.selenic.com/wiki/Clone" target="_blank">clone</a> 
		command:</p>
<pre class="code">hg clone http://elvenware.hg.sourceforge.net:8000/hgroot/elvenware/andelf</pre>

<p>Once you have cloned the repository, you can update it with the latest 
content at any time. All you need to do is switch to the 
directory where your repository is stored, and then type the following commands:</p>

		<pre class="code">hg pull
hg update</pre>

		<p>If you are writing a script, you probably won't want to run the 
		script from inside the repository. As a result, you need to write something like this, where <strong>
		g:\shanti\andelf </strong>is the path to your repository:</p>
<pre class="code">hg --repository g:\shanti\andelf\ pull --verbose http://elvenware.hg.sourceforge.net:8000/hgroot/elvenware/andelf</pre>
		<p>If you have trouble figuring out what to do with Mercurial at the 
		command line in Linux, you can learn what to do by using workbench in 
		Windows; just make sure that the output log (Ctrl-L) is open at the 
		bottom of the workbench. As you issue commands using the WorkBench 
		interface, you can see the underlying <strong>hg</strong> command line equivalents in the 
		output log at the bottom of the workbench. Now just copy those commands 
		over to your Linux terminal.</p>
		<p>Here is a review of how to run 
		Mercurial on a Unix based operating system like Linux or the Mac. Call 
		hg clone first. Many people will want to clone the repository in their <br>home 
		or documents folder. In the examples that follow, I created the clone in 
		my tmp directory just so I could easily delete it later, since I already 
		have a copy in my home <br>folder, but want to show you the whole 
		process from beginning to end.</p>
		
		<p>The whole run should look like 
		this, assuming that you start in a directory called /tmp:</p>
		
		<pre class="code">charlie@MintBox /tmp $ hg clone http://elvenware.hg.sourceforge.net:8000/hgroot/elvenware/andelf
destination directory: andelf
requesting all changes
adding changesets
adding manifests
adding file changes
added 117 changesets with 504 changes to 440 files
updating to branch default
412 files updated, 0 files merged, 0 files removed, 0 files unresolved
charlie@MintBox /tmp $ </pre>
		
		<p>Now the repository is in<strong> /tmp/andelf</strong><br>	Here is what to do if you want to update your version of the repostiroy:</p>
		<pre class="code">charlie@MintBox /tmp $ cd /tmp/andelf/
charlie@MintBox /tmp/andelf $ <strong>hg pull</strong></pre>
		
		<p>If there were an updates, you will be 
		prompted to run hg update. You should, of course, then run hg update:</p>
		<pre class="code">charlie@MintBox /tmp/andelf $ <strong>hg pull</strong>
pulling from http://elvenware.hg.sourceforge.net:8000/hgroot/elvenware/andelf
searching for changes
adding changesets
adding manifests
adding file changes
added 1 changesets with 1 changes to 1 files
(run 'hg update' to get a working copy)
charlie@MintBox /tmp/andelf $ <strong>hg update</strong>
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
charlie@MintBox /tmp/andelf $</pre>

		<h2 id="setupHg">Setting up a Mercurial Repository in Linux and Pulling it from Linux</h2>

		<p>To create the repository:</p>
		<pre class="code">hg init MyRepo</pre>
		<p>Now navigate to your MyRepo directory:</p>
		<pre class="code">cd /home/charlie/MyRepo</pre>
		<p>Use an editor or the echo command to put a file in it:</p>
		<pre class="code">echo Test Content &gt; MyFile.txt</pre>
		<p>The echo command, when used this way, creates a small text file with 
		the words "Test Content" in it. Now add the file to the repository:</p>
		<pre class="code">hg -add MyFile.txt</pre>
		<p>Now commit the file:</p>
		<pre class="code">hg -commit</pre>
		<p>At this stage, if you are adding a file for the first time, you might 
		get an error about user names. To get user name installed</p>
		
		<p>Create hgrc in .hg and put this in it, where the user name is some 
		email address that you want to use: </p>
		
		<pre>
[ui]
username = MyName@MyServer		</pre>
		
		<p>To pull it from the server you should copy the public key from your 
		client machine to the authorized key file on the server that hosts the 
		repository. Now you need to make sure your private key is loaded into 
		memory. (This is the same thing as loading the key into Pageant.):</p>
		<pre class="code">ssh-add YourPrivateKey</pre>
		<p>For instance, you might write: <strong>ssh-add .ssh/id_rsa</strong>. 
		Or possibly <strong>ssh-add .ssh/id_charlie_rsa.pem</strong>. Your milage will vary 
		depending on the name and location of the private key that you want to 
		use.</p>
		<p>Now you should be able to pull the repo from the client by issuing 
		this command:</p>
		<pre class="code">hg clone --verbose charlie@MyServer//home/charlie/MyRepo /home/charlie/MyRepo</pre>
		<p>We give this command on the client, and it sends messages to the 
		server asking to retrieve the repository. </p>
		<p>Let's break the command down. First we say that we want to clone a 
		repostory: <strong>hg clone</strong>. Then we say we want verbose 
		output, so we get as much feedback as possible: <strong>hg clone 
		--verbose</strong>.</p>
		<p>We are saying that we will clone the repository that is stored on
		<strong>MyServer</strong>. The user on <strong>MyServer</strong> is
		<strong>charlie</strong>. Hence we write
		<a href="mailto:charlie@MyServer">charlie@MyServer</a>.</p>
		<p>&nbsp;The repository is stored in <strong>/home/charlie/MyRepo</strong>. 
		Note that in the command there are the two slashes before the word
		<strong>home</strong>!! </p>
		<p>Then we state where we want to put the repository on the client 
		machine: <strong>/home/charlie/MyRepo</strong>. We are copying from the
		<strong>/home/charlie/MyRepo</strong> directory on the server to the
		<strong>/home/charlie/MyRepo</strong> directory on the client. &nbsp;</p>
		<p>Now you can edit one of the files on the client. While still in the 
		directory where you did your work, you can update the server. To update 
		the server, you perform a <strong>commit</strong> and <strong>push</strong>. First the
		<strong>commit</strong>:</p>
		<pre class="code">hg commit</pre>
		<p>When giving the commit command for the first time, you may be 
		prompted to specify an editor. On Linux, choose <strong>nano</strong>, 
		unless you know you prefer vim or some other tool such as gedit. On 
		Windows, choose NotePad++ or Notepad. </p>
		<p>Now the push. Again, when you give this command, you should be in the 
		directory where you are doing your work. For instance, you should be in
		<strong>/home/charlie/MyRepo</strong>. Here is the command:</p>
		<pre class="code">hg push</pre>
		<p>Then on the server, you can see the results by typing the following:</p>
		<pre class="code">hg update</pre>
		<p>Of course, that command merely updates your file. To see the contents 
		of the file, type something like this:</p>
		<pre class="code">cat MyFile.txt</pre>


		<h2 id="svn">SVN</h2>
		<p><span class="auto-style1">You can install and download SVN without 
		cost./span></p>
		<p><span class="auto-style1">SVN Downloads:
		<a href="http://tortoisesvn.tigris.org/">http://tortoisesvn.tigris.org/</a></span></p>
		<p>Create a directory on your hard drive, then right click and choose 
		SVN Checkout.</p>
		<p>
		<img alt="SVN Checkout" height="387" src="images/Svn02.png" style="width: 468px"></p>
<p>
<img alt="SVN Import New Code" height="225" src="images/Svn01Small.png" style="width: 490px"></p>
		<p><strong>Figure 0X: SVN Checkout</strong></p>
		<h2 id="links">Links</h2>
		<ul>
			<li><a href="http://hgbook.red-bean.com">http://hgbook.red-bean.com/</a>
			</li>
			<li>
			<a href="http://stackoverflow.com/questions/2329023/mercurial-error-abort-no-username-supplied">
			http://stackoverflow.com/questions/2329023/mercurial-error-abort-no-username-supplied</a></li>
			<li>
			<a href="http://www.selenic.com/mercurial/hg.1.html" target="_blank">http://www.selenic.com/mercurial/hg.1.html</a></li>
			<li><a href="http://tortoisehg.bitbucket.org/" target="_blank">
			Tortoisehg</a></li>
		</ul>
		<!-- #EndEditable -->
	</article>
	<footer>

		<p>Copyright &copy; <a href="../../index.html">Charlie Calvert</a> |
		<a href="../../index.html">Elvenware Home</a> |
		<a href="../index.html">Writing Code</a> |
		<a href="../delphi/index.html">Delphi</a> |
		<a href="../csharp/index.html">CSharp</a> |
		<a href="../../books/index.html">My Books</a> </p>
	</footer>
</div>

</body>

<!-- #EndTemplate -->

</html>
