<!DOCTYPE html>
<html dir="ltr">

<head>
	<meta charset="utf-8" />
	<title>OwnCloud</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="/charlie/images/favicon.png">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css">
	<link href="/charlie/libs/css/BootstrapIndex.css" rel="stylesheet" type="text/css" />
	<!-- Latest compiled and minified JavaScript - Move to bottom of body element -->
	<script src="//code.jquery.com/jquery.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script src="/charlie/libs/scripts/elvenware.js" type="text/javascript"></script>
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-2806409-2']);
		_gaq.push(['_trackPageview']);
		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
</head>

<body>



	<!-- removed  navbar-fixed-top -->
	<div class="navbar navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="icon-bar"> </span>
					<span class="icon-bar"> </span>
					<span class="icon-bar"> </span>
				</button>
				<a class="navbar-brand" href="/charlie/index.html">Elvenware</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="/charlie/index.html">Home</a></li>
					<li><a href="/charlie/contents.html">About</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li class="dropdown-header">Core Code</li>
							<li><a href="/charlie/development/index.html">Strongly Typed</a></li>
							<li><a href="/charlie/development/web/index.html">Web &amp; Scripts</a></li>
							<li><a href="/charlie/development/cloud/index.shtml">Cloud</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">OS and Tools</li>
							<li><a href="/charlie/os/index.html">OS</a></li>
							<li><a href="/charlie/development/database/index.html">Database</a></li>
							<li><a href="/charlie/books/index.html">My Writing</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Art</li>
							<li><a href="/charlie/Art/index.html">Poems &amp; Photos</a></li>
							<li><a href="/charlie/books/reading/index.html">Book Reviews</a></li>
							<li><a href="/charlie/spirit/index.html">Spiritual</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Links</li>
							<li><a href="/charlie/links.html">My Links</a></li>
							<li><a href="http://www.github.com/charliecalvert">GitHub</a></li>
							<li><a href="http://sourceforge.net/projects/elvenware/">Sourceforge</a></li>
						</ul>
					</li>
				</ul>
			</div><!--/.nav-collapse -->
		</div>
	</div>

	<div class="container">

		<div class="starter-template">
			<figure><img alt="Elvenware" src="/charlie/images/elvenwarelogo.png" /></figure>
<h2>Table of Contents</h2>
<ul>
	<li><a href='#owncloud'>OwnCloud</a></li>
	<li><a href='#install'>Install</a></li>
	<li><a href='#check-admin'>Check Admin</a></li>
	<li><a href='#apache-ssl'>Apache SSL</a></li>
	<li><a href='#move-data-dir'>Move Data Dir</a></li>
	<li><a href='#webdav'>WebDav</a></li>
	<li><a href='#owncloud-client'>OwnCloud Client</a></li>
</ul>
<h1 id="owncloud">OwnCloud</h1>
<p>OwnCloud allows you to build a cloud server similar, but not identical to, DropBox, Google Drive or SkyDrive. You can run it as your own private cloud.</p>
<ul>
<li><a href="http://doc.owncloud.org/">http://doc.owncloud.org/</a></li>
<li><a href="http://software.opensuse.org/download/package?project=isv:ownCloud:community&amp;package=owncloud">http://software.opensuse.org/download/package?project=isv:ownCloud:community&amp;package=owncloud</a></li>
</ul>
<p><strong>NOTE</strong>: <em>Typing in commands on a Linux server can be trying. Don't try to type these commands in. First open up a SSH window, then just cut and paste.</em></p>
<h2 id="install">Install</h2>
<p>To install OwnCloud, copy and paste these commands into your SSH window:</p>
<pre><code>sudo sh -c &quot;echo &#39;deb http://download.opensuse.org/repositories/isv:/ownCloud:/community/xUbuntu_13.10/ /&#39; &gt;&gt; /etc/apt/sources.list.d/owncloud.list&quot;
sudo apt-get update
sudo apt-get install owncloud</code></pre>
<p>The first command is long, and should be placed all on one line. Copy it in Windows, then right click on the SSH window to paste it into the Linux command line.</p>
<p>When wrapped it looks like this:</p>
<pre><code>sudo sh -c &quot;echo 
&#39;deb http://download.opensuse.org/repositories/isv:/ownCloud:/community/xUbuntu_13.10/ /&#39; 
&gt;&gt; /etc/apt/sources.list.d/owncloud.list&quot;</code></pre>
<p>But don't enter it that way. It needs to be all on line, as shown above.</p>
<p>Now access your instance:</p>
<pre><code>http://[IPADDRESS]/owncloud</code></pre>
<p>For instance:</p>
<pre><code>http://127.0.0.1/owncloud</code></pre>
<p>But your IP address may be your AWS elastic IP or a machine on your local network, or perhaps a random address from the Internet.</p>
<p>Once you are looking at OwnCloud running in your browser, you will need to create an account and sign in. As the account name, you can use your own name, or admin, or some name that you make up.</p>
<figure>
<img src="images/OwnCloud00.png" alt="Signing In" /><figcaption>Signing In</figcaption>
</figure>
<h2 id="check-admin">Check Admin</h2>
<p>Once you are in OwnCloud you will want to use the menu to navigate to <strong>Admin | Admin</strong> and check the status of your running instance.</p>
<p>Below, I explain how to get rid of warnings about https (SSL) and about your <strong>data</strong> directory. In some cases, you may also encounter a warning about WebDav. For now, just ignore the WebDav error. If you can connect from the Windows or Mac client, then the error is probably an artifact, and not a real problem.</p>
<h2 id="apache-ssl">Apache SSL</h2>
<p>So we need to use https in our URL when we access OwnCloud. How do we set that up?</p>
<ul>
<li>Modssl let's use https</li>
<li>https://help.ubuntu.com/10.04/serverguide/httpd.html</li>
</ul>
<p>Here are the three commands you must give to set things up properly so you can access your site with https:</p>
<ul>
<li>sudo a2enmod ssl</li>
<li>sudo a2ensite default-ssl</li>
<li>sudo /etc/init.d/apache2 restart</li>
</ul>
<p>now access your instance:</p>
<pre><code>https://[IPADDRESS]/owncloud</code></pre>
<p>For instance:</p>
<pre><code>https://127.0.0.1/owncloud</code></pre>
<p>Notice that we have changed http to https.</p>
<h3 id="move-data-dir">Move Data Dir</h3>
<p>For some odd reason that I don't understand, the current versions of OwnCloud put your data dir in your web server directory, and then complain about the fact. Whether this is really a problem I don't know. However, we can fix the problem.</p>
<p>First we edit the file called config.php. We will open the file in the nano editor. Use Ctrl-O to save your file, and control Ctrl-X to exit. Everything else is like a normal editor, but there is no mouse. Here is the command top open the file in the nano editor:</p>
<pre><code>sudo nano /var/www/owncloud/config/config.php</code></pre>
<p>We change the contents so the <strong>datadirectory</strong> points to a directory in your home directory, or some place else that you may feel is more secure:</p>
<pre><code>&lt;?php
$CONFIG = array (
  &#39;instanceid&#39; =&gt; &#39;oc8dec0ea37a&#39;,
  &#39;passwordsalt&#39; =&gt; &#39;3828ac017c32ea27ffe9d59fa0dc66&#39;,
  &#39;datadirectory&#39; =&gt; &#39;/home/ubuntu/owncloud/data&#39;,
  &#39;dbtype&#39; =&gt; &#39;sqlite3&#39;,
  &#39;version&#39; =&gt; &#39;6.0.0.14&#39;,
  &#39;installed&#39; =&gt; true,
);</code></pre>
<p>It is this line that you need to change:</p>
<pre><code>&#39;datadirectory&#39; =&gt; &#39;/home/ubuntu/owncloud/data&#39;,</code></pre>
<p>Now we need to move or copy the current Data folder to our new location. Do one of the following, propably the first. The first option moves the directory, the second copies it. So this first set of commands will move your <strong>data</strong> directory to your home directory. This gets rid of the warning from owncloud.</p>
<pre><code>mkdir /home/ubuntu/owncloud
sudo mv /var/www/owncloud/data/ /home/ubuntu/owncloud/. </code></pre>
<p>Or, alternatively:</p>
<pre><code>mkdir /home/ubuntu/owncloud
sudo cp -r /var/www/owncloud/data/ /home/ubuntu/owncloud/.</code></pre>
<p>Then do this to ensure the permissions are set correctly:</p>
<pre><code>cd /home/ubuntu/owncloud
sudo chown -R www-data:www-data data
sudo chmod 770 data</code></pre>
<p>You may need to edit the above command to use your user name. Here I'm assuming your user name is ubuntu, that is, I'm assuming you are on OS2. However, you may be on a different platform, or have created your own user. So set the user name accordingly: (/home/ubuntu, /home/charlie, etc).</p>
<h3 id="webdav">WebDav</h3>
<p>We get error's saying that WebDav is not working. There is a problem, but we will not try to fix it right now. Here is some information that will be useful to use later in the course.</p>
<p>Access WebDav:</p>
<ul>
<li><a href="https://XX.XX.XXX.XXX/owncloud/remote.php/webdav">https://XX.XX.XXX.XXX/owncloud/remote.php/webdav</a></li>
</ul>
<p>isWebDAVWorking:</p>
<pre><code>NO - Reason: [CURL] Error while making request: 
SSL: certificate subject name &#39;domU-12-31-39-06-E4-18.compute-1.internal&#39; 
does not match target host name &#39;XX.XX.XXX.XXX&#39; (error code: 51) (Sabre_DAV_Exception)</code></pre>
<h2 id="owncloud-client">OwnCloud Client</h2>
<p>There is a client for Linux, Mac and Windows.</p>
<ul>
<li><a href="http://owncloud.org/sync-clients/">http://owncloud.org/sync-clients/</a></li>
</ul>
<p>Install the appropriate client. To connect, type in your IP address plus owncloud: <strong>https://XX.XX.XX.XX/owncloud</strong>.</p>
<p>Since you created your own SSL certificate, and since it may not be correct, you can probably afford to ignore warnings about your certificate.</p>
<figure>
<img src="images/OwnCloud01.png" alt="Certificate Bad" /><figcaption>Certificate Bad</figcaption>
</figure>
<figure>
<img src="images/OwnCloud02.png" alt="Running Own Cloud" /><figcaption>Running Own Cloud</figcaption>
</figure>
<!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>        
		<p>Copyright &copy; <a href="/charlie/index.html">Charlie Calvert</a> |
		<a href="/charlie/contents.html">Site Overview</a> |
		<a href="/charlie/development/index.html">Writing Code</a> |
		<a href="/charlie/development/web/index.html">Web</a> |
		<a href="/charlie/development/web/JavaScript/index.html">JavaScript</a> |
		<a href="/charlie/books/index.html">My Books</a> </p>

      </footer>

    </div><!-- /.container -->
</body>
</html>



