<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1.0"><title>git-configure</title><link href="/css/first-style.css" rel="stylesheet"><link rel="shortcut icon" href="/images/favicon.png"><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet"><link href="/css/highlight/googlecode.css" rel="stylesheet" type="text/css"><link href="/css/style.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-1.12.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Latest compiled and minified CSS --><script src="/js/elven-help.js"></script></head><body><nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Elvenware</a></div><div id="navbar" class="navbar-collapse collapse">       <ul class="nav navbar-nav"><li ng-class="{ active: isActive('/')}" class="trigger-collapse"><a href="/">Home</a></li><li><a href="/about.html">About</a></li></ul></div></div></nav><div class="container"><figure><img alt="Elvenware" src="/images/elvenwarelogo.png" class="elf-normal"/></figure><h1>git-configure</h1><p>Welcome to git-configure</p><ul><!--TOC_Start--><li><a href="#configure">Configure</a></li>
<li><a href="#add-origin">More on git remote add origin</a></li>
<li><a href="#git-config-file">Git CONFIG File</a></li>
<li><a href="#configuring-git">Configuring GIT</a></li>
<li><a href="#git-urls-and-ssh">Git URLs and SSH</a></li>
<li><a href="#find-change-url">Finding and Changing Git URLs</a></li>
<li><a href="#the-ssh-key">The SSH Key</a></li>
<li><a href="#caching-ssh-keys-on-linux">Caching SSH Keys on Linux</a></li>
<li><a href="#checklist">Git SSH Checklist</a></li>
<li><a href="#host-key-is-not-cached">Host Key is not Cached</a></li>
<li><a href="#amend-a-commit">Amend a Commit</a></li>
<li><a href="#git-remote">GIT Remote</a></li>
<li><a href="#maintain-repository">Maintain Repository</a></li>
<li><a href="#script-it">Script It</a></li><!--TOC_End--></ul></div><div class="container"><a class="anchor" id="configure"></a>
<h1>Configure</h1>
<p>Configuring Git.</p>
<a class="anchor" id="add-origin"></a>
<h2>More on git remote add origin</h2>
<p>Sometimes you need to set your local repository to point to the URL to your repository on GitHub or Bitbucket with a command like this:</p>
<pre><code>git remote <span class="hljs-keyword">add</span> origin ssh://git@bitbucket<span class="hljs-meta">.org</span>/lucia/myrepo.git
</code></pre><p>Suppose you create a new repository:</p>
<pre>mkdir foo
$ cd foo
$ git init
</pre>

<p>Now you have a new repository. Your <strong>.git/config</strong> file looks like this:</p>
<pre>
$ cat .git/config
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
charlie@MountainStreamsLinux
</pre>

<p>Now run our command and then look at <strong>.git/config</strong></p>
<pre>$ git remote add origin ssh://git@bitbucket.org/lucia/myrepo.git
~/temp/foo
$ cat .git/config
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[remote "origin"]
    url = ssh://git@bitbucket.org/lucia/myrepo.git
    fetch = +refs/heads/*:refs/remotes/origin/*
~/temp/foo
</pre>


<a class="anchor" id="git-config-file"></a>
<h2>Git CONFIG File</h2>
<p>The Git config file holds several important facts. One of the most important is the URL used to access your Git repository.</p>
<p>The config file is called <strong>config</strong> and it is stored in a hidden directory at the root of your repository called .git.</p>
<p>To set your global user.email, you can write something like this:</p>
<pre><code><span class="hljs-selector-tag">git</span> <span class="hljs-selector-tag">config</span> <span class="hljs-selector-tag">--global</span> <span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.email</span> "<span class="hljs-selector-tag">me</span>@<span class="hljs-keyword">somewhere</span>.<span class="hljs-keyword">com</span>"
</code></pre><p>This information is usually written to <strong>$HOME/.gitconfig</strong>. Here is a sample file:</p>
<pre><code>$ cat ~/.gitconfig
[user]
    <span class="hljs-attr">email</span> = charlie@example.com
    <span class="hljs-attr">name</span> = Charlie on RohanElf
[push]
    <span class="hljs-attr">default</span> = simple
[diff]
    <span class="hljs-attr">tool</span> = meld
</code></pre><p>On Windows, you might find the file here:</p>
<pre><code>c:<span class="hljs-symbol">\u</span>sers<span class="hljs-symbol">\u</span>sername<span class="hljs-symbol">\.</span>gitconfig
</code></pre><p>On Linux:</p>
<pre><code><span class="hljs-symbol">\h</span>ome<span class="hljs-symbol">\u</span>sername<span class="hljs-symbol">\.</span>gitconfig
</code></pre><p>Or on the Mac:</p>
<pre><code><span class="hljs-symbol">\u</span>sers<span class="hljs-symbol">\u</span>sername<span class="hljs-symbol">\.</span>gitconfig
</code></pre><p>If you are a guru, and this gets really mixed up, try looking in:</p>
<pre><code>C:<span class="hljs-symbol">\P</span>rogram Files (x86)<span class="hljs-symbol">\G</span>it<span class="hljs-symbol">\e</span>tc<span class="hljs-symbol">\p</span>rofile
</code></pre><p>In particular, one time I found my environment had a variable in it called HOME that was pointing to some nonsense value like /home/ubuntu, even though I was on a Windows machine.</p>
<p>In the .git directory you will find your config file. You can just edit that file with a text editor. On the other hand, you can use the following to set values in the global config file found in the main .git directory. The main .git directory for a user is usually found in your home directory on both Windows and Linux.</p>
<pre><code>C:<span class="hljs-string">\\Users\\Charlie\&gt;git</span> config --<span class="hljs-built_in">global</span> user.name <span class="hljs-string">"charliecalvert"</span>
C:<span class="hljs-string">\\Users\\Charlie\&gt;git</span> config --<span class="hljs-built_in">global</span> user.email <span class="hljs-string">"noone@nowhere.net"</span>
</code></pre><p>You can pass in a length of time you want git to cache your password:</p>
<pre><code><span class="hljs-comment">git</span> <span class="hljs-comment">config</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">global</span> <span class="hljs-comment">credential</span><span class="hljs-string">.</span><span class="hljs-comment">helper</span> <span class="hljs-comment">cache</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">timeout=900</span>
</code></pre><a class="anchor" id="configuring-git"></a>
<h2>Configuring GIT</h2>
<p>I describe how to use GitGui below. If you are working from the command line, go to your home directory and open <strong>.gitconfig</strong>. You may prefer to just view this file, and use the commands mentioned below to edit it. Or, you could edit it directly. The changes that need to be made are fairly obvious.</p>
<p>My .gitconfig looks something like this:</p>
<pre><code><span class="hljs-section">[user]</span>
<span class="hljs-attr">email</span> = someone@somewhere.com
<span class="hljs-attr">name</span> = Charlie CedarIsle Calvert
<span class="hljs-section">[push]</span>
<span class="hljs-attr">default</span> = simple
<span class="hljs-section">[gui]</span>
<span class="hljs-attr">recentrepo</span> = C:/Src/Git/Simple02
<span class="hljs-attr">recentrepo</span> = C:/Src/Git/Writing
<span class="hljs-attr">recentrepo</span> = C:/Src/Git/CloudNotes
<span class="hljs-attr">recentrepo</span> = C:/Src/Git/JsObjects
</code></pre><p>As you can see, I&#39;ve set up the <strong>email</strong>, <strong>name</strong> and <strong>push | default</strong> options.
If you don&#39;t set up your user name and email as described above,
you may see this message at some point:</p>
<pre><code>Your name and email address were configured automatically based
on your username and hostname. Please <span class="hljs-keyword">check</span> that they <span class="hljs-keyword">are</span> accurate.
You can suppress this message <span class="hljs-keyword">by</span> setting them explicitly:

    git config <span class="hljs-comment">--global user.name "Your Name"</span>
    git config <span class="hljs-comment">--global user.email you@example.com</span>

<span class="hljs-keyword">After</span> doing this, you may fix the <span class="hljs-keyword">identity</span> used <span class="hljs-keyword">for</span> this <span class="hljs-keyword">commit</span> <span class="hljs-keyword">with</span>:

    git <span class="hljs-keyword">commit</span> <span class="hljs-comment">--amend --reset-author</span>
</code></pre><p>To resolve this message, just follow the instructions. For instance, you could type
something like the following:</p>
<pre><code>    git config --global user<span class="hljs-selector-class">.name</span> <span class="hljs-string">"Charlie Calvert on EC2"</span>
    git config --global user<span class="hljs-selector-class">.email</span> charlie@example.com
</code></pre><p>When you do this, you are changing the settings in your <strong>~/.gitconfig</strong> file.</p>
<p>If you type the last suggested command, the one about amending your commit, you may end up in an editor such as <strong>nano</strong> or <strong>vim</strong>. If you can handle that, then go ahead and do it, otherwise, you can relatively safely skip that step. All that will be missing is the name of the committer in your repository for this particular commit. Later commits will have your name.</p>
<p>You may also see a message like this:</p>
<pre><code><span class="hljs-literal">warning</span>: push.<span class="hljs-keyword">default</span> <span class="hljs-keyword">is</span> unset; its implicit value <span class="hljs-keyword">is</span> changing <span class="hljs-keyword">in</span>
Git <span class="hljs-number">2.0</span> from <span class="hljs-symbol">'matching</span>' <span class="hljs-keyword">to</span> <span class="hljs-symbol">'simple</span>'. <span class="hljs-keyword">To</span> squelch this message
<span class="hljs-keyword">and</span> maintain the current behavior <span class="hljs-keyword">after</span> the <span class="hljs-keyword">default</span> changes, <span class="hljs-keyword">use</span>:

  git config <span class="hljs-comment">--global push.default matching</span>

<span class="hljs-keyword">To</span> squelch this message <span class="hljs-keyword">and</span> adopt the <span class="hljs-keyword">new</span> behavior now, <span class="hljs-keyword">use</span>:

  git config <span class="hljs-comment">--global push.default simple</span>
</code></pre><p>I respond to this message by typing the following:</p>
<pre><code>git <span class="hljs-built_in">config</span> --global push.<span class="hljs-built_in">default</span> simple
</code></pre><p>For those who are interested, let&#39;s leave the command line and discuss GitGui. When you first open GitGui, you should set up your user name and email. From the menu, select <strong>Edit | Options</strong>.</p>
<p>What you write in the GitGui options ends up in the email and name fields of <strong>.gitconfig</strong>, and vice-versa. It is important to have both of these fields filled out from the start.</p>
<p>If you change the information for a particular repository in GitGui
so that it differs from your global values, then that information
will appear in the config file from your repository. If it is the
same as the global values, the same as the values .gitconfig, then
it will not appear in the config file for your repository.</p>
<p>There is a third option beyond what is mentioned above. You can look at the <strong>.git/config</strong> file from a particular repository. Remember that <strong>.git</strong> directory is hidden on both Windows and Linux. I usually only open the config file if I want to change the URL for a repository, but you can do more in there if you want. For now, I&#39;ll leave those options up to you to explore.</p>
<a class="anchor" id="git-urls-and-ssh"></a>
<h2>Git URLs and SSH</h2>
<p>There are two primary types of Git URLs:</p>
<ul>
<li>SSH: git@github.com:charliecalvert/JsObjects.git</li>
<li>HTTPS: <a href="https://github.com/charliecalvert/JsObjects.git">https://github.com/charliecalvert/JsObjects.git</a></li>
</ul>
<p>I prefer using SSH since it does not involve using a password. In my opinion passwords are both more difficult to use and more likely to cause a security risk than an SSH key. Also, it is useful to understand how SSH keys work. It is, in my opinion, useful to know how to:</p>
<ul>
<li>Recognize at a glance whether you are using an SSH or an HTTPS URL.</li>
<li>How to manually convert an HTTPS URL to an SSH URL and vice versa. By this I mean that it is useful to know how to edit these URLs in a text editor in order to convert them from one format to the other.</li>
</ul>
<p>Here is how to think about the parts of a Git URL:</p>
<pre><code>git@github.<span class="hljs-keyword">com</span>:<span class="hljs-symbol">&lt;MY_USERNAME&gt;</span>/<span class="hljs-symbol">&lt;MY_REPOSITORY&gt;</span>.git
http<span class="hljs-variable">s:</span>//github.<span class="hljs-keyword">com</span>/<span class="hljs-symbol">&lt;MY_USERNAME&gt;</span>/<span class="hljs-symbol">&lt;MY_REPOSITORY&gt;</span>.git
</code></pre><p>There are three ways to interact with a Git repository on a site like GitHub
or Bitbucket:</p>
<ul>
<li>You can have read only access to the repository. This will let you check files out, but you cannot make changes and check them back in. This is what you want if you are using some third party library.</li>
<li>You can have HTTPs access to the library, which will enable you to check in and check out. Access to the library is then usually controlled with a user name and password. If you are uncomfortable with SSH, this will probably be the simplest option for you.</li>
<li>You can have SSH access to the repository. If you are at all familiar with SSH, you will probably find this option easiest when working with Git. If you have a key loaded with a tool like <em>Pageant</em> or <em>ssh-add</em>, then you can check in and check out without having to worry about typing in your user name and password.</li>
</ul>
<p><em>NOTE</em>: Many tools, such as GitHub for Windows, can handle your password for you automatically. That means they work well with HTTPS connections. To get that benefit, you need to be in the GitHub GUI, or in the shells associated with those GUI&#39;s. These tools work well, and I encourage you to use them. However, there are times when it is nice to be able to check in and out of Git without having to use a specific tool. In those cases, many people will find it easiest to use SSH.</p>
<p>To connect to a site using SSH, you need to do two things:</p>
<ul>
<li>Load or reference your SSH private key on your local machine.</li>
<li>Cache your SSH public key on the remote machine. Both Bitbucket and GitHub have locations on their web site where you can cache your public keys. Start by clicking on the icon on the upper right corner of the web page. On Bitbucket, choose <em>Bitbucket Settings - SSH keys</em>. On GitHub, choose <em>Edit profile - SSH and GPG keys</em>.</li>
</ul>
<p>As mentioned above, there are several types of URLs you can use with Git. Only one of them sets up your repository to use SSH. When you use a URL that looks like the one shown below, then you are saying you want to work with a read/write copy of the repository in SSH mode:</p>
<pre><code>git<span class="hljs-meta">@github</span>.<span class="hljs-string">com:</span>someone/JsObjects.git
</code></pre><p>None of this is specific to GitHub. The same syntax applies when working with files stored in any remote repository. Here, for instance, is an SSH URL for Bitbucket:</p>
<pre><code>git<span class="hljs-meta">@bitbucket</span>.<span class="hljs-string">org:</span>someone/deleteme.git
</code></pre><p>Here is a URL for an HTTPS readwrite connection to a repository:</p>
<pre><code>https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/charliecalvert/</span>bc-basic.git
</code></pre><p>These URLs are easy to identify since they begin with the letters HTTPS.</p>
<p><em>NOTE: Further down in this document you will learn about creating URLs for local
repositories.</em></p>
<a class="anchor" id="find-change-url"></a>
<h2>Finding and Changing Git URLs</h2>
<p>Recall that the URL for your repository is usually kept in the <strong>.git</strong> directory at the root of your repository. (This folder is usually hidden, even on Windows. You can look for hidden files or folders, or just go ahead and type <em>cd .git</em>, and assume it will work if you are in the root of your repository.) If you want to change the URL your repository uses by default, you can open the <em>config</em> file in your .git directory and edit this line:</p>
<pre><code>[remote <span class="hljs-string">"origin"</span>]
url = git<span class="hljs-meta">@github</span>.<span class="hljs-string">com:</span>charliecalvert/JsObjects.git
</code></pre><p>You can view it by typing: <strong>git remote show origin</strong>. Alternatively, try this:</p>
<pre><code>git config --get remote<span class="hljs-selector-class">.origin</span><span class="hljs-selector-class">.url</span>
</code></pre><p>Here is the line in the config file that specifies your URL:</p>
<pre><code>[remote <span class="hljs-string">"origin"</span>]
    url = git<span class="hljs-variable">@github</span>.<span class="hljs-symbol">com:</span>charliecalvert/JsObjects.git
    fetch = +refs/heads/*<span class="hljs-symbol">:refs/remotes/origin/*</span>
</code></pre><p>The conventional way to see this information is with the following command:</p>
<pre><code>git remote <span class="hljs-built_in">show</span> <span class="hljs-built_in">origin</span>
</code></pre><p>At runtime, it might look like this:</p>
<pre><code>$ git remote show origin
* remote origin
  Fetch <span class="hljs-string">URL:</span> git<span class="hljs-meta">@github</span>.<span class="hljs-string">com:</span>charliecalvert/JsObjects.git
  Push  <span class="hljs-string">URL:</span> git<span class="hljs-meta">@github</span>.<span class="hljs-string">com:</span>charliecalvert/JsObjects.git
  HEAD <span class="hljs-string">branch:</span> master
  Remote <span class="hljs-string">branches:</span>
    MakeHtmlConvert tracked
    master          tracked
</code></pre><p>Alternatively, try one of these:</p>
<pre><code>git config --get remote<span class="hljs-selector-class">.origin</span><span class="hljs-selector-class">.url</span>
git remote -v
</code></pre><p>To set the URL, do this:</p>
<pre><code><span class="hljs-string">git </span><span class="hljs-string">remote </span><span class="hljs-built_in">set-url</span> <span class="hljs-string">origin </span><span class="hljs-string">git@</span><span class="hljs-string">github.</span><span class="hljs-string">com:my-</span><span class="hljs-string">user-name/</span><span class="hljs-string">my-repo.</span><span class="hljs-string">git</span>
</code></pre><p>If you are uncertain about the URL for your repository, you should able to easily find it on either GitHub or Bitbucket.</p>
<a class="anchor" id="the-ssh-key"></a>
<h3>The SSH Key</h3>
<p>If you are going to be using SSH to connect to your repository, then you want to be sure that you have your key loaded into memory. On Windows, I use Pageant (PuTTY). When you clone, it helps a lot if you use Pagaent. On Linux, you can use <em>ssh-agent</em> and <em>ssh-add</em>.</p>
<p><em>NOTE</em>: When working on Windows, be sure to check your /users/username/.ssh folder for keys that tools like GitHub might be using. This will only come into play if you are not using Plink to handle your keys.</p>
<a class="anchor" id="caching-ssh-keys-on-linux"></a>
<h2>Caching SSH Keys on Linux</h2>
<p>On Linux, this is how I load an SSH key into memory so that I don&#39;t have to reference it each time I make a connection. (On Windows we use Pageant to perform this task.)</p>
<p>First I need to be sure ssh-agent is loaded. Then I add the key to the store.
Notice that in the first command we use backticks:</p>
<pre><code>eval%20%60ssh-agent%60%0Assh-add%20MyKey.pem
</code></pre><p>Try putting this in .bashrc to load ssh-agent when you log in to your bash shell:</p>
<pre><code><span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$SSH_AUTH_SOCK</span>"</span> ] ; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">eval</span> `ssh-agent`
<span class="hljs-keyword">fi</span>
</code></pre><p>If you put in .bashrc then it will get loaded each time you open the shell, so you can end up with multiple copies of <strong>ssh-agent</strong> running. But you need to have it running in the current shell, so I don&#39;t see a good way around this.</p>
<p>You can also create a <strong>~/.ssh/config</strong> file that associates a domain with key. Here is the complete contents of an example file for connecting to GitHub.com with a key called Github.pem:</p>
<p>Host github.com
        IdentityFile ~/.ssh/Github.pem</p>
<p>If you get a warning about an unprotected key file, that usually means that you have not set up the permissions correctly for the key file itself. You should ensure that only the current user can read it:</p>
<pre><code>chmod <span class="hljs-number">600</span> github_rsa
</code></pre><p>Or perhaps:</p>
<pre><code><span class="hljs-selector-tag">chmod</span> 600 <span class="hljs-selector-tag">MyKey</span><span class="hljs-selector-class">.pem</span>
</code></pre><p>Now try again, and it should go smoothly.</p>
<pre><code>ssh-<span class="hljs-keyword">add</span><span class="bash"> github_rsa</span>
</code></pre><p><em>NOTE</em>: I suppose you could even make the SSH keys readonly:</p>
<pre><code>chmod <span class="hljs-number">400</span> github_rsa
</code></pre><p>After doing this, you should be able to access sites where you have shared your ssh public key.</p>
<a class="anchor" id="checklist"></a>
<h2>Git SSH Checklist</h2>
<p>If you are having problems, check the following:</p>
<ul>
<li>Are you issuing the command from inside your repository?</li>
<li>Have you loaded your SSH private key with Pageant, <strong>ssh-add</strong> or some other tool?</li>
<li>Does the server you are trying to reach (ec2, Bitbucket, GitHub, etc) have a copy of your public key?</li>
<li>Does your <strong>config</strong> file use an SSH style URL (git@bitbucket.org vs <a href="https://bitbucket.org)?">https://bitbucket.org)?</a></li>
<li>Have you loaded the correct public and private keys? In other words, does the private key you loaded match the public key on your server?</li>
<li>Do you need to do a push or pull before proceeding?</li>
<li>Have you carefully read any error messages that Git gives you? Have you tried searching on that error message?</li>
</ul>
<p>Useful video:</p>
<ul>
<li><a href="https://youtu.be/EV9QSSX2w9I">Convert PEM File</a></li>
</ul>
<a class="anchor" id="host-key-is-not-cached"></a>
<h2>Host Key is not Cached</h2>
<p>The following error is a classic:</p>
<p>&quot;The servers host key is not cached in the registry...connection abandoned.&quot;</p>
<p>To fix this, open PuTTY, and create a connection to Bitbucket (Bitbucket.org). Try to connect. You don&#39;t need to actually connect, you just need the dialog to pop up that asks if you want to store the key for the site locally. Answer yes. Then, if you actually connected, which is unlikely and unnecessary, disconnect. Now go back and try to connect again
using SSH. It should now work.</p>
<p>Another option is to type the following at the command line:</p>
<pre><code><span class="hljs-selector-tag">plink</span> <span class="hljs-selector-tag">MyUserName</span>@<span class="hljs-keyword">bitbucket</span>.<span class="hljs-keyword">org</span>
</code></pre><p>This will also give you an option to store the key for the Bitbucket server in your known_hosts file. The <em>known_hosts</em> file is usually stored in your <strong>.ssh</strong> directory:</p>
<a class="anchor" id="amend-a-commit"></a>
<h2>Amend a Commit</h2>
<p>You can amend the previous commit (i.e. after removing a bad file or even simply to change the commit message... add -m &quot;message&quot; after --amend)</p>
<pre><code>git <span class="hljs-keyword">commit</span> <span class="hljs-comment">--amend</span>
git push -f
</code></pre><p>If you omit the push command you will get an error message like this:</p>
<pre><code><span class="hljs-comment">"...the tip of your current branch is behind..."</span>
</code></pre><p>To test this out, type <strong>git log</strong> at your command prompt in Linux. It will show you the commits you have done in Git. Type <strong>q</strong> to exit the log page. If you type <strong>git commit --amend</strong>, a nano editor will pop up, and you can change the message or type in a new message, then use <strong>ctrl-o</strong> to save the message, press the enter key to confirm the save and then <strong>ctrl-x</strong> to exit the editor. Now type <strong>git log</strong> again, and you will see your new commit message in the log. Don&#39;t forget the second command, <strong>git push -f</strong>.</p>
<p>If the editor seems complicated, just use the -m flag to change the commit message. For instance, if your commit message for your last commit was &quot;foo&quot; and you wanted to change it to &quot;bar&quot;, you would type</p>
<p>git commit --amend -m &quot;bar&quot;
git push -f</p>
<p>If you check your git log, you will see that the commit message is &quot;foo&quot; at first, and then after your amend it will be &quot;bar&quot;.</p>
<p>References:</p>
<p>[Rewriting Git History]
  <a href="https://www.atlassian.com/git/tutorials/rewriting-history">https://www.atlassian.com/git/tutorials/rewriting-history</a></p>
<p>[Edit an Incorrect Message in Git]
    <a href="http://stackoverflow.com/questions/179123/how-do-i-edit-an-incorrect-commit-message-in-git">http://stackoverflow.com/questions/179123/how-do-i-edit-an-incorrect-commit-message-in-git</a></p>
<p>This command can be useful if you accidentally sent some confidential files along with your original commit. That confidential info would still be tracked in history even though you removed it in subsequent updates.</p>
<p>Suppose you were in your local repository and typed <strong>git add .</strong> and then <strong>git commit</strong>. At this point, you realized that you did not want to send one of the files in your local repository to the main repository. You would want to copy that file to some safe place (because <strong>git rm</strong> will actually delete the file). Then you could type <strong>git rm myfile.txt</strong> and then <strong>git commit --amend --no-edit</strong>. The no-edit flag instructs Git to leave the commit message alone. If you wanted to, you could add a new message here or change your message. Once you have run the amend command, you will see that the new commit does not contain &quot;myfile.txt&quot;.</p>
<pre><code class="lang-%60">git add .
git commit -<span class="hljs-keyword">m</span> <span class="hljs-string">"This is the commit I am making without thinking"</span>
git <span class="hljs-keyword">rm</span> myfile.txt
git commit --amend --<span class="hljs-keyword">no</span>-<span class="hljs-keyword">edit</span>
git push -<span class="hljs-built_in">f</span>
</code></pre>
<p>For those who are new to Git, or new to Version Control, just a couple reminders:</p>
<ul>
<li><p>The purpose of Git is to give you a complete record of your work on a
project. It saves all your work, and each version of your work. If you use
Git, it is almost impossible to lose work in such a way that it can&#39;t ever
be retrieved. Even if your entire hard drive explodes, destroying your
computer and all your work, the files that are stored on a remote Git
repository (Bitbucket or GitHub) are safe. They will not be lost.</p>
</li>
<li><p>The commands that rewrite Git history, such as amend and rebase, can cause
you to completely lose code that you once checked in. Even worse, if you
issue one of the commands incorrectly, you could accidentally, and
permanently, delete files that you may still need. In other words, you may
do your homework, check it into Git, then amend Git, lose your homework, and
find that you can&#39;t retrieve it.</p>
</li>
<li><p>Git is infinitely configurable. That is why it is sometimes hard to use.
There is seemingly nothing that can&#39;t be done with Git. It even allows you
to undermine the whole purpose of Git by allowing you to rewrite, or amend,
the history that it is carefully designed to save. This is my way of saying
that amend is a useful, but somewhat esoteric command.</p>
</li>
</ul>
<p>Here is a notice from the Git documentation about this command:</p>
<p>&quot;Don&#39;t Amend Public Commits</p>
<p>&quot;On the git reset page, we talked about how you should never reset commits
that have been shared with other developers. The same goes for amending:
never amend commits that have been pushed to a public repository.</p>
<p>&quot;Amended commits are actually entirely new commits, and the previous commit
is removed from the project history. This has the same consequences as
resetting a public snapshot. If you amend a commit that other developers
have based their work on, it will look like the basis of their work vanished
from the project history. This is a confusing situation for developers to be
in and it&#39;s complicated to recover from.&quot;</p>
<p>If your previous commit is just completely bad,  you can do a git reset
--hard HEAD~1 (or ~2, 3 etc however far back you want to reset) to
completely remove the last commit(s) and then a git push -f or --force  but
this removes everything that was changed in the last commit(s).</p>
<p>The git commit -amend affects only the files that were changed /removed
since the last commit.</p>
<p>There is also git reset --soft that is similar to git commit --amend so one
or the other may be preferred in a particular situation. But amending a
commit seems to be a way to fix simple errors in a previous commit.</p>
<a class="anchor" id="git-remote"></a>
<h2>GIT Remote</h2>
<p>Suppose you have an existing repository on your local machine, and an empty
repository on GitHub. Navigate to the folder that holds your local copy of
the repository. If issued from that folder, the following line ought to add
your local repository to the empty GitHub repository:</p>
<pre><code>git remote <span class="hljs-keyword">add</span> origin ssh://git@bitbucket<span class="hljs-meta">.org</span>/ccalvert/deleteme.git
</code></pre><p>You can then type the following to see where your repository is set up:</p>
<pre><code><span class="hljs-attribute">git remote -v</span>
</code></pre><p>Delete a remote repository called working:</p>
<pre><code>git <span class="hljs-built_in">push</span> <span class="hljs-built_in">origin</span> <span class="hljs-built_in">origin</span> :working
</code></pre><p>To delete a local branch named working:</p>
<pre><code><span class="hljs-symbol">git</span> <span class="hljs-keyword">branch </span>-d working
</code></pre><a class="anchor" id="maintain-repository"></a>
<h2>Maintain Repository</h2>
<p>Every little bit, run:</p>
<pre><code><span class="hljs-attribute">  git gc</span>
</code></pre><p>Verify it:</p>
<pre><code>  C:<span class="hljs-symbol">\G</span>it<span class="hljs-symbol">\r</span>epo&gt;git verify-pack -verbose .git<span class="hljs-symbol">\o</span>bjects<span class="hljs-symbol">\p</span>ack<span class="hljs-symbol">\p</span>ack-4beeb...idx
</code></pre><a class="anchor" id="script-it"></a>
<h2>Script It</h2>
<p>I can be impatient at times, but I&#39;ve learned the hard way that rushing certain steps, or skipping certain steps, can end up causing me to spend a lot of time later trying to fix something that I broke through rushing or carelessness.</p>
<p>Sometimes I also take a moment to write a script that can help me automate certain steps. Running the script takes just a moment, yet the script can help me make thorough checks and avoid careless errors.</p>
<p>For instance, I maintain a lot, probably too many, repositories. So I&#39;ve written the following script that checks each of the repos and lets me know if I have not pushed my most recent code. Then, I have a corresponding program that checks to make sure I&#39;ve pulled all my most recent code so that I don&#39;t start working on code that is out of date. Things like <strong>cn</strong> and <strong>i3c</strong> are aliases that I use as shortcuts to navigate to a repository. For instance, here is i3c:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">export</span> GIT_HOME=<span class="hljs-variable">$HOME</span>/Git
<span class="hljs-built_in">alias</span> i3c=<span class="hljs-string">'cd $GIT_HOME/isit322-calvert-2017'</span>
</code></pre>
<p>And here is the script:</p>
<pre><code class="lang-bash">#! /bin/bash


shopt -s expand_aliases
source ~/.bash_aliases

alias

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">title</span><span class="hljs-params">()</span></span> {
 echo -e <span class="hljs-string">"\n==============="</span>
 echo $<span class="hljs-number">1</span>
 echo <span class="hljs-string">"==============="</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">winter</span><span class="hljs-params">()</span></span> {
 title <span class="hljs-string">'i3c Working Site'</span>
 i3c &amp;&amp; git <span class="hljs-built_in">status</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">spring</span><span class="hljs-params">()</span></span> {
 title <span class="hljs-string">'isit322-calvert'</span>
 i3c &amp;&amp; git <span class="hljs-built_in">status</span>

 title <span class="hljs-string">'Prog272Calvert'</span>
 p2c &amp;&amp; git <span class="hljs-built_in">status</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fall</span><span class="hljs-params">()</span></span> {
 title <span class="hljs-string">'isit320-calvert'</span>
 i3c &amp;&amp; git <span class="hljs-built_in">status</span>

 title <span class="hljs-string">'Prog270Calvert'</span>
 p2c &amp;&amp; git <span class="hljs-built_in">status</span>
}


title <span class="hljs-string">'Git IO (charlie calvert)'</span>
gitio &amp;&amp; git <span class="hljs-built_in">status</span>

title <span class="hljs-string">'Cloud Notes'</span>
cn &amp;&amp; git <span class="hljs-built_in">status</span>

title <span class="hljs-string">'JsObjects'</span>
jo &amp;&amp; git <span class="hljs-built_in">status</span>

title <span class="hljs-string">'Writing'</span>
wt &amp;&amp; git <span class="hljs-built_in">status</span>

title <span class="hljs-string">'Elf Site'</span>
elfsite &amp;&amp; git <span class="hljs-built_in">status</span>

title <span class="hljs-string">'Elven Tools'</span>
elventools &amp;&amp; git <span class="hljs-built_in">status</span>

title <span class="hljs-string">'Elven Assignments'</span>
elfa &amp;&amp; git <span class="hljs-built_in">status</span>

spring
</code></pre>
</div></body></html>